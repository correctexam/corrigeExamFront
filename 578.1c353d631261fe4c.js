"use strict";(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[578],{4578:(k,c,i)=>{i.r(c),i.d(c,{HealthModule:()=>C});var l=i(4942),p=i(4190),_=i(2920),t=i(5879),u=i(4832),s=i(6814),r=i(8423),d=i(9515);function Z(n,o){if(1&n&&(t.TgZ(0,"h4",8),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("\n    ",t.lcZ(2,1,"health.indicator."+e.health.key),"\n  ")}}function g(n,o){if(1&n&&(t.TgZ(0,"tr"),t._uU(1,"\n            "),t.TgZ(2,"td",15),t._uU(3),t.qZA(),t._uU(4,"\n            "),t.TgZ(5,"td",15),t._uU(6),t.qZA(),t._uU(7,"\n          "),t.qZA()),2&n){const e=o.$implicit,a=t.oxw(2);t.xp6(3),t.Oqu(e.key),t.xp6(3),t.Oqu(a.readableValue(e.value))}}function U(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1,"\n    "),t.TgZ(2,"h5",9),t._uU(3,"Properties"),t.qZA(),t._uU(4,"\n\n    "),t.TgZ(5,"div",10),t._uU(6,"\n      "),t.TgZ(7,"table",11),t._uU(8,"\n        "),t.TgZ(9,"thead"),t._uU(10,"\n          "),t.TgZ(11,"tr"),t._uU(12,"\n            "),t.TgZ(13,"th",12),t._uU(14,"Name"),t.qZA(),t._uU(15,"\n            "),t.TgZ(16,"th",13),t._uU(17,"Value"),t.qZA(),t._uU(18,"\n          "),t.qZA(),t._uU(19,"\n        "),t.qZA(),t._uU(20,"\n        "),t.TgZ(21,"tbody"),t._uU(22,"\n          "),t.YNc(23,g,8,2,"tr",14),t.ALo(24,"keyvalue"),t._uU(25,"\n        "),t.qZA(),t._uU(26,"\n      "),t.qZA(),t._uU(27,"\n    "),t.qZA(),t._uU(28,"\n  "),t.qZA()),2&n){const e=t.oxw();t.xp6(23),t.Q6J("ngForOf",t.lcZ(24,1,e.health.value.details))}}let m=(()=>{class n{constructor(e){(0,l.Z)(this,"activeModal",void 0),(0,l.Z)(this,"health",void 0),this.activeModal=e}readableValue(e){if("diskSpace"===this.health?.key){const a=e/1073741824;return a>1?`${a.toFixed(2)} GB`:`${(e/1048576).toFixed(2)} MB`}return"object"==typeof e?JSON.stringify(e):String(e)}dismiss(){this.activeModal.dismiss()}}return(0,l.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(u.Kz))}),(0,l.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["jhi-health-modal"]],decls:22,vars:2,consts:[[1,"modal-header"],["class","modal-title","id","showHealthLabel",4,"ngIf"],["aria-label","Close","data-dismiss","modal","type","button",1,"btn-close",3,"click"],["aria-hidden","true"],[1,"modal-body","pad"],[4,"ngIf"],[1,"modal-footer"],["data-dismiss","modal","type","button",1,"btn","btn-secondary","float-start",3,"click"],["id","showHealthLabel",1,"modal-title"],["jhiTranslate","health.details.properties"],[1,"table-responsive"],["aria-describedby","showHealthLabel",1,"table","table-striped"],["scope","col","jhiTranslate","health.details.name",1,"text-start"],["scope","col","jhiTranslate","health.details.value",1,"text-start"],[4,"ngFor","ngForOf"],[1,"text-start"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0),t._uU(1,"\n  "),t.YNc(2,Z,3,3,"h4",1),t._uU(3,"\n\n  "),t.TgZ(4,"button",2),t.NdJ("click",function(){return a.dismiss()}),t._uU(5,"\n    "),t.TgZ(6,"span",3),t._uU(7,"\xd7"),t.qZA(),t._uU(8,"\n  "),t.qZA(),t._uU(9,"\n"),t.qZA(),t._uU(10,"\n\n"),t.TgZ(11,"div",4),t._uU(12,"\n  "),t.YNc(13,U,29,3,"div",5),t._uU(14,"\n"),t.qZA(),t._uU(15,"\n\n"),t.TgZ(16,"div",6),t._uU(17,"\n  "),t.TgZ(18,"button",7),t.NdJ("click",function(){return a.dismiss()}),t._uU(19,"Done"),t.qZA(),t._uU(20,"\n"),t.qZA(),t._uU(21,"\n")),2&e&&(t.xp6(2),t.Q6J("ngIf",a.health),t.xp6(11),t.Q6J("ngIf",a.health))},dependencies:[s.sg,s.O5,r.P,s.Nd,d.X$],encapsulation:2})),n})();var f=i(9862),v=i(8156);let T=(()=>{class n{constructor(e,a){(0,l.Z)(this,"http",void 0),(0,l.Z)(this,"applicationConfigService",void 0),this.http=e,this.applicationConfigService=a}checkHealth(){return this.http.get(this.applicationConfigService.getEndpointFor("management/health"))}}return(0,l.Z)(n,"\u0275fac",function(e){return new(e||n)(t.LFG(f.eN),t.LFG(v.y))}),(0,l.Z)(n,"\u0275prov",t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();var A=i(5597);function b(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(){t.CHM(e);const h=t.oxw().$implicit,q=t.oxw(2);return t.KtG(q.showHealth({key:h.key,value:h.value}))}),t._uU(1,"\n              "),t._UZ(2,"fa-icon",15),t._uU(3,"\n            "),t.qZA()}}function H(n,o){if(1&n&&(t.TgZ(0,"tr"),t._uU(1,"\n          "),t.TgZ(2,"td"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t._uU(5,"\n          "),t.TgZ(6,"td",11),t._uU(7,"\n            "),t.TgZ(8,"span",12),t._uU(9),t.qZA(),t._uU(10,"\n          "),t.qZA(),t._uU(11,"\n          "),t.TgZ(12,"td",11),t._uU(13,"\n            "),t.YNc(14,b,4,0,"a",13),t._uU(15,"\n          "),t.qZA(),t._uU(16,"\n        "),t.qZA()),2&n){const e=o.$implicit,a=t.oxw(2);t.xp6(3),t.hij("\n            ",t.lcZ(4,5,"health.indicator."+e.key),"\n          "),t.xp6(5),t.s9C("jhiTranslate","health.status."+e.value.status),t.Q6J("ngClass",a.getBadgeClass(e.value.status)),t.xp6(1),t.hij("\n              ",e.value.status,"\n            "),t.xp6(5),t.Q6J("ngIf",e.value.details)}}function y(n,o){if(1&n&&(t.TgZ(0,"tbody"),t._uU(1,"\n        "),t.YNc(2,H,17,7,"tr",10),t.ALo(3,"keyvalue"),t._uU(4,"\n      "),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,1,e.health.components))}}const x={path:"",component:(()=>{class n{constructor(e,a){(0,l.Z)(this,"modalService",void 0),(0,l.Z)(this,"healthService",void 0),(0,l.Z)(this,"health",void 0),this.modalService=e,this.healthService=a}ngOnInit(){this.refresh()}getBadgeClass(e){return"UP"===e?"bg-success":"bg-danger"}refresh(){this.healthService.checkHealth().subscribe({next:e=>this.health=e,error:e=>{503===e.status&&(this.health=e.error)}})}showHealth(e){this.modalService.open(m).componentInstance.health=e}}return(0,l.Z)(n,"\u0275fac",function(e){return new(e||n)(t.Y36(u.FF),t.Y36(T))}),(0,l.Z)(n,"\u0275cmp",t.Xpm({type:n,selectors:[["jhi-health"]],decls:40,vars:1,consts:[["id","health-page-heading","jhiTranslate","health.title","data-cy","healthPageHeading"],[1,"btn","btn-primary","float-end",3,"click"],["icon","sync"],["jhiTranslate","health.refresh.button"],[1,"table-responsive"],["id","healthCheck","aria-describedby","health-page-heading",1,"table","table-striped"],["scope","col","jhiTranslate","health.table.service"],["scope","col","jhiTranslate","health.table.status",1,"text-center"],["scope","col","jhiTranslate","health.details.details",1,"text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"badge",3,"ngClass","jhiTranslate"],["class","hand",3,"click",4,"ngIf"],[1,"hand",3,"click"],["icon","eye"]],template:function(e,a){1&e&&(t.TgZ(0,"div"),t._uU(1,"\n  "),t.TgZ(2,"h2"),t._uU(3,"\n    "),t.TgZ(4,"span",0),t._uU(5,"Health Checks"),t.qZA(),t._uU(6,"\n\n    "),t.TgZ(7,"button",1),t.NdJ("click",function(){return a.refresh()}),t._uU(8,"\n      "),t._UZ(9,"fa-icon",2),t._uU(10," "),t.TgZ(11,"span",3),t._uU(12,"Refresh"),t.qZA(),t._uU(13,"\n    "),t.qZA(),t._uU(14,"\n  "),t.qZA(),t._uU(15,"\n\n  "),t.TgZ(16,"div",4),t._uU(17,"\n    "),t.TgZ(18,"table",5),t._uU(19,"\n      "),t.TgZ(20,"thead"),t._uU(21,"\n        "),t.TgZ(22,"tr"),t._uU(23,"\n          "),t.TgZ(24,"th",6),t._uU(25,"Service Name"),t.qZA(),t._uU(26,"\n          "),t.TgZ(27,"th",7),t._uU(28,"Status"),t.qZA(),t._uU(29,"\n          "),t.TgZ(30,"th",8),t._uU(31,"Details"),t.qZA(),t._uU(32,"\n        "),t.qZA(),t._uU(33,"\n      "),t.qZA(),t._uU(34,"\n      "),t.YNc(35,y,5,3,"tbody",9),t._uU(36,"\n    "),t.qZA(),t._uU(37,"\n  "),t.qZA(),t._uU(38,"\n"),t.qZA(),t._uU(39,"\n")),2&e&&(t.xp6(35),t.Q6J("ngIf",a.health))},dependencies:[s.mk,s.sg,s.O5,A.BN,r.P,s.Nd,d.X$],encapsulation:2})),n})(),data:{pageTitle:"health.title"}};let C=(()=>{class n{}return(0,l.Z)(n,"\u0275fac",function(e){return new(e||n)}),(0,l.Z)(n,"\u0275mod",t.oAB({type:n})),(0,l.Z)(n,"\u0275inj",t.cJS({imports:[_.m,p.Bz.forChild([x])]})),n})()}}]);