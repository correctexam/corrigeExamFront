(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[173],{2384:(Ye,Ke,V)=>{"use strict";V.d(Ke,{z:()=>Ee});var K=V(5861),ae=V(7331),ye=V(4687);function le(T,a,s,c){return new(s||(s=Promise))(function(E,A){function pe(se){try{k(c.next(se))}catch(Oe){A(Oe)}}function we(se){try{k(c.throw(se))}catch(Oe){A(Oe)}}function k(se){se.done?E(se.value):function y(E){return E instanceof s?E:new s(function(A){A(E)})}(se.value).then(pe,we)}k((c=c.apply(T,a||[])).next())})}function ge(T,a){var c,y,E,A,s={label:0,sent:function(){if(1&E[0])throw E[1];return E[1]},trys:[],ops:[]};return A={next:pe(0),throw:pe(1),return:pe(2)},"function"==typeof Symbol&&(A[Symbol.iterator]=function(){return this}),A;function pe(k){return function(se){return function we(k){if(c)throw new TypeError("Generator is already executing.");for(;s;)try{if(c=1,y&&(E=2&k[0]?y.return:k[0]?y.throw||((E=y.return)&&E.call(y),0):y.next)&&!(E=E.call(y,k[1])).done)return E;switch(y=0,E&&(k=[2&k[0],E.value]),k[0]){case 0:case 1:E=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,y=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(E=(E=s.trys).length>0&&E[E.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!E||k[1]>E[0]&&k[1]<E[3])){s.label=k[1];break}if(6===k[0]&&s.label<E[1]){s.label=E[1],E=k;break}if(E&&s.label<E[2]){s.label=E[2],s.ops.push(k);break}E[2]&&s.ops.pop(),s.trys.pop();continue}k=a.call(T,s)}catch(se){k=[6,se],y=0}finally{c=E=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,se])}}}function it(T){return[T.schema.primKey].concat(T.schema.indexes).map(function(s){return s.src}).join(",")}function ot(T,a){return new Promise(function(s,c){var y=new FileReader;y.onabort=function(E){return c(new Error("file read aborted"))},y.onerror=function(E){return c(E.target.error)},y.onload=function(E){return s(E.target.result)},"binary"===a?y.readAsArrayBuffer(T):y.readAsText(T)})}function gt(T,a){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var s=new FileReaderSync;return"binary"===a?s.readAsArrayBuffer(T):s.readAsText(T)}var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bt(T,a){return T(a={exports:{}},a.exports),a.exports}for(var Se=bt(function(T,a){T.exports=function(){function s(j){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(j)}function c(j,L,M,q,X,qe,ke){try{var De=j[qe](ke),me=De.value}catch(Kt){return void M(Kt)}De.done?L(me):Promise.resolve(me).then(q,X)}function y(j){return function(){var L=this,M=arguments;return new Promise(function(q,X){var qe=j.apply(L,M);function ke(me){c(qe,q,X,ke,De,"next",me)}function De(me){c(qe,q,X,ke,De,"throw",me)}ke(void 0)})}}function E(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}function A(j,L){for(var M=0;M<L.length;M++){var q=L[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(j,q.key,q)}}function we(j,L,M){return L in j?Object.defineProperty(j,L,{value:M,enumerable:!0,configurable:!0,writable:!0}):j[L]=M,j}function k(j,L){var M=Object.keys(j);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(j);L&&(q=q.filter(function(X){return Object.getOwnPropertyDescriptor(j,X).enumerable})),M.push.apply(M,q)}return M}function se(j){for(var L=1;L<arguments.length;L++){var M=null!=arguments[L]?arguments[L]:{};L%2?k(Object(M),!0).forEach(function(q){we(j,q,M[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(M)):k(Object(M)).forEach(function(q){Object.defineProperty(j,q,Object.getOwnPropertyDescriptor(M,q))})}return j}function Oe(j,L){return function Ne(j){if(Array.isArray(j))return j}(j)||function Je(j,L){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j)){var M=[],q=!0,X=!1,qe=void 0;try{for(var De,ke=j[Symbol.iterator]();!(q=(De=ke.next()).done)&&(M.push(De.value),!L||M.length!==L);q=!0);}catch(me){X=!0,qe=me}finally{try{!q&&null!=ke.return&&ke.return()}finally{if(X)throw qe}}return M}}(j,L)||function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function lt(j){return function kt(j){if(Array.isArray(j)){for(var L=0,M=new Array(j.length);L<j.length;L++)M[L]=j[L];return M}}(j)||function je(j){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j))return Array.from(j)}(j)||function Ft(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var he=function j(L){E(this,j),this.p=new Promise(L)};he.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(he.prototype[Symbol.toStringTag]="TypesonPromise"),he.prototype.then=function(j,L){var M=this;return new he(function(q,X){M.p.then(function(qe){q(j?j(qe):qe)}).catch(function(qe){return L?L(qe):Promise.reject(qe)}).then(q,X)})},he.prototype.catch=function(j){return this.then(null,j)},he.resolve=function(j){return new he(function(L){L(j)})},he.reject=function(j){return new he(function(L,M){M(j)})},["all","race"].forEach(function(j){he[j]=function(L){return new he(function(M,q){Promise[j](L.map(function(X){return X&&X.constructor&&"TypesonPromise"===X.constructor.__typeson__type__?X.p:X})).then(M,q)})}});var Pe={}.toString,We={}.hasOwnProperty,nt=Object.getPrototypeOf,zt=We.toString;function B(j,L){return Z(j)&&"function"==typeof j.then&&(!L||"function"==typeof j.catch)}function l(j){return Pe.call(j).slice(8,-1)}function G(j,L){if(!j||"object"!==s(j))return!1;var M=nt(j);if(!M)return null===L;var q=We.call(M,"constructor")&&M.constructor;return"function"!=typeof q?null===L:L===q||null!==L&&zt.call(q)===zt.call(L)||"function"==typeof L&&"string"==typeof q.__typeson__type__&&q.__typeson__type__===L.__typeson__type__}function F(j){return!(!j||"Object"!==l(j))&&(!nt(j)||G(j,Object))}function Z(j){return j&&"object"===s(j)}function at(j){return j.replace(/~/g,"~0").replace(/\./g,"~1")}function Et(j){return j.replace(/~1/g,".").replace(/~0/g,"~")}function Nt(j,L){if(""===L)return j;var M=L.indexOf(".");if(M>-1){var q=j[Et(L.slice(0,M))];return void 0===q?void 0:Nt(q,L.slice(M+1))}return j[Et(L)]}function nn(j,L,M){if(""===L)return M;var q=L.indexOf(".");return q>-1?nn(j[Et(L.slice(0,q))],L.slice(q+1),M):(j[Et(L)]=M,j)}var yt=Object.keys,St=Array.isArray,Mt={}.hasOwnProperty,tn=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ie(j,L){if(""===j.keypath)return-1;var M=j.keypath.match(/\./g)||0,q=L.keypath.match(/\./g)||0;return M&&(M=M.length),q&&(q=q.length),M>q?-1:M<q?1:j.keypath<L.keypath?-1:j.keypath>L.keypath}var ht=function(){function j(L){E(this,j),this.options=L,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function pe(j,L,M){return L&&A(j.prototype,L),M&&A(j,M),j}(j,[{key:"stringify",value:function(M,q,X,qe){qe=se({},this.options,{},qe,{stringification:!0});var ke=this.encapsulate(M,null,qe);return St(ke)?JSON.stringify(ke[0],q,X):ke.then(function(De){return JSON.stringify(De,q,X)})}},{key:"stringifySync",value:function(M,q,X,qe){return this.stringify(M,q,X,se({throwOnBadSyncType:!0},qe,{sync:!0}))}},{key:"stringifyAsync",value:function(M,q,X,qe){return this.stringify(M,q,X,se({throwOnBadSyncType:!0},qe,{sync:!1}))}},{key:"parse",value:function(M,q,X){return X=se({},this.options,{},X,{parse:!0}),this.revive(JSON.parse(M,q),X)}},{key:"parseSync",value:function(M,q,X){return this.parse(M,q,se({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"parseAsync",value:function(M,q,X){return this.parse(M,q,se({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"specialTypeNames",value:function(M,q){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.returnTypeNames=!0,this.encapsulate(M,q,X)}},{key:"rootTypeName",value:function(M,q){var X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return X.iterateNone=!0,this.encapsulate(M,q,X)}},{key:"encapsulate",value:function(M,q,X){var ke=(X=se({sync:!0},this.options,{},X)).sync,De=this,me={},Kt=[],un=[],Dt=[],mn=!("cyclic"in X)||X.cyclic,bn=X.encapsulateObserver,rn=tt("",M,mn,q||{},Dt);function ut(ve){var d=Object.values(me);if(X.iterateNone)return d.length?d[0]:j.getJSONType(ve);if(d.length){if(X.returnTypeNames)return lt(new Set(d));ve&&F(ve)&&!Mt.call(ve,"$types")?ve.$types=me:ve={$:ve,$types:{$:me}}}else Z(ve)&&Mt.call(ve,"$types")&&(ve={$:ve,$types:!0});return!X.returnTypeNames&&ve}function mt(ve,d){return $e.apply(this,arguments)}function $e(){return $e=y(ye.mark(function ve(d,o){var f;return ye.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.next=2,Promise.all(o.map(function(U){return U[1].p}));case 2:return f=O.sent,O.next=5,Promise.all(f.map(function(){var U=y(ye.mark(function ne(be){var ce,oe,Ce,Qe,Xe,vt,Te,fe,Q;return ye.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(ce=[],oe=o.splice(0,1),Ce=Oe(oe,1),Qe=Oe(Ce[0],7),vt=Qe[4],Te=Qe[5],fe=tt(Xe=Qe[0],be,Qe[2],Qe[3],ce,!0,Qe[6]),Q=G(fe,he),!Xe||!Q){ee.next=11;break}return ee.next=8,fe.p;case 8:return vt[Te]=ee.sent,ee.abrupt("return",mt(d,ce));case 11:return Xe?vt[Te]=fe:d=Q?fe.p:fe,ee.abrupt("return",mt(d,ce));case 13:case"end":return ee.stop()}},ne)}));return function(ne){return U.apply(this,arguments)}}()));case 5:return O.abrupt("return",d);case 6:case"end":return O.stop()}},ve)})),$e.apply(this,arguments)}function st(ve,d,o){Object.assign(ve,d);var f=tn.map(function(v){var O=ve[v];return delete ve[v],O});o(),tn.forEach(function(v,O){ve[v]=f[O]})}function tt(ve,d,o,f,v,O,U){var ne,be={},ce=s(d),oe=bn?function(Q){var Ae=U||f.type||j.getJSONType(d);bn(Object.assign(Q||be,{keypath:ve,value:d,cyclic:o,stateObj:f,promisesData:v,resolvingTypesonPromise:O,awaitingTypesonPromise:G(d,he)},{type:Ae}))}:null;if(["string","boolean","number","undefined"].includes(ce))return void 0===d||"number"===ce&&(isNaN(d)||d===-1/0||d===1/0)?(ne=f.replaced?d:Ot(ve,d,f,v,!1,O,oe))!==d&&(be={replaced:ne}):ne=d,oe&&oe(),ne;if(null===d)return oe&&oe(),d;if(o&&!f.iterateIn&&!f.iterateUnsetNumeric&&d&&"object"===s(d)){var Ce=Kt.indexOf(d);if(!(Ce<0))return me[ve]="#",oe&&oe({cyclicKeypath:un[Ce]}),"#"+un[Ce];!0===o&&(Kt.push(d),un.push(ve))}var ze,Re=F(d),Qe=St(d),Xe=(Re||Qe)&&(!De.plainObjectReplacers.length||f.replaced)||f.iterateIn?d:Ot(ve,d,f,v,Re||Qe,null,oe);if(Xe!==d?(ne=Xe,be={replaced:Xe}):""===ve&&G(d,he)?(v.push([ve,d,o,f,void 0,void 0,f.type]),ne=d):Qe&&"object"!==f.iterateIn||"array"===f.iterateIn?(ze=new Array(d.length),be={clone:ze}):(["function","symbol"].includes(s(d))||"toJSON"in d||G(d,he)||G(d,Promise)||G(d,ArrayBuffer))&&!Re&&"object"!==f.iterateIn?ne=d:(ze={},f.addLength&&(ze.length=d.length),be={clone:ze}),oe&&oe(),X.iterateNone)return ze||ne;if(!ze)return ne;if(f.iterateIn){var dt=function(Ae){var _e={ownKeys:Mt.call(d,Ae)};st(f,_e,function(){var ee=ve+(ve?".":"")+at(Ae),Le=tt(ee,d[Ae],!!o,f,v,O);G(Le,he)?v.push([ee,Le,!!o,f,ze,Ae,f.type]):void 0!==Le&&(ze[Ae]=Le)})};for(var vt in d)dt(vt);oe&&oe({endIterateIn:!0,end:!0})}else yt(d).forEach(function(Q){var Ae=ve+(ve?".":"")+at(Q);st(f,{ownKeys:!0},function(){var ee=tt(Ae,d[Q],!!o,f,v,O);G(ee,he)?v.push([Ae,ee,!!o,f,ze,Q,f.type]):void 0!==ee&&(ze[Q]=ee)})}),oe&&oe({endIterateOwn:!0,end:!0});if(f.iterateUnsetNumeric){for(var Te=d.length,$t=function(Ae){if(!(Ae in d)){var _e=ve+(ve?".":"")+Ae;st(f,{ownKeys:!1},function(){var Le=tt(_e,void 0,!!o,f,v,O);G(Le,he)?v.push([_e,Le,!!o,f,ze,Ae,f.type]):void 0!==Le&&(ze[Ae]=Le)})}},fe=0;fe<Te;fe++)$t(fe);oe&&oe({endIterateUnsetNumeric:!0,end:!0})}return ze}function Ot(ve,d,o,f,v,O,U){for(var ne=v?De.plainObjectReplacers:De.nonplainObjectReplacers,be=ne.length;be--;){var ce=ne[be];if(ce.test(d,o)){var oe=ce.type;if(De.revivers[oe]){var Ce=me[ve];me[ve]=Ce?[oe].concat(Ce):oe}return Object.assign(o,{type:oe,replaced:!0}),!ke&&ce.replaceAsync||ce.replace?(U&&U({replacing:!0}),tt(ve,ce[ke||!ce.replaceAsync?"replace":"replaceAsync"](d,o),mn&&"readonly",o,f,O,oe)):(U&&U({typeDetected:!0}),tt(ve,d,mn&&"readonly",o,f,O,oe))}}return d}return Dt.length?ke&&X.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(mt(rn,Dt)).then(ut):!ke&&X.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():X.stringification&&ke?[ut(rn)]:ke?ut(rn):Promise.resolve(ut(rn))}},{key:"encapsulateSync",value:function(M,q,X){return this.encapsulate(M,q,se({throwOnBadSyncType:!0},X,{sync:!0}))}},{key:"encapsulateAsync",value:function(M,q,X){return this.encapsulate(M,q,se({throwOnBadSyncType:!0},X,{sync:!1}))}},{key:"revive",value:function(M,q){var X=M&&M.$types;if(!X)return M;if(!0===X)return M.$;var ke=(q=se({sync:!0},this.options,{},q)).sync,De=[],me={},Kt=!0;X.$&&F(X.$)&&(M=M.$,X=X.$,Kt=!1);var un=this;function Dt($e,st){var ve=Oe(un.revivers[$e]||[],1)[0];if(!ve)throw new Error("Unregistered type: "+$e);return ke&&!("revive"in ve)?st:ve[ke&&ve.revive?"revive":!ke&&ve.reviveAsync?"reviveAsync":"revive"](st,me)}var Jt=[];function rn($e){return G($e,Me)?void 0:$e}var mt,ut=function mn(){var $e=[];if(Object.entries(X).forEach(function(st){var tt=Oe(st,2),Ot=tt[0],ve=tt[1];"#"!==ve&&[].concat(ve).forEach(function(d){Oe(un.revivers[d]||[null,{}],2)[1].plain&&($e.push({keypath:Ot,type:d}),delete X[Ot])})}),$e.length)return $e.sort(Ie).reduce(function st(tt,Ot){var ve=Ot.keypath,d=Ot.type;if(B(tt))return tt.then(function(v){return st(v,{keypath:ve,type:d})});var o=Nt(M,ve);if(G(o=Dt(d,o),he))return o.then(function(v){var O=nn(M,ve,v);O===v&&(M=O)});var f=nn(M,ve,o);f===o&&(M=f)},void 0)}();return G(ut,he)?mt=ut.then(function(){return M}):(mt=function bn($e,st,tt,Ot,ve){if(!Kt||"$types"!==$e){var d=X[$e],o=St(st);if(o||F(st)){var f=o?new Array(st.length):{};for(yt(st).forEach(function(Ce){var Re=bn($e+($e?".":"")+at(Ce),st[Ce],tt||f,f,Ce),Qe=function(ze){return G(ze,Me)?f[Ce]=void 0:void 0!==ze&&(f[Ce]=ze),ze};G(Re,he)?Jt.push(Re.then(function(Xe){return Qe(Xe)})):Qe(Re)}),st=f;De.length;){var v=Oe(De[0],4),ne=v[2],be=v[3],ce=Nt(v[0],v[1]);if(void 0===ce)break;ne[be]=ce,De.splice(0,1)}}if(!d)return st;if("#"===d){var oe=Nt(tt,st.slice(1));return void 0===oe&&De.push([tt,st.slice(1),Ot,ve]),oe}return[].concat(d).reduce(function Ce(Re,Qe){return G(Re,he)?Re.then(function(Xe){return Ce(Xe,Qe)}):Dt(Qe,Re)},st)}}("",M,null),Jt.length&&(mt=he.resolve(mt).then(function($e){return he.all([$e].concat(Jt))}).then(function($e){return Oe($e,1)[0]}))),B(mt)?ke&&q.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():G(mt,he)?mt.p.then(rn):mt:!ke&&q.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ke?rn(mt):Promise.resolve(rn(mt))}},{key:"reviveSync",value:function(M,q){return this.revive(M,se({throwOnBadSyncType:!0},q,{sync:!0}))}},{key:"reviveAsync",value:function(M,q){return this.revive(M,se({throwOnBadSyncType:!0},q,{sync:!1}))}},{key:"register",value:function(M,q){return q=q||{},[].concat(M).forEach(function X(qe){var ke=this;if(St(qe))return qe.map(function(De){return X.call(ke,De)});qe&&yt(qe).forEach(function(De){if("#"===De)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(j.JSON_TYPES.includes(De))throw new TypeError("Plain JSON object types are reserved as type names");var me=qe[De],Kt=me&&me.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,un=Kt.filter(function(tt){return tt.type===De});if(un.length&&(Kt.splice(Kt.indexOf(un[0]),1),delete this.revivers[De],delete this.types[De]),"function"==typeof me){var Dt=me;me={test:function(Ot){return Ot&&Ot.constructor===Dt},replace:function(Ot){return se({},Ot)},revive:function(Ot){return Object.assign(Object.create(Dt.prototype),Ot)}}}else if(St(me)){var Jt=Oe(me,3);me={test:Jt[0],replace:Jt[1],revive:Jt[2]}}if(me&&me.test){var mt={type:De,test:me.test.bind(me)};me.replace&&(mt.replace=me.replace.bind(me)),me.replaceAsync&&(mt.replaceAsync=me.replaceAsync.bind(me));var $e="number"==typeof q.fallback?q.fallback:q.fallback?0:1/0;if(me.testPlainObjects?this.plainObjectReplacers.splice($e,0,mt):this.nonplainObjectReplacers.splice($e,0,mt),me.revive||me.reviveAsync){var st={};me.revive&&(st.revive=me.revive.bind(me)),me.reviveAsync&&(st.reviveAsync=me.reviveAsync.bind(me)),this.revivers[De]=[st,{plain:me.testPlainObjects}]}this.types[De]=me}},this)},this),this}}]),j}(),Me=function j(){E(this,j)};return Me.__typeson__type__="TypesonUndefined",ht.Undefined=Me,ht.Promise=he,ht.isThenable=B,ht.toStringTag=l,ht.hasConstructorOf=G,ht.isObject=Z,ht.isPlainObject=F,ht.isUserObject=function He(j){if(!j||"Object"!==l(j))return!1;var L=nt(j);return!L||G(j,Object)||He(L)},ht.escapeKeyPathComponent=at,ht.unescapeKeyPathComponent=Et,ht.getByKeyPath=Nt,ht.getJSONType=function Vt(j){return null===j?"null":Array.isArray(j)?"array":s(j)},ht.JSON_TYPES=["null","boolean","number","string","array","object"],ht}()}),fn=bt(function(T,a){T.exports=function(){function s(d){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(d)}function y(d,o){for(var f=0;f<o.length;f++){var v=o[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function E(d,o,f){return o in d?Object.defineProperty(d,o,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[o]=f,d}function A(d,o){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);o&&(v=v.filter(function(O){return Object.getOwnPropertyDescriptor(d,O).enumerable})),f.push.apply(f,v)}return f}function pe(d){return function(f){if(Array.isArray(f))return we(f)}(d)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(d)||function(f,v){if(f){if("string"==typeof f)return we(f,v);var O=Object.prototype.toString.call(f).slice(8,-1);if("Object"===O&&f.constructor&&(O=f.constructor.name),"Map"===O||"Set"===O)return Array.from(f);if("Arguments"===O||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(O))return we(f,v)}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(d,o){(null==o||o>d.length)&&(o=d.length);for(var f=0,v=new Array(o);f<o;f++)v[f]=d[f];return v}function k(d){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function se(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")}function Oe(d,o){for(var f=0;f<o.length;f++){var v=o[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(d,v.key,v)}}function lt(d,o,f){return o in d?Object.defineProperty(d,o,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[o]=f,d}function kt(d,o){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(d);o&&(v=v.filter(function(O){return Object.getOwnPropertyDescriptor(d,O).enumerable})),f.push.apply(f,v)}return f}function Ne(d){for(var o=1;o<arguments.length;o++){var f=null!=arguments[o]?arguments[o]:{};o%2?kt(Object(f),!0).forEach(function(v){lt(d,v,f[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):kt(Object(f)).forEach(function(v){Object.defineProperty(d,v,Object.getOwnPropertyDescriptor(f,v))})}return d}function je(d,o){return function(v){if(Array.isArray(v))return v}(d)||function(v,O){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(v)){var U=[],ne=!0,be=!1,ce=void 0;try{for(var oe,Ce=v[Symbol.iterator]();!(ne=(oe=Ce.next()).done)&&(U.push(oe.value),!O||U.length!==O);ne=!0);}catch(Re){be=!0,ce=Re}finally{try{ne||null==Ce.return||Ce.return()}finally{if(be)throw ce}}return U}}(d,o)||Ft(d,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(d,o){if(d){if("string"==typeof d)return Pt(d,o);var f=Object.prototype.toString.call(d).slice(8,-1);return"Object"===f&&d.constructor&&(f=d.constructor.name),"Map"===f||"Set"===f?Array.from(d):"Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?Pt(d,o):void 0}}function Pt(d,o){(null==o||o>d.length)&&(o=d.length);for(var f=0,v=new Array(o);f<o;f++)v[f]=d[f];return v}var he=function d(o){se(this,d),this.p=new Promise(o)};he.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(he.prototype[Symbol.toStringTag]="TypesonPromise"),he.prototype.then=function(d,o){var f=this;return new he(function(v,O){f.p.then(function(U){v(d?d(U):U)}).catch(function(U){return o?o(U):Promise.reject(U)}).then(v,O)})},he.prototype.catch=function(d){return this.then(null,d)},he.resolve=function(d){return new he(function(o){o(d)})},he.reject=function(d){return new he(function(o,f){f(d)})},["all","race"].forEach(function(d){he[d]=function(o){return new he(function(f,v){Promise[d](o.map(function(O){return O&&O.constructor&&"TypesonPromise"===O.constructor.__typeson__type__?O.p:O})).then(f,v)})}});var Wt={}.toString,Pe={}.hasOwnProperty,We=Object.getPrototypeOf,nt=Pe.toString;function zt(d,o){return F(d)&&"function"==typeof d.then&&(!o||"function"==typeof d.catch)}function B(d){return Wt.call(d).slice(8,-1)}function l(d,o){if(!d||"object"!==k(d))return!1;var f=We(d);if(!f)return null===o;var v=Pe.call(f,"constructor")&&f.constructor;return"function"!=typeof v?null===o:o===v||null!==o&&nt.call(v)===nt.call(o)||"function"==typeof o&&"string"==typeof v.__typeson__type__&&v.__typeson__type__===o.__typeson__type__}function G(d){return!(!d||"Object"!==B(d))&&(!We(d)||l(d,Object))}function F(d){return d&&"object"===k(d)}function He(d){return d.replace(/~/g,"~0").replace(/\./g,"~1")}function Z(d){return d.replace(/~1/g,".").replace(/~0/g,"~")}function at(d,o){if(""===o)return d;var f=o.indexOf(".");if(f>-1){var v=d[Z(o.slice(0,f))];return void 0===v?void 0:at(v,o.slice(f+1))}return d[Z(o)]}function Et(d,o,f){if(""===o)return f;var v=o.indexOf(".");return v>-1?Et(d[Z(o.slice(0,v))],o.slice(v+1),f):(d[Z(o)]=f,d)}function Nt(d,o,f){return f?o?o(d):d:(d&&d.then||(d=Promise.resolve(d)),o?d.then(o):d)}var nn=Object.keys,Vt=Array.isArray,yt={}.hasOwnProperty,St=["type","replaced","iterateIn","iterateUnsetNumeric"];function Mt(d){return function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];try{return Promise.resolve(d.apply(this,o))}catch(v){return Promise.reject(v)}}}function tn(d,o){if(""===d.keypath)return-1;var f=d.keypath.match(/\./g)||0,v=o.keypath.match(/\./g)||0;return f&&(f=f.length),v&&(v=v.length),f>v?-1:f<v?1:d.keypath<o.keypath?-1:d.keypath>o.keypath}var Ie=function(){function d(o){se(this,d),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return f=d,v=[{key:"stringify",value:function(f,v,O,U){U=Ne(Ne(Ne({},this.options),U),{},{stringification:!0});var ne=this.encapsulate(f,null,U);return Vt(ne)?JSON.stringify(ne[0],v,O):ne.then(function(be){return JSON.stringify(be,v,O)})}},{key:"stringifySync",value:function(f,v,O,U){return this.stringify(f,v,O,Ne(Ne({throwOnBadSyncType:!0},U),{},{sync:!0}))}},{key:"stringifyAsync",value:function(f,v,O,U){return this.stringify(f,v,O,Ne(Ne({throwOnBadSyncType:!0},U),{},{sync:!1}))}},{key:"parse",value:function(f,v,O){return O=Ne(Ne(Ne({},this.options),O),{},{parse:!0}),this.revive(JSON.parse(f,v),O)}},{key:"parseSync",value:function(f,v,O){return this.parse(f,v,Ne(Ne({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"parseAsync",value:function(f,v,O){return this.parse(f,v,Ne(Ne({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"specialTypeNames",value:function(f,v){var O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O.returnTypeNames=!0,this.encapsulate(f,v,O)}},{key:"rootTypeName",value:function(f,v){var O=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return O.iterateNone=!0,this.encapsulate(f,v,O)}},{key:"encapsulate",value:function(f,v,O){var U=Mt(function(fe,Q){return Nt(Promise.all(Q.map(function(Ae){return Ae[1].p})),function(Ae){return Nt(Promise.all(Ae.map(Mt(function(_e){var Tn,hn,ee=!1,Le=[],dn=je(Q.splice(0,1),1),Ct=je(dn[0],7),wt=Ct[0],qt=Ct[4],_t=Ct[5],rt=Te(wt,_e,Ct[2],Ct[3],Le,!0,Ct[6]),Lt=l(rt,he);return Tn=function(on){return ee?on:(wt?qt[_t]=rt:fe=Lt?rt.p:rt,U(fe,Le))},(hn=function(){if(wt&&Lt)return Nt(rt.p,function(on){return qt[_t]=on,ee=!0,U(fe,Le)})}())&&hn.then?hn.then(Tn):Tn(hn)}))),function(){return fe})})}),ne=(O=Ne(Ne({sync:!0},this.options),O)).sync,be=this,ce={},oe=[],Ce=[],Re=[],Qe=!("cyclic"in O)||O.cyclic,Xe=O.encapsulateObserver,ze=Te("",f,Qe,v||{},Re);function dt(fe){var Q=Object.values(ce);if(O.iterateNone)return Q.length?Q[0]:d.getJSONType(fe);if(Q.length){if(O.returnTypeNames)return function Je(d){return function(f){if(Array.isArray(f))return Pt(f)}(d)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(d)||Ft(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(Q));fe&&G(fe)&&!yt.call(fe,"$types")?fe.$types=ce:fe={$:fe,$types:{$:ce}}}else F(fe)&&yt.call(fe,"$types")&&(fe={$:fe,$types:!0});return!O.returnTypeNames&&fe}function vt(fe,Q,Ae){Object.assign(fe,Q);var _e=St.map(function(ee){var Le=fe[ee];return delete fe[ee],Le});Ae(),St.forEach(function(ee,Le){fe[ee]=_e[Le]})}function Te(fe,Q,Ae,_e,ee,Le,dn){var Ct,wt={},Ht=k(Q),ct=Xe?function(Qt){var Xt=dn||_e.type||d.getJSONType(Q);Xe(Object.assign(Qt||wt,{keypath:fe,value:Q,cyclic:Ae,stateObj:_e,promisesData:ee,resolvingTypesonPromise:Le,awaitingTypesonPromise:l(Q,he)},{type:Xt}))}:null;if(["string","boolean","number","undefined"].includes(Ht))return void 0===Q||Number.isNaN(Q)||Q===Number.NEGATIVE_INFINITY||Q===Number.POSITIVE_INFINITY?(Ct=_e.replaced?Q:$t(fe,Q,_e,ee,!1,Le,ct))!==Q&&(wt={replaced:Ct}):Ct=Q,ct&&ct(),Ct;if(null===Q)return ct&&ct(),Q;if(Ae&&!_e.iterateIn&&!_e.iterateUnsetNumeric&&Q&&"object"===k(Q)){var qt=oe.indexOf(Q);if(!(qt<0))return ce[fe]="#",ct&&ct({cyclicKeypath:Ce[qt]}),"#"+Ce[qt];!0===Ae&&(oe.push(Q),Ce.push(fe))}var _t,sn=G(Q),rt=Vt(Q),Lt=(sn||rt)&&(!be.plainObjectReplacers.length||_e.replaced)||_e.iterateIn?Q:$t(fe,Q,_e,ee,sn||rt,null,ct);if(Lt!==Q?(Ct=Lt,wt={replaced:Lt}):""===fe&&l(Q,he)?(ee.push([fe,Q,Ae,_e,void 0,void 0,_e.type]),Ct=Q):rt&&"object"!==_e.iterateIn||"array"===_e.iterateIn?(_t=new Array(Q.length),wt={clone:_t}):(["function","symbol"].includes(k(Q))||"toJSON"in Q||l(Q,he)||l(Q,Promise)||l(Q,ArrayBuffer))&&!sn&&"object"!==_e.iterateIn?Ct=Q:(_t={},_e.addLength&&(_t.length=Q.length),wt={clone:_t}),ct&&ct(),O.iterateNone)return _t||Ct;if(!_t)return Ct;if(_e.iterateIn){var on=function(Xt){var wn={ownKeys:yt.call(Q,Xt)};vt(_e,wn,function(){var xn=fe+(fe?".":"")+He(Xt),On=Te(xn,Q[Xt],!!Ae,_e,ee,Le);l(On,he)?ee.push([xn,On,!!Ae,_e,_t,Xt,_e.type]):void 0!==On&&(_t[Xt]=On)})};for(var Sn in Q)on(Sn);ct&&ct({endIterateIn:!0,end:!0})}else nn(Q).forEach(function(Qt){var Xt=fe+(fe?".":"")+He(Qt);vt(_e,{ownKeys:!0},function(){var wn=Te(Xt,Q[Qt],!!Ae,_e,ee,Le);l(wn,he)?ee.push([Xt,wn,!!Ae,_e,_t,Qt,_e.type]):void 0!==wn&&(_t[Qt]=wn)})}),ct&&ct({endIterateOwn:!0,end:!0});if(_e.iterateUnsetNumeric){for(var Tn=Q.length,hn=function(Xt){if(!(Xt in Q)){var wn=fe+(fe?".":"")+Xt;vt(_e,{ownKeys:!1},function(){var xn=Te(wn,void 0,!!Ae,_e,ee,Le);l(xn,he)?ee.push([wn,xn,!!Ae,_e,_t,Xt,_e.type]):void 0!==xn&&(_t[Xt]=xn)})}},Dn=0;Dn<Tn;Dn++)hn(Dn);ct&&ct({endIterateUnsetNumeric:!0,end:!0})}return _t}function $t(fe,Q,Ae,_e,ee,Le,dn){for(var Ct=ee?be.plainObjectReplacers:be.nonplainObjectReplacers,wt=Ct.length;wt--;){var Ht=Ct[wt];if(Ht.test(Q,Ae)){var ct=Ht.type;if(be.revivers[ct]){var qt=ce[fe];ce[fe]=qt?[ct].concat(qt):ct}return Object.assign(Ae,{type:ct,replaced:!0}),!ne&&Ht.replaceAsync||Ht.replace?(dn&&dn({replacing:!0}),Te(fe,Ht[ne||!Ht.replaceAsync?"replace":"replaceAsync"](Q,Ae),Qe&&"readonly",Ae,_e,Le,ct)):(dn&&dn({typeDetected:!0}),Te(fe,Q,Qe&&"readonly",Ae,_e,Le,ct))}}return Q}return Re.length?ne&&O.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(U(ze,Re)).then(dt):!ne&&O.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():O.stringification&&ne?[dt(ze)]:ne?dt(ze):Promise.resolve(dt(ze))}},{key:"encapsulateSync",value:function(f,v,O){return this.encapsulate(f,v,Ne(Ne({throwOnBadSyncType:!0},O),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(f,v,O){return this.encapsulate(f,v,Ne(Ne({throwOnBadSyncType:!0},O),{},{sync:!1}))}},{key:"revive",value:function(f,v){var O=f&&f.$types;if(!O)return f;if(!0===O)return f.$;var U=(v=Ne(Ne({sync:!0},this.options),v)).sync,ne=[],be={},ce=!0;O.$&&G(O.$)&&(f=f.$,O=O.$,ce=!1);var oe=this;function Ce(dt,vt){var Te=je(oe.revivers[dt]||[],1)[0];if(!Te)throw new Error("Unregistered type: "+dt);return U&&!("revive"in Te)?vt:Te[U&&Te.revive?"revive":!U&&Te.reviveAsync?"reviveAsync":"revive"](vt,be)}var Re=[];function Qe(dt){return l(dt,ht)?void 0:dt}var Xe,ze=function(){var vt=[];if(Object.entries(O).forEach(function(Te){var $t=je(Te,2),fe=$t[0],Q=$t[1];"#"!==Q&&[].concat(Q).forEach(function(Ae){je(oe.revivers[Ae]||[null,{}],2)[1].plain&&(vt.push({keypath:fe,type:Ae}),delete O[fe])})}),vt.length)return vt.sort(tn).reduce(function Te($t,fe){var Q=fe.keypath,Ae=fe.type;if(zt($t))return $t.then(function(Le){return Te(Le,{keypath:Q,type:Ae})});var _e=at(f,Q);if(l(_e=Ce(Ae,_e),he))return _e.then(function(Le){var dn=Et(f,Q,Le);dn===Le&&(f=dn)});var ee=Et(f,Q,_e);ee===_e&&(f=ee)},void 0)}();return l(ze,he)?Xe=ze.then(function(){return f}):(Xe=function dt(vt,Te,$t,fe,Q){if(!ce||"$types"!==vt){var Ae=O[vt],_e=Vt(Te);if(_e||G(Te)){var ee=_e?new Array(Te.length):{};for(nn(Te).forEach(function(_t){var sn=dt(vt+(vt?".":"")+He(_t),Te[_t],$t||ee,ee,_t),rt=function(on){return l(on,ht)?ee[_t]=void 0:void 0!==on&&(ee[_t]=on),on};l(sn,he)?Re.push(sn.then(function(Lt){return rt(Lt)})):rt(sn)}),Te=ee;ne.length;){var Le=je(ne[0],4),wt=Le[2],Ht=Le[3],ct=at(Le[0],Le[1]);if(void 0===ct)break;wt[Ht]=ct,ne.splice(0,1)}}if(!Ae)return Te;if("#"===Ae){var qt=at($t,Te.slice(1));return void 0===qt&&ne.push([$t,Te.slice(1),fe,Q]),qt}return[].concat(Ae).reduce(function _t(sn,rt){return l(sn,he)?sn.then(function(Lt){return _t(Lt,rt)}):Ce(rt,sn)},Te)}}("",f,null),Re.length&&(Xe=he.resolve(Xe).then(function(dt){return he.all([dt].concat(Re))}).then(function(dt){return je(dt,1)[0]}))),zt(Xe)?U&&v.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():l(Xe,he)?Xe.p.then(Qe):Xe:!U&&v.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():U?Qe(Xe):Promise.resolve(Qe(Xe))}},{key:"reviveSync",value:function(f,v){return this.revive(f,Ne(Ne({throwOnBadSyncType:!0},v),{},{sync:!0}))}},{key:"reviveAsync",value:function(f,v){return this.revive(f,Ne(Ne({throwOnBadSyncType:!0},v),{},{sync:!1}))}},{key:"register",value:function(f,v){return v=v||{},[].concat(f).forEach(function O(U){var ne=this;if(Vt(U))return U.map(function(be){return O.call(ne,be)});U&&nn(U).forEach(function(be){if("#"===be)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(d.JSON_TYPES.includes(be))throw new TypeError("Plain JSON object types are reserved as type names");var ce=U[be],oe=ce&&ce.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,Ce=oe.filter(function(vt){return vt.type===be});if(Ce.length&&(oe.splice(oe.indexOf(Ce[0]),1),delete this.revivers[be],delete this.types[be]),"function"==typeof ce){var Re=ce;ce={test:function(Te){return Te&&Te.constructor===Re},replace:function(Te){return Ne({},Te)},revive:function(Te){return Object.assign(Object.create(Re.prototype),Te)}}}else if(Vt(ce)){var Qe=je(ce,3);ce={test:Qe[0],replace:Qe[1],revive:Qe[2]}}if(ce&&ce.test){var Xe={type:be,test:ce.test.bind(ce)};ce.replace&&(Xe.replace=ce.replace.bind(ce)),ce.replaceAsync&&(Xe.replaceAsync=ce.replaceAsync.bind(ce));var ze="number"==typeof v.fallback?v.fallback:v.fallback?0:Number.POSITIVE_INFINITY;if(ce.testPlainObjects?this.plainObjectReplacers.splice(ze,0,Xe):this.nonplainObjectReplacers.splice(ze,0,Xe),ce.revive||ce.reviveAsync){var dt={};ce.revive&&(dt.revive=ce.revive.bind(ce)),ce.reviveAsync&&(dt.reviveAsync=ce.reviveAsync.bind(ce)),this.revivers[be]=[dt,{plain:ce.testPlainObjects}]}this.types[be]=ce}},this)},this),this}}],v&&Oe(f.prototype,v),d;var f,v}(),ht=function d(){se(this,d)};ht.__typeson__type__="TypesonUndefined",Ie.Undefined=ht,Ie.Promise=he,Ie.isThenable=zt,Ie.toStringTag=B,Ie.hasConstructorOf=l,Ie.isObject=F,Ie.isPlainObject=G,Ie.isUserObject=function d(o){if(!o||"Object"!==B(o))return!1;var f=We(o);return!f||l(o,Object)||d(f)},Ie.escapeKeyPathComponent=He,Ie.unescapeKeyPathComponent=Z,Ie.getByKeyPath=at,Ie.getJSONType=function(o){return null===o?"null":Array.isArray(o)?"array":k(o)},Ie.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Me={userObject:{test:function(o,f){return Ie.isUserObject(o)},replace:function(o){return function(v){for(var O=1;O<arguments.length;O++){var U=null!=arguments[O]?arguments[O]:{};O%2?A(Object(U),!0).forEach(function(ne){E(v,ne,U[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(v,Object.getOwnPropertyDescriptors(U)):A(Object(U)).forEach(function(ne){Object.defineProperty(v,ne,Object.getOwnPropertyDescriptor(U,ne))})}return v}({},o)},revive:function(o){return o}}},j=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,f){return!!Array.isArray(o)&&(Object.keys(o).some(function(v){return String(Number.parseInt(v))!==v})&&(f.iterateIn="object",f.addLength=!0),!0)},replace:function(o,f){return f.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var f=[];return Object.keys(o).forEach(function(v){f[v]=o[v]}),f}}},{sparseUndefined:{test:function(o,f){return void 0===o&&!1===f.ownKeys},replace:function(o){return 0},revive:function(o){}}}],L={undef:{test:function(o,f){return void 0===o&&(f.ownKeys||!("ownKeys"in f))},replace:function(o){return 0},revive:function(o){return new Ie.Undefined}}},M={StringObject:{test:function(o){return"String"===Ie.toStringTag(o)&&"object"===s(o)},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return"Boolean"===Ie.toStringTag(o)&&"object"===s(o)},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return"Number"===Ie.toStringTag(o)&&"object"===s(o)},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},q=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],X={date:{test:function(o){return"Date"===Ie.toStringTag(o)},replace:function(o){var f=o.getTime();return Number.isNaN(f)?"NaN":f},revive:function(o){return"NaN"===o?new Date(Number.NaN):new Date(o)}}},qe={regexp:{test:function(o){return"RegExp"===Ie.toStringTag(o)},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){return new RegExp(o.source,o.flags)}}},ke={map:{test:function(o){return"Map"===Ie.toStringTag(o)},replace:function(o){return pe(o.entries())},revive:function(o){return new Map(o)}}},De={set:{test:function(o){return"Set"===Ie.toStringTag(o)},replace:function(o){return pe(o.values())},revive:function(o){return new Set(o)}}},me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kt=new Uint8Array(256),un=0;un<64;un++)Kt[me.charCodeAt(un)]=un;var Dt=function(o,f,v){null==v&&(v=o.byteLength);for(var O=new Uint8Array(o,f||0,v),U=O.length,ne="",be=0;be<U;be+=3)ne+=me[O[be]>>2],ne+=me[(3&O[be])<<4|O[be+1]>>4],ne+=me[(15&O[be+1])<<2|O[be+2]>>6],ne+=me[63&O[be+2]];return U%3==2?ne=ne.slice(0,-1)+"=":U%3==1&&(ne=ne.slice(0,-2)+"=="),ne},mn=function(o){var f,v,O,U,ne=o.length,be=.75*o.length,ce=0;"="===o[o.length-1]&&(be--,"="===o[o.length-2]&&be--);for(var oe=new ArrayBuffer(be),Ce=new Uint8Array(oe),Re=0;Re<ne;Re+=4)f=Kt[o.charCodeAt(Re)],v=Kt[o.charCodeAt(Re+1)],O=Kt[o.charCodeAt(Re+2)],U=Kt[o.charCodeAt(Re+3)],Ce[ce++]=f<<2|v>>4,Ce[ce++]=(15&v)<<4|O>>2,Ce[ce++]=(3&O)<<6|63&U;return oe},Jt={arraybuffer:{test:function(o){return"ArrayBuffer"===Ie.toStringTag(o)},replace:function(o,f){f.buffers||(f.buffers=[]);var v=f.buffers.indexOf(o);return v>-1?{index:v}:(f.buffers.push(o),Dt(o))},revive:function(o,f){if(f.buffers||(f.buffers=[]),"object"===s(o))return f.buffers[o.index];var v=mn(o);return f.buffers.push(v),v}}},bn=typeof self>"u"?Gt:self,rn={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(d){var o=d,f=bn[o];f&&(rn[d.toLowerCase()]={test:function(O){return Ie.toStringTag(O)===o},replace:function(O,U){var ne=O.buffer,be=O.byteOffset,ce=O.length;U.buffers||(U.buffers=[]);var oe=U.buffers.indexOf(ne);return oe>-1?{index:oe,byteOffset:be,length:ce}:(U.buffers.push(ne),{encoded:Dt(ne),byteOffset:be,length:ce})},revive:function(O,U){U.buffers||(U.buffers=[]);var ne,be=O.byteOffset,ce=O.length;return"index"in O?ne=U.buffers[O.index]:(ne=mn(O.encoded),U.buffers.push(ne)),new f(ne,be,ce)}})});var ut={dataview:{test:function(o){return"DataView"===Ie.toStringTag(o)},replace:function(o,f){var v=o.buffer,O=o.byteOffset,U=o.byteLength;f.buffers||(f.buffers=[]);var ne=f.buffers.indexOf(v);return ne>-1?{index:ne,byteOffset:O,byteLength:U}:(f.buffers.push(v),{encoded:Dt(v),byteOffset:O,byteLength:U})},revive:function(o,f){f.buffers||(f.buffers=[]);var v,O=o.byteOffset,U=o.byteLength;return"index"in o?v=f.buffers[o.index]:(v=mn(o.encoded),f.buffers.push(v)),new DataView(v,O,U)}}},mt={IntlCollator:{test:function(o){return Ie.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return Ie.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return Ie.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function $e(d){for(var o=new Uint8Array(d.length),f=0;f<d.length;f++)o[f]=d.charCodeAt(f);return o.buffer}var st={file:{test:function(o){return"File"===Ie.toStringTag(o)},replace:function(o){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(o),!1),f.send(),200!==f.status&&0!==f.status)throw new Error("Bad File access: "+f.status);return{type:o.type,stringContents:f.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var f=o.name,v=o.type,U=o.lastModified;return new File([$e(o.stringContents)],f,{type:v,lastModified:U})},replaceAsync:function(o){return new Ie.Promise(function(f,v){var O=new FileReader;O.addEventListener("load",function(){f({type:o.type,stringContents:O.result,name:o.name,lastModified:o.lastModified})}),O.addEventListener("error",function(){v(O.error)}),O.readAsBinaryString(o)})}}},tt={bigint:{test:function(o){return"bigint"==typeof o},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},Ot={bigintObject:{test:function(o){return"object"===s(o)&&Ie.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},ve={cryptokey:{test:function(o){return"CryptoKey"===Ie.toStringTag(o)&&o.extractable},replaceAsync:function(o){return new Ie.Promise(function(f,v){crypto.subtle.exportKey("jwk",o).catch(function(O){v(O)}).then(function(O){f({jwk:O,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){return crypto.subtle.importKey("jwk",o.jwk,o.algorithm,!0,o.usages)}}};return[Me,L,j,M,q,X,qe,{imagedata:{test:function(o){return"ImageData"===Ie.toStringTag(o)},replace:function(o){return{array:pe(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return"ImageBitmap"===Ie.toStringTag(o)||o&&o.dataset&&"ImageBitmap"===o.dataset.toStringTag},replace:function(o){var f=document.createElement("canvas");return f.getContext("2d").drawImage(o,0,0),f.toDataURL()},revive:function(o){var f=document.createElement("canvas"),v=f.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){v.drawImage(O,0,0)}),O.src=o,f},reviveAsync:function(o){var f=document.createElement("canvas"),v=f.getContext("2d"),O=document.createElement("img");return O.addEventListener("load",function(){v.drawImage(O,0,0)}),O.src=o,createImageBitmap(f)}}},st,{file:st.file,filelist:{test:function(o){return"FileList"===Ie.toStringTag(o)},replace:function(o){for(var f=[],v=0;v<o.length;v++)f[v]=o.item(v);return f},revive:function(o){return new(function(){function f(){(function c(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")})(this,f),this._files=arguments[0],this.length=this._files.length}return O=f,U=[{key:"item",value:function(O){return this._files[O]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],U&&y(O.prototype,U),f;var O,U}())(o)}}},{blob:{test:function(o){return"Blob"===Ie.toStringTag(o)},replace:function(o){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(o),!1),f.send(),200!==f.status&&0!==f.status)throw new Error("Bad Blob access: "+f.status);return{type:o.type,stringContents:f.responseText}},revive:function(o){var f=o.type;return new Blob([$e(o.stringContents)],{type:f})},replaceAsync:function(o){return new Ie.Promise(function(f,v){var O=new FileReader;O.addEventListener("load",function(){f({type:o.type,stringContents:O.result})}),O.addEventListener("error",function(){v(O.error)}),O.readAsBinaryString(o)})}}}].concat("function"==typeof Map?ke:[],"function"==typeof Set?De:[],"function"==typeof ArrayBuffer?Jt:[],"function"==typeof Uint8Array?rn:[],"function"==typeof DataView?ut:[],typeof Intl<"u"?mt:[],typeof crypto<"u"?ve:[],typeof BigInt<"u"?[tt,Ot]:[])}()}),Ue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",et=new Uint8Array(256),en=0;en<64;en++)et[Ue.codePointAt(en)]=en;var pt=function(a,s,c){null==c&&(c=a.byteLength);for(var y=new Uint8Array(a,s||0,c),E=y.length,A="",pe=0;pe<E;pe+=3)A+=Ue[y[pe]>>2],A+=Ue[(3&y[pe])<<4|y[pe+1]>>4],A+=Ue[(15&y[pe+1])<<2|y[pe+2]>>6],A+=Ue[63&y[pe+2]];return E%3==2?A=A.slice(0,-1)+"=":E%3==1&&(A=A.slice(0,-2)+"=="),A},jt=function(a){var E,A,pe,we,s=a.length,c=.75*a.length,y=0;"="===a[a.length-1]&&(c--,"="===a[a.length-2]&&c--);for(var k=new ArrayBuffer(c),se=new Uint8Array(k),Oe=0;Oe<s;Oe+=4)E=et[a.codePointAt(Oe)],A=et[a.codePointAt(Oe+1)],pe=et[a.codePointAt(Oe+2)],we=et[a.codePointAt(Oe+3)],se[y++]=E<<2|A>>4,se[y++]=(15&A)<<4|pe>>2,se[y++]=(3&pe)<<6|63&we;return k},ft=typeof self>"u"?global:self,It={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(T){var a=T,s=ft[a];s&&(It[T.toLowerCase()+"2"]={test:function(c){return Se.toStringTag(c)===a},replace:function(c){return{buffer:c.buffer,byteOffset:c.byteOffset,length:c.length}},revive:function(c){return new s(c.buffer,c.byteOffset,c.length)}})});var xt={arraybuffer:{test:function(T){return"ArrayBuffer"===Se.toStringTag(T)},replace:function(T){return pt(T,0,T.byteLength)},revive:function(T){return jt(T)}}},de=(new Se).register(fn),At="FileReaderSync"in self,Ut=[],Yt=0;de.register([xt,It,{blob2:{test:function(T){return"Blob"===Se.toStringTag(T)},replace:function(T){if(T.isClosed)throw new Error("The Blob is closed");if(At){var a=gt(T,"binary"),s=pt(a,0,a.byteLength);return{type:T.type,data:s}}Ut.push(T);var c={type:T.type,data:{start:Yt,end:Yt+T.size}};return Yt+=T.size,c},finalize:function(T,a){T.data=pt(a,0,a.byteLength)},revive:function(T){var a=T.type;return new Blob([jt(T.data)],{type:a})}}}]),de.mustFinalize=function(){return Ut.length>0},de.finalize=function(T){return le(void 0,void 0,void 0,function(){var a,s,c,y,E,A,pe,k,se;return ge(this,function(Oe){switch(Oe.label){case 0:return[4,ot(new Blob(Ut),"binary")];case 1:if(a=Oe.sent(),T)for(s=0,c=T;s<c.length;s++)if((y=c[s]).$types)for(pe in(A=(E=y.$types).$)&&(E=E.$),E)(k=de.types[E[pe]])&&k.finalize&&(se=ae.ZP.getByKeyPath(y,A?"$."+pe:pe),k.finalize(se,a.slice(se.start,se.end)));return Ut=[],[2]}})})};var En=1,kn_Stream=function(){},Fn=bt(function(T,a){!function(s){var c="object"==typeof process&&process.env?process.env:self;s.parser=function(B){return new kt(B)},s.CParser=kt,s.CStream=je,s.createStream=function Ne(B){return new je(B)},s.MAX_BUFFER_LENGTH=10485760,s.DEBUG="debug"===c.CDEBUG,s.INFO="debug"===c.CDEBUG||"info"===c.CDEBUG,s.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var pe,y={textNode:void 0,numberNode:""},E=s.EVENTS.filter(function(B){return"error"!==B&&"end"!==B}),A=0;for(var we in s.STATE={BEGIN:A++,VALUE:A++,OPEN_OBJECT:A++,CLOSE_OBJECT:A++,OPEN_ARRAY:A++,CLOSE_ARRAY:A++,TEXT_ESCAPE:A++,STRING:A++,BACKSLASH:A++,END:A++,OPEN_KEY:A++,CLOSE_KEY:A++,TRUE:A++,TRUE2:A++,TRUE3:A++,FALSE:A++,FALSE2:A++,FALSE3:A++,FALSE4:A++,NULL:A++,NULL2:A++,NULL3:A++,NUMBER_DECIMAL_POINT:A++,NUMBER_DIGIT:A++},s.STATE)s.STATE[s.STATE[we]]=we;A=s.STATE;const k_tab=9,k_lineFeed=10,k_carriageReturn=13,k_space=32,k_doubleQuote=34,k_plus=43,k_comma=44,k_minus=45,k_period=46,k__0=48,k__9=57,k_colon=58,k_E=69,k_openBracket=91,k_backslash=92,k_closeBracket=93,k_a=97,k_b=98,k_e=101,k_f=102,k_l=108,k_n=110,k_r=114,k_s=115,k_t=116,k_u=117,k_openBrace=123,k_closeBrace=125;function Oe(B){for(var l in y)B[l]=y[l]}Object.create||(Object.create=function(B){function l(){this.__proto__=B}return l.prototype=B,new l}),Object.getPrototypeOf||(Object.getPrototypeOf=function(B){return B.__proto__}),Object.keys||(Object.keys=function(B){var l=[];for(var G in B)B.hasOwnProperty(G)&&l.push(G);return l});var lt=/[\\"\n]/g;function kt(B){if(!(this instanceof kt))return new kt(B);var l=this;Oe(l),l.bufferCheckPosition=s.MAX_BUFFER_LENGTH,l.q=l.c=l.p="",l.opt=B||{},l.closed=l.closedRoot=l.sawRoot=!1,l.tag=l.error=null,l.state=A.BEGIN,l.stack=new Array,l.position=l.column=0,l.line=1,l.slashed=!1,l.unicodeI=0,l.unicodeS=null,l.depth=0,Je(l,"onready")}kt.prototype={end:function(){We(this)},write:function zt(B){var l=this;if(this.error)throw this.error;if(l.closed)return Pe(l,"Cannot write after close. Assign an onready handler.");if(null===B)return We(l);var G=0,F=B.charCodeAt(0),He=l.p;for(s.DEBUG&&console.log("write -> ["+B+"]");F&&(He=F,l.c=F=B.charCodeAt(G++),He!==F?l.p=He:He=l.p,F);)switch(s.DEBUG&&console.log(G,F,s.STATE[l.state]),l.position++,F===k_lineFeed?(l.line++,l.column=0):l.column++,l.state){case A.BEGIN:F===k_openBrace?l.state=A.OPEN_OBJECT:F===k_openBracket?l.state=A.OPEN_ARRAY:nt(F)||Pe(l,"Non-whitespace before {[.");continue;case A.OPEN_KEY:case A.OPEN_OBJECT:if(nt(F))continue;if(l.state===A.OPEN_KEY)l.stack.push(A.CLOSE_KEY);else{if(F===k_closeBrace){Je(l,"onopenobject"),this.depth++,Je(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||A.VALUE;continue}l.stack.push(A.CLOSE_OBJECT)}F===k_doubleQuote?l.state=A.STRING:Pe(l,'Malformed object key should start with "');continue;case A.CLOSE_KEY:case A.CLOSE_OBJECT:if(nt(F))continue;F===k_colon?(l.state===A.CLOSE_OBJECT?(l.stack.push(A.CLOSE_OBJECT),Pt(l,"onopenobject"),this.depth++):Pt(l,"onkey"),l.state=A.VALUE):F===k_closeBrace?(Ft(l,"oncloseobject"),this.depth--,l.state=l.stack.pop()||A.VALUE):F===k_comma?(l.state===A.CLOSE_OBJECT&&l.stack.push(A.CLOSE_OBJECT),Pt(l),l.state=A.OPEN_KEY):Pe(l,"Bad object");continue;case A.OPEN_ARRAY:case A.VALUE:if(nt(F))continue;if(l.state===A.OPEN_ARRAY){if(Je(l,"onopenarray"),this.depth++,l.state=A.VALUE,F===k_closeBracket){Je(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||A.VALUE;continue}l.stack.push(A.CLOSE_ARRAY)}F===k_doubleQuote?l.state=A.STRING:F===k_openBrace?l.state=A.OPEN_OBJECT:F===k_openBracket?l.state=A.OPEN_ARRAY:F===k_t?l.state=A.TRUE:F===k_f?l.state=A.FALSE:F===k_n?l.state=A.NULL:F===k_minus?l.numberNode+="-":k__0<=F&&F<=k__9?(l.numberNode+=String.fromCharCode(F),l.state=A.NUMBER_DIGIT):Pe(l,"Bad value");continue;case A.CLOSE_ARRAY:if(F===k_comma)l.stack.push(A.CLOSE_ARRAY),Pt(l,"onvalue"),l.state=A.VALUE;else if(F===k_closeBracket)Ft(l,"onclosearray"),this.depth--,l.state=l.stack.pop()||A.VALUE;else{if(nt(F))continue;Pe(l,"Bad array")}continue;case A.STRING:void 0===l.textNode&&(l.textNode="");var Z=G-1,at=l.slashed,Et=l.unicodeI;e:for(;;){for(s.DEBUG&&console.log(G,F,s.STATE[l.state],at);Et>0;)if(l.unicodeS+=String.fromCharCode(F),F=B.charCodeAt(G++),l.position++,4===Et?(l.textNode+=String.fromCharCode(parseInt(l.unicodeS,16)),Et=0,Z=G-1):Et++,!F)break e;if(F===k_doubleQuote&&!at){l.state=l.stack.pop()||A.VALUE,l.textNode+=B.substring(Z,G-1),l.position+=G-1-Z;break}if(F===k_backslash&&!at&&(at=!0,l.textNode+=B.substring(Z,G-1),l.position+=G-1-Z,F=B.charCodeAt(G++),l.position++,!F))break;if(at){if(at=!1,F===k_n?l.textNode+="\n":F===k_r?l.textNode+="\r":F===k_t?l.textNode+="\t":F===k_f?l.textNode+="\f":F===k_b?l.textNode+="\b":F===k_u?(Et=1,l.unicodeS=""):l.textNode+=String.fromCharCode(F),F=B.charCodeAt(G++),l.position++,Z=G-1,F)continue;break}lt.lastIndex=G;var Nt=lt.exec(B);if(null===Nt){l.textNode+=B.substring(Z,(G=B.length+1)-1),l.position+=G-1-Z;break}if(G=Nt.index+1,!(F=B.charCodeAt(Nt.index))){l.textNode+=B.substring(Z,G-1),l.position+=G-1-Z;break}}l.slashed=at,l.unicodeI=Et;continue;case A.TRUE:F===k_r?l.state=A.TRUE2:Pe(l,"Invalid true started with t"+F);continue;case A.TRUE2:F===k_u?l.state=A.TRUE3:Pe(l,"Invalid true started with tr"+F);continue;case A.TRUE3:F===k_e?(Je(l,"onvalue",!0),l.state=l.stack.pop()||A.VALUE):Pe(l,"Invalid true started with tru"+F);continue;case A.FALSE:F===k_a?l.state=A.FALSE2:Pe(l,"Invalid false started with f"+F);continue;case A.FALSE2:F===k_l?l.state=A.FALSE3:Pe(l,"Invalid false started with fa"+F);continue;case A.FALSE3:F===k_s?l.state=A.FALSE4:Pe(l,"Invalid false started with fal"+F);continue;case A.FALSE4:F===k_e?(Je(l,"onvalue",!1),l.state=l.stack.pop()||A.VALUE):Pe(l,"Invalid false started with fals"+F);continue;case A.NULL:F===k_u?l.state=A.NULL2:Pe(l,"Invalid null started with n"+F);continue;case A.NULL2:F===k_l?l.state=A.NULL3:Pe(l,"Invalid null started with nu"+F);continue;case A.NULL3:F===k_l?(Je(l,"onvalue",null),l.state=l.stack.pop()||A.VALUE):Pe(l,"Invalid null started with nul"+F);continue;case A.NUMBER_DECIMAL_POINT:F===k_period?(l.numberNode+=".",l.state=A.NUMBER_DIGIT):Pe(l,"Leading zero not followed by .");continue;case A.NUMBER_DIGIT:k__0<=F&&F<=k__9?l.numberNode+=String.fromCharCode(F):F===k_period?(-1!==l.numberNode.indexOf(".")&&Pe(l,"Invalid number has two dots"),l.numberNode+="."):F===k_e||F===k_E?((-1!==l.numberNode.indexOf("e")||-1!==l.numberNode.indexOf("E"))&&Pe(l,"Invalid number has two exponential"),l.numberNode+="e"):F===k_plus||F===k_minus?(He===k_e||He===k_E||Pe(l,"Invalid symbol in number"),l.numberNode+=String.fromCharCode(F)):(he(l),G--,l.state=l.stack.pop()||A.VALUE);continue;default:Pe(l,"Unknown state: "+l.state)}return l.position>=l.bufferCheckPosition&&function se(B){var l=Math.max(s.MAX_BUFFER_LENGTH,10),G=0;for(var F in y){var He=void 0===B[F]?0:B[F].length;He>l&&("text"===F?closeText(B):Pe(B,"Max buffer length exceeded: "+F)),G=Math.max(G,He)}B.bufferCheckPosition=s.MAX_BUFFER_LENGTH-G+B.position}(l),l},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{pe=kn_Stream}catch{pe=function(){}}function je(B){if(!(this instanceof je))return new je(B);this._parser=new kt(B),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var l=this;pe.apply(l),this._parser.onend=function(){l.emit("end")},this._parser.onerror=function(G){l.emit("error",G),l._parser.error=null},E.forEach(function(G){Object.defineProperty(l,"on"+G,{get:function(){return l._parser["on"+G]},set:function(F){if(!F)return l.removeAllListeners(G),l._parser["on"+G]=F,F;l.on(G,F)},enumerable:!0,configurable:!1})})}function Je(B,l,G){s.INFO&&console.log("-- emit",l,G),B[l]&&B[l](G)}function Ft(B,l,G){Pt(B),Je(B,l,G)}function Pt(B,l){B.textNode=function Wt(B,l){return void 0===l||(B.trim&&(l=l.trim()),B.normalize&&(l=l.replace(/\s+/g," "))),l}(B.opt,B.textNode),void 0!==B.textNode&&Je(B,l||"onvalue",B.textNode),B.textNode=void 0}function he(B){B.numberNode&&Je(B,"onvalue",parseFloat(B.numberNode)),B.numberNode=""}function Pe(B,l){return Pt(B),l+="\nLine: "+B.line+"\nColumn: "+B.column+"\nChar: "+B.c,l=new Error(l),B.error=l,Je(B,"onerror",l),B}function We(B){return(B.state!==A.VALUE||0!==B.depth)&&Pe(B,"Unexpected end"),Pt(B),B.c="",B.closed=!0,Je(B,"onend"),kt.call(B,B.opt),B}function nt(B){return B===k_carriageReturn||B===k_lineFeed||B===k_space||B===k_tab}(je.prototype=Object.create(pe.prototype,{constructor:{value:je}})).write=function(B){B=new Buffer(B);for(var l=0;l<B.length;l++){var G=B[l];if(this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=B[F];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,l=l+F-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&G>=128){if(G>=194&&G<=223&&(this.bytes_in_sequence=2),G>=224&&G<=239&&(this.bytes_in_sequence=3),G>=240&&G<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+l>B.length){for(var He=0;He<=B.length-1-l;He++)this.temp_buffs[this.bytes_in_sequence][He]=B[l+He];return this.bytes_remaining=l+this.bytes_in_sequence-B.length,!0}this.string=B.slice(l,l+this.bytes_in_sequence).toString(),l=l+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var Z=l;Z<B.length&&!(B[Z]>=128);Z++);this.string=B.slice(l,Z).toString(),this._parser.write(this.string),this.emit("data",this.string),l=Z-1}}},je.prototype.end=function(B){return B&&B.length&&this._parser.write(B.toString()),this._parser.end(),!0},je.prototype.on=function(B,l){var G=this;return!G._parser["on"+B]&&-1!==E.indexOf(B)&&(G._parser["on"+B]=function(){var F=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,B),G.emit.apply(G,F)}),pe.prototype.on.call(G,B,l)},je.prototype.destroy=function(){Oe(this._parser),this.emit("close")}}(a)});function $(T,a,s){return le(this,void 0,void 0,function(){function c(){return le(this,void 0,void 0,function(){var je,Je,Ft;return ge(this,function(Wt){switch(Wt.label){case 0:je=function(Pe){var We,nt,zt,B,l,G,F,He,Z,at,Et,Nt,nn;return ge(this,function(Vt){switch(Vt.label){case 0:if(k.includes(Pe.tableName))return[2,"continue"];if(!Pe.rows)return[2,"break"];if(!Pe.rows.incomplete&&0===Pe.rows.length)return[2,"continue"];if(se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),nt=T.table(We=Pe.tableName),zt=we.tables.filter(function(yt){return yt.name===We})[0].schema,!nt){if(s.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(Pe.tableName," is missing in installed database"))}if(!s.acceptChangedPrimaryKey&&zt.split(",")[0]!=nt.schema.primKey.src)throw new Error("Primary key differs for table ".concat(Pe.tableName,". "));for(B=Pe.rows,l=[],G=0;G<B.length&&!(F=B[G]).incomplete;G++)l.push(de.revive(F));return Z=s.transform,at=(He=s.filter)?l.filter(Pe.inbound?function(yt){return He(We,yt)}:function(yt){return He(We,yt[1],yt[0])}):l,Z&&(at=at.map(Pe.inbound?function(yt){return Z(We,yt).value}:function(yt){var tn=Z(We,yt[1],yt[0]);return[tn.key,tn.value]})),Et=Pe.inbound?[void 0,at]:[at.map(function(yt){return yt[0]}),l.map(function(yt){return yt[1]})],Nt=Et[0],nn=Et[1],s.overwriteValues?[4,nt.bulkPut(nn,Nt)]:[3,2];case 1:return Vt.sent(),[3,4];case 2:return[4,nt.bulkAdd(nn,Nt)];case 3:Vt.sent(),Vt.label=4;case 4:return Oe.completedRows+=l.length,l.incomplete||(Oe.completedTables+=1),B.splice(0,l.length),[2]}})},Je=0,Ft=we.data,Wt.label=1;case 1:return Je<Ft.length?[5,je(Ft[Je])]:[3,4];case 2:if("break"===Wt.sent())return[3,4];Wt.label=3;case 3:return Je++,[3,1];case 4:for(;we.data.length>0&&we.data[0].rows&&!we.data[0].rows.incomplete;)we.data.splice(0,1);return E.done()||E.eof()?[3,8]:pe?(E.pullSync(y),[3,7]):[3,5];case 5:return[4,ae.ZP.waitFor(E.pullAsync(y))];case 6:Wt.sent(),Wt.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var y,E,pe,we,k,se,Oe,lt,kt,Ne;return ge(this,function(je){switch(je.label){case 0:return[4,H(a,y=(s=s||{}).chunkSizeBytes||1048576)];case 1:if(E=je.sent(),pe="FileReaderSync"in self,we=E.result.data,k=s.skipTables?s.skipTables:[],!s.acceptNameDiff&&T.name!==we.databaseName)throw new Error("Name differs. Current database name is ".concat(T.name," but export is ").concat(we.databaseName));if(!s.acceptVersionDiff&&T.verno!==we.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat(T.verno," but export is ").concat(we.databaseVersion));if(se=s.progressCallback,Oe={done:!1,completedRows:0,completedTables:0,totalRows:we.tables.reduce(function(Je,Ft){return Je+Ft.rowCount},0),totalTables:we.tables.length},se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),!s.clearTablesBeforeImport)return[3,5];lt=0,kt=T.tables,je.label=2;case 2:return lt<kt.length?k.includes((Ne=kt[lt]).name)?[3,4]:[4,Ne.clear()]:[3,5];case 3:je.sent(),je.label=4;case 4:return lt++,[3,2];case 5:return s.noTransaction?[4,c()]:[3,7];case 6:return je.sent(),[3,9];case 7:return[4,T.transaction("rw",T.tables,c)];case 8:je.sent(),je.label=9;case 9:return Oe.done=!0,se&&ae.ZP.ignoreTransaction(function(){return se(Oe)}),[2]}})})}function H(T,a){return le(this,void 0,void 0,function(){var s,c;return ge(this,function(y){switch(y.label){case 0:s="slice"in T?function vn(T){var a=0,s=function gn(T){var c,E,A,a=Fn.parser(),s=0,y=[],pe=!1,we=!1;return a.onopenobject=function(k){var se={incomplete:!0};c||(c=se),E&&(y.push([A,E,we]),T&&(we?E.push(se):E[A]=se)),E=se,A=k,we=!1,++s},a.onkey=function(k){return A=k},a.onvalue=function(k){return we?E.push(k):E[A]=k},a.oncloseobject=function(){var k;if(delete E.incomplete,A=null,0==--s)pe=!0;else{var se=E;k=y.pop(),A=k[0],E=k[1],we=k[2],T||(we?E.push(se):E[A]=se)}},a.onopenarray=function(){var k=[];k.incomplete=!0,c||(c=k),E&&(y.push([A,E,we]),T&&(we?E.push(k):E[A]=k)),E=k,we=!0,A=null,++s},a.onclosearray=function(){var k;if(delete E.incomplete,A=null,0==--s)pe=!0;else{var se=E;k=y.pop(),A=k[0],E=k[1],we=k[2],T||(we?E.push(se):E[A]=se)}},{write:function(k){return a.write(k),c},done:function(){return pe}}}(!0),c={pullAsync:function(y){return le(this,void 0,void 0,function(){var E,A,pe;return ge(this,function(we){switch(we.label){case 0:return E=T.slice(a,a+y),a+=y,[4,ot(E,"text")];case 1:return A=we.sent(),pe=s.write(A),c.result=pe||{},[2,pe]}})})},pullSync:function(y){var E=T.slice(a,a+y);a+=y;var A=gt(E,"text"),pe=s.write(A);return c.result=pe||{},pe},done:function(){return s.done()},eof:function(){return a>=T.size},result:{}};return c}(T):T,y.label=1;case 1:return s.eof()?[3,3]:[4,s.pullAsync(a)];case 2:return y.sent(),s.result.data&&s.result.data.data?[3,3]:[3,1];case 3:if(!(c=s.result)||"dexie"!=c.formatName)throw new Error("Given file is not a dexie export");if(c.formatVersion>En)throw new Error("Format version ".concat(c.formatVersion," not supported"));if(!c.data)throw new Error("No data in export file");if(!c.data.databaseName)throw new Error("Missing databaseName in export file");if(!c.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!c.data.tables)throw new Error("Missing tables in export file");return[2,s]}})})}ae.ZP.prototype.export=function(T){return function Rn(T,a){return le(this,void 0,void 0,function(){function s(){return le(this,void 0,void 0,function(){var Oe,lt,kt,Ne,je,Je,Ft,Pt,he;return ge(this,function(Pe){switch(Pe.label){case 0:return[4,Promise.all(y.map(function(We){return We.count()}))];case 1:(Oe=Pe.sent()).forEach(function(We,nt){return A[nt].rowCount=We}),se.totalRows=Oe.reduce(function(We,nt){return We+nt}),lt=JSON.stringify(we,void 0,pe?2:void 0),kt=lt.lastIndexOf("]"),Ne=lt.substring(0,kt),E.push(Ne),je=a.filter,Je=a.transform,Ft=function(We){var nt,zt,B,l,F,He,Z,at,Et,Nt;return ge(this,function(Vt){switch(Vt.label){case 0:nt=T.table(We),B=!!(zt=nt.schema.primKey).keyPath,l=a.numRowsPerChunk||2e3,F=JSON.stringify(B?{tableName:nt.name,inbound:!0,rows:[]}:{tableName:nt.name,inbound:!1,rows:[]},void 0,pe?2:void 0),pe&&(F=F.split("\n").join("\n    ")),He=F.lastIndexOf("]"),E.push(F.substring(0,He)),Z=null,at=0,Et=!0,Nt=function(){var yt,St,Mt,tn,Ie,ht,Me,j,L;return ge(this,function(M){switch(M.label){case 0:return k&&ae.ZP.ignoreTransaction(function(){return k(se)}),[4,(yt=null==Z?nt.limit(l):nt.where(":id").above(Z).limit(l)).toArray()];case 1:return 0===(St=M.sent()).length?[2,"break"]:(null!=Z&&at>0&&(E.push(","),pe&&E.push("\n      ")),Et=St.length===l,B?(Mt=je?St.filter(function(q){return je(We,q)}):St,tn=Je?Mt.map(function(q){return Je(We,q).value}):Mt,Ie=tn.map(function(q){return de.encapsulate(q)}),de.mustFinalize()?[4,ae.ZP.waitFor(de.finalize(Ie))]:[3,3]):[3,4]);case 2:M.sent(),M.label=3;case 3:return L=JSON.stringify(Ie,void 0,pe?2:void 0),pe&&(L=L.split("\n").join("\n      ")),E.push(new Blob([L.substring(1,L.length-1)])),at=tn.length,Z=St.length>0?ae.ZP.getByKeyPath(St[St.length-1],zt.keyPath):null,[3,8];case 4:return[4,yt.primaryKeys()];case 5:return ht=M.sent(),Me=ht.map(function(q,X){return[q,St[X]]}),je&&(Me=Me.filter(function(q){return je(We,q[1],q[0])})),Je&&(Me=Me.map(function(q){var ke=Je(We,q[1],q[0]);return[ke.key,ke.value]})),j=Me.map(function(q){return de.encapsulate(q)}),de.mustFinalize()?[4,ae.ZP.waitFor(de.finalize(j))]:[3,7];case 6:M.sent(),M.label=7;case 7:L=JSON.stringify(j,void 0,pe?2:void 0),pe&&(L=L.split("\n").join("\n      ")),E.push(new Blob([L.substring(1,L.length-1)])),at=Me.length,Z=ht.length>0?ht[ht.length-1]:null,M.label=8;case 8:return se.completedRows+=St.length,[2]}})},Vt.label=1;case 1:return Et?[5,Nt()]:[3,3];case 2:return"break"===Vt.sent()?[3,3]:[3,1];case 3:return E.push(F.substr(He)),se.completedTables+=1,se.completedTables<se.totalTables&&E.push(","),[2]}})},Pt=0,he=A,Pe.label=2;case 2:return Pt<he.length?[5,Ft(he[Pt].name)]:[3,5];case 3:Pe.sent(),Pe.label=4;case 4:return Pt++,[3,2];case 5:return E.push(lt.substr(kt)),se.done=!0,k&&ae.ZP.ignoreTransaction(function(){return k(se)}),[2]}})})}var c,y,E,A,pe,we,k,se;return ge(this,function(Oe){switch(Oe.label){case 0:c=(a=a||{}).skipTables?a.skipTables:[],y=T.tables.filter(function(lt){return!c.includes(lt.name)}),E=[],A=y.map(function(lt){return{name:lt.name,schema:it(lt),rowCount:0}}),pe=a.prettyJson,we={formatName:"dexie",formatVersion:1,data:{databaseName:T.name,databaseVersion:T.verno,tables:A,data:[]}},k=a.progressCallback,se={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:A.length},Oe.label=1;case 1:return Oe.trys.push([1,,6,7]),a.noTransaction?[4,s()]:[3,3];case 2:return Oe.sent(),[3,5];case 3:return[4,T.transaction("r",T.tables,s)];case 4:Oe.sent(),Oe.label=5;case 5:return[3,7];case 6:return de.finalize(),[7];case 7:return[2,new Blob(E,{type:"text/json"})]}})})}(this,T)},ae.ZP.prototype.import=function(T,a){return $(this,T,a)},ae.ZP.import=function(T,a){return function Pn(T,a){return le(this,void 0,void 0,function(){var c,y,E;return ge(this,function(A){switch(A.label){case 0:return[4,H(T,(a=a||{}).chunkSizeBytes||1048576)];case 1:return c=A.sent(),(E=new ae.ZP((y=c.result.data).databaseName)).version(y.databaseVersion).stores(function Bt(T){for(var a={},s=0,c=T.tables;s<c.length;s++){var y=c[s];a[y.name]=y.schema}return a}(y)),[4,$(E,c,a)];case 2:return A.sent(),[2,E]}})})}(T,a)};class J extends ae.ZP{examId;exams;templates;alignImages;nonAlignImages;constructor(a){super("correctExam"+a),this.examId=a,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var a=this;return(0,K.Z)(function*(){yield a.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{a.exams.clear(),a.templates.clear(),a.alignImages.clear(),a.nonAlignImages.clear()})})()}removeElementForExam(){var a=this;return(0,K.Z)(function*(){return a.delete()})()}removePageAlignForExam(){var a=this;return(0,K.Z)(function*(){yield a.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{a.exams.delete(a.examId),a.alignImages.where("examId").equals(a.examId).toArray().then(s=>a.alignImages.bulkDelete(s.map(c=>c.id)))})})()}removeElementForExamForPages(a,s){var c=this;return(0,K.Z)(function*(){yield c.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{c.alignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).toArray().then(y=>c.alignImages.bulkDelete(y.map(E=>E.id))),c.nonAlignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).toArray().then(y=>c.nonAlignImages.bulkDelete(y.map(E=>E.id)))})})()}removePageAlignForExamForPage(a){var s=this;return(0,K.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.alignImages.where({examId:s.examId,pageNumber:a}).delete()})})()}removePageNonAlignForExamForPage(a){var s=this;return(0,K.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.nonAlignImages.where({examId:s.examId,pageNumber:a}).delete()})})()}removePageAlignForExamForPages(a,s){var c=this;return(0,K.Z)(function*(){yield c.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{c.alignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).toArray().then(y=>c.alignImages.bulkDelete(y.map(E=>E.id)))})})()}removePageNonAlignForExamForPages(a,s){var c=this;return(0,K.Z)(function*(){yield c.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{c.nonAlignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).toArray().then(y=>c.nonAlignImages.bulkDelete(y.map(E=>E.id)))})})()}removeExam(){var a=this;return(0,K.Z)(function*(){yield a.transaction("rw","exams",()=>{a.exams.delete(a.examId)})})()}addAligneImage(a){var s=this;return(0,K.Z)(function*(){yield s.alignImages.put(a)})()}addNonAligneImage(a){var s=this;return(0,K.Z)(function*(){yield s.nonAlignImages.put(a)})()}addNonAligneImages(a){var s=this;return(0,K.Z)(function*(){yield s.nonAlignImages.bulkAdd(a)})()}export(a){return super.export(a)}import(a,s){return super.import(a,s)}countPageTemplate(){var a=this;return(0,K.Z)(function*(){return yield a.templates.where("examId").equals(a.examId).count()})()}countAlignImage(){var a=this;return(0,K.Z)(function*(){return yield a.alignImages.where("examId").equals(a.examId).count()})()}countNonAlignImage(){var a=this;return(0,K.Z)(function*(){return yield a.nonAlignImages.where("examId").equals(a.examId).count()})()}getFirstNonAlignImage(a){var s=this;return(0,K.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId,pageNumber:a}).first()})()}getFirstAlignImage(a){var s=this;return(0,K.Z)(function*(){return yield s.alignImages.where({examId:s.examId,pageNumber:a}).first()})()}getFirstTemplate(a){var s=this;return(0,K.Z)(function*(){return yield s.templates.where({examId:s.examId,pageNumber:a}).first()})()}getAllTemplate(){var a=this;return(0,K.Z)(function*(){return yield a.templates.where({examId:a.examId}).sortBy("pageNumber")})()}getNonAlignImageBetweenAndSortByPageNumber(a,s){var c=this;return(0,K.Z)(function*(){return yield c.nonAlignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(a,s){var c=this;return(0,K.Z)(function*(){return yield c.alignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!0,!0).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(a){var s=this;return(0,K.Z)(function*(){return yield s.nonAlignImages.where(["examId","pageNumber"]).anyOf(a.map(c=>[s.examId,c])).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(a){var s=this;return(0,K.Z)(function*(){return yield s.alignImages.where(["examId","pageNumber"]).anyOf(a.map(c=>[s.examId,c])).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var a=this;return(0,K.Z)(function*(){return yield a.nonAlignImages.where({examId:a.examId}).sortBy("pageNumber")})()}moveNonAlignPages(a,s){var c=this;return(0,K.Z)(function*(){a!==s&&(yield c.nonAlignImages.where({examId:c.examId,pageNumber:a}).modify(y=>{y.pageNumber=-1e3}),a<s?yield c.nonAlignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!1,!0).modify(y=>{y.pageNumber=y.pageNumber-1}):yield c.nonAlignImages.where(["examId","pageNumber"]).between([c.examId,s],[c.examId,a],!0,!1).modify(y=>{y.pageNumber=y.pageNumber+1}),yield c.nonAlignImages.where({examId:c.examId,pageNumber:-1e3}).modify(y=>{y.pageNumber=s}))})()}moveAlignPages(a,s){var c=this;return(0,K.Z)(function*(){a!==s&&(yield c.alignImages.where({examId:c.examId,pageNumber:a}).modify(y=>{y.pageNumber=-1e3}),a<s?yield c.alignImages.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!1,!0).modify(y=>{y.pageNumber=y.pageNumber-1}):yield c.alignImages.where(["examId","pageNumber"]).between([c.examId,s],[c.examId,a],!0,!1).modify(y=>{y.pageNumber=y.pageNumber+1}),yield c.alignImages.where({examId:c.examId,pageNumber:-1e3}).modify(y=>{y.pageNumber=s}))})()}compareNumbers(a,s){return a-s}removePageAlignForExamForPagesAndReorder(a){var s=this;return(0,K.Z)(function*(){const c=yield s.alignImages.where("examId").equals(s.examId).count();yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",(0,K.Z)(function*(){const E=yield s.alignImages.where(["examId","pageNumber"]).anyOf(a.map(A=>[s.examId,A])).toArray();yield s.alignImages.bulkDelete(E.map(A=>A.id)),console.error("delete all image")})),console.error("start of moving");const y=a.sort(s.compareNumbers);for(let E=0;E<a.length;E++){let A=c,pe=!0;E<y.length-1&&(A=y[E+1],pe=!1);const we=y[E];we!==A&&(yield s.alignImages.where(["examId","pageNumber"]).between([s.examId,we],[s.examId,A],!1,pe).modify(k=>{k.pageNumber=k.pageNumber-(E+1)}))}})()}removePageNonAlignForExamForPagesAndReorder(a){var s=this;return(0,K.Z)(function*(){const c=yield s.nonAlignImages.where("examId").equals(s.examId).count();yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",(0,K.Z)(function*(){const E=yield s.nonAlignImages.where(["examId","pageNumber"]).anyOf(a.map(A=>[s.examId,A])).toArray();yield s.nonAlignImages.bulkDelete(E.map(A=>A.id))}));const y=a.sort(s.compareNumbers);for(let E=0;E<a.length;E++){let A=c,pe=!0;E<y.length-1&&(A=y[E+1],pe=!1);const we=y[E];we!==A&&(yield s.nonAlignImages.where(["examId","pageNumber"]).between([s.examId,we],[s.examId,A],!1,pe).modify(k=>{k.pageNumber=k.pageNumber-(E+1)}))}})()}moveTemplatePages(a,s){var c=this;return(0,K.Z)(function*(){a!==s&&(yield c.templates.where({examId:c.examId,pageNumber:a}).modify(y=>{y.pageNumber=-1e3}),a<s?yield c.templates.where(["examId","pageNumber"]).between([c.examId,a],[c.examId,s],!1,!0).modify(y=>{y.pageNumber=y.pageNumber-1}):yield c.templates.where(["examId","pageNumber"]).between([c.examId,s],[c.examId,a],!0,!1).modify(y=>{y.pageNumber=y.pageNumber+1}),yield c.templates.where({examId:c.examId,pageNumber:-1e3}).modify(y=>{y.pageNumber=s}))})()}removePageTemplateForExamForPage(a){var s=this;return(0,K.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.templates.where({examId:s.examId,pageNumber:a}).delete()})})()}getAlignSortByPageNumber(){var a=this;return(0,K.Z)(function*(){return yield a.alignImages.where({examId:a.examId}).sortBy("pageNumber")})()}addExam(){var a=this;return(0,K.Z)(function*(){return yield a.exams.add({id:a.examId})})()}addTemplate(a){var s=this;return(0,K.Z)(function*(){return yield s.templates.add({examId:s.examId,pageNumber:a.pageNumber,value:a.value})})()}countNonAlignWithPageNumber(a){var s=this;return(0,K.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId,pageNumber:a}).count()})()}countAlignWithPageNumber(a){var s=this;return(0,K.Z)(function*(){return yield s.alignImages.where({examId:s.examId,pageNumber:a}).count()})()}}class Ee{dbs=new Map;resetDatabase(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.resetDatabase()})()}removeExam(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.removeExam()})()}removeElementForExam(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),s.dbs.delete(a),c.removeElementForExam()})()}removeElementForExamForPages(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.removeElementForExamForPages(s,c)})()}removePageAlignForExam(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.removePageAlignForExam()})()}removePageAlignForExamForPage(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.removePageAlignForExamForPage(s)})()}removePageNonAlignForExamForPage(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.removePageNonAlignForExamForPage(s)})()}removePageAlignForExamForPages(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.removePageAlignForExamForPages(s,c)})()}removePageNonAlignForExamForPages(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.removePageNonAlignForExamForPages(s,c)})()}addAligneImage(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a.examId);return void 0===c&&(c=new J(a.examId),s.dbs.set(a.examId,c)),c.addAligneImage(a)})()}addNonAligneImage(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a.examId);return void 0===c&&(c=new J(a.examId),s.dbs.set(a.examId,c)),c.addNonAligneImage(a)})()}addNonAligneImages(a){var s=this;return(0,K.Z)(function*(){if(a.length>0){let c=s.dbs.get(a[0].examId);return void 0===c&&(c=new J(a[0].examId),s.dbs.set(a[0].examId,c)),c.addNonAligneImages(a)}})()}export(a,s){let c=this.dbs.get(a);return void 0===c&&(c=new J(a),this.dbs.set(a,c)),c.export(s)}import(a,s,c){let y=this.dbs.get(a);return void 0===y&&(y=new J(a),this.dbs.set(a,y)),y.import(s,c)}countPageTemplate(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.countPageTemplate()})()}countAlignImage(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.countAlignImage()})()}countNonAlignImage(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.countNonAlignImage()})()}getFirstNonAlignImage(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.getFirstNonAlignImage(s)})()}getFirstAlignImage(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.getFirstAlignImage(s)})()}getFirstTemplate(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.getFirstTemplate(s)})()}getAllTemplate(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.getAllTemplate()})()}getNonAlignImageBetweenAndSortByPageNumber(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.getNonAlignImageBetweenAndSortByPageNumber(s,c)})()}getAlignImageBetweenAndSortByPageNumber(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.getAlignImageBetweenAndSortByPageNumber(s,c)})()}getNonAlignImagesForPageNumbers(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.getNonAlignImagesForPageNumbers(s)})()}getAlignImagesForPageNumbers(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.getAlignImagesForPageNumbers(s)})()}getNonAlignSortByPageNumber(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.getAlignSortByPageNumber()})()}addExam(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a);return void 0===c&&(c=new J(a),s.dbs.set(a,c)),c.addExam()})()}addTemplate(a){var s=this;return(0,K.Z)(function*(){let c=s.dbs.get(a.examId);return void 0===c&&(c=new J(a.examId),s.dbs.set(a.examId,c)),c.addTemplate(a)})()}countNonAlignWithPageNumber(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.countNonAlignWithPageNumber(s)})()}countAlignWithPageNumber(a,s){var c=this;return(0,K.Z)(function*(){let y=c.dbs.get(a);return void 0===y&&(y=new J(a),c.dbs.set(a,y)),y.countAlignWithPageNumber(s)})()}moveNonAlignPages(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.moveNonAlignPages(s,c)})()}moveAlignPages(a,s,c){var y=this;return(0,K.Z)(function*(){let E=y.dbs.get(a);return void 0===E&&(E=new J(a),y.dbs.set(a,E)),E.moveAlignPages(s,c)})()}removePageAlignForExamForPagesAndReorder(a,s){let c=this.dbs.get(a);return void 0===c&&(c=new J(a),this.dbs.set(a,c)),c.removePageAlignForExamForPagesAndReorder(s)}removePageNonAlignForExamForPagesAndReorder(a,s){let c=this.dbs.get(a);return void 0===c&&(c=new J(a),this.dbs.set(a,c)),c.removePageNonAlignForExamForPagesAndReorder(s)}moveTemplatePages(a,s,c){let y=this.dbs.get(a);return void 0===y&&(y=new J(a),this.dbs.set(a,y)),y.moveTemplatePages(s,c)}removePageTemplateForExamForPage(a,s){let c=this.dbs.get(a);return void 0===c&&(c=new J(a),this.dbs.set(a,c)),c.removePageTemplateForExamForPage(s)}}new Ee},3667:function(Ye){Ye.exports=function(){"use strict";var Ke=function(e,t){return(Ke=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},V=function(){return(V=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function K(e,t,n){if(n||2===arguments.length)for(var r,i=0,u=t.length;i<u;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var ae=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ye=Object.keys,le=Array.isArray;function ge(e,t){return"object"!=typeof t||ye(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||ae.Promise||(ae.Promise=Promise);var it=Object.getPrototypeOf,Bt={}.hasOwnProperty;function ot(e,t){return Bt.call(e,t)}function gt(e,t){"function"==typeof t&&(t=t(it(e))),(typeof Reflect>"u"?ye:Reflect.ownKeys)(t).forEach(function(n){bt(e,n,t[n])})}var Gt=Object.defineProperty;function bt(e,t,n,r){Gt(e,t,ge(n&&ot(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Se(e){return{from:function(t){return e.prototype=Object.create(t.prototype),bt(e.prototype,"constructor",e),{extend:gt.bind(null,e.prototype)}}}}var fn=Object.getOwnPropertyDescriptor,Ue=[].slice;function et(e,t,n){return Ue.call(e,t,n)}function en(e,t){return t(e)}function pt(e){if(!e)throw new Error("Assertion Failed")}function jt(e){ae.setImmediate?setImmediate(e):setTimeout(e,0)}function ft(e,t){if("string"==typeof t&&ot(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var u=ft(e,t[r]);n.push(u)}return n}var h=t.indexOf(".");if(-1!==h){var p=e[t.substr(0,h)];return null==p?void 0:ft(p,t.substr(h+1))}}function It(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){pt("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)It(e,t[r],n[r])}else{var u,h,p=t.indexOf(".");-1!==p?(u=t.substr(0,p),""===(h=t.substr(p+1))?void 0===n?le(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n:It(p=(p=e[u])&&ot(e,u)?p:e[u]={},h,n)):void 0===n?le(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function xt(e){var t,n={};for(t in e)ot(e,t)&&(n[t]=e[t]);return n}var de=[].concat;function At(e){return de.apply([],e)}var fe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(At([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return ae[e]}),Ut=new Set(fe.map(function(e){return ae[e]})),Yt=null;function Rt(e){return Yt=new WeakMap,e=function t(n){if(!n||"object"!=typeof n)return n;var r=Yt.get(n);if(r)return r;if(le(n)){Yt.set(n,r=[]);for(var i=0,u=n.length;i<u;++i)r.push(t(n[i]))}else if(Ut.has(n.constructor))r=n;else{var h,p=it(n);for(h in r=p===Object.prototype?{}:Object.create(p),Yt.set(n,r),n)ot(n,h)&&(r[h]=t(n[h]))}return r}(e),Yt=null,e}var Rn={}.toString;function En(e){return Rn.call(e).slice(8,-1)}var kn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Fn="symbol"==typeof kn?function(e){var t;return null!=e&&(t=e[kn])&&t.apply(e)}:function(){return null};function vn(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var gn={};function an(e){var t,n,r,i;if(1===arguments.length){if(le(e))return e.slice();if(this===gn&&"string"==typeof e)return[e];if(i=Fn(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Pn=typeof Symbol<"u"?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},_n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Je=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),ue={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function $(e,t){this.name=e,this.message=t}function H(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join("\n")}function xe(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=H(e,t)}function J(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=H(e,this.failures)}Se($).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Se(xe).from($),Se(J).from($);var Ee=_n.reduce(function(e,t){return e[t]=t+"Error",e},{}),Tt=$,T=_n.reduce(function(e,t){var n=t+"Error";function r(i,u){this.name=n,i?"string"==typeof i?(this.message="".concat(i).concat(u?"\n "+u:""),this.inner=u||null):"object"==typeof i&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=ue[t]||n,this.inner=null)}return Se(r).from(Tt),e[t]=r,e},{});T.Syntax=SyntaxError,T.Type=TypeError,T.Range=RangeError;var a=Je.reduce(function(e,t){return e[t+"Error"]=T[t],e},{}),s=_n.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=T[t]),e},{});function c(){}function y(e){return e}function E(e,t){return null==e||e===y?t:function(n){return t(e(n))}}function A(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function pe(e,t){return e===c?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?A(r,this.onsuccess):r),i&&(this.onerror=this.onerror?A(i,this.onerror):i),void 0!==u?u:n}}function we(e,t){return e===c?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?A(n,this.onsuccess):n),r&&(this.onerror=this.onerror?A(r,this.onerror):r)}}function k(e,t){return e===c?t:function(n){var r=e.apply(this,arguments);ge(n,r);var i=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?A(i,this.onsuccess):i),u&&(this.onerror=this.onerror?A(u,this.onerror):u),void 0===r?void 0===n?void 0:n:ge(r,n)}}function se(e,t){return e===c?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function Oe(e,t){return e===c?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return n.then(function(){return t.apply(r,u)})}return t.apply(this,arguments)}}s.ModifyError=xe,s.DexieError=$,s.BulkError=J;var lt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function kt(e){lt=e}var Je,Ne={},je=100,Ft=(_n=(_n=(fe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,it(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,it(t),e]}())[1])&&_n.then,(Je=fe[0])&&Je.constructor),Pt=!!(fe=fe[2]),he=function(e,t){G.push([e,t]),Pe&&(queueMicrotask(St),Pe=!1)},Wt=!0,Pe=!0,We=[],nt=[],zt=y,B={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:c,pgp:!1,env:{},finalize:c},l=B,G=[],F=0,He=[];function Z(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=l;if("function"!=typeof e){if(e!==Ne)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Nt(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(u){if(null===r._state){if(u===r)throw new TypeError("A promise cannot be resolved with itself.");var h=r._lib&&Mt();u&&"function"==typeof u.then?n(r,function(p,w){u instanceof Z?u._then(p,w):u.then(p,w)}):(r._state=!0,r._value=u,nn(r)),h&&tn()}},Nt.bind(null,r))}catch(u){Nt(r,u)}}(this,e)}var at={get:function(){var e=l,t=X;function n(r,i){var u=this,h=!e.global&&(e!==l||t!==X),p=h&&!me(),w=new Z(function(g,P){Vt(u,new Et(bn(r,e,h,p),bn(i,e,h,p),g,P,e))});return this._consoleTask&&(w._consoleTask=this._consoleTask),w}return n.prototype=Ne,n},set:function(e){bt(this,"then",e&&e.prototype===Ne?at:{get:function(){return e},set:at.set})}};function Et(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Nt(e,t){var n,r;nt.push(t),null===e._state&&(n=e._lib&&Mt(),t=zt(t),e._state=!1,e._value=t,r=e,We.some(function(i){return i._value===r._value})||We.push(r),nn(e),n&&tn())}function nn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Vt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===F&&(++F,he(function(){0==--F&&Ie()},[]))}function Vt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++F,he(yt,[n,e,t])}else e._listeners.push(t)}function yt(e,t,n){try{var r,i=t._value;!t._state&&nt.length&&(nt=[]),r=lt&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==nt.indexOf(i)||function(u){for(var h=We.length;h;)if(We[--h]._value===u._value)return We.splice(h,1)}(t),n.resolve(r)}catch(u){n.reject(u)}finally{0==--F&&Ie(),--n.psd.ref||n.psd.finalize()}}function St(){Jt(B,function(){Mt()&&tn()})}function Mt(){var e=Wt;return Pe=Wt=!1,e}function tn(){var e,t,n;do{for(;0<G.length;)for(e=G,G=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<G.length);Pe=Wt=!0}function Ie(){var e=We;We=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=He.slice(0),n=t.length;n;)t[--n]()}function ht(e){return new Z(Ne,!1,e)}function Me(e,t){var n=l;return function(){var r=Mt(),i=l;try{return Dt(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{Dt(i,!1),r&&tn()}}}gt(Z.prototype,{then:at,_then:function(e,t){Vt(this,new Et(null,null,e,t,l))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return this.then(null,"function"==typeof t?function(r){return(r instanceof t?n:ht)(r)}:function(r){return(r&&r.name===t?n:ht)(r)})},finally:function(e){return this.then(function(t){return Z.resolve(e()).then(function(){return t})},function(t){return Z.resolve(e()).then(function(){return ht(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Z(function(r,i){var u=setTimeout(function(){return i(new T.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&bt(Z.prototype,Symbol.toStringTag,"Dexie.Promise"),B.env=mn(),gt(Z,{all:function(){var e=an.apply(null,arguments).map(Kt);return new Z(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,u){return Z.resolve(i).then(function(h){e[u]=h,--r||t(e)},n)})})},resolve:function(e){return e instanceof Z?e:e&&"function"==typeof e.then?new Z(function(t,n){e.then(t,n)}):new Z(Ne,!0,e)},reject:ht,race:function(){var e=an.apply(null,arguments).map(Kt);return new Z(function(t,n){e.map(function(r){return Z.resolve(r).then(t,n)})})},PSD:{get:function(){return l},set:function(e){return l=e}},totalEchoes:{get:function(){return X}},newPSD:ke,usePSD:Jt,scheduler:{get:function(){return he},set:function(e){he=e}},rejectionMapper:{get:function(){return zt},set:function(e){zt=e}},follow:function(e,t){return new Z(function(n,r){return ke(function(i,u){var h=l;h.unhandleds=[],h.onunhandled=u,h.finalize=A(function(){var p,w=this;p=function(){0===w.unhandleds.length?i():u(w.unhandleds[0])},He.push(function g(){p(),He.splice(He.indexOf(g),1)}),++F,he(function(){0==--F&&Ie()},[])},h.finalize),e()},t,n,r)})}}),Ft&&(Ft.allSettled&&bt(Z,"allSettled",function(){var e=an.apply(null,arguments).map(Kt);return new Z(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,u){return Z.resolve(i).then(function(h){return r[u]={status:"fulfilled",value:h}},function(h){return r[u]={status:"rejected",reason:h}}).then(function(){return--n||t(r)})})})}),Ft.any&&typeof AggregateError<"u"&&bt(Z,"any",function(){var e=an.apply(null,arguments).map(Kt);return new Z(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(u,h){return Z.resolve(u).then(function(p){return t(p)},function(p){i[h]=p,--r||n(new AggregateError(i))})})})}));var j={awaits:0,echoes:0,id:0},L=0,M=[],q=0,X=0,qe=0;function ke(e,t,n,r){var i=l,u=Object.create(i);return u.parent=i,u.ref=0,u.global=!1,u.id=++qe,u.env=Pt?{Promise:Z,PromiseProp:{value:Z,configurable:!0,writable:!0},all:Z.all,race:Z.race,allSettled:Z.allSettled,any:Z.any,resolve:Z.resolve,reject:Z.reject}:{},t&&ge(u,t),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Jt(u,e,n,r),0===u.ref&&u.finalize(),r}function De(){return j.id||(j.id=++L),++j.awaits,j.echoes+=je,j.id}function me(){return!!j.awaits&&(0==--j.awaits&&(j.id=0),j.echoes=j.awaits*je,!0)}function Kt(e){return j.echoes&&e&&e.constructor===Ft?(De(),e.then(function(t){return me(),t},function(t){return me(),ut(t)})):e}function un(){var e=M[M.length-1];M.pop(),Dt(e,!1)}function Dt(e,t){var n,r=l;(t?!j.echoes||q++&&e===l:!q||--q&&e===l)||queueMicrotask(t?function(i){++X,j.echoes&&0!=--j.echoes||(j.echoes=j.awaits=j.id=0),M.push(l),Dt(i,!0)}.bind(null,e):un),e!==l&&(l=e,r===B&&(B.env=mn()),Pt&&(n=B.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(ae,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function mn(){var e=ae.Promise;return Pt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(ae,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Jt(e,t,n,r,i){var u=l;try{return Dt(e,!0),t(n,r,i)}finally{Dt(u,!1)}}function bn(e,t,n,r){return"function"!=typeof e?e:function(){var i=l;n&&De(),Dt(t,!0);try{return e.apply(this,arguments)}finally{Dt(i,!1),r&&queueMicrotask(me)}}}function rn(e){Promise===Ft&&0===j.echoes?0===q?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+_n).indexOf("[native code]")&&(De=me=c);var ut=Z.reject,$e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",st="String expected.",tt=[],Ot="__dbnames",ve="readonly",d="readwrite";function o(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var f={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function v(e){return"string"!=typeof e||/\./.test(e)?function(t){return t}:function(t){return void 0===t[e]&&e in t&&delete(t=Rt(t))[e],t}}function O(){throw T.Type()}function U(e,t){try{var n=ne(e),r=ne(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,u){for(var h=i.length,p=u.length,w=h<p?h:p,g=0;g<w;++g)if(i[g]!==u[g])return i[g]<u[g]?-1:1;return h===p?0:h<p?-1:1}(be(e),be(t));case"Array":return function(i,u){for(var h=i.length,p=u.length,w=h<p?h:p,g=0;g<w;++g){var P=U(i[g],u[g]);if(0!==P)return P}return h===p?0:h<p?-1:1}(e,t)}}catch{}return NaN}function ne(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=En(e))?"binary":e}function be(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var ce=(oe.prototype._trans=function(e,t,n){var r=this._tx||l.trans,i=this.name,u=lt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function h(g,P,m){if(!m.schema[i])throw new T.NotFound("Table "+i+" not part of transaction");return t(m.idbtrans,m)}var p=Mt();try{var w=r&&r.db._novip===this.db._novip?r===l.trans?r._promise(e,h,n):ke(function(){return r._promise(e,h,n)},{trans:r,transless:l.transless||l}):function g(P,m,S,b){if(P.idbdb&&(P._state.openComplete||l.letThrough||P._vip)){var x=P._createTransaction(m,S,P._dbSchema);try{x.create(),P._state.PR1398_maxLoop=3}catch(I){return I.name===Ee.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return g(P,m,S,b)})):ut(I)}return x._promise(m,function(I,_){return ke(function(){return l.trans=x,b(I,_,x)})}).then(function(I){if("readwrite"===m)try{x.idbtrans.commit()}catch{}return"readonly"===m?I:x._completion.then(function(){return I})})}if(P._state.openComplete)return ut(new T.DatabaseClosed(P._state.dbOpenError));if(!P._state.isBeingOpened){if(!P._state.autoOpen)return ut(new T.DatabaseClosed);P.open().catch(c)}return P._state.dbReadyPromise.then(function(){return g(P,m,S,b)})}(this.db,e,[this.name],h);return u&&(w._consoleTask=u,w=w.catch(function(g){return console.trace(g),ut(g)})),w}finally{p&&tn()}},oe.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?ut(new T.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},oe.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(le(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=ye(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&t.every(function(P){return 0<=w.keyPath.indexOf(P)})){for(var g=0;g<t.length;++g)if(-1===t.indexOf(w.keyPath[g]))return!1;return!0}return!1}).sort(function(w,g){return w.keyPath.length-g.keyPath.length})[0];if(n&&"\uffff"!==this.db._maxKey){var h=n.keyPath.slice(0,t.length);return this.where(h).equals(h.map(function(g){return e[g]}))}!n&&lt&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName,i=this.db._deps.indexedDB;function u(w,g){return 0===i.cmp(w,g)}h=(p=t.reduce(function(S,g){var P=S[0],m=S[1],b=(S=r[g],e[g]);return[P||S,P||!S?o(m,S&&S.multi?function(x){return x=ft(x,g),le(x)&&x.some(function(I){return u(b,I)})}:function(x){return u(b,ft(x,g))}):m]},[null,null]))[0];var p=p[1];return h?this.where(h.name).equals(e[h.keyPath]).filter(p):n?this.filter(p):this.where(t).equals("")},oe.prototype.filter=function(e){return this.toCollection().and(e)},oe.prototype.count=function(e){return this.toCollection().count(e)},oe.prototype.offset=function(e){return this.toCollection().offset(e)},oe.prototype.limit=function(e){return this.toCollection().limit(e)},oe.prototype.each=function(e){return this.toCollection().each(e)},oe.prototype.toArray=function(e){return this.toCollection().toArray(e)},oe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},oe.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,le(e)?"[".concat(e.join("+"),"]"):e))},oe.prototype.reverse=function(){return this.toCollection().reverse()},oe.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return null!==t&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof O&&(function(w,g){if("function"!=typeof g&&null!==g)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function P(){this.constructor=w}Ke(w,g),w.prototype=null===g?Object.create(g):(P.prototype=g.prototype,new P)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var u=new Set,h=e.prototype;h;h=it(h))Object.getOwnPropertyNames(h).forEach(function(w){return u.add(w)});function p(w){if(!w)return w;var g,P=Object.create(e.prototype);for(g in w)if(!u.has(g))try{P[g]=w[g]}catch{}return P}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=p,this.hook("reading",p),e},oe.prototype.defineClass=function(){return this.mapToClass(function(e){ge(this,e)})},oe.prototype.add=function(e,t){var n=this,r=this.schema.primKey,u=r.keyPath,h=e;return u&&r.auto&&(h=v(u)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"add",keys:null!=t?[t]:null,values:[h]})}).then(function(p){return p.numFailures?Z.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{It(e,u,p)}catch{}return p})},oe.prototype.update=function(e,t){return"object"!=typeof e||le(e)?this.where(":id").equals(e).modify(t):void 0===(e=ft(e,this.schema.primKey.keyPath))?ut(new T.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},oe.prototype.put=function(e,t){var n=this,r=this.schema.primKey,u=r.keyPath,h=e;return u&&r.auto&&(h=v(u)(e)),this._trans("readwrite",function(p){return n.core.mutate({trans:p,type:"put",values:[h],keys:null!=t?[t]:null})}).then(function(p){return p.numFailures?Z.reject(p.failures[0]):p.lastResult}).then(function(p){if(u)try{It(e,u,p)}catch{}return p})},oe.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?Z.reject(n.failures[0]):void 0})},oe.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:f})}).then(function(t){return t.numFailures?Z.reject(t.failures[0]):void 0})},oe.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},oe.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,u=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var p=(g=r.schema.primKey).auto;if((g=g.keyPath)&&i)throw new T.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,g=g&&p?e.map(v(g)):e;return r.core.mutate({trans:h,type:"add",keys:i,values:g,wantResults:u}).then(function(x){var m=x.numFailures,S=x.results,b=x.lastResult;if(x=x.failures,0===m)return u?S:b;throw new J("".concat(r.name,".bulkAdd(): ").concat(m," of ").concat(w," operations failed"),x)})})},oe.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,u=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(h){var p=(g=r.schema.primKey).auto;if((g=g.keyPath)&&i)throw new T.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new T.InvalidArgument("Arguments objects and keys must have the same length");var w=e.length,g=g&&p?e.map(v(g)):e;return r.core.mutate({trans:h,type:"put",keys:i,values:g,wantResults:u}).then(function(x){var m=x.numFailures,S=x.results,b=x.lastResult;if(x=x.failures,0===m)return u?S:b;throw new J("".concat(r.name,".bulkPut(): ").concat(m," of ").concat(w," operations failed"),x)})})},oe.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(h){return h.key}),i=e.map(function(h){return h.changes}),u=[];return this._trans("readwrite",function(h){return n.getMany({trans:h,keys:r,cache:"clone"}).then(function(p){var w=[],g=[];e.forEach(function(m,S){var b=m.key,x=m.changes,I=p[S];if(I){for(var _=0,N=Object.keys(x);_<N.length;_++){var C=N[_],R=x[C];if(C===t.schema.primKey.keyPath){if(0!==U(R,b))throw new T.Constraint("Cannot update primary key in bulkUpdate()")}else It(I,C,R)}u.push(S),w.push(b),g.push(I)}});var P=w.length;return n.mutate({trans:h,type:"put",keys:w,values:g,updates:{keys:r,changeSpecs:i}}).then(function(m){var S=m.numFailures,b=m.failures;if(0===S)return P;for(var x=0,I=Object.keys(b);x<I.length;x++){var _,N=I[x],C=u[Number(N)];null!=C&&(_=b[N],delete b[N],b[C]=_)}throw new J("".concat(t.name,".bulkUpdate(): ").concat(S," of ").concat(P," operations failed"),b)})})})},oe.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e})}).then(function(h){var i=h.numFailures,u=h.lastResult;if(h=h.failures,0===i)return u;throw new J("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),h)})},oe);function oe(){}function Ce(e){function t(h,p){if(p){for(var w=arguments.length,g=new Array(w-1);--w;)g[w-1]=arguments[w];return n[h].subscribe.apply(null,g),e}if("string"==typeof h)return n[h]}var n={};t.addEventType=u;for(var r=1,i=arguments.length;r<i;++r)u(arguments[r]);return t;function u(h,p,w){if("object"!=typeof h){var g;p=p||se;var P={subscribers:[],fire:w=w||c,subscribe:function(m){-1===P.subscribers.indexOf(m)&&(P.subscribers.push(m),P.fire=p(P.fire,m))},unsubscribe:function(m){P.subscribers=P.subscribers.filter(function(S){return S!==m}),P.fire=P.subscribers.reduce(p,w)}};return n[h]=t[h]=P}ye(g=h).forEach(function(m){var S=g[m];if(le(S))u(m,g[m][0],g[m][1]);else{if("asap"!==S)throw new T.InvalidArgument("Invalid event config");var b=u(m,y,function(){for(var x=arguments.length,I=new Array(x);x--;)I[x]=arguments[x];b.subscribers.forEach(function(_){jt(function(){_.apply(null,I)})})})}})}}function Re(e,t){return Se(t).from({prototype:e}),t}function Qe(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Xe(e,t){e.filter=o(e.filter,t)}function ze(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return o(r(),t())}:t,e.justLimit=n&&!r}function dt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new T.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function vt(e,t,n){var r=dt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Te(e,t,n,r){var i=e.replayFilter?o(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},h=function(p,w,g){var P,m;i&&!i(w,g,function(S){return w.stop(S)},function(S){return w.fail(S)})||("[object ArrayBuffer]"==(m=""+(P=w.primaryKey))&&(m=""+new Uint8Array(P)),ot(u,m)||(u[m]=!0,t(p,w,g)))};return Promise.all([e.or._iterate(h,n),$t(vt(e,r,n),e.algorithm,h,!e.keysOnly&&e.valueMapper)])}return $t(vt(e,r,n),o(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function $t(e,t,n,r){var i=Me(r?function(u,h,p){return n(r(u),h,p)}:n);return e.then(function(u){if(u)return u.start(function(){var h=function(){return u.continue()};t&&!t(u,function(p){return h=p},function(p){u.stop(p),h=c},function(p){u.fail(p),h=c})||i(u.value,u,function(p){return h=p}),h()})})}fe=Symbol();var Q=(Ae.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(le(t))return K(K([],le(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch{return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(le(n))return le(e)?e.filter(function(r){return!n.includes(r)}).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch{return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Ae);function Ae(e){Object.assign(this,e)}var _e=(ee.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ut.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ee.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ut.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ee.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=o(t.algorithm,e)},ee.prototype._iterate=function(e,t){return Te(this._ctx,e,t,this._ctx.table.core)},ee.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&ge(n,e),t._ctx=n,t},ee.prototype.raw=function(){return this._ctx.valueMapper=null,this},ee.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Te(t,e,n,t.table.core)})},ee.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(Qe(r,!0))return i.count({trans:n,query:{index:dt(r,i.schema),range:r.range}}).then(function(h){return Math.min(h,r.limit)});var u=0;return Te(r,function(){return++u,!1},n,i).then(function(){return u})}).then(e)},ee.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function u(w,g){return g?u(w[n[g]],g-1):w[r]}var h="next"===this._ctx.dir?1:-1;function p(w,g){return(w=u(w,i))<(g=u(g,i))?-h:g<w?h:0}return this.toArray(function(w){return w.sort(p)}).then(t)},ee.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if("next"===r.dir&&Qe(r,!0)&&0<r.limit){var i=r.valueMapper,u=dt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:u,range:r.range}}).then(function(p){return p=p.result,i?p.map(i):p})}var h=[];return Te(r,function(p){return h.push(p)},n,r.table.core).then(function(){return h})},e)},ee.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,Qe(t)?ze(t,function(){var n=e;return function(r,i){return 0===n||(1===n?--n:i(function(){r.advance(n),n=0}),!1)}}):ze(t,function(){var n=e;return function(){return--n<0}})),this},ee.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ze(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},ee.prototype.until=function(e,t){return Xe(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},ee.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ee.prototype.last=function(e){return this.reverse().first(e)},ee.prototype.filter=function(e){var t;return Xe(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=o(t.isMatch,e),this},ee.prototype.and=function(e){return this.filter(e)},ee.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ee.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ee.prototype.desc=function(){return this.reverse()},ee.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ee.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ee.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ee.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},ee.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&Qe(t,!0)&&0<t.limit)return this._read(function(r){var i=dt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},ee.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ee.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ee.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ee.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return Xe(this._ctx,function(i){var r=i.primaryKey.toString();return i=ot(t,r),t[r]=!0,!i}),this},ee.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,u,h;function p(_,R){var C=R.failures;x+=_-(R=R.numFailures);for(var D=0,W=ye(C);D<W.length;D++)b.push(C[W[D]])}h="function"==typeof e?e:(i=ye(e),u=i.length,function(_){for(var N=!1,C=0;C<u;++C){var R=i[C],D=e[R],W=ft(_,R);D instanceof Q?(It(_,R,D.execute(W)),N=!0):W!==D&&(It(_,R,D),N=!0)}return N});var w=n.table.core,g=w.schema.primaryKey,P=g.outbound,m=g.extractKey,S=t.db._options.modifyChunkSize||200,b=[],x=0,I=[];return t.clone().primaryKeys().then(function(_){var C=Qe(n)&&n.limit===1/0&&("function"!=typeof e||e===Le)&&{index:n.index,range:n.range};return function N(R){var D=Math.min(S,_.length-R);return w.getMany({trans:r,keys:_.slice(R,R+D),cache:"immutable"}).then(function(W){for(var re=[],z=[],te=P?[]:null,ie=[],Y=0;Y<D;++Y){var Be=W[Y],Fe={value:Rt(Be),primKey:_[R+Y]};!1!==h.call(Fe,Fe.value,Fe)&&(null==Fe.value?ie.push(_[R+Y]):P||0===U(m(Be),m(Fe.value))?(z.push(Fe.value),P&&te.push(_[R+Y])):(ie.push(_[R+Y]),re.push(Fe.value)))}return Promise.resolve(0<re.length&&w.mutate({trans:r,type:"add",values:re}).then(function(Ge){for(var Ze in Ge.failures)ie.splice(parseInt(Ze),1);p(re.length,Ge)})).then(function(){return(0<z.length||C&&"object"==typeof e)&&w.mutate({trans:r,type:"put",keys:te,values:z,criteria:C,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<R}).then(function(Ge){return p(z.length,Ge)})}).then(function(){return(0<ie.length||C&&e===Le)&&w.mutate({trans:r,type:"delete",keys:ie,criteria:C,isAdditionalChunk:0<R}).then(function(Ge){return p(ie.length,Ge)})}).then(function(){return _.length>R+D&&N(R+S)})})}(0).then(function(){if(0<b.length)throw new xe("Error modifying one or more objects",b,x,I);return _.length})})})},ee.prototype.delete=function(){var e=this._ctx,t=e.range;return Qe(e)&&(e.isPrimKey||3===t.type)?this._write(function(n){var i=t;return e.table.core.count({trans:n,query:{index:e.table.core.schema.primaryKey,range:i}}).then(function(u){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(h){var p=h.failures;if(h=h.numFailures)throw new xe("Could not delete some values",Object.keys(p).map(function(w){return p[w]}),u-h);return u-h})})}):this.modify(Le)},ee);function ee(){}var Le=function(e,t){return t.value=null};function dn(e,t){return e<t?-1:e===t?0:1}function Ct(e,t){return t<e?-1:e===t?0:1}function wt(e,t,n){return(e=e instanceof sn?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Ht(e){return new e.Collection(e,function(){return _t("")}).limit(0)}function ct(e,t,n,r){var i,u,h,p,w,g,P,m=n.length;if(!n.every(function(x){return"string"==typeof x}))return wt(e,st);function S(x){i="next"===x?function(_){return _.toUpperCase()}:function(_){return _.toLowerCase()},u="next"===x?function(_){return _.toLowerCase()}:function(_){return _.toUpperCase()},h="next"===x?dn:Ct;var I=n.map(function(_){return{lower:u(_),upper:i(_)}}).sort(function(_,N){return h(_.lower,N.lower)});p=I.map(function(_){return _.upper}),w=I.map(function(_){return _.lower}),P="next"===(g=x)?"":r}S("next"),(e=new e.Collection(e,function(){return qt(p[0],w[m-1]+r)}))._ondirectionchange=function(x){S(x)};var b=0;return e._addAlgorithm(function(x,I,_){var N=x.key;if("string"!=typeof N)return!1;var C=u(N);if(t(C,w,b))return!0;for(var R=null,D=b;D<m;++D){var W=function(re,z,te,ie,Y,Be){for(var Fe=Math.min(re.length,ie.length),Ge=-1,Ze=0;Ze<Fe;++Ze){var An=z[Ze];if(An!==ie[Ze])return Y(re[Ze],te[Ze])<0?re.substr(0,Ze)+te[Ze]+te.substr(Ze+1):Y(re[Ze],ie[Ze])<0?re.substr(0,Ze)+ie[Ze]+te.substr(Ze+1):0<=Ge?re.substr(0,Ge)+z[Ge]+te.substr(Ge+1):null;Y(re[Ze],An)<0&&(Ge=Ze)}return Fe<ie.length&&"next"===Be?re+te.substr(re.length):Fe<re.length&&"prev"===Be?re.substr(0,te.length):Ge<0?null:re.substr(0,Ge)+ie[Ge]+te.substr(Ge+1)}(N,C,p[D],w[D],h,g);null===W&&null===R?b=D+1:(null===R||0<h(R,W))&&(R=W)}return I(null!==R?function(){x.continue(R+P)}:_),!1}),e}function qt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function _t(e){return{type:1,lower:e,upper:e}}var sn=(Object.defineProperty(rt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),rt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Ht(this):new this.Collection(this,function(){return qt(e,t,!n,!r)})}catch{return wt(this,$e)}},rt.prototype.equals=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return _t(e)})},rt.prototype.above=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(e,void 0,!0)})},rt.prototype.aboveOrEqual=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(e,void 0,!1)})},rt.prototype.below=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(void 0,e,!1,!0)})},rt.prototype.belowOrEqual=function(e){return null==e?wt(this,$e):new this.Collection(this,function(){return qt(void 0,e)})},rt.prototype.startsWith=function(e){return"string"!=typeof e?wt(this,st):this.between(e,e+"\uffff",!0,!0)},rt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):ct(this,function(t,n){return 0===t.indexOf(n[0])},[e],"\uffff")},rt.prototype.equalsIgnoreCase=function(e){return ct(this,function(t,n){return t===n[0]},[e],"")},rt.prototype.anyOfIgnoreCase=function(){var e=an.apply(gn,arguments);return 0===e.length?Ht(this):ct(this,function(t,n){return-1!==n.indexOf(t)},e,"")},rt.prototype.startsWithAnyOfIgnoreCase=function(){var e=an.apply(gn,arguments);return 0===e.length?Ht(this):ct(this,function(t,n){return n.some(function(r){return 0===t.indexOf(r)})},e,"\uffff")},rt.prototype.anyOf=function(){var e=this,t=an.apply(gn,arguments),n=this._cmp;try{t.sort(n)}catch{return wt(this,$e)}if(0===t.length)return Ht(this);var r=new this.Collection(this,function(){return qt(t[0],t[t.length-1])});r._ondirectionchange=function(u){t.sort(n="next"===u?e._ascending:e._descending)};var i=0;return r._addAlgorithm(function(u,h,p){for(var w=u.key;0<n(w,t[i]);)if(++i===t.length)return h(p),!1;return 0===n(w,t[i])||(h(function(){u.continue(t[i])}),!1)}),r},rt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},rt.prototype.noneOf=function(){var e=an.apply(gn,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return wt(this,$e)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},rt.prototype.inAnyRange=function(N,t){var n=this,r=this._cmp,i=this._ascending,u=this._descending,h=this._min,p=this._max;if(0===N.length)return Ht(this);if(!N.every(function(C){return void 0!==C[0]&&void 0!==C[1]&&i(C[0],C[1])<=0}))return wt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",T.InvalidArgument);var P,w=!t||!1!==t.includeLowers,g=t&&!0===t.includeUppers,m=i;function S(C,R){return m(C[0],R[0])}try{(P=N.reduce(function(C,R){for(var D=0,W=C.length;D<W;++D){var re=C[D];if(r(R[0],re[1])<0&&0<r(R[1],re[0])){re[0]=h(re[0],R[0]),re[1]=p(re[1],R[1]);break}}return D===W&&C.push(R),C},[])).sort(S)}catch{return wt(this,$e)}var b=0,x=g?function(C){return 0<i(C,P[b][1])}:function(C){return 0<=i(C,P[b][1])},I=w?function(C){return 0<u(C,P[b][0])}:function(C){return 0<=u(C,P[b][0])},_=x;return(N=new this.Collection(this,function(){return qt(P[0][0],P[P.length-1][1],!w,!g)}))._ondirectionchange=function(C){m="next"===C?(_=x,i):(_=I,u),P.sort(S)},N._addAlgorithm(function(C,R,D){for(var W,re=C.key;_(re);)if(++b===P.length)return R(D),!1;return!x(W=re)&&!I(W)||(0===n._cmp(re,P[b][1])||0===n._cmp(re,P[b][0])||R(function(){C.continue(m===i?P[b][0]:P[b][1])}),!1)}),N},rt.prototype.startsWithAnyOf=function(){var e=an.apply(gn,arguments);return e.every(function(t){return"string"==typeof t})?0===e.length?Ht(this):this.inAnyRange(e.map(function(t){return[t,t+"\uffff"]})):wt(this,"startsWithAnyOf() only works with strings")},rt);function rt(){}function Lt(e){return Me(function(t){return on(t),e(t.target.error),!1})}function on(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Sn="storagemutated",Tn="x-storagemutated-1",hn=Ce(null,Sn),Dn=(Qt.prototype._lock=function(){return pt(!l.global),++this._reculock,1!==this._reculock||l.global||(l.lockOwnerFor=this),this},Qt.prototype._unlock=function(){if(pt(!l.global),0==--this._reculock)for(l.global||(l.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Jt(e[1],e[0])}catch{}}return this},Qt.prototype._locked=function(){return this._reculock&&l.lockOwnerFor!==this},Qt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(pt(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new T.DatabaseClosed(r);case"MissingAPIError":throw new T.MissingAPI(r.message,r);default:throw new T.OpenFailed(r)}if(!this.active)throw new T.TransactionInactive;return pt(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(i){on(i),t._reject(e.error)}),e.onabort=Me(function(i){on(i),t.active&&t._reject(new T.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hn.storagemutated.fire(e.mutatedParts)}),this},Qt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return ut(new T.ReadOnly("Transaction is readonly"));if(!this.active)return ut(new T.TransactionInactive);if(this._locked())return new Z(function(u,h){r._blockedFuncs.push([function(){r._promise(e,t,n).then(u,h)},l])});if(n)return ke(function(){var u=new Z(function(h,p){r._lock();var w=t(h,p,r);w&&w.then&&w.then(h,p)});return u.finally(function(){return r._unlock()}),u._lib=!0,u});var i=new Z(function(u,h){var p=t(u,h,r);p&&p.then&&p.then(u,h)});return i._lib=!0,i},Qt.prototype._root=function(){return this.parent?this.parent._root():this},Qt.prototype.waitFor=function(e){var t,n=this._root(),r=Z.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=u)}());var i=n._waitingFor;return new Z(function(u,h){r.then(function(p){return n._waitingQueue.push(Me(u.bind(null,p)))},function(p){return n._waitingQueue.push(Me(h.bind(null,p)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Qt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new T.Abort))},Qt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ot(t,e))return t[e];var n=this.schema[e];if(!n)throw new T.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Qt);function Qt(){}function Xt(e,t,n,r,i,u,h){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:u,src:(n&&!h?"&":"")+(r?"*":"")+(i?"++":"")+wn(t)}}function wn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function xn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,u,h){return(h=r(u))&&(i[h[0]]=h[1]),i},{}))};var r}var On=function(e){try{return e.only([[]]),On=function(){return[[]]},[[]]}catch{return On=function(){return"\uffff"},"\uffff"}};function tr(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(n){return n[t]}:function(n){return ft(n,t)}:function(n){return ft(n,e)};var t}function wr(e){return[].slice.call(e)}var Rr=0;function Ln(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Fr(e,t,w){function r(_){if(3===_.type)return null;if(4===_.type)throw new Error("Cannot convert never type to IDBKeyRange");var b=_.lower,x=_.upper,I=_.lowerOpen;return _=_.upperOpen,void 0===b?void 0===x?null:t.upperBound(x,!!_):void 0===x?t.lowerBound(b,!!I):t.bound(b,x,!!I,!!_)}var u,h,p,g=(h=w,p=wr((u=e).objectStoreNames),P={schema:{name:u.name,tables:p.map(function(S){return h.objectStore(S)}).map(function(S){var b=S.keyPath,_=S.autoIncrement,x=le(b),I={};return _={name:S.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:x,keyPath:b,autoIncrement:_,unique:!0,extractKey:tr(b)},indexes:wr(S.indexNames).map(function(N){return S.index(N)}).map(function(D){var R=D.unique,W=D.multiEntry;return W={name:D.name,compound:le(D=D.keyPath),keyPath:D,unique:R,multiEntry:W,extractKey:tr(D)},I[Ln(D)]=W}),getIndexByKeyPath:function(N){return I[Ln(N)]}},I[":id"]=_.primaryKey,null!=b&&(I[Ln(b)]=_.primaryKey),_})},hasGetAll:0<p.length&&"getAll"in h.objectStore(p[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).hasGetAll,P=(w=P.schema).tables.map(function i(S){var b,x=S.name;return{name:x,schema:S,mutate:function(I){var _=I.trans,N=I.type,C=I.keys,R=I.values,D=I.range;return new Promise(function(W,re){W=Me(W);var z=_.objectStore(x),te=null==z.keyPath,ie="put"===N||"add"===N;if(!ie&&"delete"!==N&&"deleteRange"!==N)throw new Error("Invalid operation type: "+N);var Y,Be=(C||R||{length:1}).length;if(C&&R&&C.length!==R.length)throw new Error("Given keys array must have same length as given values array.");if(0===Be)return W({numFailures:0,failures:{},results:[],lastResult:void 0});function Fe(yn){++An,on(yn)}var Ge=[],Ze=[],An=0;if("deleteRange"===N){if(4===D.type)return W({numFailures:An,failures:Ze,results:[],lastResult:void 0});Ge.push(Y=3===D.type?z.clear():z.delete(r(D)))}else{var Ve=(te=ie?te?[R,C]:[R,null]:[C,null])[0],cn=te[1];if(ie)for(var ln=0;ln<Be;++ln)Ge.push(Y=cn&&void 0!==cn[ln]?z[N](Ve[ln],cn[ln]):z[N](Ve[ln])),Y.onerror=Fe;else for(ln=0;ln<Be;++ln)Ge.push(Y=z[N](Ve[ln])),Y.onerror=Fe}function er(yn){yn=yn.target.result,Ge.forEach(function(jn,br){return null!=jn.error&&(Ze[br]=jn.error)}),W({numFailures:An,failures:Ze,results:"delete"===N?C:Ge.map(function(jn){return jn.result}),lastResult:yn})}Y.onerror=function(yn){Fe(yn),er(yn)},Y.onsuccess=er})},getMany:function(I){var _=I.trans,N=I.keys;return new Promise(function(C,R){C=Me(C);for(var D,W=_.objectStore(x),re=N.length,z=new Array(re),te=0,ie=0,Y=function(Ge){z[(Ge=Ge.target)._pos]=Ge.result,++ie===te&&C(z)},Be=Lt(R),Fe=0;Fe<re;++Fe)null!=N[Fe]&&((D=W.get(N[Fe]))._pos=Fe,D.onsuccess=Y,D.onerror=Be,++te);0===te&&C(z)})},get:function(I){var _=I.trans,N=I.key;return new Promise(function(C,R){C=Me(C);var D=_.objectStore(x).get(N);D.onsuccess=function(W){return C(W.target.result)},D.onerror=Lt(R)})},query:(b=g,function(I){return new Promise(function(_,N){_=Me(_);var C,R,D,W=I.values,re=I.limit,z=re===1/0?void 0:re,ie=(Y=I.query).index,Y=Y.range,te=(te=I.trans).objectStore(x);if(ie=ie.isPrimaryKey?te:te.index(ie.name),Y=r(Y),0===re)return _({result:[]});b?((z=W?ie.getAll(Y,z):ie.getAllKeys(Y,z)).onsuccess=function(Be){return _({result:Be.target.result})},z.onerror=Lt(N)):(C=0,R=!W&&"openKeyCursor"in ie?ie.openKeyCursor(Y):ie.openCursor(Y),D=[],R.onsuccess=function(Be){var Fe=R.result;return Fe?(D.push(W?Fe.value:Fe.primaryKey),++C===re?_({result:D}):void Fe.continue()):_({result:D})},R.onerror=Lt(N))})}),openCursor:function(I){var _=I.trans,N=I.values,C=I.query,R=I.reverse,D=I.unique;return new Promise(function(W,re){W=Me(W);var ie=C.index,z=C.range,te=_.objectStore(x),Y=(te=ie.isPrimaryKey?te:te.index(ie.name),ie=R?D?"prevunique":"prev":D?"nextunique":"next",!N&&"openKeyCursor"in te?te.openKeyCursor(r(z),ie):te.openCursor(r(z),ie));Y.onerror=Lt(re),Y.onsuccess=Me(function(Be){var Fe,Ge,Ze,An,Ve=Y.result;Ve?(Ve.___id=++Rr,Ve.done=!1,Fe=Ve.continue.bind(Ve),Ge=(Ge=Ve.continuePrimaryKey)&&Ge.bind(Ve),Ze=Ve.advance.bind(Ve),An=function(){throw new Error("Cursor not stopped")},Ve.trans=_,Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=function(){throw new Error("Cursor not started")},Ve.fail=Me(re),Ve.next=function(){var cn=this,ln=1;return this.start(function(){return ln--?cn.continue():cn.stop()}).then(function(){return cn})},Ve.start=function(cn){function ln(){if(Y.result)try{cn()}catch(yn){Ve.fail(yn)}else Ve.done=!0,Ve.start=function(){throw new Error("Cursor behind last entry")},Ve.stop()}var er=new Promise(function(yn,jn){yn=Me(yn),Y.onerror=Lt(jn),Ve.fail=jn,Ve.stop=function(br){Ve.stop=Ve.continue=Ve.continuePrimaryKey=Ve.advance=An,yn(br)}});return Y.onsuccess=Me(function(yn){Y.onsuccess=ln,ln()}),Ve.continue=Fe,Ve.continuePrimaryKey=Ge,Ve.advance=Ze,ln(),er},W(Ve)):W(null)},re)})},count:function(I){var _=I.query,N=I.trans,C=_.index,R=_.range;return new Promise(function(D,W){var re=N.objectStore(x),z=C.isPrimaryKey?re:re.index(C.name);(z=(re=r(R))?z.count(re):z.count()).onsuccess=Me(function(te){return D(te.target.result)}),z.onerror=Lt(W)})}}}),m={};return P.forEach(function(S){return m[S.name]=S}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(S){if(!m[S])throw new Error("Table '".concat(S,"' not found"));return m[S]},MIN_KEY:-1/0,MAX_KEY:On(t),schema:w}}function qn(e,r){r=function Kr(e,t,n,r){return{dbcore:(r=Fr(t,n.IDBKeyRange,r),e.dbcore.reduce(function(u,h){return h=h.create,V(V({},u),h(u))},r))}}(e._middlewares,r.db,e._deps,r),e.core=r.dbcore,e.tables.forEach(function(i){var u=i.name;e.core.schema.tables.some(function(h){return h.name===u})&&(i.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=i.core))})}function Zn(e,t,n,r){n.forEach(function(i){var u=r[i];t.forEach(function(h){var p=function w(g,P){return fn(g,P)||(g=it(g))&&w(g,P)}(h,i);(!p||"value"in p&&void 0===p.value)&&(h===e.Transaction.prototype||h instanceof e.Transaction?bt(h,i,{get:function(){return this.table(i)},set:function(w){Gt(this,i,{value:w,writable:!0,configurable:!0,enumerable:!0})}}):h[i]=new e.Table(i,u))})})}function nr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Dr(e,t){return e._cfg.version-t._cfg.version}function rr(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],u=t[n];if(i){var h={name:n,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||i.primKey.auto!==u.primKey.auto)h.recreate=!0,r.change.push(h);else{var p=i.idxByName,w=u.idxByName,g=void 0;for(g in p)w[g]||h.del.push(g);for(g in w){var P=p[g],m=w[g];P?P.src!==m.src&&h.change.push(m):h.add.push(m)}(0<h.del.length||0<h.add.length||0<h.change.length)&&r.change.push(h)}}else r.add.push([n,u])}return r}function ir(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(u){return Vn(i,u)}),i}function _r(e,t){ye(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(lt&&console.debug("Dexie: Creating missing table",n),ir(t,n,e[n].primKey,e[n].indexes))})}function Vn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function $n(e,t,n){var r={};return et(t.objectStoreNames,0).forEach(function(i){for(var u=n.objectStore(i),h=Xt(wn(g=u.keyPath),g||"",!0,!1,!!u.autoIncrement,g&&"string"!=typeof g,!0),p=[],w=0;w<u.indexNames.length;++w){var g=(P=u.index(u.indexNames[w])).keyPath,P=Xt(P.name,g,!!P.unique,!!P.multiEntry,!1,g&&"string"!=typeof g,!1);p.push(P)}r[i]=xn(i,h,p)}),r}function Gn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var u=r[i],h=n.objectStore(u);e._hasGetAll="getAll"in h;for(var p=0;p<h.indexNames.length;++p){var w=h.indexNames[p],g=h.index(w).keyPath,P="string"==typeof g?g:"["+et(g).join("+")+"]";!t[u]||(g=t[u].idxByName[P])&&(g.name=w,delete t[u].idxByName[P],t[u].idxByName[w]=g)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ae.WorkerGlobalScope&&ae instanceof ae.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function xr(e){return e.split(",").map(function(t,n){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Xt(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),le(i),0===n)})}var Mr=(Yn.prototype._parseStoresSpec=function(e,t){ye(e).forEach(function(n){if(null!==e[n]){var r=xr(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new T.Schema("Primary key cannot be multi-valued");r.forEach(function(u){if(u.auto)throw new T.Schema("Only primary key can be marked as autoIncrement (++)");if(!u.keyPath)throw new T.Schema("Index must have a name and cannot be an empty string")}),t[n]=xn(n,i,r)}})},Yn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?ge(this._cfg.storesSource,n):n;var r={},i={};return(n=t._versions).forEach(function(u){ge(r,u._cfg.storesSource),i=u._cfg.dbschema={},u._parseStoresSpec(r,i)}),t._dbSchema=i,nr(t,[t._allTables,t,t.Transaction.prototype]),Zn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],ye(i),i),t._storeNames=ye(i),this},Yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Oe(this._cfg.contentUpgrade||c,e),this},Yn);function Yn(){}function or(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new In(Ot,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function ar(e){return e&&"function"==typeof e.databases}function ur(e){return ke(function(){return l.letThrough=!0,e()})}function sr(e){return!("from"in e)}var pn=function(e,t){if(!this){var n=new pn;return e&&"d"in e&&ge(n,e),n}ge(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Un(e,t,n){var r=U(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(sr(e))return ge(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,U(n,e.from)<0)return i?Un(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Er(e);if(0<U(t,e.to))return r?Un(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Er(e);U(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<U(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&Mn(e,i),r&&n&&Mn(e,r)}}function Mn(e,t){sr(t)||function n(r,w){var u=w.from,h=w.to,p=w.l;w=w.r,Un(r,u,h),p&&n(r,p),w&&n(r,w)}(e,t)}function Ar(e,t){var n=Wn(t),r=n.next();if(r.done)return!1;for(var i=r.value,u=Wn(e),h=u.next(i.from),p=h.value;!r.done&&!h.done;){if(U(p.from,i.to)<=0&&0<=U(p.to,i.from))return!0;U(i.from,p.from)<0?i=(r=n.next(p.from)).value:p=(h=u.next(i.from)).value}return!1}function Wn(e){var t=sr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&U(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||U(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t="r"==i?"l":"r",n=V({},e),e.from=(r=e[i]).from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Or(n)),e.d=Or(e)}function Or(n){var t=n.r;return n=n.l,(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function zn(e,t){return ye(t).forEach(function(n){e[n]?Mn(e[n],t[n]):e[n]=function r(i){var u,h,p={};for(u in i)ot(i,u)&&(p[u]=!(h=i[u])||"object"!=typeof h||Ut.has(h.constructor)?h:r(h));return p}(t[n])}),e}function cr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Ar(t[n],e[n])})}gt(pn.prototype,((_n={add:function(e){return Mn(this,e),this},addKey:function(e){return Un(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Un(t,n,n)}),this},hasKey:function(e){var t=Wn(this).next(e).value;return t&&U(t.from,e)<=0&&0<=U(t.to,e)}})[kn]=function(){return Wn(this)},_n));var Cn={},lr={},fr=!1;function Jn(e){zn(lr,e),fr||(fr=!0,setTimeout(function(){fr=!1,dr(lr,!(lr={}))},0))}function dr(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Cn);r<i.length;r++)Pr(h=i[r],e,n,t);else for(var u in e){var h,p=/^idb\:\/\/(.*)\/(.*)\//.exec(u);p&&(u=p[1],p=p[2],(h=Cn["idb://".concat(u,"/").concat(p)])&&Pr(h,e,n,t))}n.forEach(function(w){return w()})}function Pr(e,t,n,r){for(var i=[],u=0,h=Object.entries(e.queries.query);u<h.length;u++){for(var p=h[u],w=p[0],g=[],P=0,m=p[1];P<m.length;P++){var S=m[P];cr(t,S.obsSet)?S.subscribers.forEach(function(_){return n.add(_)}):r&&g.push(S)}r&&i.push([w,g])}if(r)for(var b=0,x=i;b<x.length;b++){var I=x[b];e.queries.query[w=I[0]]=g=I[1]}}function qr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ut(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),u=!1;function h(){if(t.openCanceller!==r)throw new T.DatabaseClosed("db.open() was cancelled")}var w,g=t.dbReadyResolve,P=null,m=!1;return Z.race([r,(typeof navigator>"u"?Z.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(S){function b(){return indexedDB.databases().finally(S)}w=setInterval(b,100),b()}).finally(function(){return clearInterval(w)}):Promise.resolve()).then(function p(){return new Z(function(S,b){if(h(),!n)throw new T.MissingAPI;var x=e.name,I=t.autoSchema||!i?n.open(x):n.open(x,i);if(!I)throw new T.MissingAPI;I.onerror=Lt(b),I.onblocked=Me(e._fireOnBlocked),I.onupgradeneeded=Me(function(_){var N;P=I.transaction,t.autoSchema&&!e._options.allowEmptyDB?(I.onerror=on,P.abort(),I.result.close(),(N=n.deleteDatabase(x)).onsuccess=N.onerror=Me(function(){b(new T.NoSuchDatabase("Database ".concat(x," doesnt exist")))})):(P.onerror=Lt(b),_=_.oldVersion>Math.pow(2,62)?0:_.oldVersion,m=_<1,e.idbdb=I.result,u&&function Ur(e,t){_r(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=$n(0,e.idbdb,t);Gn(e,e._dbSchema,t);for(var r=0,i=rr(n,e._dbSchema).change;r<i.length;r++){var u=function(h){if(h.change.length||h.recreate)return console.warn("Unable to patch indexes of table ".concat(h.name," because it has changes on the type of index or primary key.")),{value:void 0};var p=t.objectStore(h.name);h.add.forEach(function(w){lt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(h.name,".").concat(w.src)),Vn(p,w)})}(i[r]);if("object"==typeof u)return u.value}}(e,P),function Lr(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=xn("$meta",xr("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,i);u.create(n),u._completion.catch(r);var h=u._reject.bind(u),p=l.transless||l;ke(function(){return l.trans=u,l.transless=p,0!==t?(qn(e,n),g=t,((w=u).storeNames.includes("$meta")?w.table("$meta").get("version").then(function(P){return P??g}):Z.resolve(g)).then(function(P){return S=P,b=u,I=[],P=(m=e)._versions,_=m._dbSchema=$n(0,m.idbdb,x=n),0!==(P=P.filter(function(N){return N._cfg.version>=S})).length?(P.forEach(function(N){I.push(function(){var C=_,R=N._cfg.dbschema;Gn(m,C,x),Gn(m,R,x),_=m._dbSchema=R;var D=rr(C,R);D.add.forEach(function(ie){ir(x,ie[0],ie[1].primKey,ie[1].indexes)}),D.change.forEach(function(ie){if(ie.recreate)throw new T.Upgrade("Not yet support for changing primary key");var Y=x.objectStore(ie.name);ie.add.forEach(function(Be){return Vn(Y,Be)}),ie.change.forEach(function(Be){Y.deleteIndex(Be.name),Vn(Y,Be)}),ie.del.forEach(function(Be){return Y.deleteIndex(Be)})});var W=N._cfg.contentUpgrade;if(W&&N._cfg.version>S){qn(m,x),b._memoizedTables={};var re=xt(R);D.del.forEach(function(ie){re[ie]=C[ie]}),nr(m,[m.Transaction.prototype]),Zn(m,[m.Transaction.prototype],ye(re),re),b.schema=re;var z,te=Pn(W);return te&&De(),D=Z.follow(function(){var ie;(z=W(b))&&te&&(ie=me.bind(null,null),z.then(ie,ie))}),z&&"function"==typeof z.then?Z.resolve(z):D.then(function(){return z})}}),I.push(function(C){var R,D;R=N._cfg.dbschema,[].slice.call((D=C).db.objectStoreNames).forEach(function(re){return null==R[re]&&D.db.deleteObjectStore(re)}),nr(m,[m.Transaction.prototype]),Zn(m,[m.Transaction.prototype],m._storeNames,m._dbSchema),b.schema=m._dbSchema}),I.push(function(C){m.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(m.idbdb.version/10)===N._cfg.version?(m.idbdb.deleteObjectStore("$meta"),delete m._dbSchema.$meta,m._storeNames=m._storeNames.filter(function(R){return"$meta"!==R})):C.objectStore("$meta").put(N._cfg.version,"version"))})}),function N(){return I.length?Z.resolve(I.shift()(b.idbtrans)).then(N):Z.resolve()}().then(function(){_r(_,x)})):Z.resolve();var m,S,b,x,I,_}).catch(h)):(ye(i).forEach(function(P){ir(n,P,i[P].primKey,i[P].indexes)}),qn(e,n),void Z.follow(function(){return e.on.populate.fire(u)}).catch(h));var w,g})}(e,_/10,P,b))},b),I.onsuccess=Me(function(){P=null;var _,N,C,R,D,W=e.idbdb=I.result,re=et(W.objectStoreNames);if(0<re.length)try{var z=W.transaction(1===(R=re).length?R[0]:R,"readonly");if(t.autoSchema)C=z,(_=e).verno=(N=W).version/10,C=_._dbSchema=$n(0,N,C),_._storeNames=et(N.objectStoreNames,0),Zn(_,[_._allTables],ye(C),C);else if(Gn(e,e._dbSchema,z),((D=rr($n(0,(D=e).idbdb,z),D._dbSchema)).add.length||D.change.some(function(te){return te.add.length||te.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),W.close(),i=W.version+1,u=!0,S(p());qn(e,z)}catch{}tt.push(e),W.onversionchange=Me(function(te){t.vcFired=!0,e.on("versionchange").fire(te)}),W.onclose=Me(function(te){e.on("close").fire(te)}),m&&(z=x,W=(D=e._deps).indexedDB,D=D.IDBKeyRange,ar(W)||z===Ot||or(W,D).put({name:z}).catch(c)),S()},b)}).catch(function(S){switch(S?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),p();break;case"VersionError":if(0<i)return i=0,p()}return Z.reject(S)})})]).then(function(){return h(),t.onReadyBeingFired=[],Z.resolve(ur(function(){return e.on.ready.fire(e.vip)})).then(function S(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(Oe,c);return t.onReadyBeingFired=[],Z.resolve(ur(function(){return b(e.vip)})).then(S)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(S){t.dbOpenError=S;try{P&&P.abort()}catch{}return r===t.openCanceller&&e._close(),ut(S)}).finally(function(){t.openComplete=!0,g()}).then(function(){var S;return m&&(S={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(x){x.name&&(S["idb://".concat(e.name,"/").concat(b.name,"/").concat(x.name)]=new pn(-1/0,[[[]]]))}),S["idb://".concat(e.name,"/").concat(b.name,"/")]=S["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new pn(-1/0,[[[]]])}),hn(Sn).fire(S),dr(S,!0)),e})}function hr(e){function t(u){return e.next(u)}var n=i(t),r=i(function(u){return e.throw(u)});function i(u){return function(w){var p=u(w);return w=p.value,p.done?w:w&&"function"==typeof w.then?w.then(n,r):le(w)?Promise.all(w).then(n,r):n(w)}}return i(t)()}function Hn(e,t,n){for(var r=le(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Zr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return V(V({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},u=[];function h(m,S,b){var x=Ln(m),I=i[x]=i[x]||[],_=null==m?0:"string"==typeof m?1:m.length,N=0<S;return N=V(V({},b),{name:N?"".concat(x,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:N,keyTail:S,keyLength:_,extractKey:tr(m),unique:!N&&b.unique}),I.push(N),N.isPrimaryKey||u.push(N),1<_&&h(2===_?m[0]:m.slice(0,_-1),S+1,b),I.sort(function(C,R){return C.keyTail-R.keyTail}),N}t=h(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var p=0,w=r.indexes;p<w.length;p++){var g=w[p];h(g.keyPath,0,g)}function P(m){var S,b=m.query.index;return b.isVirtual?V(V({},m),{query:{index:b.lowLevelIndex,range:(S=m.query.range,b=b.keyTail,{type:1===S.type?2:S.type,lower:Hn(S.lower,S.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Hn(S.upper,S.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):m}return V(V({},n),{schema:V(V({},r),{primaryKey:t,indexes:u,getIndexByKeyPath:function(m){return(m=i[Ln(m)])&&m[0]}}),count:function(m){return n.count(P(m))},query:function(m){return n.query(P(m))},openCursor:function(m){var S=m.query.index,b=S.keyTail,I=S.keyLength;return S.isVirtual?n.openCursor(P(m)).then(function(N){return N&&function _(N){return Object.create(N,{continue:{value:function(C){null!=C?N.continue(Hn(C,m.reverse?e.MAX_KEY:e.MIN_KEY,b)):m.unique?N.continue(N.key.slice(0,I).concat(m.reverse?e.MIN_KEY:e.MAX_KEY,b)):N.continue()}},continuePrimaryKey:{value:function(C,R){N.continuePrimaryKey(Hn(C,e.MAX_KEY,b),R)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var C=N.key;return 1===I?C[0]:C.slice(0,I)}},value:{get:function(){return N.value}}})}(N)}):n.openCursor(m)}})}})}};function pr(e,t,n,r){return n=n||{},r=r||"",ye(e).forEach(function(i){var u,h,p;ot(t,i)?(h=t[i],"object"==typeof(u=e[i])&&"object"==typeof h&&u&&h?(p=En(u))!==En(h)?n[r+i]=t[i]:"Object"===p?pr(u,h,n,r+i+"."):u!==h&&(n[r+i]=t[i]):u!==h&&(n[r+i]=t[i])):n[r+i]=void 0}),ye(t).forEach(function(i){ot(e,i)||(n[r+i]=t[i])}),n}function yr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Vr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return V(V({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return V(V({},n),{mutate:function(i){var u=l.trans,h=u.table(t).hook,p=h.deleting,w=h.creating,g=h.updating;switch(i.type){case"add":if(w.fire===c)break;return u._promise("readwrite",function(){return P(i)},!0);case"put":if(w.fire===c&&g.fire===c)break;return u._promise("readwrite",function(){return P(i)},!0);case"delete":if(p.fire===c)break;return u._promise("readwrite",function(){return P(i)},!0);case"deleteRange":if(p.fire===c)break;return u._promise("readwrite",function(){return function m(S,b,x){return n.query({trans:S,values:!1,query:{index:r,range:b},limit:x}).then(function(I){var _=I.result;return P({type:"delete",keys:_,trans:S}).then(function(N){return 0<N.numFailures?Promise.reject(N.failures[0]):_.length<x?{failures:[],numFailures:0,lastResult:void 0}:m(S,V(V({},b),{lower:_[_.length-1],lowerOpen:!0}),x)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function P(m){var S,b,x,I=l.trans,_=m.keys||yr(r,m);if(!_)throw new Error("Keys missing");return"delete"!==(m="add"===m.type||"put"===m.type?V(V({},m),{keys:_}):V({},m)).type&&(m.values=K([],m.values,!0)),m.keys&&(m.keys=K([],m.keys,!0)),S=n,x=_,("add"===(b=m).type?Promise.resolve([]):S.getMany({trans:b.trans,keys:x,cache:"immutable"})).then(function(N){var C=_.map(function(R,D){var W,re,z,te=N[D],ie={onerror:null,onsuccess:null};return"delete"===m.type?p.fire.call(ie,R,te,I):"add"===m.type||void 0===te?(W=w.fire.call(ie,R,m.values[D],I),null==R&&null!=W&&(m.keys[D]=R=W,r.outbound||It(m.values[D],r.keyPath,R))):(W=pr(te,m.values[D]),(re=g.fire.call(ie,W,R,te,I))&&(z=m.values[D],Object.keys(re).forEach(function(Y){ot(z,Y)?z[Y]=re[Y]:It(z,Y,re[Y])}))),ie});return n.mutate(m).then(function(R){for(var D=R.failures,W=R.results,re=R.numFailures,z=(R=R.lastResult,0);z<_.length;++z){var te=(W||_)[z],ie=C[z];null==te?ie.onerror&&ie.onerror(D[z]):ie.onsuccess&&ie.onsuccess("put"===m.type&&N[z]?m.values[z]:te)}return{failures:D,results:W,numFailures:re,lastResult:R}}).catch(function(R){return C.forEach(function(D){return D.onerror&&D.onerror(R)}),Promise.reject(R)})})}}})}})}};function Sr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,u=0;i<t.keys.length&&u<e.length;++i)0===U(t.keys[i],e[u])&&(r.push(n?Rt(t.values[i]):t.values[i]),++u);return r.length===e.length?r:null}catch{return null}}var $r={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return V(V({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Sr(r.keys,r.trans._cache,"clone"===r.cache);return i?Z.resolve(i):n.getMany(r).then(function(u){return r.trans._cache={keys:r.keys,values:"clone"===r.cache?Rt(u):u},u})},mutate:function(r){return"add"!==r.type&&(r.trans._cache=null),n.mutate(r)}})}}}};function Ir(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Tr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gr={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new pn(e.MIN_KEY,e.MAX_KEY);return V(V({},e),{transaction:function(r,i,u){if(l.subscr&&"readonly"!==i)throw new T.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(l.querier));return e.transaction(r,i,u)},table:function(r){var i=e.table(r),u=i.schema,h=u.primaryKey,m=u.indexes,p=h.extractKey,w=h.outbound,g=h.autoIncrement&&m.filter(function(b){return b.compound&&b.keyPath.includes(h.keyPath)}),P=V(V({},i),{mutate:function(b){function x(Y){return Y="idb://".concat(t,"/").concat(r,"/").concat(Y),R[Y]||(R[Y]=new pn)}var I,_,N,C=b.trans,R=b.mutatedParts||(b.mutatedParts={}),D=x(""),W=x(":dels"),re=b.type,z=(ie="deleteRange"===b.type?[b.range]:"delete"===b.type?[b.keys]:b.values.length<50?[yr(h,b).filter(function(Y){return Y}),b.values]:[])[0],te=ie[1],ie=b.trans._cache;return le(z)?(D.addKeys(z),(ie="delete"===re||z.length===te.length?Sr(z,ie):null)||W.addKeys(z),(ie||te)&&(I=x,_=ie,N=te,u.indexes.forEach(function(Y){var Be=I(Y.name||"");function Fe(Ze){return null!=Ze?Y.extractKey(Ze):null}function Ge(Ze){return Y.multiEntry&&le(Ze)?Ze.forEach(function(An){return Be.addKey(An)}):Be.addKey(Ze)}(_||N).forEach(function(Ze,cn){var Ve=_&&Fe(_[cn]);0!==U(Ve,cn=N&&Fe(N[cn]))&&(null!=Ve&&Ge(Ve),null!=cn&&Ge(cn))})}))):z?(W.add(te={from:z.lower,to:z.upper}),D.add(te)):(D.add(n),W.add(n),u.indexes.forEach(function(Y){return x(Y.name).add(n)})),i.mutate(b).then(function(Y){return!z||"add"!==b.type&&"put"!==b.type||(D.addKeys(Y.results),g&&g.forEach(function(Be){var Fe=b.values.map(function(Ze){return Be.extractKey(Ze)}),Ge=Be.keyPath.findIndex(function(Ze){return Ze===h.keyPath});Y.results.forEach(function(Ze){return Fe[Ge]=Ze}),x(Be.name).addKeys(Fe)})),C.mutatedParts=zn(C.mutatedParts||{},R),Y})}}),S={get:function(b){return[h,new pn(b.key)]},getMany:function(b){return[h,(new pn).addKeys(b.keys)]},count:m=function(x){var I;return[x=(I=x.query).index,new pn(null!==(x=(I=I.range).lower)&&void 0!==x?x:e.MIN_KEY,null!==(I=I.upper)&&void 0!==I?I:e.MAX_KEY)]},query:m,openCursor:m};return ye(S).forEach(function(b){P[b]=function(x){var _=!!(I=l.subscr),N=Ir(l,i)&&Tr(b,x)?x.obsSet={}:I;if(_){var C=function(te){return te="idb://".concat(t,"/").concat(r,"/").concat(te),N[te]||(N[te]=new pn)},R=C(""),D=C(":dels"),I=(_=(I=S[b](x))[0],I[1]);if(("query"===b&&_.isPrimaryKey&&!x.values?D:C(_.name||"")).add(I),!_.isPrimaryKey){if("count"!==b){var W="query"===b&&w&&x.values&&i.query(V(V({},x),{values:!1}));return i[b].apply(this,arguments).then(function(te){if("query"===b){if(w&&x.values)return W.then(function(Fe){return R.addKeys(Fe=Fe.result),te});var ie=x.values?te.result.map(p):te.result;(x.values?R:D).addKeys(ie)}else if("openCursor"===b){var Y=te,Be=x.values;return Y&&Object.create(Y,{key:{get:function(){return D.addKey(Y.primaryKey),Y.key}},primaryKey:{get:function(){var Fe=Y.primaryKey;return D.addKey(Fe),Fe}},value:{get:function(){return Be&&R.addKey(Y.primaryKey),Y.value}}})}return te})}D.add(n)}}return i[b].apply(this,arguments)}}),P}})}};function Nr(e,t,n){return 0===n.numFailures?t:"deleteRange"===t.type||n.numFailures===(t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1)?null:(t=V({},t),le(t.keys)&&(t.keys=t.keys.filter(function(i,u){return!(u in n.failures)})),"values"in t&&le(t.values)&&(t.values=t.values.filter(function(i,u){return!(u in n.failures)})),t)}function mr(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<U(n,r.lower):0<=U(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?U(e,t.upper)<0:U(e,t.upper)<=0));var n,r}function kr(e,t,S,r,i,u){if(!S||0===S.length)return e;var h=t.query.index,p=h.multiEntry,w=t.query.range,g=r.schema.primaryKey.extractKey,P=h.extractKey,m=(h.lowLevelIndex||h).extractKey;return(S=S.reduce(function(b,x){var I=b,_=[];if("add"===x.type||"put"===x.type)for(var N=new pn,C=x.values.length-1;0<=C;--C){var R,D=x.values[C],W=g(D);N.hasKey(W)||(R=P(D),(p&&le(R)?R.some(function(ie){return mr(ie,w)}):mr(R,w))&&(N.addKey(W),_.push(D)))}switch(x.type){case"add":I=b.concat(t.values?_:_.map(function(Y){return g(Y)}));break;case"put":var re=(new pn).addKeys(x.values.map(function(Y){return g(Y)}));I=b.filter(function(Y){return!re.hasKey(t.values?g(Y):Y)}).concat(t.values?_:_.map(function(Y){return g(Y)}));break;case"delete":var z=(new pn).addKeys(x.keys);I=b.filter(function(Y){return!z.hasKey(t.values?g(Y):Y)});break;case"deleteRange":var te=x.range;I=b.filter(function(Y){return!mr(g(Y),te)})}return I},e))===e?e:(S.sort(function(b,x){return U(m(b),m(x))||U(g(b),g(x))}),t.limit&&t.limit<1/0&&(S.length>t.limit?S.length=t.limit:e.length===t.limit&&S.length<t.limit&&(i.dirty=!0)),u?Object.freeze(S):S)}function Cr(e,t){return 0===U(e.lower,t.lower)&&0===U(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var zr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return V(V({},e),{transaction:function(n,r,i){var u,h,p=e.transaction(n,r,i);return"readwrite"===r&&(h=(u=new AbortController).signal,p.addEventListener("abort",(i=function(w){return function(){if(u.abort(),"readwrite"===r){for(var g=new Set,P=0,m=n;P<m.length;P++){var S=m[P],b=Cn["idb://".concat(t,"/").concat(S)];if(b){var x=e.table(S),I=b.optimisticOps.filter(function(Be){return Be.trans===p});if(p._explicit&&w&&p.mutatedParts)for(var _=0,N=Object.values(b.queries.query);_<N.length;_++)for(var C=0,R=(re=N[_]).slice();C<R.length;C++)cr((z=R[C]).obsSet,p.mutatedParts)&&(vn(re,z),z.subscribers.forEach(function(Be){return g.add(Be)}));else if(0<I.length){b.optimisticOps=b.optimisticOps.filter(function(Be){return Be.trans!==p});for(var D=0,W=Object.values(b.queries.query);D<W.length;D++)for(var re,z,te,ie=0,Y=(re=W[D]).slice();ie<Y.length;ie++)null!=(z=Y[ie]).res&&p.mutatedParts&&(w&&!z.dirty?(te=Object.isFrozen(z.res),te=kr(z.res,z.req,I,x,z,te),z.dirty?(vn(re,z),z.subscribers.forEach(function(Be){return g.add(Be)})):te!==z.res&&(z.res=te,z.promise=Z.resolve({result:te}))):(z.dirty&&vn(re,z),z.subscribers.forEach(function(Be){return g.add(Be)})))}}}g.forEach(function(Be){return Be()})}}})(!1),{signal:h}),p.addEventListener("error",i(!1),{signal:h}),p.addEventListener("complete",i(!0),{signal:h})),p},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return V(V({},r),{mutate:function(u){var h=l.trans;if(i.outbound||"disabled"===h.db._options.cache||h.explicit)return r.mutate(u);var p=Cn["idb://".concat(t,"/").concat(n)];return p?(h=r.mutate(u),"add"!==u.type&&"put"!==u.type||!(50<=u.values.length||yr(i,u).some(function(w){return null==w}))?(p.optimisticOps.push(u),u.mutatedParts&&Jn(u.mutatedParts),h.then(function(w){0<w.numFailures&&(vn(p.optimisticOps,u),(w=Nr(0,u,w))&&p.optimisticOps.push(w),u.mutatedParts&&Jn(u.mutatedParts))}),h.catch(function(){vn(p.optimisticOps,u),u.mutatedParts&&Jn(u.mutatedParts)})):h.then(function(w){var g=Nr(0,V(V({},u),{values:u.values.map(function(b,m){var S;return It(b=null!==(S=i.keyPath)&&void 0!==S&&S.includes(".")?Rt(b):V({},b),i.keyPath,w.results[m]),b})}),w);p.optimisticOps.push(g),queueMicrotask(function(){return u.mutatedParts&&Jn(u.mutatedParts)})}),h):r.mutate(u)},query:function(u){if(!Ir(l,r)||!Tr("query",u))return r.query(u);var h="immutable"===(null===(g=l.trans)||void 0===g?void 0:g.db._options.cache),p=(m=l).requery,w=m.signal,g=function(x,I,_,N){var C=Cn["idb://".concat(x,"/").concat(I)];if(!C)return[];if(!(I=C.queries[_]))return[null,!1,C,null];var R=I[(N.query?N.query.index.name:null)||""];if(!R)return[null,!1,C,null];switch(_){case"query":var D=R.find(function(W){return W.req.limit===N.limit&&W.req.values===N.values&&Cr(W.req.query.range,N.query.range)});return D?[D,!0,C,R]:[R.find(function(W){return("limit"in W.req?W.req.limit:1/0)>=N.limit&&(!N.values||W.req.values)&&function Yr(e,t){return function(n,r,i,u){if(void 0===n)return void 0!==r?-1:0;if(void 0===r)return 1;if(0===(r=U(n,r))){if(i&&u)return 0;if(i)return 1;if(u)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,u){if(void 0===n)return void 0!==r?1:0;if(void 0===r)return-1;if(0===(r=U(n,r))){if(i&&u)return 0;if(i)return-1;if(u)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(W.req.query.range,N.query.range)}),!1,C,R];case"count":return[D=R.find(function(W){return Cr(W.req.query.range,N.query.range)}),!!D,C,R]}}(t,n,"query",u),P=g[0],m=g[1],S=g[2],b=g[3];return P&&m?P.obsSet=u.obsSet:(m=r.query(u).then(function(x){var I=x.result;if(P&&(P.res=I),h){for(var _=0,N=I.length;_<N;++_)Object.freeze(I[_]);Object.freeze(I)}else x.result=Rt(I);return x}).catch(function(x){return b&&P&&vn(b,P),Promise.reject(x)}),P={obsSet:u.obsSet,promise:m,subscribers:new Set,type:"query",req:u,dirty:!1},b?b.push(P):(b=[P],(S=S||(Cn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=b)),function Wr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,u;e.subscribers.delete(n),0===e.subscribers.size&&(i=e,u=t,setTimeout(function(){0===i.subscribers.size&&vn(u,i)},3e3))})}(P,b,p,w),P.promise.then(function(x){return{result:kr(x.result,u,S?.optimisticOps,r,P,h)}})}})}})}};function Qn(e,t){return new Proxy(e,{get:function(n,r,i){return"db"===r?t:Reflect.get(n,r,i)}})}var In=(Zt.prototype.version=function(e){if(isNaN(e)||e<.1)throw new T.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new T.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Dr),n.stores({}),this._state.autoSchema=!1,n)},Zt.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||l.letThrough||this._vip)?e():new Z(function(n,r){if(t._state.openComplete)return r(new T.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new T.DatabaseClosed);t.open().catch(c)}t._state.dbReadyPromise.then(n,r)}).then(e)},Zt.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:r??10,name:i}),e.sort(function(u,h){return u.level-h.level}),this},Zt.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},Zt.prototype.open=function(){var e=this;return Jt(B,function(){return qr(e)})},Zt.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Z(function(n){e.dbReadyResolve=n}),e.openCanceller=new Z(function(n,r){e.cancelOpen=r}))},Zt.prototype.close=function(n){var t=(void 0===n?{disableAutoOpen:!0}:n).disableAutoOpen;n=this._state,t?(n.isBeingOpened&&n.cancelOpen(new T.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new T.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},Zt.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new Z(function(i,u){function h(){t.close(e);var p=t._deps.indexedDB.deleteDatabase(t.name);p.onsuccess=Me(function(){var w,g,P;g=t.name,P=(w=t._deps).indexedDB,w=w.IDBKeyRange,ar(P)||g===Ot||or(P,w).delete(g).catch(c),i()}),p.onerror=Lt(u),p.onblocked=t._fireOnBlocked}if(n)throw new T.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(h):h()})},Zt.prototype.backendDB=function(){return this.idbdb},Zt.prototype.isOpen=function(){return null!==this.idbdb},Zt.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},Zt.prototype.hasFailed=function(){return null!==this._state.dbOpenError},Zt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Zt.prototype,"tables",{get:function(){var e=this;return ye(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),Zt.prototype.transaction=function(){var e=function(t,n,r){var i=arguments.length;if(i<2)throw new T.InvalidArgument("Too few arguments");for(var u=new Array(i-1);--i;)u[i-1]=arguments[i];return r=u.pop(),[t,At(u),r]}.apply(this,arguments);return this._transaction.apply(this,e)},Zt.prototype._transaction=function(e,t,n){var r=this,i=l.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var u,h,p=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(h=t.map(function(g){if("string"!=typeof(g=g instanceof r.Table?g.name:g))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return g}),"r"==e||e===ve)u=ve;else{if("rw"!=e&&e!=d)throw new T.InvalidArgument("Invalid transaction mode: "+e);u=d}if(i){if(i.mode===ve&&u===d){if(!p)throw new T.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&h.forEach(function(g){if(i&&-1===i.storeNames.indexOf(g)){if(!p)throw new T.SubTransaction("Table "+g+" not included in parent transaction.");i=null}}),p&&i&&!i.active&&(i=null)}}catch(g){return i?i._promise(null,function(P,m){m(g)}):ut(g)}var w=function g(P,m,S,b,x){return Z.resolve().then(function(){var I=l.transless||l,_=P._createTransaction(m,S,P._dbSchema,b);if(_.explicit=!0,I={trans:_,transless:I},b)_.idbtrans=b.idbtrans;else try{_.create(),_.idbtrans._explicit=!0,P._state.PR1398_maxLoop=3}catch(R){return R.name===Ee.InvalidState&&P.isOpen()&&0<--P._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),P.close({disableAutoOpen:!1}),P.open().then(function(){return g(P,m,S,null,x)})):ut(R)}var N,C=Pn(x);return C&&De(),I=Z.follow(function(){var R;(N=x.call(_,_))&&(C?(R=me.bind(null,null),N.then(R,R)):"function"==typeof N.next&&"function"==typeof N.throw&&(N=hr(N)))},I),(N&&"function"==typeof N.then?Z.resolve(N).then(function(R){return _.active?R:ut(new T.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):I.then(function(){return N})).then(function(R){return b&&_._resolve(),_._completion.then(function(){return R})}).catch(function(R){return _._reject(R),ut(R)})})}.bind(null,this,u,h,i,n);return i?i._promise(u,w,"lock"):l.trans?Jt(l.transless,function(){return r._whenReady(w)}):this._whenReady(w)},Zt.prototype.table=function(e){if(!ot(this._allTables,e))throw new T.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},Zt);function Zt(e,t){var n=this;this._middlewares={},this.verno=0;var r=Zt.dependencies;this._options=t=V({addons:Zt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,u,h,p,w,g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:c,dbReadyPromise:null,cancelOpen:c,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};g.dbReadyPromise=new Z(function(m){g.dbReadyResolve=m}),g.openCanceller=new Z(function(m,S){g.cancelOpen=S}),this._state=g,this.name=e,this.on=Ce(this,"populate","blocked","versionchange","close",{ready:[Oe,c]}),this.on.ready.subscribe=en(this.on.ready.subscribe,function(m){return function(S,b){Zt.vip(function(){var x,I=n._state;I.openComplete?(I.dbOpenError||Z.resolve().then(S),b&&m(S)):I.onReadyBeingFired?(I.onReadyBeingFired.push(S),b&&m(S)):(m(S),x=n,b||m(function _(){x.on.ready.unsubscribe(S),x.on.ready.unsubscribe(_)}))})}}),this.Collection=(i=this,Re(_e.prototype,function(N,_){this.db=i;var b=f,x=null;if(_)try{b=_()}catch(C){x=C}var I=N._ctx;this._ctx={table:_=I.table,index:I.index,isPrimKey:!I.index||_.schema.primKey.keyPath&&I.index===_.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:x,or:I.or,valueMapper:(N=_.hook.reading.fire)!==y?N:null}})),this.Table=(u=this,Re(ce.prototype,function(m,S,b){this.db=u,this._tx=b,this.name=m,this.schema=S,this.hook=u._allTables[m]?u._allTables[m].hook:Ce(null,{creating:[pe,c],reading:[E,y],updating:[k,c],deleting:[we,c]})})),this.Transaction=(h=this,Re(Dn.prototype,function(m,S,b,x,I){var _=this;this.db=h,this.mode=m,this.storeNames=S,this.schema=b,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Ce(this,"complete","error","abort"),this.parent=I||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Z(function(N,C){_._resolve=N,_._reject=C}),this._completion.then(function(){_.active=!1,_.on.complete.fire()},function(N){var C=_.active;return _.active=!1,_.on.error.fire(N),_.parent?_.parent._reject(N):C&&_.idbtrans&&_.idbtrans.abort(),ut(N)})})),this.Version=(p=this,Re(Mr.prototype,function(m){this.db=p,this._cfg={version:m,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(w=this,Re(sn.prototype,function(m,S,b){if(this.db=w,this._ctx={table:m,index:":id"===S?null:S,or:b},this._cmp=this._ascending=U,this._descending=function(x,I){return U(I,x)},this._max=function(x,I){return 0<U(x,I)?x:I},this._min=function(x,I){return U(x,I)<0?x:I},this._IDBKeyRange=w._deps.IDBKeyRange,!this._IDBKeyRange)throw new T.MissingAPI})),this.on("versionchange",function(m){0<m.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(m){!m.newVersion||m.newVersion<m.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(m.oldVersion/10))}),this._maxKey=On(t.IDBKeyRange),this._createTransaction=function(m,S,b,x){return new n.Transaction(m,S,b,n._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(m){n.on("blocked").fire(m),tt.filter(function(S){return S.name===n.name&&S!==n&&!S._state.vcFired}).map(function(S){return S.on("versionchange").fire(m)})},this.use($r),this.use(zr),this.use(Gr),this.use(Zr),this.use(Vr);var P=new Proxy(this,{get:function(m,S,b){if("_vip"===S)return!0;if("table"===S)return function(I){return Qn(n.table(I),P)};var x=Reflect.get(m,S,b);return x instanceof ce?Qn(x,P):"tables"===S?x.map(function(I){return Qn(I,P)}):"_createTransaction"===S?function(){return Qn(x.apply(this,arguments),P)}:x}});this.vip=P,r.forEach(function(m){return m(n)})}_n=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";var Xn,Jr=(vr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},vr.prototype[_n]=function(){return this},vr);function vr(e){this._subscribe=e}try{Xn={indexedDB:ae.indexedDB||ae.mozIndexedDB||ae.webkitIndexedDB||ae.msIndexedDB,IDBKeyRange:ae.IDBKeyRange||ae.webkitIDBKeyRange}}catch{Xn={indexedDB:null,IDBKeyRange:null}}function Br(e){var t,n=!1,r=new Jr(function(i){var h,u=Pn(e),p=!1,w={},g={},P={get closed(){return p},unsubscribe:function(){p||(p=!0,h&&h.abort(),m&&hn.storagemutated.unsubscribe(b))}};i.start&&i.start(P);var m=!1,S=function(){return rn(x)},b=function(I){zn(w,I),cr(g,w)&&S()},x=function(){var I,_,N;!p&&Xn.indexedDB&&(w={},I={},h&&h.abort(),h=new AbortController,N=function(C){var R=Mt();try{u&&De();var D=ke(e,C);return D=u?D.finally(me):D}finally{R&&tn()}}(_={subscr:I,signal:h.signal,requery:S,querier:e,trans:null}),Promise.resolve(N).then(function(C){n=!0,t=C,p||_.signal.aborted||(w={},function(R){for(var D in R)if(ot(R,D))return;return 1}(g=I)||m||(hn(Sn,b),m=!0),rn(function(){return!p&&i.next&&i.next(C)}))},function(C){n=!1,["DatabaseClosedError","AbortError"].includes(C?.name)||p||rn(function(){p||i.error&&i.error(C)})}))};return setTimeout(S,0),P});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Bn=In;function gr(e){var t=Nn;try{Nn=!0,hn.storagemutated.fire(e),dr(e,!0)}finally{Nn=t}}gt(Bn,V(V({},s),{delete:function(e){return new Bn(e,{addons:[]}).delete()},exists:function(e){return new Bn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=Bn.dependencies).indexedDB,t=t.IDBKeyRange,(ar(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Ot})}):or(n,t).toCollection().primaryKeys()).then(e)}catch{return ut(new T.MissingAPI)}var t,n},defineClass:function(){return function(e){ge(this,e)}},ignoreTransaction:function(e){return l.trans?Jt(l.transless,e):e()},vip:ur,async:function(e){return function(){try{var t=hr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Z.resolve(t)}catch(n){return ut(n)}}},spawn:function(e,t,n){try{var r=hr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Z.resolve(r)}catch(i){return ut(i)}},currentTransaction:{get:function(){return l.trans||null}},waitFor:function(e,t){return t=Z.resolve("function"==typeof e?Bn.ignoreTransaction(e):e).timeout(t||6e4),l.trans?l.trans.waitFor(t):t},Promise:Z,debug:{get:function(){return lt},set:function(e){kt(e)}},derive:Se,extend:ge,props:gt,override:en,Events:Ce,on:hn,liveQuery:Br,extendObservabilitySet:zn,getByKeyPath:ft,setByKeyPath:It,delByKeyPath:function(e,t){"string"==typeof t?It(e,t,void 0):"length"in t&&[].map.call(t,function(n){It(e,n,void 0)})},shallowClone:xt,deepClone:Rt,getObjectDiff:pr,cmp:U,asap:jt,minKey:-1/0,addons:[],connections:tt,errnames:Ee,dependencies:Xn,cache:Cn,semVer:"4.0.8",version:"4.0.8".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Bn.maxKey=On(Bn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(hn(Sn,function(e){Nn||(e=new CustomEvent(Tn,{detail:e}),Nn=!0,dispatchEvent(e),Nn=!1)}),addEventListener(Tn,function(e){e=e.detail,Nn||gr(e)}));var Kn,Nn=!1,jr=function(){};return typeof BroadcastChannel<"u"&&((jr=function(){(Kn=new BroadcastChannel(Tn)).onmessage=function(e){return e.data&&gr(e.data)}})(),"function"==typeof Kn.unref&&Kn.unref(),hn(Sn,function(e){Nn||Kn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!In.disableBfCache&&e.persisted){lt&&console.debug("Dexie: handling persisted pagehide"),Kn?.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!In.disableBfCache&&e.persisted&&(lt&&console.debug("Dexie: handling persisted pageshow"),jr(),gr({all:new pn(-1/0,[[]])}))})),Z.rejectionMapper=function(e,t){return!e||e instanceof $||e instanceof TypeError||e instanceof SyntaxError||!e.name||!a[e.name]?e:(t=new a[e.name](t||e.message,e),"stack"in e&&bt(t,"stack",{get:function(){return this.inner.stack}}),t)},kt(lt),V(In,Object.freeze({__proto__:null,Dexie:In,liveQuery:Br,Entity:O,cmp:U,PropModSymbol:fe,PropModification:Q,replacePrefix:function(e,t){return new Q({replacePrefix:[e,t]})},add:function(e){return new Q({add:e})},remove:function(e){return new Q({remove:e})},default:In,RangeSet:pn,mergeRanges:Mn,rangesOverlap:Ar}),{default:In}),In}()},5592:(Ye,Ke,V)=>{"use strict";V.d(Ke,{y:()=>ot});var K=V(305),ae=V(5113),ye=V(4850),le=V(8407),ge=V(2653),it=V(4674),Bt=V(1441);let ot=(()=>{class Se{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const et=new Se;return et.source=this,et.operator=Ue,et}subscribe(Ue,et,en){const pt=function bt(Se){return Se&&Se instanceof K.Lv||function Gt(Se){return Se&&(0,it.m)(Se.next)&&(0,it.m)(Se.error)&&(0,it.m)(Se.complete)}(Se)&&(0,ae.Nn)(Se)}(Ue)?Ue:new K.Hp(Ue,et,en);return(0,Bt.x)(()=>{const{operator:jt,source:ft}=this;pt.add(jt?jt.call(pt,ft):ft?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(et){Ue.error(et)}}forEach(Ue,et){return new(et=gt(et))((en,pt)=>{const jt=new K.Hp({next:ft=>{try{Ue(ft)}catch(It){pt(It),jt.unsubscribe()}},error:pt,complete:en});this.subscribe(jt)})}_subscribe(Ue){var et;return null===(et=this.source)||void 0===et?void 0:et.subscribe(Ue)}[ye.L](){return this}pipe(...Ue){return(0,le.U)(Ue)(this)}toPromise(Ue){return new(Ue=gt(Ue))((et,en)=>{let pt;this.subscribe(jt=>pt=jt,jt=>en(jt),()=>et(pt))})}}return Se.create=fn=>new Se(fn),Se})();function gt(Se){var fn;return null!==(fn=Se??ge.config.Promise)&&void 0!==fn?fn:Promise}},305:(Ye,Ke,V)=>{"use strict";V.d(Ke,{Hp:()=>en,Lv:()=>Se});var K=V(4674),ae=V(5113),ye=V(2653),le=V(3894),ge=V(2420);const it=gt("C",void 0,void 0);function gt(xt,de,At){return{kind:xt,value:de,error:At}}var Gt=V(7599),bt=V(1441);class Se extends ae.w0{constructor(de){super(),this.isStopped=!1,de?(this.destination=de,(0,ae.Nn)(de)&&de.add(this)):this.destination=It}static create(de,At,Ut){return new en(de,At,Ut)}next(de){this.isStopped?ft(function ot(xt){return gt("N",xt,void 0)}(de),this):this._next(de)}error(de){this.isStopped?ft(function Bt(xt){return gt("E",void 0,xt)}(de),this):(this.isStopped=!0,this._error(de))}complete(){this.isStopped?ft(it,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(de){this.destination.next(de)}_error(de){try{this.destination.error(de)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const fn=Function.prototype.bind;function Ue(xt,de){return fn.call(xt,de)}class et{constructor(de){this.partialObserver=de}next(de){const{partialObserver:At}=this;if(At.next)try{At.next(de)}catch(Ut){pt(Ut)}}error(de){const{partialObserver:At}=this;if(At.error)try{At.error(de)}catch(Ut){pt(Ut)}else pt(de)}complete(){const{partialObserver:de}=this;if(de.complete)try{de.complete()}catch(At){pt(At)}}}class en extends Se{constructor(de,At,Ut){let Yt;if(super(),(0,K.m)(de)||!de)Yt={next:de??void 0,error:At??void 0,complete:Ut??void 0};else{let Rt;this&&ye.config.useDeprecatedNextContext?(Rt=Object.create(de),Rt.unsubscribe=()=>this.unsubscribe(),Yt={next:de.next&&Ue(de.next,Rt),error:de.error&&Ue(de.error,Rt),complete:de.complete&&Ue(de.complete,Rt)}):Yt=de}this.destination=new et(Yt)}}function pt(xt){ye.config.useDeprecatedSynchronousErrorHandling?(0,bt.O)(xt):(0,le.h)(xt)}function ft(xt,de){const{onStoppedNotification:At}=ye.config;At&&Gt.z.setTimeout(()=>At(xt,de))}const It={closed:!0,next:ge.Z,error:function jt(xt){throw xt},complete:ge.Z}},2653:(Ye,Ke,V)=>{"use strict";V.d(Ke,{config:()=>K});const K={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7599:(Ye,Ke,V)=>{"use strict";V.d(Ke,{z:()=>K});const K={setTimeout(ae,ye,...le){const{delegate:ge}=K;return ge?.setTimeout?ge.setTimeout(ae,ye,...le):setTimeout(ae,ye,...le)},clearTimeout(ae){const{delegate:ye}=K;return(ye?.clearTimeout||clearTimeout)(ae)},delegate:void 0}},4850:(Ye,Ke,V)=>{"use strict";V.d(Ke,{L:()=>K});const K="function"==typeof Symbol&&Symbol.observable||"@@observable"},9732:(Ye,Ke,V)=>{"use strict";V.d(Ke,{B:()=>ae});const ae=(0,V(2306).d)(ye=>function(ge){ye(this),this.message=ge?`${ge.length} errors occurred during unsubscription:\n${ge.map((it,Bt)=>`${Bt+1}) ${it.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ge})},9039:(Ye,Ke,V)=>{"use strict";function K(ae,ye){if(ae){const le=ae.indexOf(ye);0<=le&&ae.splice(le,1)}}V.d(Ke,{P:()=>K})},2306:(Ye,Ke,V)=>{"use strict";function K(ae){const le=ae(ge=>{Error.call(ge),ge.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}V.d(Ke,{d:()=>K})},1441:(Ye,Ke,V)=>{"use strict";V.d(Ke,{O:()=>le,x:()=>ye});var K=V(2653);let ae=null;function ye(ge){if(K.config.useDeprecatedSynchronousErrorHandling){const it=!ae;if(it&&(ae={errorThrown:!1,error:null}),ge(),it){const{errorThrown:Bt,error:ot}=ae;if(ae=null,Bt)throw ot}}else ge()}function le(ge){K.config.useDeprecatedSynchronousErrorHandling&&ae&&(ae.errorThrown=!0,ae.error=ge)}},2737:(Ye,Ke,V)=>{"use strict";function K(ae){return ae}V.d(Ke,{y:()=>K})},4674:(Ye,Ke,V)=>{"use strict";function K(ae){return"function"==typeof ae}V.d(Ke,{m:()=>K})},2420:(Ye,Ke,V)=>{"use strict";function K(){}V.d(Ke,{Z:()=>K})},3894:(Ye,Ke,V)=>{"use strict";V.d(Ke,{h:()=>ye});var K=V(2653),ae=V(7599);function ye(le){ae.z.setTimeout(()=>{const{onUnhandledError:ge}=K.config;if(!ge)throw le;ge(le)})}},7061:(Ye,Ke,V)=>{var K=V(8698).default;function ae(){"use strict";Ye.exports=ae=function(){return le},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports;var ye,le={},ge=Object.prototype,it=ge.hasOwnProperty,Bt=Object.defineProperty||function(ue,$,H){ue[$]=H.value},ot="function"==typeof Symbol?Symbol:{},gt=ot.iterator||"@@iterator",Gt=ot.asyncIterator||"@@asyncIterator",bt=ot.toStringTag||"@@toStringTag";function Se(ue,$,H){return Object.defineProperty(ue,$,{value:H,enumerable:!0,configurable:!0,writable:!0}),ue[$]}try{Se({},"")}catch{Se=function(H,xe,J){return H[xe]=J}}function fn(ue,$,H,xe){var Ee=Object.create(($&&$.prototype instanceof It?$:It).prototype),Tt=new an(xe||[]);return Bt(Ee,"_invoke",{value:kn(ue,H,Tt)}),Ee}function Ue(ue,$,H){try{return{type:"normal",arg:ue.call($,H)}}catch(xe){return{type:"throw",arg:xe}}}le.wrap=fn;var et="suspendedStart",en="suspendedYield",pt="executing",jt="completed",ft={};function It(){}function xt(){}function de(){}var At={};Se(At,gt,function(){return this});var Ut=Object.getPrototypeOf,Yt=Ut&&Ut(Ut(Pn([])));Yt&&Yt!==ge&&it.call(Yt,gt)&&(At=Yt);var Rt=de.prototype=It.prototype=Object.create(At);function Rn(ue){["next","throw","return"].forEach(function($){Se(ue,$,function(H){return this._invoke($,H)})})}function En(ue,$){function H(J,Ee,Tt,T){var a=Ue(ue[J],ue,Ee);if("throw"!==a.type){var s=a.arg,c=s.value;return c&&"object"==K(c)&&it.call(c,"__await")?$.resolve(c.__await).then(function(y){H("next",y,Tt,T)},function(y){H("throw",y,Tt,T)}):$.resolve(c).then(function(y){s.value=y,Tt(s)},function(y){return H("throw",y,Tt,T)})}T(a.arg)}var xe;Bt(this,"_invoke",{value:function(Ee,Tt){function T(){return new $(function(a,s){H(Ee,Tt,a,s)})}return xe=xe?xe.then(T,T):T()}})}function kn(ue,$,H){var xe=et;return function(J,Ee){if(xe===pt)throw Error("Generator is already running");if(xe===jt){if("throw"===J)throw Ee;return{value:ye,done:!0}}for(H.method=J,H.arg=Ee;;){var Tt=H.delegate;if(Tt){var T=Fn(Tt,H);if(T){if(T===ft)continue;return T}}if("next"===H.method)H.sent=H._sent=H.arg;else if("throw"===H.method){if(xe===et)throw xe=jt,H.arg;H.dispatchException(H.arg)}else"return"===H.method&&H.abrupt("return",H.arg);xe=pt;var a=Ue(ue,$,H);if("normal"===a.type){if(xe=H.done?jt:en,a.arg===ft)continue;return{value:a.arg,done:H.done}}"throw"===a.type&&(xe=jt,H.method="throw",H.arg=a.arg)}}}function Fn(ue,$){var H=$.method,xe=ue.iterator[H];if(xe===ye)return $.delegate=null,"throw"===H&&ue.iterator.return&&($.method="return",$.arg=ye,Fn(ue,$),"throw"===$.method)||"return"!==H&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+H+"' method")),ft;var J=Ue(xe,ue.iterator,$.arg);if("throw"===J.type)return $.method="throw",$.arg=J.arg,$.delegate=null,ft;var Ee=J.arg;return Ee?Ee.done?($[ue.resultName]=Ee.value,$.next=ue.nextLoc,"return"!==$.method&&($.method="next",$.arg=ye),$.delegate=null,ft):Ee:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,ft)}function vn(ue){var $={tryLoc:ue[0]};1 in ue&&($.catchLoc=ue[1]),2 in ue&&($.finallyLoc=ue[2],$.afterLoc=ue[3]),this.tryEntries.push($)}function gn(ue){var $=ue.completion||{};$.type="normal",delete $.arg,ue.completion=$}function an(ue){this.tryEntries=[{tryLoc:"root"}],ue.forEach(vn,this),this.reset(!0)}function Pn(ue){if(ue||""===ue){var $=ue[gt];if($)return $.call(ue);if("function"==typeof ue.next)return ue;if(!isNaN(ue.length)){var H=-1,xe=function J(){for(;++H<ue.length;)if(it.call(ue,H))return J.value=ue[H],J.done=!1,J;return J.value=ye,J.done=!0,J};return xe.next=xe}}throw new TypeError(K(ue)+" is not iterable")}return xt.prototype=de,Bt(Rt,"constructor",{value:de,configurable:!0}),Bt(de,"constructor",{value:xt,configurable:!0}),xt.displayName=Se(de,bt,"GeneratorFunction"),le.isGeneratorFunction=function(ue){var $="function"==typeof ue&&ue.constructor;return!!$&&($===xt||"GeneratorFunction"===($.displayName||$.name))},le.mark=function(ue){return Object.setPrototypeOf?Object.setPrototypeOf(ue,de):(ue.__proto__=de,Se(ue,bt,"GeneratorFunction")),ue.prototype=Object.create(Rt),ue},le.awrap=function(ue){return{__await:ue}},Rn(En.prototype),Se(En.prototype,Gt,function(){return this}),le.AsyncIterator=En,le.async=function(ue,$,H,xe,J){void 0===J&&(J=Promise);var Ee=new En(fn(ue,$,H,xe),J);return le.isGeneratorFunction($)?Ee:Ee.next().then(function(Tt){return Tt.done?Tt.value:Ee.next()})},Rn(Rt),Se(Rt,bt,"Generator"),Se(Rt,gt,function(){return this}),Se(Rt,"toString",function(){return"[object Generator]"}),le.keys=function(ue){var $=Object(ue),H=[];for(var xe in $)H.push(xe);return H.reverse(),function J(){for(;H.length;){var Ee=H.pop();if(Ee in $)return J.value=Ee,J.done=!1,J}return J.done=!0,J}},le.values=Pn,an.prototype={constructor:an,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=ye,this.done=!1,this.delegate=null,this.method="next",this.arg=ye,this.tryEntries.forEach(gn),!$)for(var H in this)"t"===H.charAt(0)&&it.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=ye)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if("throw"===$.type)throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var H=this;function xe(s,c){return Tt.type="throw",Tt.arg=$,H.next=s,c&&(H.method="next",H.arg=ye),!!c}for(var J=this.tryEntries.length-1;J>=0;--J){var Ee=this.tryEntries[J],Tt=Ee.completion;if("root"===Ee.tryLoc)return xe("end");if(Ee.tryLoc<=this.prev){var T=it.call(Ee,"catchLoc"),a=it.call(Ee,"finallyLoc");if(T&&a){if(this.prev<Ee.catchLoc)return xe(Ee.catchLoc,!0);if(this.prev<Ee.finallyLoc)return xe(Ee.finallyLoc)}else if(T){if(this.prev<Ee.catchLoc)return xe(Ee.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<Ee.finallyLoc)return xe(Ee.finallyLoc)}}}},abrupt:function($,H){for(var xe=this.tryEntries.length-1;xe>=0;--xe){var J=this.tryEntries[xe];if(J.tryLoc<=this.prev&&it.call(J,"finallyLoc")&&this.prev<J.finallyLoc){var Ee=J;break}}Ee&&("break"===$||"continue"===$)&&Ee.tryLoc<=H&&H<=Ee.finallyLoc&&(Ee=null);var Tt=Ee?Ee.completion:{};return Tt.type=$,Tt.arg=H,Ee?(this.method="next",this.next=Ee.finallyLoc,ft):this.complete(Tt)},complete:function($,H){if("throw"===$.type)throw $.arg;return"break"===$.type||"continue"===$.type?this.next=$.arg:"return"===$.type?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):"normal"===$.type&&H&&(this.next=H),ft},finish:function($){for(var H=this.tryEntries.length-1;H>=0;--H){var xe=this.tryEntries[H];if(xe.finallyLoc===$)return this.complete(xe.completion,xe.afterLoc),gn(xe),ft}},catch:function($){for(var H=this.tryEntries.length-1;H>=0;--H){var xe=this.tryEntries[H];if(xe.tryLoc===$){var J=xe.completion;if("throw"===J.type){var Ee=J.arg;gn(xe)}return Ee}}throw Error("illegal catch attempt")},delegateYield:function($,H,xe){return this.delegate={iterator:Pn($),resultName:H,nextLoc:xe},"next"===this.method&&(this.arg=ye),ft}},le}Ye.exports=ae,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports},8698:Ye=>{function Ke(V){return Ye.exports=Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(K){return typeof K}:function(K){return K&&"function"==typeof Symbol&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports,Ke(V)}Ye.exports=Ke,Ye.exports.__esModule=!0,Ye.exports.default=Ye.exports},4687:(Ye,Ke,V)=>{var K=V(7061)();Ye.exports=K;try{regeneratorRuntime=K}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=K:Function("r","regeneratorRuntime = r")(K)}},7331:(Ye,Ke,V)=>{"use strict";V.d(Ke,{ZP:()=>et});var K=V(3667);const ae=Symbol.for("Dexie"),ye=globalThis[ae]||(globalThis[ae]=K);if(K.semVer!==ye.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${K.semVer} and ${ye.semVer}`);const et=ye},5861:(Ye,Ke,V)=>{"use strict";function K(ye,le,ge,it,Bt,ot,gt){try{var Gt=ye[ot](gt),bt=Gt.value}catch(Se){return void ge(Se)}Gt.done?le(bt):Promise.resolve(bt).then(it,Bt)}function ae(ye){return function(){var le=this,ge=arguments;return new Promise(function(it,Bt){var ot=ye.apply(le,ge);function gt(bt){K(ot,it,Bt,gt,Gt,"next",bt)}function Gt(bt){K(ot,it,Bt,gt,Gt,"throw",bt)}gt(void 0)})}}V.d(Ke,{Z:()=>ae})}}]);