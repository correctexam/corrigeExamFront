window.ngxZone.runOutsideAngular(() => {
/**
 * @licstart The following is the entire license notice for the
 * Javascript code in this page
 *
 * Copyright 2021 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * Javascript code in this page
 */(()=>{var e=[,(e,t,r)=>{var i=r(2),n=r(3),o=r(4),a=r(8),s=r(61),l=r(17),c=l("iterator"),d=l("toStringTag"),h=a.values,handlePrototype=function(e,t){if(e){if(e[c]!==h)try{s(e,c,h)}catch(t){e[c]=h}e[d]||s(e,d,t);if(n[t])for(var r in a)if(e[r]!==a[r])try{s(e,r,a[r])}catch(t){e[r]=a[r]}}};for(var u in n)handlePrototype(i[u]&&i[u].prototype,u);handlePrototype(o,"DOMTokenList")},e=>{var check=function(e){return e&&e.Math==Math&&e};e.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},(e,t,r)=>{var i=r(5)("span").classList,n=i&&i.constructor&&i.constructor.prototype;e.exports=n===Object.prototype?void 0:n},(e,t,r)=>{var i=r(2),n=r(6),o=i.document,a=n(o)&&n(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},(e,t,r)=>{var i=r(7);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},e=>{e.exports=function(e){return"function"==typeof e}},(e,t,r)=>{"use strict";var i=r(9),n=r(16),o=r(57),a=r(58),s=r(35).f,l=r(63),c=r(19),d=r(33),h="Array Iterator",u=a.set,p=a.getterFor(h);e.exports=l(Array,"Array",(function(e,t){u(this,{type:h,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,r=e.kind,i=e.index++;if(!t||i>=t.length){e.target=void 0;return{value:void 0,done:!0}}return"keys"==r?{value:i,done:!1}:"values"==r?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");var g=o.Arguments=o.Array;n("keys");n("values");n("entries");if(!c&&d&&"values"!==g.name)try{s(g,"name",{value:"values"})}catch(e){}},(e,t,r)=>{var i=r(10),n=r(15);e.exports=function(e){return i(n(e))}},(e,t,r)=>{var i=r(2),n=r(11),o=r(13),a=r(14),s=i.Object,l=n("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},(e,t,r)=>{var i=r(12),n=Function.prototype,o=n.bind,a=n.call,s=i&&o.bind(a,a);e.exports=i?function(e){return e&&s(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},(e,t,r)=>{var i=r(13);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,r)=>{var i=r(11),n=i({}.toString),o=i("".slice);e.exports=function(e){return o(n(e),8,-1)}},(e,t,r)=>{var i=r(2).TypeError;e.exports=function(e){if(null==e)throw i("Can't call method on "+e);return e}},(e,t,r)=>{var i=r(17),n=r(30),o=r(35),a=i("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:n(null)});e.exports=function(e){s[a][e]=!0}},(e,t,r)=>{var i=r(2),n=r(18),o=r(22),a=r(24),s=r(25),l=r(29),c=n("wks"),d=i.Symbol,h=d&&d.for,u=l?d:d&&d.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&o(d,e)?c[e]=d[e]:c[e]=l&&h?h(t):u(t)}return c[e]}},(e,t,r)=>{var i=r(19),n=r(20);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.0",mode:i?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.0/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,r)=>{var i=r(2),n=r(21),o="__core-js_shared__",a=i[o]||n(o,{});e.exports=a},(e,t,r)=>{var i=r(2),n=Object.defineProperty;e.exports=function(e,t){try{n(i,e,{value:t,configurable:!0,writable:!0})}catch(r){i[e]=t}return t}},(e,t,r)=>{var i=r(11),n=r(23),o=i({}.hasOwnProperty);e.exports=Object.hasOwn||function hasOwn(e,t){return o(n(e),t)}},(e,t,r)=>{var i=r(2),n=r(15),o=i.Object;e.exports=function(e){return o(n(e))}},(e,t,r)=>{var i=r(11),n=0,o=Math.random(),a=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++n+o,36)}},(e,t,r)=>{var i=r(26),n=r(13);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},(e,t,r)=>{var i,n,o=r(2),a=r(27),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,d=c&&c.v8;d&&(n=(i=d.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1]));!n&&a&&(!(i=a.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/))&&(n=+i[1]);e.exports=n},(e,t,r)=>{var i=r(28);e.exports=i("navigator","userAgent")||""},(e,t,r)=>{var i=r(2),n=r(7),aFunction=function(e){return n(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?aFunction(i[e]):i[e]&&i[e][t]}},(e,t,r)=>{var i=r(25);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,r)=>{var i,n=r(31),o=r(32),a=r(54),s=r(53),l=r(55),c=r(5),d=r(56),h=d("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return"<script>"+e+"</"+"script>"},NullProtoObjectViaActiveX=function(e){e.write(scriptTag(""));e.close();var t=e.parentWindow.Object;e=null;return t},NullProtoObject=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"!=typeof document?document.domain&&i?NullProtoObjectViaActiveX(i):function(){var e,t=c("iframe");t.style.display="none";l.appendChild(t);t.src=String("javascript:");(e=t.contentWindow.document).open();e.write(scriptTag("document.F=Object"));e.close();return e.F}():NullProtoObjectViaActiveX(i);for(var e=a.length;e--;)delete NullProtoObject.prototype[a[e]];return NullProtoObject()};s[h]=!0;e.exports=Object.create||function create(e,t){var r;if(null!==e){EmptyConstructor.prototype=n(e);r=new EmptyConstructor;EmptyConstructor.prototype=null;r[h]=e}else r=NullProtoObject();return void 0===t?r:o.f(r,t)}},(e,t,r)=>{var i=r(2),n=r(6),o=i.String,a=i.TypeError;e.exports=function(e){if(n(e))return e;throw a(o(e)+" is not an object")}},(e,t,r)=>{var i=r(33),n=r(34),o=r(35),a=r(31),s=r(9),l=r(46);t.f=i&&!n?Object.defineProperties:function defineProperties(e,t){a(e);for(var r,i=s(t),n=l(t),c=n.length,d=0;c>d;)o.f(e,r=n[d++],i[r]);return e}},(e,t,r)=>{var i=r(13);e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},(e,t,r)=>{var i=r(33),n=r(13);e.exports=i&&n((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(e,t,r)=>{var i=r(2),n=r(33),o=r(36),a=r(34),s=r(31),l=r(37),c=i.TypeError,d=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",p="configurable",g="writable";t.f=n?a?function defineProperty(e,t,r){s(e);t=l(t);s(r);if("function"==typeof e&&"prototype"===t&&"value"in r&&g in r&&!r.writable){var i=h(e,t);if(i&&i.writable){e[t]=r.value;r={configurable:p in r?r.configurable:i.configurable,enumerable:u in r?r.enumerable:i.enumerable,writable:!1}}}return d(e,t,r)}:d:function defineProperty(e,t,r){s(e);t=l(t);s(r);if(o)try{return d(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");"value"in r&&(e[t]=r.value);return e}},(e,t,r)=>{var i=r(33),n=r(13),o=r(5);e.exports=!i&&!n((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},(e,t,r)=>{var i=r(38),n=r(40);e.exports=function(e){var t=i(e,"string");return n(t)?t:t+""}},(e,t,r)=>{var i=r(2),n=r(39),o=r(6),a=r(40),s=r(42),l=r(45),c=r(17),d=i.TypeError,h=c("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var r,i=s(e,h);if(i){void 0===t&&(t="default");r=n(i,e,t);if(!o(r)||a(r))return r;throw d("Can't convert object to primitive value")}void 0===t&&(t="number");return l(e,t)}},(e,t,r)=>{var i=r(12),n=Function.prototype.call;e.exports=i?n.bind(n):function(){return n.apply(n,arguments)}},(e,t,r)=>{var i=r(2),n=r(28),o=r(7),a=r(41),s=r(29),l=i.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&a(t.prototype,l(e))}},(e,t,r)=>{var i=r(11);e.exports=i({}.isPrototypeOf)},(e,t,r)=>{var i=r(43);e.exports=function(e,t){var r=e[t];return null==r?void 0:i(r)}},(e,t,r)=>{var i=r(2),n=r(7),o=r(44),a=i.TypeError;e.exports=function(e){if(n(e))return e;throw a(o(e)+" is not a function")}},(e,t,r)=>{var i=r(2).String;e.exports=function(e){try{return i(e)}catch(e){return"Object"}}},(e,t,r)=>{var i=r(2),n=r(39),o=r(7),a=r(6),s=i.TypeError;e.exports=function(e,t){var r,i;if("string"===t&&o(r=e.toString)&&!a(i=n(r,e)))return i;if(o(r=e.valueOf)&&!a(i=n(r,e)))return i;if("string"!==t&&o(r=e.toString)&&!a(i=n(r,e)))return i;throw s("Can't convert object to primitive value")}},(e,t,r)=>{var i=r(47),n=r(54);e.exports=Object.keys||function keys(e){return i(e,n)}},(e,t,r)=>{var i=r(11),n=r(22),o=r(9),a=r(48).indexOf,s=r(53),l=i([].push);e.exports=function(e,t){var r,i=o(e),c=0,d=[];for(r in i)!n(s,r)&&n(i,r)&&l(d,r);for(;t.length>c;)n(i,r=t[c++])&&(~a(d,r)||l(d,r));return d}},(e,t,r)=>{var i=r(9),n=r(49),o=r(51),createMethod=function(e){return function(t,r,a){var s,l=i(t),c=o(l),d=n(a,c);if(e&&r!=r){for(;c>d;)if((s=l[d++])!=s)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===r)return e||d||0;return!e&&-1}};e.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(e,t,r)=>{var i=r(50),n=Math.max,o=Math.min;e.exports=function(e,t){var r=i(e);return r<0?n(r+t,0):o(r,t)}},e=>{var t=Math.ceil,r=Math.floor;e.exports=function(e){var i=+e;return i!=i||0===i?0:(i>0?r:t)(i)}},(e,t,r)=>{var i=r(52);e.exports=function(e){return i(e.length)}},(e,t,r)=>{var i=r(50),n=Math.min;e.exports=function(e){return e>0?n(i(e),9007199254740991):0}},e=>{e.exports={}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t,r)=>{var i=r(28);e.exports=i("document","documentElement")},(e,t,r)=>{var i=r(18),n=r(24),o=i("keys");e.exports=function(e){return o[e]||(o[e]=n(e))}},e=>{e.exports={}},(e,t,r)=>{var i,n,o,a=r(59),s=r(2),l=r(11),c=r(6),d=r(61),h=r(22),u=r(20),p=r(56),g=r(53),f="Object already initialized",m=s.TypeError,v=s.WeakMap;if(a||u.state){var b=u.state||(u.state=new v),w=l(b.get),y=l(b.has),_=l(b.set);i=function(e,t){if(y(b,e))throw new m(f);t.facade=e;_(b,e,t);return t};n=function(e){return w(b,e)||{}};o=function(e){return y(b,e)}}else{var S=p("state");g[S]=!0;i=function(e,t){if(h(e,S))throw new m(f);t.facade=e;d(e,S,t);return t};n=function(e){return h(e,S)?e[S]:{}};o=function(e){return h(e,S)}}e.exports={set:i,get:n,has:o,enforce:function(e){return o(e)?n(e):i(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=n(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return r}}}},(e,t,r)=>{var i=r(2),n=r(7),o=r(60),a=i.WeakMap;e.exports=n(a)&&/native code/.test(o(a))},(e,t,r)=>{var i=r(11),n=r(7),o=r(20),a=i(Function.toString);n(o.inspectSource)||(o.inspectSource=function(e){return a(e)});e.exports=o.inspectSource},(e,t,r)=>{var i=r(33),n=r(35),o=r(62);e.exports=i?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){e[t]=r;return e}},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,r)=>{"use strict";var i=r(64),n=r(39),o=r(19),a=r(68),s=r(7),l=r(74),c=r(76),d=r(79),h=r(78),u=r(61),p=r(67),g=r(17),f=r(57),m=r(75),v=a.PROPER,b=a.CONFIGURABLE,w=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,_=g("iterator"),S="keys",P="values",C="entries",returnThis=function(){return this};e.exports=function(e,t,r,a,g,m,R){l(r,t,a);var E,x,T,getIterationMethod=function(e){if(e===g&&B)return B;if(!y&&e in A)return A[e];switch(e){case S:return function keys(){return new r(this,e)};case P:return function values(){return new r(this,e)};case C:return function entries(){return new r(this,e)}}return function(){return new r(this)}},I=t+" Iterator",L=!1,A=e.prototype,D=A[_]||A["@@iterator"]||g&&A[g],B=!y&&D||getIterationMethod(g),M="Array"==t&&A.entries||D;if(M&&(E=c(M.call(new e)))!==Object.prototype&&E.next){o||c(E)===w||(d?d(E,w):s(E[_])||p(E,_,returnThis));h(E,I,!0,!0);o&&(f[I]=returnThis)}if(v&&g==P&&D&&D.name!==P)if(!o&&b)u(A,"name",P);else{L=!0;B=function values(){return n(D,this)}}if(g){x={values:getIterationMethod(P),keys:m?B:getIterationMethod(S),entries:getIterationMethod(C)};if(R)for(T in x)(y||L||!(T in A))&&p(A,T,x[T]);else i({target:t,proto:!0,forced:y||L},x)}o&&!R||A[_]===B||p(A,_,B,{name:g});f[t]=B;return x}},(e,t,r)=>{var i=r(2),n=r(65).f,o=r(61),a=r(67),s=r(21),l=r(69),c=r(73);e.exports=function(e,t){var r,d,h,u,p,g=e.target,f=e.global,m=e.stat;if(r=f?i:m?i[g]||s(g,{}):(i[g]||{}).prototype)for(d in t){u=t[d];h=e.noTargetGet?(p=n(r,d))&&p.value:r[d];if(!c(f?d:g+(m?".":"#")+d,e.forced)&&void 0!==h){if(typeof u==typeof h)continue;l(u,h)}(e.sham||h&&h.sham)&&o(u,"sham",!0);a(r,d,u,e)}}},(e,t,r)=>{var i=r(33),n=r(39),o=r(66),a=r(62),s=r(9),l=r(37),c=r(22),d=r(36),h=Object.getOwnPropertyDescriptor;t.f=i?h:function getOwnPropertyDescriptor(e,t){e=s(e);t=l(t);if(d)try{return h(e,t)}catch(e){}if(c(e,t))return a(!n(o.f,e,t),e[t])}},(e,t)=>{"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,n=i&&!r.call({1:2},1);t.f=n?function propertyIsEnumerable(e){var t=i(this,e);return!!t&&t.enumerable}:r},(e,t,r)=>{var i=r(2),n=r(7),o=r(22),a=r(61),s=r(21),l=r(60),c=r(58),d=r(68).CONFIGURABLE,h=c.get,u=c.enforce,p=String(String).split("String");(e.exports=function(e,t,r,l){var c,h=!!l&&!!l.unsafe,g=!!l&&!!l.enumerable,f=!!l&&!!l.noTargetGet,m=l&&void 0!==l.name?l.name:t;if(n(r)){"Symbol("===String(m).slice(0,7)&&(m="["+String(m).replace(/^Symbol\(([^)]*)\)/,"$1")+"]");(!o(r,"name")||d&&r.name!==m)&&a(r,"name",m);(c=u(r)).source||(c.source=p.join("string"==typeof m?m:""))}if(e!==i){h?!f&&e[t]&&(g=!0):delete e[t];g?e[t]=r:a(e,t,r)}else g?e[t]=r:s(t,r)})(Function.prototype,"toString",(function toString(){return n(this)&&h(this).source||l(this)}))},(e,t,r)=>{var i=r(33),n=r(22),o=Function.prototype,a=i&&Object.getOwnPropertyDescriptor,s=n(o,"name"),l=s&&"something"===function something(){}.name,c=s&&(!i||i&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},(e,t,r)=>{var i=r(22),n=r(70),o=r(65),a=r(35);e.exports=function(e,t,r){for(var s=n(t),l=a.f,c=o.f,d=0;d<s.length;d++){var h=s[d];i(e,h)||r&&i(r,h)||l(e,h,c(t,h))}}},(e,t,r)=>{var i=r(28),n=r(11),o=r(71),a=r(72),s=r(31),l=n([].concat);e.exports=i("Reflect","ownKeys")||function ownKeys(e){var t=o.f(s(e)),r=a.f;return r?l(t,r(e)):t}},(e,t,r)=>{var i=r(47),n=r(54).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return i(e,n)}},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,r)=>{var i=r(13),n=r(7),o=/#|\.prototype\./,isForced=function(e,t){var r=s[a(e)];return r==c||r!=l&&(n(t)?i(t):!!t)},a=isForced.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=isForced.data={},l=isForced.NATIVE="N",c=isForced.POLYFILL="P";e.exports=isForced},(e,t,r)=>{"use strict";var i=r(75).IteratorPrototype,n=r(30),o=r(62),a=r(78),s=r(57),returnThis=function(){return this};e.exports=function(e,t,r,l){var c=t+" Iterator";e.prototype=n(i,{next:o(+!l,r)});a(e,c,!1,!0);s[c]=returnThis;return e}},(e,t,r)=>{"use strict";var i,n,o,a=r(13),s=r(7),l=r(30),c=r(76),d=r(67),h=r(17),u=r(19),p=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(n=c(c(o)))!==Object.prototype&&(i=n):g=!0);null==i||a((function(){var e={};return i[p].call(e)!==e}))?i={}:u&&(i=l(i));s(i[p])||d(i,p,(function(){return this}));e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:g}},(e,t,r)=>{var i=r(2),n=r(22),o=r(7),a=r(23),s=r(56),l=r(77),c=s("IE_PROTO"),d=i.Object,h=d.prototype;e.exports=l?d.getPrototypeOf:function(e){var t=a(e);if(n(t,c))return t[c];var r=t.constructor;return o(r)&&t instanceof r?r.prototype:t instanceof d?h:null}},(e,t,r)=>{var i=r(13);e.exports=!i((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(e,t,r)=>{var i=r(35).f,n=r(22),o=r(17)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype);e&&!n(e,o)&&i(e,o,{configurable:!0,value:t})}},(e,t,r)=>{var i=r(11),n=r(31),o=r(80);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=i(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(r,[]);t=r instanceof Array}catch(e){}return function setPrototypeOf(r,i){n(r);o(i);t?e(r,i):r.__proto__=i;return r}}():void 0)},(e,t,r)=>{var i=r(2),n=r(7),o=i.String,a=i.TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;r(82);const i=Object.create(null);t.compatibilityParams=i;{const e="undefined"!=typeof navigator&&navigator.userAgent||"",t="undefined"!=typeof navigator&&navigator.platform||"",r="undefined"!=typeof navigator&&navigator.maxTouchPoints||1,n=/Android/.test(e),o=/\b(iPad|iPhone|iPod)(?=;)/.test(e)||"MacIntel"===t&&r>1,a=/CriOS/.test(e);!function checkOnBlobSupport(){a&&(i.disableCreateObjectURL=!0)}();!function checkCanvasSizeLimitation(){(o||n)&&(i.maxCanvasPixels=5242880)}()}const n={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=n;const o={annotationMode:{value:2,kind:n.VIEWER+n.PREFERENCE},cursorToolOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},defaultUrl:{value:"",kind:n.VIEWER},defaultZoomValue:{value:"",kind:n.VIEWER+n.PREFERENCE},disableHistory:{value:!1,kind:n.VIEWER},disablePageLabels:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePermissions:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableScripting:{value:!0,kind:n.VIEWER+n.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:n.VIEWER},externalLinkTarget:{value:0,kind:n.VIEWER+n.PREFERENCE},historyUpdateUrl:{value:!1,kind:n.VIEWER+n.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},imageResourcesPath:{value:"./images/",kind:n.VIEWER},maxCanvasPixels:{value:16777216,compatibility:i.maxCanvasPixels,kind:n.VIEWER},pdfBugEnabled:{value:!1,kind:n.VIEWER+n.PREFERENCE},printResolution:{value:150,kind:n.VIEWER},removePageBorders:{value:!1,kind:n.VIEWER+n.PREFERENCE},renderer:{value:"canvas",kind:n.VIEWER},sidebarViewOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},scrollModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},spreadModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},textLayerMode:{value:1,kind:n.VIEWER+n.PREFERENCE},useOnlyCssZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},viewerCssTheme:{value:0,kind:n.VIEWER+n.PREFERENCE},viewOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},cMapPacked:{value:!0,kind:n.API},cMapUrl:{value:"../web/cmaps/",kind:n.API},disableAutoFetch:{value:!1,kind:n.API+n.PREFERENCE},disableFontFace:{value:!1,kind:n.API+n.PREFERENCE},disableRange:{value:!1,kind:n.API+n.PREFERENCE},disableStream:{value:!1,kind:n.API+n.PREFERENCE},docBaseUrl:{value:"",kind:n.API},enableXfa:{value:!0,kind:n.API+n.PREFERENCE},fontExtraProperties:{value:!1,kind:n.API},isEvalSupported:{value:!0,kind:n.API},maxImageSize:{value:-1,kind:n.API},pdfBug:{value:!1,kind:n.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:n.API},verbosity:{value:1,kind:n.API},workerPort:{value:null,kind:n.WORKER},workerSrc:{value:"./assets/pdf.worker.js",kind:n.WORKER}};o.disablePreferences={value:!1,kind:n.VIEWER};o.locale={value:"undefined"!=typeof navigator?navigator.language:"en-US",kind:n.VIEWER};o.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:n.VIEWER};o.renderer.kind+=n.PREFERENCE;const a=Object.create(null);if(globalThis.pdfDefaultOptions)for(const e in globalThis.pdfDefaultOptions)a[e]=globalThis.pdfDefaultOptions[e];t.AppOptions=class AppOptions{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const t=a[e];if(void 0!==t)return t;const r=o[e];if(void 0!==r){var i;return null!==(i=r.compatibility)&&void 0!==i?i:r.value}}static getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=Object.create(null);for(const i in o){var r;const s=o[i];if(e){if(0==(e&s.kind))continue;if(e===n.PREFERENCE){const e=s.value,r=typeof e;if("boolean"===r||"string"===r||"number"===r&&Number.isInteger(e)){t[i]=e;continue}throw new Error("Invalid type for preference: ".concat(i))}}const l=a[i];t[i]=void 0!==l?l:null!==(r=s.compatibility)&&void 0!==r?r:s.value}return t}static set(e,t){a[e]=t}static setAll(e){for(const t in e)a[t]=e[t]}static remove(e){delete a[e]}static _hasUserOptions(){return Object.keys(a).length>0}}},(e,t,r)=>{"use strict";var i=r(64),n=r(83);i({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},(e,t,r)=>{"use strict";var i=r(39),n=r(11),o=r(84),a=r(87),s=r(88),l=r(18),c=r(30),d=r(58).get,h=r(89),u=r(90),p=l("native-string-replace",String.prototype.replace),g=RegExp.prototype.exec,f=g,m=n("".charAt),v=n("".indexOf),b=n("".replace),w=n("".slice),y=function(){var e=/a/,t=/b*/g;i(g,e,"a");i(g,t,"a");return 0!==e.lastIndex||0!==t.lastIndex}(),_=s.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(y||S||_||h||u)&&(f=function exec(e){var t,r,n,s,l,h,u,P=this,C=d(P),R=o(e),E=C.raw;if(E){E.lastIndex=P.lastIndex;t=i(f,E,R);P.lastIndex=E.lastIndex;return t}var x=C.groups,T=_&&P.sticky,I=i(a,P),L=P.source,A=0,D=R;if(T){I=b(I,"y","");-1===v(I,"g")&&(I+="g");D=w(R,P.lastIndex);if(P.lastIndex>0&&(!P.multiline||P.multiline&&"\n"!==m(R,P.lastIndex-1))){L="(?: "+L+")";D=" "+D;A++}r=new RegExp("^(?:"+L+")",I)}S&&(r=new RegExp("^"+L+"$(?!\\s)",I));y&&(n=P.lastIndex);s=i(g,T?r:P,D);if(T)if(s){s.input=w(s.input,A);s[0]=w(s[0],A);s.index=P.lastIndex;P.lastIndex+=s[0].length}else P.lastIndex=0;else y&&s&&(P.lastIndex=P.global?s.index+s[0].length:n);S&&s&&s.length>1&&i(p,s[0],r,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(s[l]=void 0)}));if(s&&x){s.groups=h=c(null);for(l=0;l<x.length;l++)h[(u=x[l])[0]]=s[u[1]]}return s});e.exports=f},(e,t,r)=>{var i=r(2),n=r(85),o=i.String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},(e,t,r)=>{var i=r(2),n=r(86),o=r(7),a=r(14),s=r(17)("toStringTag"),l=i.Object,c="Arguments"==a(function(){return arguments}());e.exports=n?a:function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?r:c?a(t):"Object"==(i=a(t))&&o(t.callee)?"Arguments":i}},(e,t,r)=>{var i={};i[r(17)("toStringTag")]="z";e.exports="[object z]"===String(i)},(e,t,r)=>{"use strict";var i=r(31);e.exports=function(){var e=i(this),t="";e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.dotAll&&(t+="s");e.unicode&&(t+="u");e.sticky&&(t+="y");return t}},(e,t,r)=>{var i=r(13),n=r(2).RegExp,o=i((function(){var e=n("a","y");e.lastIndex=2;return null!=e.exec("abcd")})),a=o||i((function(){return!n("a","y").sticky})),s=o||i((function(){var e=n("^r","gy");e.lastIndex=2;return null!=e.exec("str")}));e.exports={BROKEN_CARET:s,MISSED_STICKY:a,UNSUPPORTED_Y:o}},(e,t,r)=>{var i=r(13),n=r(2).RegExp;e.exports=i((function(){var e=n(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},(e,t,r)=>{var i=r(13),n=r(2).RegExp;e.exports=i((function(){var e=n("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFViewerApplication=t.PDFPrintServiceFactory=t.DefaultExternalServices=void 0;r(92);r(1);r(82);r(122);r(128);r(137);r(139);r(157);r(158);var i=r(162),n=r(81),o=r(164),a=r(165),s=r(166),l=r(168),c=r(169),d=r(170),h=r(172),u=r(173),p=r(174),g=r(180),f=r(181),m=r(182),v=r(183),b=r(184),w=r(185),y=r(187),_=r(188),S=r(189),P=r(190),C=r(192),R=r(226),E=r(227),x=r(228);const T=-1,I=1,L={AUTOMATIC:0,LIGHT:1,DARK:2},A=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],D=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class DefaultExternalServices{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(e){}static updateFindMatchesCount(e){}static initPassiveLoading(e){}static async fallback(e){}static reportTelemetry(e){}static createDownloadManager(e){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(e){throw new Error("Not implemented: createL10n")}static createScripting(e){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,a.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,a.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,a.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,a.shadow)(this,"isInAutomation",!1)}}t.DefaultExternalServices=DefaultExternalServices;const B={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,a.createPromiseCapability)(),_fellback:!1,appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:DefaultExternalServices,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_docStats:null,_wheelUnusedTicks:0,_idleCallbacks:new Set,async initialize(e){this.preferences=this.externalServices.createPreferences();this.appConfig=e;await this._readPreferences();await this._parseHashParameters();this._forceCssTheme();await this._initializeL10n();this.isViewerEmbedded&&n.AppOptions.get("externalLinkTarget")===a.LinkTarget.NONE&&n.AppOptions.set("externalLinkTarget",a.LinkTarget.TOP);await this._initializeViewerComponents();this.bindEvents();this.bindWindowEvents();const t=e.appContainer||document.documentElement;this.l10n.translate(t).then((()=>{this.eventBus.dispatch("localized",{source:this})}));this._initializedCapability.resolve();this.initializeLoadingBar()},async _readPreferences(){if(!n.AppOptions.get("disablePreferences")){n.AppOptions._hasUserOptions()&&Window.ngxConsole.warn('_readPreferences: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{n.AppOptions.setAll(await this.preferences.getAll())}catch(e){Window.ngxConsole.error('_readPreferences: "'.concat(null==e?void 0:e.message,'".'))}}},async _parseHashParameters(){if(!n.AppOptions.get("pdfBugEnabled"))return;const e=document.location.hash.substring(1);if(!e)return;const t=(0,i.parseQueryString)(e),r=[];"true"===t.get("disableworker")&&r.push(async function loadFakeWorker(){if(!a.GlobalWorkerOptions.workerSrc){a.GlobalWorkerOptions.workerSrc=n.AppOptions.get("workerSrc");"Function"===a.GlobalWorkerOptions.workerSrc.constructor.name&&(a.GlobalWorkerOptions.workerSrc=a.GlobalWorkerOptions.workerSrc())}await(0,a.loadScript)(a.PDFWorker.workerSrc)}());t.has("disablerange")&&n.AppOptions.set("disableRange","true"===t.get("disablerange"));t.has("disablestream")&&n.AppOptions.set("disableStream","true"===t.get("disablestream"));t.has("disableautofetch")&&n.AppOptions.set("disableAutoFetch","true"===t.get("disableautofetch"));t.has("disablefontface")&&n.AppOptions.set("disableFontFace","true"===t.get("disablefontface"));t.has("disablehistory")&&n.AppOptions.set("disableHistory","true"===t.get("disablehistory"));t.has("verbosity")&&n.AppOptions.set("verbosity",0|t.get("verbosity"));if(t.has("textlayer"))switch(t.get("textlayer")){case"off":n.AppOptions.set("textLayerMode",i.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":this.appConfig.viewerContainer.classList.add("textLayer-".concat(t.get("textlayer")))}if(t.has("pdfbug")){n.AppOptions.set("pdfBug",!0);n.AppOptions.set("fontExtraProperties",!0);const e=t.get("pdfbug").split(",");r.push(async function initPDFBug(e){const{debuggerScriptPath:t,mainContainer:r}=B.appConfig;await(0,a.loadScript)(t);PDFBug.init({OPS:a.OPS},r,e)}(e))}t.has("locale")&&n.AppOptions.set("locale",t.get("locale"));if(0!==r.length)try{await Promise.all(r)}catch(e){Window.ngxConsole.error('_parseHashParameters: "'.concat(e.message,'".'))}},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:n.AppOptions.get("locale")});const e=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=e},_forceCssTheme(){const e=n.AppOptions.get("viewerCssTheme");if(e!==L.AUTOMATIC&&Object.values(L).includes(e))try{const r=document.styleSheets[0],i=(null==r?void 0:r.cssRules)||[];for(let n=0,o=i.length;n<o;n++){var t;const o=i[n];if(o instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===(null===(t=o.media)||void 0===t?void 0:t[0])){if(e===L.LIGHT){r.deleteRule(n);return}const t=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(o.cssText);if(null!=t&&t[1]){r.deleteRule(n);r.insertRule(t[1],n)}return}}}catch(e){Window.ngxConsole.error('_forceCssTheme: "'.concat(null==e?void 0:e.message,'".'))}},async _initializeViewerComponents(){const{appConfig:e,externalServices:t}=this;let r;r=e.eventBus?e.eventBus:t.isInAutomation?new o.AutomationEventBus:new o.EventBus;this.eventBus=r;this.overlayManager=new l.OverlayManager;const i=new w.PDFRenderingQueue;i.onIdle=this._cleanup.bind(this);this.pdfRenderingQueue=i;const a=new m.PDFLinkService({eventBus:r,externalLinkTarget:n.AppOptions.get("externalLinkTarget"),externalLinkRel:n.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:n.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=a;const x=t.createDownloadManager();this.downloadManager=x;const T=new p.PDFFindController({linkService:a,eventBus:r,pageViewMode:n.AppOptions.get("pageViewMode")});this.findController=T;const I=new y.PDFScriptingManager({eventBus:r,sandboxBundleSrc:n.AppOptions.get("sandboxBundleSrc"),scriptingFactory:t,docPropertiesLookup:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=I;const L=e.mainContainer,A=e.viewerContainer;this.pdfViewer=new C.PDFViewer({container:L,viewer:A,eventBus:r,renderingQueue:i,linkService:a,downloadManager:x,findController:T,scriptingManager:n.AppOptions.get("enableScripting")&&I,renderer:n.AppOptions.get("renderer"),l10n:this.l10n,textLayerMode:n.AppOptions.get("textLayerMode"),annotationMode:n.AppOptions.get("annotationMode"),imageResourcesPath:n.AppOptions.get("imageResourcesPath"),removePageBorders:n.AppOptions.get("removePageBorders"),renderInteractiveForms:n.AppOptions.get("renderInteractiveForms"),enablePrintAutoRotate:n.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:n.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:n.AppOptions.get("maxCanvasPixels"),pageViewMode:n.AppOptions.get("pageViewMode"),enablePermissions:n.AppOptions.get("enablePermissions")});i.setViewer(this.pdfViewer);a.setViewer(this.pdfViewer);I.setViewer(this.pdfViewer);this.pdfThumbnailViewer=new P.PDFThumbnailViewer({container:e.sidebar.thumbnailView,eventBus:r,renderingQueue:i,linkService:a,l10n:this.l10n});i.setThumbnailViewer(this.pdfThumbnailViewer);if(!this.isViewerEmbedded&&!n.AppOptions.get("disableHistory")){this.pdfHistory=new g.PDFHistory({linkService:a,eventBus:r});a.setHistory(this.pdfHistory)}this.supportsIntegratedFind||(this.findBar=new u.PDFFindBar(e.findBar,r,this.l10n));this.pdfDocumentProperties=new h.PDFDocumentProperties(e.documentProperties,this.overlayManager,r,this.l10n);this.pdfCursorTools=new s.PDFCursorTools({container:L,eventBus:r,cursorToolOnLoad:n.AppOptions.get("cursorToolOnLoad")});this.toolbar=new E.Toolbar(e.toolbar,r,this.l10n);this.secondaryToolbar=new R.SecondaryToolbar(e.secondaryToolbar,L,r);this.supportsFullscreen&&(this.pdfPresentationMode=new b.PDFPresentationMode({container:L,pdfViewer:this.pdfViewer,eventBus:r}));let D=n.AppOptions.get("passwordPrompt");D||(D=new c.PasswordPrompt(e.passwordOverlay,this.overlayManager,this.l10n,this.isViewerEmbedded));this.passwordPrompt=D;this.pdfOutlineViewer=new v.PDFOutlineViewer({container:e.sidebar.outlineView,eventBus:r,linkService:a});this.pdfAttachmentViewer=new d.PDFAttachmentViewer({container:e.sidebar.attachmentsView,eventBus:r,downloadManager:x});this.pdfLayerViewer=new f.PDFLayerViewer({container:e.sidebar.layersView,eventBus:r,l10n:this.l10n});this.pdfSidebar=new _.PDFSidebar({elements:e.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:r,l10n:this.l10n});this.pdfSidebar.onToggled=this.forceRendering.bind(this);this.pdfSidebarResizer=new S.PDFSidebarResizer(e.sidebarResizer,r,this.l10n)},run(e){this.initialize(e).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(e){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale(e)},zoomOut(e){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale(e)},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=i.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get supportsPrinting(){return V.instance.supportsPrinting},get supportsFullscreen(){return(0,a.shadow)(this,"supportsFullscreen",document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},initializeLoadingBar(){const e=new i.ProgressBar("#loadingBar");e.hide();return(0,a.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.url=e;this.baseUrl=e.split("#")[0];t&&(this._downloadUrl=t===e?this.baseUrl:t.split("#")[0]);let r=(0,a.getPdfFilenameFromUrl)(e,"");if(!r)try{r=decodeURIComponent((0,a.getFilenameFromUrl)(e))||e}catch(t){r=e}this.setTitle(r)},setTitle(e){this.isViewerEmbedded||(document.title=e)},get _docFilename(){return this._contentDispositionFilename||(0,a.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark(){const{toolbar:e,secondaryToolbar:t}=this.appConfig;e.viewBookmark.hidden=!0;t.viewBookmarkButton.hidden=!0},_cancelIdleCallbacks(){if(this._idleCallbacks.size){for(const e of this._idleCallbacks)window.cancelIdleCallback(e);this._idleCallbacks.clear()}},async close(){var e,t,r;this._unblockDocumentLoadEvent();this._hideViewBookmark();const{container:i}=this.appConfig.errorWrapper;i.hidden=!0;if(!this.pdfLoadingTask)return;if((null===(e=this.pdfDocument)||void 0===e?void 0:e.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save({sourceEventType:"save"})}catch(e){}const n=[];n.push(this.pdfLoadingTask.destroy());this.pdfLoadingTask=null;if(this.pdfDocument){this.pdfDocument=null;this.pdfThumbnailViewer.setDocument(null);this.pdfViewer.setDocument(null);this.pdfLinkService.setDocument(null);this.pdfDocumentProperties.setDocument(null)}this.pdfLinkService.externalLinkEnabled=!0;this._fellback=!1;this.store=null;this.isInitialViewSet=!1;this.downloadComplete=!1;this.url="";this.baseUrl="";this._downloadUrl="";this.documentInfo=null;this.metadata=null;this._contentDispositionFilename=null;this._contentLength=null;this._saveInProgress=!1;this._docStats=null;this._cancelIdleCallbacks();n.push(this.pdfScriptingManager.destroyPromise);this.pdfSidebar.reset();this.pdfOutlineViewer.reset();this.pdfAttachmentViewer.reset();this.pdfLayerViewer.reset();null===(t=this.pdfHistory)||void 0===t||t.reset();null===(r=this.findBar)||void 0===r||r.reset();this.toolbar.reset();this.secondaryToolbar.reset();"undefined"!=typeof PDFBug&&PDFBug.cleanup();await Promise.all(n)},async open(e,t){window.ngxZone.runOutsideAngular((async()=>{this.pdfLoadingTask&&await this.close();const r=n.AppOptions.getAll(n.OptionKind.WORKER);for(const e in r)a.GlobalWorkerOptions[e]=r[e];const i=Object.create(null);if("string"==typeof e){this.setTitleUsingUrl(e,e);i.url=e}else if(e&&"byteLength"in e)i.data=e;else if(e.url&&e.originalUrl){this.setTitleUsingUrl(e.originalUrl,e.url);i.url=e.url}const o=n.AppOptions.getAll(n.OptionKind.API);for(const e in o){let t=o[e];i[e]=t}if(t)for(const e in t)i[e]=t[e];const s=(0,a.getDocument)(i);this.pdfLoadingTask=s;s.onPassword=(e,t)=>{this.pdfLinkService.externalLinkEnabled=!1;this.passwordPrompt.setUpdateCallback(e,t);this.passwordPrompt.open()};s.onProgress=e=>{let{loaded:t,total:r}=e;this.progress(t/r);this.eventBus.dispatch("progress",{source:this,type:"load",total:r,loaded:t,percent:100*t/r})};s.onUnsupportedFeature=this.fallback.bind(this);this.loadingBar.show();return s.promise.then((e=>{this.load(e)}),(e=>{if(s!==this.pdfLoadingTask)return;let t="loading_error";e instanceof a.InvalidPDFException?t="invalid_file_error":e instanceof a.MissingPDFException?t="missing_file_error":e instanceof a.UnexpectedResponseException&&(t="unexpected_response_error");return this.l10n.get(t).then((t=>{this._documentError(t,{message:null==e?void 0:e.message});throw e}))}))}))},_ensureDownloadComplete(){if(!this.pdfDocument||!this.downloadComplete)throw new Error("PDF document not downloaded.")},async download(){let{sourceEventType:e="download"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._downloadUrl,r=this._docFilename;try{this._ensureDownloadComplete();const i=await this.pdfDocument.getData(),n=new Blob([i],{type:"application/pdf"});await this.downloadManager.download(n,t,r,e)}catch(e){await this.downloadManager.downloadUrl(t,r)}},async save(){let{sourceEventType:e="download"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._saveInProgress)return;this._saveInProgress=!0;await this.pdfScriptingManager.dispatchWillSave();const t=this._downloadUrl,r=this._docFilename;try{this._ensureDownloadComplete();const i=await this.pdfDocument.saveDocument(),n=new Blob([i],{type:"application/pdf"});await this.downloadManager.download(n,t,r,e)}catch(t){Window.ngxConsole.error("Error when saving the document: ".concat(t.message));await this.download({sourceEventType:e})}finally{await this.pdfScriptingManager.dispatchDidSave();this._saveInProgress=!1}},downloadOrSave(e){var t;(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage.size)>0?this.save(e):this.download(e)},fallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e});if(!this._fellback){this._fellback=!0;this.externalServices.fallback({featureId:e,url:this.baseUrl}).then((e=>{e&&this.download({sourceEventType:"download"})}))}},_documentError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unblockDocumentLoadEvent();this._otherError(e,t)},_otherError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=[this.l10n.get("error_version_info",{version:a.version||"?",build:a.build||"?"})];if(t){r.push(this.l10n.get("error_message",{message:t.message}));if(t.stack)r.push(this.l10n.get("error_stack",{stack:t.stack}));else{t.filename&&r.push(this.l10n.get("error_file",{file:t.filename}));t.lineNumber&&r.push(this.l10n.get("error_line",{line:t.lineNumber}))}}const n=this.appConfig.errorWrapper,o=n.container;o.hidden=!1;n.errorMessage.textContent=e;const s=n.closeButton;s.onclick=function(){o.hidden=!0};const l=n.errorMoreInfo,c=n.moreInfoButton,d=n.lessInfoButton;c.onclick=function(){l.hidden=!1;c.hidden=!0;d.hidden=!1;l.style.height=l.scrollHeight+"px"};d.onclick=function(){l.hidden=!0;c.hidden=!1;d.hidden=!0};c.oncontextmenu=i.noContextMenuHandler;d.oncontextmenu=i.noContextMenuHandler;s.oncontextmenu=i.noContextMenuHandler;c.hidden=!1;d.hidden=!0;Promise.all(r).then((e=>{l.value=e.join("\n")}))},progress(e){if(this.downloadComplete)return;const t=Math.round(100*e);if(t>this.loadingBar.percent||isNaN(t)){this.loadingBar.percent=t;if((this.pdfDocument?this.pdfDocument.loadingParams.disableAutoFetch:n.AppOptions.get("disableAutoFetch"))&&t){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout((()=>{this.loadingBar.hide();this.disableAutoFetchLoadingBarTimeout=null}),5e3)}}},load(e){this.pdfDocument=e;e.getDownloadInfo().then((e=>{let{length:t}=e;this._contentLength=t;this.downloadComplete=!0;this.loadingBar.hide();l.then((()=>{this.eventBus.dispatch("documentloaded",{source:this})}))}));const t=e.getPageLayout().catch((function(){})),r=e.getPageMode().catch((function(){})),o=e.getOpenAction().catch((function(){}));this.toolbar.setPagesCount(e.numPages,!1);this.secondaryToolbar.setPagesCount(e.numPages);let a;a=null;this.pdfLinkService.setDocument(e,null);this.pdfDocumentProperties.setDocument(e,this.url);const s=this.pdfViewer;s.setDocument(e);const{firstPagePromise:l,onePageRendered:c,pagesPromise:d}=s;this.pdfThumbnailViewer.setDocument(e);const h=(this.store=new x.ViewHistory(e.fingerprints[0])).getMultiple({page:null,zoom:i.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:i.SidebarView.UNKNOWN,scrollMode:i.ScrollMode.UNKNOWN,spreadMode:i.SpreadMode.UNKNOWN}).catch((()=>Object.create(null)));l.then((a=>{this.loadingBar.setWidth(this.appConfig.viewerContainer);this._initializeAnnotationStorageCallbacks(e);Promise.all([i.animationStarted,h,t,r,o]).then((async t=>{let[r,o,a,l,c]=t;const h=n.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:e.fingerprints[0],viewOnLoad:h,initialDest:null==c?void 0:c.dest});const u=this.initialBookmark,p=n.AppOptions.get("defaultZoomValue");let g=p?"zoom=".concat(p):null,f=null,m=n.AppOptions.get("sidebarViewOnLoad"),v=n.AppOptions.get("scrollModeOnLoad"),b=n.AppOptions.get("spreadModeOnLoad");if(o.page&&h!==I){g="page=".concat(o.page,"&zoom=").concat(p||o.zoom,",")+"".concat(o.scrollLeft,",").concat(o.scrollTop);f=parseInt(o.rotation,10);m===i.SidebarView.UNKNOWN&&(m=0|o.sidebarView);v===i.ScrollMode.UNKNOWN&&(v=0|o.scrollMode);b===i.SpreadMode.UNKNOWN&&(b=0|o.spreadMode)}l&&m===i.SidebarView.UNKNOWN&&(m=(0,i.apiPageModeToSidebarView)(l));if(a&&v===i.ScrollMode.UNKNOWN&&b===i.SpreadMode.UNKNOWN){b=(0,i.apiPageLayoutToViewerModes)(a).spreadMode}this.setInitialView(g,{rotation:f,sidebarView:m,scrollMode:v,spreadMode:b});this.eventBus.dispatch("documentinit",{source:this});this.isViewerEmbedded||s.focus();await Promise.race([d,new Promise((e=>{setTimeout(e,1e4)}))]);if((u||g)&&!s.hasEqualPageSizes){this.initialBookmark=u;s.currentScaleValue=s.currentScaleValue;this.setInitialView(g)}})).catch((()=>{this.setInitialView()})).then((function(){s.update()}))}));d.then((()=>{this._unblockDocumentLoadEvent();this._initializeAutoPrint(e,o)}),(e=>{this.l10n.get("loading_error").then((t=>{this._documentError(t,{message:null==e?void 0:e.message})}))}));c.then((t=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:t.timestamp});e.getOutline().then((t=>{e===this.pdfDocument&&this.pdfOutlineViewer.render({outline:t,pdfDocument:e})}));e.getAttachments().then((t=>{e===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:t})}));s.optionalContentConfigPromise.then((t=>{e===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:t,pdfDocument:e})}));if("requestIdleCallback"in window){const t=window.requestIdleCallback((()=>{this._collectTelemetry(e);this._idleCallbacks.delete(t)}),{timeout:1e3});this._idleCallbacks.add(t)}}));this._initializePageLabels(e);this._initializeMetadata(e)},async _scriptingDocProperties(e){var t,r;if(!this.documentInfo){await new Promise((e=>{this.eventBus._on("metadataloaded",e,{once:!0})}));if(e!==this.pdfDocument)return null}if(!this._contentLength){await new Promise((e=>{this.eventBus._on("documentloaded",e,{once:!0})}));if(e!==this.pdfDocument)return null}return{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:null===(t=this.metadata)||void 0===t?void 0:t.getRaw(),authors:null===(r=this.metadata)||void 0===r?void 0:r.get("dc:creator"),numPages:this.pagesCount,URL:this.url}},async _collectTelemetry(e){const t=await this.pdfDocument.getMarkInfo();if(e!==this.pdfDocument)return;const r=(null==t?void 0:t.Marked)||!1;this.externalServices.reportTelemetry({type:"tagged",tagged:r})},async _initializeAutoPrint(e,t){const[r,n]=await Promise.all([t,this.pdfViewer.enableScripting?null:e.getJavaScript()]);if(e!==this.pdfDocument)return;let o=!1;"Print"===(null==r?void 0:r.action)&&(o=!0);if(n){n.some((e=>{if(!e)return!1;Window.ngxConsole.warn("Warning: JavaScript support is not enabled");this.fallback(a.UNSUPPORTED_FEATURES.javaScript);return!0}));if(!o)for(const e of n)if(e&&i.AutoPrintRegExp.test(e)){o=!0;break}}o&&this.triggerPrinting()},async _initializeMetadata(e){var t,r;const{info:i,metadata:n,contentDispositionFilename:o,contentLength:s}=await e.getMetadata();if(e!==this.pdfDocument)return;this.documentInfo=i;this.metadata=n;null!==(t=this._contentDispositionFilename)&&void 0!==t||(this._contentDispositionFilename=o);null!==(r=this._contentLength)&&void 0!==r||(this._contentLength=s);const l=window.PDFViewerApplicationOptions;if(!l||l.get("verbosity")>0){Window.ngxConsole.log("PDF viewer: ngx-extended-pdf-viewer running on pdf.js "+(window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"].version:" developer version (?)"));Window.ngxConsole.log("PDF ".concat(e.fingerprints[0]," [").concat(i.PDFFormatVersion," ")+"".concat((i.Producer||"-").trim()," / ").concat((i.Creator||"-").trim(),"] ")+"(PDF.js: ".concat(a.version||"-")+"".concat(this.pdfViewer.enableWebGL?" [WebGL]":"",") modified by ngx-extended-pdf-viewer)"))}i.Language&&(this.appConfig.viewerContainer.lang=i.Language);let c=null==i?void 0:i.Title;const d=null==n?void 0:n.get("dc:title");d&&("Untitled"===d||/[\uFFF0-\uFFFF]/g.test(d)||(c=d));c?this.setTitle("".concat(c," - ").concat(o||document.title)):o&&this.setTitle(o);if(!i.IsXFAPresent||i.IsAcroFormPresent||e.isPureXfa){if((i.IsAcroFormPresent||i.IsXFAPresent)&&!this.pdfViewer.renderForms){Window.ngxConsole.warn("Warning: Interactive form support is not enabled");this.fallback(a.UNSUPPORTED_FEATURES.forms)}}else{e.loadingParams.enableXfa?Window.ngxConsole.warn("Warning: XFA Foreground documents are not supported"):Window.ngxConsole.warn("Warning: XFA support is not enabled");this.fallback(a.UNSUPPORTED_FEATURES.forms)}if(i.IsSignaturesPresent){Window.ngxConsole.warn("Warning: Digital signatures validation is not supported");this.fallback(a.UNSUPPORTED_FEATURES.signatures)}let h="other";A.includes(i.PDFFormatVersion)&&(h="v".concat(i.PDFFormatVersion.replace(".","_")));let u="other";if(i.Producer){const e=i.Producer.toLowerCase();D.some((function(t){if(!e.includes(t))return!1;u=t.replace(/[ .-]/g,"_");return!0}))}let p=null;i.IsXFAPresent?p="xfa":i.IsAcroFormPresent&&(p="acroform");this.externalServices.reportTelemetry({type:"documentInfo",version:h,generator:u,formType:p});this.eventBus.dispatch("metadataloaded",{source:this})},async _initializePageLabels(e){const t=await e.getPageLabels();if(e!==this.pdfDocument)return;if(!t||n.AppOptions.get("disablePageLabels"))return;const r=t.length;let i=0,o=0;for(let e=0;e<r;e++){const r=t[e];if(r===(e+1).toString())i++;else{if(""!==r)break;o++}}if(i>=r||o>=r)return;const{pdfViewer:a,pdfThumbnailViewer:s,toolbar:l}=this;a.setPageLabels(t);s.setPageLabels(t);l.setPagesCount(r,!0);l.setPageNumber(a.currentPageNumber,a.currentPageLabel)},_initializePdfHistory(e){let{fingerprint:t,viewOnLoad:r,initialDest:i=null}=e;if(this.pdfHistory){this.pdfHistory.initialize({fingerprint:t,resetHistory:r===I,updateUrl:n.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(i&&!this.initialBookmark&&r===T){this.initialBookmark=JSON.stringify(i);this.pdfHistory.push({explicitDest:i,pageNumber:null})}}},_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument)return;const{annotationStorage:t}=e;t.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload);this._annotationStorageModified=!0};t.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload);delete this._annotationStorageModified}},setInitialView(e){let{rotation:t,sidebarView:r,scrollMode:n,spreadMode:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const setRotation=e=>{(0,i.isValidRotation)(e)&&(this.pdfViewer.pagesRotation=e)};this.isInitialViewSet=!0;this.pdfSidebar.setInitialView(r);((e,t)=>{(0,i.isValidScrollMode)(e)&&(this.pdfViewer.scrollMode=e);(0,i.isValidSpreadMode)(t)&&(this.pdfViewer.spreadMode=t)})(n,o);if(this.initialBookmark){setRotation(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(e){setRotation(t);this.pdfLinkService.setHash(e)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);if(!this.pdfViewer.currentScaleValue){const e=PDFViewerApplicationOptions.get("defaultZoomValue");e&&(this.pdfViewer.currentScaleValue=e)}},_cleanup(){if(this.pdfDocument){this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===i.RendererType.SVG)}},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.isThumbnailViewVisible;this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){this.pdfScriptingManager.dispatchWillPrint();if(this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then((e=>{this._otherError(e)}));return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then((e=>{window.alert(e)}));return}const e=this.pdfViewer.getPagesOverview(),t=this.appConfig.printContainer,r=n.AppOptions.get("printResolution"),i=this.pdfViewer.optionalContentConfigPromise,o=V.instance.createPrintService(this.pdfDocument,e,t,r,i,this.l10n,this.pdfViewer.eventBus);this.printService=o;this.forceRendering();o.layout();this.externalServices.reportTelemetry({type:"print"})},afterPrint(){this.pdfScriptingManager.dispatchDidPrint();if(this.printService){var e;document.body.removeAttribute("data-pdfjsprinting");this.printService.destroy();this.printService=null;null===(e=this.pdfDocument)||void 0===e||e.annotationStorage.resetModified()}this.forceRendering()},rotatePages(e){this.pdfViewer.pagesRotation+=e},requestPresentationMode(){var e;null===(e=this.pdfPresentationMode)||void 0===e||e.request()},triggerPrinting(){this.supportsPrinting&&window.printPDF()},bindEvents(){const{eventBus:e,_boundEvents:t}=this;t.beforePrint=this.beforePrint.bind(this);t.afterPrint=this.afterPrint.bind(this);e._on("resize",webViewerResize);e._on("hashchange",webViewerHashchange);e._on("beforeprint",t.beforePrint);e._on("afterprint",t.afterPrint);e._on("pagerendered",webViewerPageRendered);e._on("updateviewarea",webViewerUpdateViewarea);e._on("pagechanging",webViewerPageChanging);e._on("scalechanging",webViewerScaleChanging);e._on("rotationchanging",webViewerRotationChanging);e._on("sidebarviewchanged",webViewerSidebarViewChanged);e._on("pagemode",webViewerPageMode);e._on("namedaction",webViewerNamedAction);e._on("presentationmodechanged",webViewerPresentationModeChanged);e._on("presentationmode",webViewerPresentationMode);e._on("print",webViewerPrint);e._on("download",webViewerDownload);e._on("save",webViewerSave);e._on("firstpage",webViewerFirstPage);e._on("lastpage",webViewerLastPage);e._on("nextpage",webViewerNextPage);e._on("previouspage",webViewerPreviousPage);e._on("zoomin",webViewerZoomIn);e._on("zoomout",webViewerZoomOut);e._on("zoomreset",webViewerZoomReset);e._on("pagenumberchanged",webViewerPageNumberChanged);e._on("scalechanged",webViewerScaleChanged);e._on("rotatecw",webViewerRotateCw);e._on("rotateccw",webViewerRotateCcw);e._on("optionalcontentconfig",webViewerOptionalContentConfig);e._on("switchscrollmode",webViewerSwitchScrollMode);e._on("scrollmodechanged",webViewerScrollModeChanged);e._on("switchspreadmode",webViewerSwitchSpreadMode);e._on("spreadmodechanged",webViewerSpreadModeChanged);e._on("documentproperties",webViewerDocumentProperties);e._on("findfromurlhash",webViewerFindFromUrlHash);e._on("updatefindmatchescount",webViewerUpdateFindMatchesCount);e._on("updatefindcontrolstate",webViewerUpdateFindControlState);if(n.AppOptions.get("pdfBug")){t.reportPageStatsPDFBug=reportPageStatsPDFBug;e._on("pagerendered",t.reportPageStatsPDFBug);e._on("pagechanging",t.reportPageStatsPDFBug)}e._on("fileinputchange",O);e._on("openfile",k)},bindWindowEvents(){const{eventBus:e,_boundEvents:t}=this;t.windowResize=()=>{e.dispatch("resize",{source:window})};t.windowHashChange=()=>{e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};t.windowBeforePrint=()=>{e.dispatch("beforeprint",{source:window})};t.windowAfterPrint=()=>{e.dispatch("afterprint",{source:window})};t.windowUpdateFromSandbox=t=>{e.dispatch("updatefromsandbox",{source:window,detail:t.detail})};window.addEventListener("visibilitychange",webViewerVisibilityChange);window.addEventListener("wheel",webViewerWheel,{passive:!1});window.addEventListener("click",webViewerClick);window.addEventListener("keydown",webViewerKeyDown);window.addEventListener("resize",t.windowResize);window.addEventListener("hashchange",t.windowHashChange);window.addEventListener("beforeprint",t.windowBeforePrint);window.addEventListener("afterprint",t.windowAfterPrint);window.addEventListener("updatefromsandbox",t.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:e,_boundEvents:t}=this;e._off("resize",webViewerResize);e._off("hashchange",webViewerHashchange);e._off("beforeprint",t.beforePrint);e._off("afterprint",t.afterPrint);e._off("pagerendered",webViewerPageRendered);e._off("updateviewarea",webViewerUpdateViewarea);e._off("pagechanging",webViewerPageChanging);e._off("scalechanging",webViewerScaleChanging);e._off("rotationchanging",webViewerRotationChanging);e._off("sidebarviewchanged",webViewerSidebarViewChanged);e._off("pagemode",webViewerPageMode);e._off("namedaction",webViewerNamedAction);e._off("presentationmodechanged",webViewerPresentationModeChanged);e._off("presentationmode",webViewerPresentationMode);e._off("print",webViewerPrint);e._off("download",webViewerDownload);e._off("save",webViewerSave);e._off("firstpage",webViewerFirstPage);e._off("lastpage",webViewerLastPage);e._off("nextpage",webViewerNextPage);e._off("previouspage",webViewerPreviousPage);e._off("zoomin",webViewerZoomIn);e._off("zoomout",webViewerZoomOut);e._off("zoomreset",webViewerZoomReset);e._off("pagenumberchanged",webViewerPageNumberChanged);e._off("scalechanged",webViewerScaleChanged);e._off("rotatecw",webViewerRotateCw);e._off("rotateccw",webViewerRotateCcw);e._off("optionalcontentconfig",webViewerOptionalContentConfig);e._off("switchscrollmode",webViewerSwitchScrollMode);e._off("scrollmodechanged",webViewerScrollModeChanged);e._off("switchspreadmode",webViewerSwitchSpreadMode);e._off("spreadmodechanged",webViewerSpreadModeChanged);e._off("documentproperties",webViewerDocumentProperties);e._off("findfromurlhash",webViewerFindFromUrlHash);e._off("updatefindmatchescount",webViewerUpdateFindMatchesCount);e._off("updatefindcontrolstate",webViewerUpdateFindControlState);if(t.reportPageStatsPDFBug){e._off("pagerendered",t.reportPageStatsPDFBug);e._off("pagechanging",t.reportPageStatsPDFBug);t.reportPageStatsPDFBug=null}e._off("fileinputchange",O);e._off("openfile",k);t.beforePrint=null;t.afterPrint=null},unbindWindowEvents(){const{_boundEvents:e}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange);window.removeEventListener("wheel",webViewerWheel,{passive:!1});window.removeEventListener("click",webViewerClick);window.removeEventListener("keydown",webViewerKeyDown);window.removeEventListener("resize",e.windowResize);window.removeEventListener("hashchange",e.windowHashChange);window.removeEventListener("beforeprint",e.windowBeforePrint);window.removeEventListener("afterprint",e.windowAfterPrint);window.removeEventListener("updatefromsandbox",e.windowUpdateFromSandbox);e.windowResize=null;e.windowHashChange=null;e.windowBeforePrint=null;e.windowAfterPrint=null;e.windowUpdateFromSandbox=null},accumulateWheelTicks(e){(this._wheelUnusedTicks>0&&e<0||this._wheelUnusedTicks<0&&e>0)&&(this._wheelUnusedTicks=0);this._wheelUnusedTicks+=e;const t=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=t;return t},_unblockDocumentLoadEvent(){document.blockUnblockOnload&&document.blockUnblockOnload(!1);this._unblockDocumentLoadEvent=()=>{}},_reportDocumentStatsTelemetry(){const{stats:e}=this.pdfDocument;if(e!==this._docStats){this._docStats=e;this.externalServices.reportTelemetry({type:"documentStats",stats:e})}},get scriptingReady(){return this.pdfScriptingManager.ready}};t.PDFViewerApplication=B;let M,O,k;{const e=["null","http://mozilla.github.io","https://mozilla.github.io"];M=function(t){if(void 0!==t)try{const r=new URL(window.location.href).origin||"null";if(e.includes(r))return;const{origin:i,protocol:n}=new URL(t,window.location.href);if(i!==r&&"blob:"!==n)throw new Error("file origin does not match viewer's")}catch(e){B.l10n.get("loading_error").then((t=>{B._documentError(t,{message:null==e?void 0:e.message})}));throw e}}}function reportPageStatsPDFBug(e){var t;let{pageNumber:r}=e;if("undefined"==typeof Stats||!Stats.enabled)return;const i=B.pdfViewer.getPageView(r-1),n=null==i||null===(t=i.pdfPage)||void 0===t?void 0:t.stats;n&&Stats.add(r,n)}function webViewerInitialized(){const e=B.appConfig;const t=document.createElement("input");t.id=e.openFileInputName;t.className="fileInput";t.setAttribute("accept",".pdf,application/pdf");t.setAttribute("type","file");t.oncontextmenu=i.noContextMenuHandler;document.body.appendChild(t);if(window.File&&window.FileReader&&window.FileList&&window.Blob)t.value=null;else{e.toolbar.openFile.hidden=!0;e.secondaryToolbar.openFileButton.hidden=!0}t.addEventListener("change",(function(e){const t=e.target.files;t&&0!==t.length&&B.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.target})}));e.mainContainer.addEventListener("dragover",(function(e){if(n.AppOptions.get("enableDragAndDrop")){e.preventDefault();e.dataTransfer.dropEffect="move"}}));e.mainContainer.addEventListener("drop",(function(e){if(n.AppOptions.get("enableDragAndDrop")){e.preventDefault();const t=e.dataTransfer.files;if(!t||0===t.length)return;B.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer,dropEvent:e})}}));if(!B.supportsDocumentFonts){n.AppOptions.set("disableFontFace",!0);B.l10n.get("web_fonts_disabled").then((e=>{Window.ngxConsole.warn(e)}))}if(!B.supportsPrinting){e.toolbar.print.classList.add("hidden");e.secondaryToolbar.printButton.classList.add("hidden")}if(!B.supportsFullscreen){e.toolbar.presentationModeButton.classList.add("hidden");e.secondaryToolbar.presentationModeButton.classList.add("hidden")}B.supportsIntegratedFind&&e.toolbar.viewFind.classList.add("hidden");e.mainContainer.addEventListener("transitionend",(function(e){e.target===this&&B.eventBus.dispatch("resize",{source:this})}),!0);try{!function webViewerOpenFileViaURL(e){e?B.open(e):B._hideViewBookmark()}(undefined)}catch(e){B.l10n.get("loading_error").then((t=>{B._documentError(t,e)}))}}function webViewerPageRendered(e){let{pageNumber:t,error:r}=e;t===B.page&&B.toolbar.updateLoadingIndicatorState(!1);if(B.pdfSidebar.isThumbnailViewVisible){const e=B.pdfViewer.getPageView(t-1),r=B.pdfThumbnailViewer.getThumbnail(t-1);e&&r&&r.setImage(e)}r&&B.l10n.get("rendering_error").then((e=>{B._otherError(e,r)}));B._reportDocumentStatsTelemetry()}function webViewerPageMode(e){let t,{mode:r}=e;switch(r){case"thumbs":t=i.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=i.SidebarView.OUTLINE;break;case"attachments":t=i.SidebarView.ATTACHMENTS;break;case"layers":t=i.SidebarView.LAYERS;break;case"none":t=i.SidebarView.NONE;break;default:Window.ngxConsole.error('Invalid "pagemode" hash parameter: '+r);return}B.pdfSidebar.switchView(t,!0)}function webViewerNamedAction(e){switch(e.action){case"GoToPage":B.appConfig.toolbar.pageNumber.select();break;case"Find":B.supportsIntegratedFind||B.findBar.toggle();break;case"Print":B.triggerPrinting();break;case"SaveAs":webViewerSave()}}function webViewerPresentationModeChanged(e){B.pdfViewer.presentationModeState=e.state}function webViewerSidebarViewChanged(e){B.pdfRenderingQueue.isThumbnailViewEnabled=B.pdfSidebar.isThumbnailViewVisible;if(B.isInitialViewSet){var t;null===(t=B.store)||void 0===t||t.set("sidebarView",e.view).catch((()=>{}))}}function webViewerUpdateViewarea(e){const t=e.location;if(B.isInitialViewSet){var r;const e={};void 0===t.pageNumber&&null===t.pageNumber||(e.page=t.pageNumber);t.scale&&(e.zoom=t.scale);t.left&&(e.scrollLeft=t.left);t.top&&(e.scrollTop=t.top);void 0===t.rotation&&null===t.rotation||(e.rotation=t.rotation);null===(r=B.store)||void 0===r||r.setMultiple(e).catch((()=>{}))}const n=B.pdfLinkService.getAnchorUrl(t.pdfOpenParams);B.appConfig.toolbar.viewBookmark.href=n;B.appConfig.secondaryToolbar.viewBookmarkButton.href=n;const o=B.pdfViewer.getPageView(B.page-1),a=(null==o?void 0:o.renderingState)!==i.RenderingStates.FINISHED;B.toolbar.updateLoadingIndicatorState(a)}function webViewerScrollModeChanged(e){if(B.isInitialViewSet){var t;null===(t=B.store)||void 0===t||t.set("scrollMode",e.mode).catch((()=>{}))}}function webViewerSpreadModeChanged(e){if(B.isInitialViewSet){var t;null===(t=B.store)||void 0===t||t.set("spreadMode",e.mode).catch((()=>{}))}}function webViewerResize(){const{pdfDocument:e,pdfViewer:t}=B;if(!e)return;const r=t.currentScaleValue;"auto"!==r&&"page-fit"!==r&&"page-width"!==r||(t.currentScaleValue=r);t.update()}function webViewerHashchange(e){var t;const r=e.hash;r&&(B.isInitialViewSet?null!==(t=B.pdfHistory)&&void 0!==t&&t.popStateInProgress||B.pdfLinkService.setHash(r):B.initialBookmark=r)}O=function(e){var t;if(null!==(t=B.pdfViewer)&&void 0!==t&&t.isInPresentationMode)return;const r=e.fileInput.files[0];if(n.compatibilityParams.disableCreateObjectURL){B.setTitleUsingUrl(r.name);const e=new FileReader;e.onload=function webViewerChangeFileReaderOnload(e){const t=e.target.result;B.open(new Uint8Array(t))};e.readAsArrayBuffer(r)}else{let e=URL.createObjectURL(r);r.name&&(e={url:e,originalUrl:r.name});B.open(e);window.setNgxExtendedPdfViewerSource&&window.setNgxExtendedPdfViewerSource(r.name?r.name:e)}};k=function(e){const t=B.appConfig.openFileInputName;document.getElementById(t).click()};function webViewerPresentationMode(){B.requestPresentationMode()}function webViewerPrint(){B.triggerPrinting()}function webViewerDownload(){B.downloadOrSave({sourceEventType:"download"})}function webViewerSave(){B.downloadOrSave({sourceEventType:"save"})}function webViewerFirstPage(){B.pdfDocument&&(B.page=1)}function webViewerLastPage(){B.pdfDocument&&(B.page=B.pagesCount)}function webViewerNextPage(){B.pdfViewer.nextPage()}function webViewerPreviousPage(){B.pdfViewer.previousPage()}function webViewerZoomIn(){B.zoomIn()}function webViewerZoomOut(){B.zoomOut()}function webViewerZoomReset(){B.zoomReset()}function webViewerPageNumberChanged(e){const t=B.pdfViewer;""!==e.value&&B.pdfLinkService.goToPage(e.value);e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel&&B.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}function webViewerScaleChanged(e){B.pdfViewer.currentScaleValue=e.value}function webViewerRotateCw(){B.rotatePages(90)}function webViewerRotateCcw(){B.rotatePages(-90)}function webViewerOptionalContentConfig(e){B.pdfViewer.optionalContentConfigPromise=e.promise}function webViewerSwitchScrollMode(e){B.pdfViewer.scrollMode=e.mode}function webViewerSwitchSpreadMode(e){B.pdfViewer.spreadMode=e.mode}function webViewerDocumentProperties(){B.pdfDocumentProperties.open()}function webViewerFindFromUrlHash(e){B.eventBus.dispatch("find",{source:e.source,type:"",query:e.query,phraseSearch:e.phraseSearch,caseSensitive:!1,entireWord:!1,ignoreAccents:!1,fuzzySearch:!1,highlightAll:!0,findPrevious:!1})}function webViewerUpdateFindMatchesCount(e){let{matchesCount:t}=e;B.supportsIntegratedFind?B.externalServices.updateFindMatchesCount(t):B.findBar.updateResultsCount(t)}function webViewerUpdateFindControlState(e){let{state:t,previous:r,matchesCount:i,rawQuery:n}=e;B.supportsIntegratedFind?B.externalServices.updateFindControlState({result:t,findPrevious:r,matchesCount:i,rawQuery:n}):B.findBar.updateUIState(t,r,i)}function webViewerScaleChanging(e){B.toolbar.setPageScale(e.presetValue,e.scale);B.pdfViewer.update()}function webViewerRotationChanging(e){B.pdfThumbnailViewer.pagesRotation=e.pagesRotation;B.forceRendering();B.pdfViewer.currentPageNumber=e.pageNumber}function webViewerPageChanging(e){let{pageNumber:t,pageLabel:r}=e;B.toolbar.setPageNumber(t,r);B.secondaryToolbar.setPageNumber(t);B.pdfSidebar.isThumbnailViewVisible&&B.pdfThumbnailViewer.scrollThumbnailIntoView(t);const i=document.getElementById("pageNumber");if(i){const e=new CustomEvent("page-change");i.dispatchEvent(e)}}function webViewerVisibilityChange(e){"visible"===document.visibilityState&&setZoomDisabledTimeout()}let N=null;function setZoomDisabledTimeout(){N&&clearTimeout(N);N=setTimeout((function(){N=null}),1e3)}function webViewerWheel(e){const{pdfViewer:t,supportedMouseWheelZoomModifierKeys:r}=B;if(t.isInPresentationMode)return;const o=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0);if(window.isKeyIgnored&&window.isKeyIgnored(o,"WHEEL"))return;const a=n.AppOptions.get("wheelAction");if(e.ctrlKey&&r.ctrlKey||e.metaKey&&r.metaKey?"zoom"!==a:"zoom"===a){e.preventDefault();if(N||"hidden"===document.visibilityState)return;const r=t.currentScale,n=(0,i.normalizeWheelEventDirection)(e);let o=0;if(e.deltaMode===WheelEvent.DOM_DELTA_LINE||e.deltaMode===WheelEvent.DOM_DELTA_PAGE)o=Math.abs(n)>=1?Math.sign(n):B.accumulateWheelTicks(n);else{const e=30;o=B.accumulateWheelTicks(n/e)}o<0?B.zoomOut(-o):o>0&&B.zoomIn(o);const a=t.currentScale;if(r!==a){const i=a/r-1,n=t.container.getBoundingClientRect(),o=e.clientX-n.left,s=e.clientY-n.top;t.container.scrollLeft+=o*i;t.container.scrollTop+=s*i}}else setZoomDisabledTimeout()}function webViewerClick(e){if(!B.secondaryToolbar.isOpen)return;const t=B.appConfig;if(B.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton){if(e.target&&e.target.parentElement===t.secondaryToolbar.toggleButton)return;if(e.target&&e.target.parentElement&&e.target.parentElement.parentElement===t.secondaryToolbar.toggleButton)return;B.secondaryToolbar.close()}}function webViewerKeyDown(e){if(B.overlayManager.active)return;const{eventBus:t,pdfViewer:r}=B,n=r.isInPresentationMode;let o=!1,a=!1;const l=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0);if(window.isKeyIgnored&&window.isKeyIgnored(l,e.keyCode))return;if(1===l||8===l||5===l||12===l)switch(e.keyCode){case 70:if(!B.supportsIntegratedFind&&!e.shiftKey){B.findBar.open();o=!0}break;case 71:if(!B.supportsIntegratedFind){const{state:e}=B.findController;if(e){const r=Object.assign(Object.create(null),e,{source:window,type:"again",findPrevious:5===l||12===l});t.dispatch("find",r)}o=!0}break;case 61:case 107:case 187:case 171:n||B.zoomIn();o=!0;break;case 173:case 109:case 189:n||B.zoomOut();o=!0;break;case 48:case 96:if(!n){setTimeout((function(){B.zoomReset()}));o=!1}break;case 38:if(n||B.page>1){B.page=1;o=!0;a=!0}break;case 40:if(n||B.page<B.pagesCount){B.page=B.pagesCount;o=!0;a=!0}}if(1===l||8===l)switch(e.keyCode){case 83:t.dispatch("download",{source:window});o=!0;break;case 79:t.dispatch("openfile",{source:window});o=!0}if(3===l||10===l)switch(e.keyCode){case 80:B.requestPresentationMode();o=!0;break;case 71:B.appConfig.toolbar.pageNumber.select();o=!0}if(o){a&&!n&&r.focus();e.preventDefault();return}const c=(0,i.getActiveOrFocusedElement)(),d=null==c?void 0:c.tagName.toUpperCase();if(!("INPUT"===d||"TEXTAREA"===d||"SELECT"===d||null!=c&&c.isContentEditable)||27===e.keyCode){if(0===l){let t=0,i=!1;switch(e.keyCode){case 38:case 33:r.isVerticalScrollbarEnabled&&(i=!0);t=-1;break;case 8:n||(i=!0);t=-1;break;case 37:r.isHorizontalScrollbarEnabled&&(i=!0);case 75:case 80:t=-1;break;case 27:if(B.secondaryToolbar.isOpen){B.secondaryToolbar.close();o=!0}if(!B.supportsIntegratedFind&&B.findBar.opened){B.findBar.close();o=!0}break;case 40:case 34:r.isVerticalScrollbarEnabled&&(i=!0);t=1;break;case 13:case 32:n||(i=!0);t=1;break;case 39:r.isHorizontalScrollbarEnabled&&(i=!0);case 74:case 78:t=1;break;case 36:if(n||B.page>1){B.page=1;o=!0;a=!0}break;case 35:if(n||B.page<B.pagesCount){B.page=B.pagesCount;o=!0;a=!0}break;case 83:B.pdfCursorTools.switchTool(s.CursorTool.SELECT);break;case 72:B.pdfCursorTools.switchTool(s.CursorTool.HAND);break;case 82:B.rotatePages(90);break;case 115:B.pdfSidebar.toggle()}if(0!==t&&(!i||"page-fit"===r.currentScaleValue)){t>0?r.nextPage():r.previousPage();o=!0}}if(4===l)switch(e.keyCode){case 13:case 32:if(!n&&"page-fit"!==r.currentScaleValue)break;r.previousPage();o=!0;break;case 82:B.rotatePages(-90)}a&&!r.containsElement(c)&&r.focus();o&&e.preventDefault()}}function beforeUnload(e){e.preventDefault();e.returnValue="";return!1}const V={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=V},(e,t,r)=>{"use strict";var i,n,o,a,s=r(64),l=r(19),c=r(2),d=r(28),h=r(39),u=r(93),p=r(67),g=r(94),f=r(79),m=r(78),v=r(95),b=r(43),w=r(7),y=r(6),_=r(96),S=r(60),P=r(97),C=r(103),R=r(104),E=r(107).set,x=r(113),T=r(116),I=r(118),L=r(117),A=r(119),D=r(120),B=r(58),M=r(73),O=r(17),k=r(121),N=r(112),V=r(26),W=O("species"),U="Promise",j=B.getterFor(U),z=B.set,H=B.getterFor(U),q=u&&u.prototype,G=u,Y=q,Q=c.TypeError,X=c.document,K=c.process,Z=L.f,$=Z,J=!!(X&&X.createEvent&&c.dispatchEvent),ee=w(c.PromiseRejectionEvent),te="unhandledrejection",re=!1,ie=M(U,(function(){var e=S(G),t=e!==String(G);if(!t&&66===V)return!0;if(l&&!Y.finally)return!0;if(V>=51&&/native code/.test(e))return!1;var r=new G((function(e){e(1)})),FakePromise=function(e){e((function(){}),(function(){}))};(r.constructor={})[W]=FakePromise;return!(re=r.then((function(){}))instanceof FakePromise)||!t&&k&&!ee})),ne=ie||!C((function(e){G.all(e).catch((function(){}))})),isThenable=function(e){var t;return!(!y(e)||!w(t=e.then))&&t},callReaction=function(e,t){var r,i,n,o=t.value,a=1==t.state,s=a?e.ok:e.fail,l=e.resolve,c=e.reject,d=e.domain;try{if(s){if(!a){2===t.rejection&&onHandleUnhandled(t);t.rejection=1}if(!0===s)r=o;else{d&&d.enter();r=s(o);if(d){d.exit();n=!0}}r===e.promise?c(Q("Promise-chain cycle")):(i=isThenable(r))?h(i,r,l,c):l(r)}else c(o)}catch(e){d&&!n&&d.exit();c(e)}},notify=function(e,t){if(!e.notified){e.notified=!0;x((function(){for(var r,i=e.reactions;r=i.get();)callReaction(r,e);e.notified=!1;t&&!e.rejection&&onUnhandled(e)}))}},dispatchEvent=function(e,t,r){var i,n;if(J){(i=X.createEvent("Event")).promise=t;i.reason=r;i.initEvent(e,!1,!0);c.dispatchEvent(i)}else i={promise:t,reason:r};!ee&&(n=c["on"+e])?n(i):e===te&&I("Unhandled promise rejection",r)},onUnhandled=function(e){h(E,c,(function(){var t,r=e.facade,i=e.value;if(isUnhandled(e)){t=A((function(){N?K.emit("unhandledRejection",i,r):dispatchEvent(te,r,i)}));e.rejection=N||isUnhandled(e)?2:1;if(t.error)throw t.value}}))},isUnhandled=function(e){return 1!==e.rejection&&!e.parent},onHandleUnhandled=function(e){h(E,c,(function(){var t=e.facade;N?K.emit("rejectionHandled",t):dispatchEvent("rejectionhandled",t,e.value)}))},bind=function(e,t,r){return function(i){e(t,i,r)}},internalReject=function(e,t,r){if(!e.done){e.done=!0;r&&(e=r);e.value=t;e.state=2;notify(e,!0)}},internalResolve=function(e,t,r){if(!e.done){e.done=!0;r&&(e=r);try{if(e.facade===t)throw Q("Promise can't be resolved itself");var i=isThenable(t);if(i)x((function(){var r={done:!1};try{h(i,t,bind(internalResolve,r,e),bind(internalReject,r,e))}catch(t){internalReject(r,t,e)}}));else{e.value=t;e.state=1;notify(e,!1)}}catch(t){internalReject({done:!1},t,e)}}};if(ie){Y=(G=function Promise(e){_(this,Y);b(e);h(i,this);var t=j(this);try{e(bind(internalResolve,t),bind(internalReject,t))}catch(e){internalReject(t,e)}}).prototype;(i=function Promise(e){z(this,{type:U,done:!1,notified:!1,parent:!1,reactions:new D,rejection:!1,state:0,value:void 0})}).prototype=g(Y,{then:function then(e,t){var r=H(this),i=Z(R(this,G));r.parent=!0;i.ok=!w(e)||e;i.fail=w(t)&&t;i.domain=N?K.domain:void 0;0==r.state?r.reactions.add(i):x((function(){callReaction(i,r)}));return i.promise},catch:function(e){return this.then(void 0,e)}});n=function(){var e=new i,t=j(e);this.promise=e;this.resolve=bind(internalResolve,t);this.reject=bind(internalReject,t)};L.f=Z=function(e){return e===G||e===o?new n(e):$(e)};if(!l&&w(u)&&q!==Object.prototype){a=q.then;if(!re){p(q,"then",(function then(e,t){var r=this;return new G((function(e,t){h(a,r,e,t)})).then(e,t)}),{unsafe:!0});p(q,"catch",Y.catch,{unsafe:!0})}try{delete q.constructor}catch(e){}f&&f(q,Y)}}s({global:!0,wrap:!0,forced:ie},{Promise:G});m(G,U,!1,!0);v(U);o=d(U);s({target:U,stat:!0,forced:ie},{reject:function reject(e){var t=Z(this);h(t.reject,void 0,e);return t.promise}});s({target:U,stat:!0,forced:l||ie},{resolve:function resolve(e){return T(l&&this===o?G:this,e)}});s({target:U,stat:!0,forced:ne},{all:function all(e){var t=this,r=Z(t),i=r.resolve,n=r.reject,o=A((function(){var r=b(t.resolve),o=[],a=0,s=1;P(e,(function(e){var l=a++,c=!1;s++;h(r,t,e).then((function(e){if(!c){c=!0;o[l]=e;--s||i(o)}}),n)}));--s||i(o)}));o.error&&n(o.value);return r.promise},race:function race(e){var t=this,r=Z(t),i=r.reject,n=A((function(){var n=b(t.resolve);P(e,(function(e){h(n,t,e).then(r.resolve,i)}))}));n.error&&i(n.value);return r.promise}})},(e,t,r)=>{var i=r(2);e.exports=i.Promise},(e,t,r)=>{var i=r(67);e.exports=function(e,t,r){for(var n in t)i(e,n,t[n],r);return e}},(e,t,r)=>{"use strict";var i=r(28),n=r(35),o=r(17),a=r(33),s=o("species");e.exports=function(e){var t=i(e),r=n.f;a&&t&&!t[s]&&r(t,s,{configurable:!0,get:function(){return this}})}},(e,t,r)=>{var i=r(2),n=r(41),o=i.TypeError;e.exports=function(e,t){if(n(t,e))return e;throw o("Incorrect invocation")}},(e,t,r)=>{var i=r(2),n=r(98),o=r(39),a=r(31),s=r(44),l=r(99),c=r(51),d=r(41),h=r(100),u=r(101),p=r(102),g=i.TypeError,Result=function(e,t){this.stopped=e;this.result=t},f=Result.prototype;e.exports=function(e,t,r){var i,m,v,b,w,y,_,S=r&&r.that,P=!(!r||!r.AS_ENTRIES),C=!(!r||!r.IS_ITERATOR),R=!(!r||!r.INTERRUPTED),E=n(t,S),stop=function(e){i&&p(i,"normal",e);return new Result(!0,e)},callFn=function(e){if(P){a(e);return R?E(e[0],e[1],stop):E(e[0],e[1])}return R?E(e,stop):E(e)};if(C)i=e;else{if(!(m=u(e)))throw g(s(e)+" is not iterable");if(l(m)){for(v=0,b=c(e);b>v;v++)if((w=callFn(e[v]))&&d(f,w))return w;return new Result(!1)}i=h(e,m)}y=i.next;for(;!(_=o(y,i)).done;){try{w=callFn(_.value)}catch(e){p(i,"throw",e)}if("object"==typeof w&&w&&d(f,w))return w}return new Result(!1)}},(e,t,r)=>{var i=r(11),n=r(43),o=r(12),a=i(i.bind);e.exports=function(e,t){n(e);return void 0===t?e:o?a(e,t):function(){return e.apply(t,arguments)}}},(e,t,r)=>{var i=r(17),n=r(57),o=i("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||a[o]===e)}},(e,t,r)=>{var i=r(2),n=r(39),o=r(43),a=r(31),s=r(44),l=r(101),c=i.TypeError;e.exports=function(e,t){var r=arguments.length<2?l(e):t;if(o(r))return a(n(r,e));throw c(s(e)+" is not iterable")}},(e,t,r)=>{var i=r(85),n=r(42),o=r(57),a=r(17)("iterator");e.exports=function(e){if(null!=e)return n(e,a)||n(e,"@@iterator")||o[i(e)]}},(e,t,r)=>{var i=r(39),n=r(31),o=r(42);e.exports=function(e,t,r){var a,s;n(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw r;return r}a=i(a,e)}catch(e){s=!0;a=e}if("throw"===t)throw r;if(s)throw a;n(a);return r}},(e,t,r)=>{var i=r(17)("iterator"),n=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){n=!0}};a[i]=function(){return this};Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var r=!1;try{var o={};o[i]=function(){return{next:function(){return{done:r=!0}}}};e(o)}catch(e){}return r}},(e,t,r)=>{var i=r(31),n=r(105),o=r(17)("species");e.exports=function(e,t){var r,a=i(e).constructor;return void 0===a||null==(r=i(a)[o])?t:n(r)}},(e,t,r)=>{var i=r(2),n=r(106),o=r(44),a=i.TypeError;e.exports=function(e){if(n(e))return e;throw a(o(e)+" is not a constructor")}},(e,t,r)=>{var i=r(11),n=r(13),o=r(7),a=r(85),s=r(28),l=r(60),noop=function(){},c=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,u=i(h.exec),p=!h.exec(noop),g=function isConstructor(e){if(!o(e))return!1;try{d(noop,c,e);return!0}catch(e){return!1}},f=function isConstructor(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!u(h,l(e))}catch(e){return!0}};f.sham=!0;e.exports=!d||n((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?f:g},(e,t,r)=>{var i,n,o,a,s=r(2),l=r(108),c=r(98),d=r(7),h=r(22),u=r(13),p=r(55),g=r(109),f=r(5),m=r(110),v=r(111),b=r(112),w=s.setImmediate,y=s.clearImmediate,_=s.process,S=s.Dispatch,P=s.Function,C=s.MessageChannel,R=s.String,E=0,x={},T="onreadystatechange";try{i=s.location}catch(e){}var run=function(e){if(h(x,e)){var t=x[e];delete x[e];t()}},runner=function(e){return function(){run(e)}},listener=function(e){run(e.data)},post=function(e){s.postMessage(R(e),i.protocol+"//"+i.host)};if(!w||!y){w=function setImmediate(e){m(arguments.length,1);var t=d(e)?e:P(e),r=g(arguments,1);x[++E]=function(){l(t,void 0,r)};n(E);return E};y=function clearImmediate(e){delete x[e]};if(b)n=function(e){_.nextTick(runner(e))};else if(S&&S.now)n=function(e){S.now(runner(e))};else if(C&&!v){a=(o=new C).port2;o.port1.onmessage=listener;n=c(a.postMessage,a)}else if(s.addEventListener&&d(s.postMessage)&&!s.importScripts&&i&&"file:"!==i.protocol&&!u(post)){n=post;s.addEventListener("message",listener,!1)}else n=T in f("script")?function(e){p.appendChild(f("script")).onreadystatechange=function(){p.removeChild(this);run(e)}}:function(e){setTimeout(runner(e),0)}}e.exports={set:w,clear:y}},(e,t,r)=>{var i=r(12),n=Function.prototype,o=n.apply,a=n.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?a.bind(o):function(){return a.apply(o,arguments)})},(e,t,r)=>{var i=r(11);e.exports=i([].slice)},(e,t,r)=>{var i=r(2).TypeError;e.exports=function(e,t){if(e<t)throw i("Not enough arguments");return e}},(e,t,r)=>{var i=r(27);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(i)},(e,t,r)=>{var i=r(14),n=r(2);e.exports="process"==i(n.process)},(e,t,r)=>{var i,n,o,a,s,l,c,d,h=r(2),u=r(98),p=r(65).f,g=r(107).set,f=r(111),m=r(114),v=r(115),b=r(112),w=h.MutationObserver||h.WebKitMutationObserver,y=h.document,_=h.process,S=h.Promise,P=p(h,"queueMicrotask"),C=P&&P.value;if(!C){i=function(){var e,t;b&&(e=_.domain)&&e.exit();for(;n;){t=n.fn;n=n.next;try{t()}catch(e){n?a():o=void 0;throw e}}o=void 0;e&&e.enter()};if(f||b||v||!w||!y)if(!m&&S&&S.resolve){(c=S.resolve(void 0)).constructor=S;d=u(c.then,c);a=function(){d(i)}}else if(b)a=function(){_.nextTick(i)};else{g=u(g,h);a=function(){g(i)}}else{s=!0;l=y.createTextNode("");new w(i).observe(l,{characterData:!0});a=function(){l.data=s=!s}}}e.exports=C||function(e){var t={fn:e,next:void 0};o&&(o.next=t);if(!n){n=t;a()}o=t}},(e,t,r)=>{var i=r(27),n=r(2);e.exports=/ipad|iphone|ipod/i.test(i)&&void 0!==n.Pebble},(e,t,r)=>{var i=r(27);e.exports=/web0s(?!.*chrome)/i.test(i)},(e,t,r)=>{var i=r(31),n=r(6),o=r(117);e.exports=function(e,t){i(e);if(n(t)&&t.constructor===e)return t;var r=o.f(e);(0,r.resolve)(t);return r.promise}},(e,t,r)=>{"use strict";var i=r(43),PromiseCapability=function(e){var t,r;this.promise=new e((function(e,i){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e;r=i}));this.resolve=i(t);this.reject=i(r)};e.exports.f=function(e){return new PromiseCapability(e)}},(e,t,r)=>{var i=r(2);e.exports=function(e,t){var r=i.console;r&&r.error&&(1==arguments.length?r.error(e):r.error(e,t))}},e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},e=>{var Queue=function(){this.head=null;this.tail=null};Queue.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t;this.tail=t},get:function(){var e=this.head;if(e){this.head=e.next;this.tail===e&&(this.tail=null);return e.item}}};e.exports=Queue},e=>{e.exports="object"==typeof window},(e,t,r)=>{"use strict";var i=r(108),n=r(39),o=r(11),a=r(123),s=r(13),l=r(31),c=r(7),d=r(50),h=r(52),u=r(84),p=r(15),g=r(124),f=r(42),m=r(126),v=r(127),b=r(17)("replace"),w=Math.max,y=Math.min,_=o([].concat),S=o([].push),P=o("".indexOf),C=o("".slice),R="$0"==="a".replace(/./,"$0"),E=!!/./[b]&&""===/./[b]("a","$0");a("replace",(function(e,t,r){var o=E?"$":"$0";return[function replace(e,r){var i=p(this),o=null==e?void 0:f(e,b);return o?n(o,e,i,r):n(t,u(i),e,r)},function(e,n){var a=l(this),s=u(e);if("string"==typeof n&&-1===P(n,o)&&-1===P(n,"$<")){var p=r(t,a,s,n);if(p.done)return p.value}var f=c(n);f||(n=u(n));var b=a.global;if(b){var R=a.unicode;a.lastIndex=0}for(var E=[];;){var x=v(a,s);if(null===x)break;S(E,x);if(!b)break;""===u(x[0])&&(a.lastIndex=g(s,h(a.lastIndex),R))}for(var T,I="",L=0,A=0;A<E.length;A++){for(var D=u((x=E[A])[0]),B=w(y(d(x.index),s.length),0),M=[],O=1;O<x.length;O++)S(M,void 0===(T=x[O])?T:String(T));var k=x.groups;if(f){var N=_([D],M,B,s);void 0!==k&&S(N,k);var V=u(i(n,void 0,N))}else V=m(D,s,B,M,k,n);if(B>=L){I+=C(s,L,B)+V;L=B+D.length}}return I+C(s,L)}]}),!!s((function(){var e=/./;e.exec=function(){var e=[];e.groups={a:"7"};return e};return"7"!=="".replace(e,"$<a>")}))||!R||E)},(e,t,r)=>{"use strict";r(82);var i=r(11),n=r(67),o=r(83),a=r(13),s=r(17),l=r(61),c=s("species"),d=RegExp.prototype;e.exports=function(e,t,r,h){var u=s(e),p=!a((function(){var t={};t[u]=function(){return 7};return 7!=""[e](t)})),g=p&&!a((function(){var t=!1,r=/a/;if("split"===e){(r={}).constructor={};r.constructor[c]=function(){return r};r.flags="";r[u]=/./[u]}r.exec=function(){t=!0;return null};r[u]("");return!t}));if(!p||!g||r){var f=i(/./[u]),m=t(u,""[e],(function(e,t,r,n,a){var s=i(e),l=t.exec;return l===o||l===d.exec?p&&!a?{done:!0,value:f(t,r,n)}:{done:!0,value:s(r,t,n)}:{done:!1}}));n(String.prototype,e,m[0]);n(d,u,m[1])}h&&l(d[u],"sham",!0)}},(e,t,r)=>{"use strict";var i=r(125).charAt;e.exports=function(e,t,r){return t+(r?i(e,t).length:1)}},(e,t,r)=>{var i=r(11),n=r(50),o=r(84),a=r(15),s=i("".charAt),l=i("".charCodeAt),c=i("".slice),createMethod=function(e){return function(t,r){var i,d,h=o(a(t)),u=n(r),p=h.length;return u<0||u>=p?e?"":void 0:(i=l(h,u))<55296||i>56319||u+1===p||(d=l(h,u+1))<56320||d>57343?e?s(h,u):i:e?c(h,u,u+2):d-56320+(i-55296<<10)+65536}};e.exports={codeAt:createMethod(!1),charAt:createMethod(!0)}},(e,t,r)=>{var i=r(11),n=r(23),o=Math.floor,a=i("".charAt),s=i("".replace),l=i("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,d=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,i,h,u){var p=r+e.length,g=i.length,f=d;if(void 0!==h){h=n(h);f=c}return s(u,f,(function(n,s){var c;switch(a(s,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,p);case"<":c=h[l(s,1,-1)];break;default:var d=+s;if(0===d)return n;if(d>g){var u=o(d/10);return 0===u?n:u<=g?void 0===i[u-1]?a(s,1):i[u-1]+a(s,1):n}c=i[d-1]}return void 0===c?"":c}))}},(e,t,r)=>{var i=r(2),n=r(39),o=r(31),a=r(7),s=r(14),l=r(83),c=i.TypeError;e.exports=function(e,t){var r=e.exec;if(a(r)){var i=n(r,e,t);null!==i&&o(i);return i}if("RegExp"===s(e))return n(l,e,t);throw c("RegExp#exec called on incompatible receiver")}},(e,t,r)=>{"use strict";r(129);var i,n=r(64),o=r(33),a=r(130),s=r(2),l=r(98),c=r(11),d=r(32).f,h=r(67),u=r(96),p=r(22),g=r(131),f=r(132),m=r(135),v=r(125).codeAt,b=r(136),w=r(84),y=r(78),_=r(110),S=r(137),P=r(58),C=P.set,R=P.getterFor("URL"),E=S.URLSearchParams,x=S.getState,T=s.URL,I=s.TypeError,L=s.parseInt,A=Math.floor,D=Math.pow,B=c("".charAt),M=c(/./.exec),O=c([].join),k=c(1..toString),N=c([].pop),V=c([].push),W=c("".replace),U=c([].shift),j=c("".split),z=c("".slice),H=c("".toLowerCase),q=c([].unshift),G="Invalid scheme",Y="Invalid host",Q="Invalid port",X=/[a-z]/i,K=/[\d+-.a-z]/i,Z=/\d/,$=/^0x/i,J=/^[0-7]+$/,ee=/^\d+$/,te=/^[\da-f]+$/i,re=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ie=/[\0\t\n\r #/:<>?@[\\\]^|]/,ne=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,oe=/[\t\n\r]/g,serializeHost=function(e){var t,r,i,n;if("number"==typeof e){t=[];for(r=0;r<4;r++){q(t,e%256);e=A(e/256)}return O(t,".")}if("object"==typeof e){t="";i=function(e){for(var t=null,r=1,i=null,n=0,o=0;o<8;o++)if(0!==e[o]){if(n>r){t=i;r=n}i=null;n=0}else{null===i&&(i=o);++n}if(n>r){t=i;r=n}return t}(e);for(r=0;r<8;r++)if(!n||0!==e[r]){n&&(n=!1);if(i===r){t+=r?":":"::";n=!0}else{t+=k(e[r],16);r<7&&(t+=":")}}return"["+t+"]"}return e},ae={},se=g({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=g({},se,{"#":1,"?":1,"{":1,"}":1}),ce=g({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),percentEncode=function(e,t){var r=v(e,0);return r>32&&r<127&&!p(t,e)?e:encodeURIComponent(e)},de={ftp:21,file:null,http:80,https:443,ws:80,wss:443},isWindowsDriveLetter=function(e,t){var r;return 2==e.length&&M(X,B(e,0))&&(":"==(r=B(e,1))||!t&&"|"==r)},startsWithWindowsDriveLetter=function(e){var t;return e.length>1&&isWindowsDriveLetter(z(e,0,2))&&(2==e.length||"/"===(t=B(e,2))||"\\"===t||"?"===t||"#"===t)},isSingleDot=function(e){return"."===e||"%2e"===H(e)},he={},ue={},pe={},ge={},fe={},me={},ve={},be={},we={},ye={},_e={},Se={},Pe={},Ce={},Re={},Ee={},xe={},Te={},Ie={},Le={},Ae={},URLState=function(e,t,r){var i,n,o,a=w(e);if(t){if(n=this.parse(a))throw I(n);this.searchParams=null}else{void 0!==r&&(i=new URLState(r,!0));if(n=this.parse(a,null,i))throw I(n);(o=x(new E)).bindURL(this);this.searchParams=o}};URLState.prototype={type:"URL",parse:function(e,t,r){var n,o,a,s,l,c=this,d=t||he,h=0,u="",g=!1,v=!1,b=!1;e=w(e);if(!t){c.scheme="";c.username="";c.password="";c.host=null;c.port=null;c.path=[];c.query=null;c.fragment=null;c.cannotBeABaseURL=!1;e=W(e,ne,"")}e=W(e,oe,"");n=f(e);for(;h<=n.length;){o=n[h];switch(d){case he:if(!o||!M(X,o)){if(t)return G;d=pe;continue}u+=H(o);d=ue;break;case ue:if(o&&(M(K,o)||"+"==o||"-"==o||"."==o))u+=H(o);else{if(":"!=o){if(t)return G;u="";d=pe;h=0;continue}if(t&&(c.isSpecial()!=p(de,u)||"file"==u&&(c.includesCredentials()||null!==c.port)||"file"==c.scheme&&!c.host))return;c.scheme=u;if(t){c.isSpecial()&&de[c.scheme]==c.port&&(c.port=null);return}u="";if("file"==c.scheme)d=Ce;else if(c.isSpecial()&&r&&r.scheme==c.scheme)d=ge;else if(c.isSpecial())d=be;else if("/"==n[h+1]){d=fe;h++}else{c.cannotBeABaseURL=!0;V(c.path,"");d=Ie}}break;case pe:if(!r||r.cannotBeABaseURL&&"#"!=o)return G;if(r.cannotBeABaseURL&&"#"==o){c.scheme=r.scheme;c.path=m(r.path);c.query=r.query;c.fragment="";c.cannotBeABaseURL=!0;d=Ae;break}d="file"==r.scheme?Ce:me;continue;case ge:if("/"!=o||"/"!=n[h+1]){d=me;continue}d=we;h++;break;case fe:if("/"==o){d=ye;break}d=Te;continue;case me:c.scheme=r.scheme;if(o==i){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=m(r.path);c.query=r.query}else if("/"==o||"\\"==o&&c.isSpecial())d=ve;else if("?"==o){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=m(r.path);c.query="";d=Le}else{if("#"!=o){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=m(r.path);c.path.length--;d=Te;continue}c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;c.path=m(r.path);c.query=r.query;c.fragment="";d=Ae}break;case ve:if(!c.isSpecial()||"/"!=o&&"\\"!=o){if("/"!=o){c.username=r.username;c.password=r.password;c.host=r.host;c.port=r.port;d=Te;continue}d=ye}else d=we;break;case be:d=we;if("/"!=o||"/"!=B(u,h+1))continue;h++;break;case we:if("/"!=o&&"\\"!=o){d=ye;continue}break;case ye:if("@"==o){g&&(u="%40"+u);g=!0;a=f(u);for(var y=0;y<a.length;y++){var _=a[y];if(":"!=_||b){var S=percentEncode(_,ce);b?c.password+=S:c.username+=S}else b=!0}u=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(g&&""==u)return"Invalid authority";h-=f(u).length+1;u="";d=_e}else u+=o;break;case _e:case Se:if(t&&"file"==c.scheme){d=Ee;continue}if(":"!=o||v){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()){if(c.isSpecial()&&""==u)return Y;if(t&&""==u&&(c.includesCredentials()||null!==c.port))return;if(s=c.parseHost(u))return s;u="";d=xe;if(t)return;continue}"["==o?v=!0:"]"==o&&(v=!1);u+=o}else{if(""==u)return Y;if(s=c.parseHost(u))return s;u="";d=Pe;if(t==Se)return}break;case Pe:if(!M(Z,o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&c.isSpecial()||t){if(""!=u){var P=L(u,10);if(P>65535)return Q;c.port=c.isSpecial()&&P===de[c.scheme]?null:P;u=""}if(t)return;d=xe;continue}return Q}u+=o;break;case Ce:c.scheme="file";if("/"==o||"\\"==o)d=Re;else{if(!r||"file"!=r.scheme){d=Te;continue}if(o==i){c.host=r.host;c.path=m(r.path);c.query=r.query}else if("?"==o){c.host=r.host;c.path=m(r.path);c.query="";d=Le}else{if("#"!=o){if(!startsWithWindowsDriveLetter(O(m(n,h),""))){c.host=r.host;c.path=m(r.path);c.shortenPath()}d=Te;continue}c.host=r.host;c.path=m(r.path);c.query=r.query;c.fragment="";d=Ae}}break;case Re:if("/"==o||"\\"==o){d=Ee;break}r&&"file"==r.scheme&&!startsWithWindowsDriveLetter(O(m(n,h),""))&&(isWindowsDriveLetter(r.path[0],!0)?V(c.path,r.path[0]):c.host=r.host);d=Te;continue;case Ee:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!t&&isWindowsDriveLetter(u))d=Te;else if(""==u){c.host="";if(t)return;d=xe}else{if(s=c.parseHost(u))return s;"localhost"==c.host&&(c.host="");if(t)return;u="";d=xe}continue}u+=o;break;case xe:if(c.isSpecial()){d=Te;if("/"!=o&&"\\"!=o)continue}else if(t||"?"!=o)if(t||"#"!=o){if(o!=i){d=Te;if("/"!=o)continue}}else{c.fragment="";d=Ae}else{c.query="";d=Le}break;case Te:if(o==i||"/"==o||"\\"==o&&c.isSpecial()||!t&&("?"==o||"#"==o)){if(".."===(l=H(l=u))||"%2e."===l||".%2e"===l||"%2e%2e"===l){c.shortenPath();"/"==o||"\\"==o&&c.isSpecial()||V(c.path,"")}else if(isSingleDot(u))"/"==o||"\\"==o&&c.isSpecial()||V(c.path,"");else{if("file"==c.scheme&&!c.path.length&&isWindowsDriveLetter(u)){c.host&&(c.host="");u=B(u,0)+":"}V(c.path,u)}u="";if("file"==c.scheme&&(o==i||"?"==o||"#"==o))for(;c.path.length>1&&""===c.path[0];)U(c.path);if("?"==o){c.query="";d=Le}else if("#"==o){c.fragment="";d=Ae}}else u+=percentEncode(o,le);break;case Ie:if("?"==o){c.query="";d=Le}else if("#"==o){c.fragment="";d=Ae}else o!=i&&(c.path[0]+=percentEncode(o,ae));break;case Le:if(t||"#"!=o)o!=i&&("'"==o&&c.isSpecial()?c.query+="%27":c.query+="#"==o?"%23":percentEncode(o,ae));else{c.fragment="";d=Ae}break;case Ae:o!=i&&(c.fragment+=percentEncode(o,se))}h++}},parseHost:function(e){var t,r,i;if("["==B(e,0)){if("]"!=B(e,e.length-1))return Y;t=function(e){var t,r,i,n,o,a,s,l=[0,0,0,0,0,0,0,0],c=0,d=null,h=0,chr=function(){return B(e,h)};if(":"==chr()){if(":"!=B(e,1))return;h+=2;d=++c}for(;chr();){if(8==c)return;if(":"!=chr()){t=r=0;for(;r<4&&M(te,chr());){t=16*t+L(chr(),16);h++;r++}if("."==chr()){if(0==r)return;h-=r;if(c>6)return;i=0;for(;chr();){n=null;if(i>0){if(!("."==chr()&&i<4))return;h++}if(!M(Z,chr()))return;for(;M(Z,chr());){o=L(chr(),10);if(null===n)n=o;else{if(0==n)return;n=10*n+o}if(n>255)return;h++}l[c]=256*l[c]+n;2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==chr()){h++;if(!chr())return}else if(chr())return;l[c++]=t}else{if(null!==d)return;h++;d=++c}}if(null!==d){a=c-d;c=7;for(;0!=c&&a>0;){s=l[c];l[c--]=l[d+a-1];l[d+--a]=s}}else if(8!=c)return;return l}(z(e,1,-1));if(!t)return Y;this.host=t}else if(this.isSpecial()){e=b(e);if(M(re,e))return Y;t=function(e){var t,r,i,n,o,a,s,l=j(e,".");l.length&&""==l[l.length-1]&&l.length--;if((t=l.length)>4)return e;r=[];for(i=0;i<t;i++){if(""==(n=l[i]))return e;o=10;if(n.length>1&&"0"==B(n,0)){o=M($,n)?16:8;n=z(n,8==o?1:2)}if(""===n)a=0;else{if(!M(10==o?ee:8==o?J:te,n))return e;a=L(n,o)}V(r,a)}for(i=0;i<t;i++){a=r[i];if(i==t-1){if(a>=D(256,5-t))return null}else if(a>255)return null}s=N(r);for(i=0;i<r.length;i++)s+=r[i]*D(256,3-i);return s}(e);if(null===t)return Y;this.host=t}else{if(M(ie,e))return Y;t="";r=f(e);for(i=0;i<r.length;i++)t+=percentEncode(r[i],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return p(de,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"==this.scheme&&1==t&&isWindowsDriveLetter(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,i=e.password,n=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";if(null!==n){c+="//";e.includesCredentials()&&(c+=r+(i?":"+i:"")+"@");c+=serializeHost(n);null!==o&&(c+=":"+o)}else"file"==t&&(c+="//");c+=e.cannotBeABaseURL?a[0]:a.length?"/"+O(a,"/"):"";null!==s&&(c+="?"+s);null!==l&&(c+="#"+l);return c},setHref:function(e){var t=this.parse(e);if(t)throw I(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new De(e.path[0]).origin}catch(e){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+serializeHost(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(w(e)+":",he)},getUsername:function(){return this.username},setUsername:function(e){var t=f(w(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=percentEncode(t[r],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=f(w(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=percentEncode(t[r],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?serializeHost(e):serializeHost(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,_e)},getHostname:function(){var e=this.host;return null===e?"":serializeHost(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Se)},getPort:function(){var e=this.port;return null===e?"":w(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=w(e))?this.port=null:this.parse(e,Pe))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+O(e,"/"):""},setPathname:function(e){if(!this.cannotBeABaseURL){this.path=[];this.parse(e,xe)}},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){if(""==(e=w(e)))this.query=null;else{"?"==B(e,0)&&(e=z(e,1));this.query="";this.parse(e,Le)}this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(""!=(e=w(e))){"#"==B(e,0)&&(e=z(e,1));this.fragment="";this.parse(e,Ae)}else this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var De=function URL(e){var t=u(this,Be),r=_(arguments.length,1)>1?arguments[1]:void 0,i=C(t,new URLState(e,!1,r));if(!o){t.href=i.serialize();t.origin=i.getOrigin();t.protocol=i.getProtocol();t.username=i.getUsername();t.password=i.getPassword();t.host=i.getHost();t.hostname=i.getHostname();t.port=i.getPort();t.pathname=i.getPathname();t.search=i.getSearch();t.searchParams=i.getSearchParams();t.hash=i.getHash()}},Be=De.prototype,accessorDescriptor=function(e,t){return{get:function(){return R(this)[e]()},set:t&&function(e){return R(this)[t](e)},configurable:!0,enumerable:!0}};o&&d(Be,{href:accessorDescriptor("serialize","setHref"),origin:accessorDescriptor("getOrigin"),protocol:accessorDescriptor("getProtocol","setProtocol"),username:accessorDescriptor("getUsername","setUsername"),password:accessorDescriptor("getPassword","setPassword"),host:accessorDescriptor("getHost","setHost"),hostname:accessorDescriptor("getHostname","setHostname"),port:accessorDescriptor("getPort","setPort"),pathname:accessorDescriptor("getPathname","setPathname"),search:accessorDescriptor("getSearch","setSearch"),searchParams:accessorDescriptor("getSearchParams"),hash:accessorDescriptor("getHash","setHash")});h(Be,"toJSON",(function toJSON(){return R(this).serialize()}),{enumerable:!0});h(Be,"toString",(function toString(){return R(this).serialize()}),{enumerable:!0});if(T){var Me=T.createObjectURL,Oe=T.revokeObjectURL;Me&&h(De,"createObjectURL",l(Me,T));Oe&&h(De,"revokeObjectURL",l(Oe,T))}y(De,"URL");n({global:!0,forced:!a,sham:!o},{URL:De})},(e,t,r)=>{"use strict";var i=r(125).charAt,n=r(84),o=r(58),a=r(63),s="String Iterator",l=o.set,c=o.getterFor(s);a(String,"String",(function(e){l(this,{type:s,string:n(e),index:0})}),(function next(){var e,t=c(this),r=t.string,n=t.index;if(n>=r.length)return{value:void 0,done:!0};e=i(r,n);t.index+=e.length;return{value:e,done:!1}}))},(e,t,r)=>{var i=r(13),n=r(17),o=r(19),a=n("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r="";e.pathname="c%20d";t.forEach((function(e,i){t.delete("b");r+=i+e}));return o&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==r||"x"!==new URL("http://x",void 0).host}))},(e,t,r)=>{"use strict";var i=r(33),n=r(11),o=r(39),a=r(13),s=r(46),l=r(72),c=r(66),d=r(23),h=r(10),u=Object.assign,p=Object.defineProperty,g=n([].concat);e.exports=!u||a((function(){if(i&&1!==u({b:1},u(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";e[r]=7;n.split("").forEach((function(e){t[e]=e}));return 7!=u({},e)[r]||s(u({},t)).join("")!=n}))?function assign(e,t){for(var r=d(e),n=arguments.length,a=1,u=l.f,p=c.f;n>a;)for(var f,m=h(arguments[a++]),v=u?g(s(m),u(m)):s(m),b=v.length,w=0;b>w;){f=v[w++];i&&!o(p,m,f)||(r[f]=m[f])}return r}:u},(e,t,r)=>{"use strict";var i=r(2),n=r(98),o=r(39),a=r(23),s=r(133),l=r(99),c=r(106),d=r(51),h=r(134),u=r(100),p=r(101),g=i.Array;e.exports=function from(e){var t=a(e),r=c(this),i=arguments.length,f=i>1?arguments[1]:void 0,m=void 0!==f;m&&(f=n(f,i>2?arguments[2]:void 0));var v,b,w,y,_,S,P=p(t),C=0;if(!P||this==g&&l(P)){v=d(t);b=r?new this(v):g(v);for(;v>C;C++){S=m?f(t[C],C):t[C];h(b,C,S)}}else{_=(y=u(t,P)).next;b=r?new this:[];for(;!(w=o(_,y)).done;C++){S=m?s(y,f,[w.value,C],!0):w.value;h(b,C,S)}}b.length=C;return b}},(e,t,r)=>{var i=r(31),n=r(102);e.exports=function(e,t,r,o){try{return o?t(i(r)[0],r[1]):t(r)}catch(t){n(e,"throw",t)}}},(e,t,r)=>{"use strict";var i=r(37),n=r(35),o=r(62);e.exports=function(e,t,r){var a=i(t);a in e?n.f(e,a,o(0,r)):e[a]=r}},(e,t,r)=>{var i=r(2),n=r(49),o=r(51),a=r(134),s=i.Array,l=Math.max;e.exports=function(e,t,r){for(var i=o(e),c=n(t,i),d=n(void 0===r?i:r,i),h=s(l(d-c,0)),u=0;c<d;c++,u++)a(h,u,e[c]);h.length=u;return h}},(e,t,r)=>{"use strict";var i=r(2),n=r(11),o=2147483647,a=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,l="Overflow: input needs wider integers to process",c=i.RangeError,d=n(s.exec),h=Math.floor,u=String.fromCharCode,p=n("".charCodeAt),g=n([].join),f=n([].push),m=n("".replace),v=n("".split),b=n("".toLowerCase),digitToBasic=function(e){return e+22+75*(e<26)},adapt=function(e,t,r){var i=0;e=r?h(e/700):e>>1;e+=h(e/t);for(;e>455;){e=h(e/35);i+=36}return h(i+36*e/(e+38))},encode=function(e){var t=[];e=function(e){for(var t=[],r=0,i=e.length;r<i;){var n=p(e,r++);if(n>=55296&&n<=56319&&r<i){var o=p(e,r++);if(56320==(64512&o))f(t,((1023&n)<<10)+(1023&o)+65536);else{f(t,n);r--}}else f(t,n)}return t}(e);var r,i,n=e.length,a=128,s=0,d=72;for(r=0;r<e.length;r++)(i=e[r])<128&&f(t,u(i));var m=t.length,v=m;m&&f(t,"-");for(;v<n;){var b=o;for(r=0;r<e.length;r++)(i=e[r])>=a&&i<b&&(b=i);var w=v+1;if(b-a>h((o-s)/w))throw c(l);s+=(b-a)*w;a=b;for(r=0;r<e.length;r++){if((i=e[r])<a&&++s>o)throw c(l);if(i==a){for(var y=s,_=36;;){var S=_<=d?1:_>=d+26?26:_-d;if(y<S)break;var P=y-S,C=36-S;f(t,u(digitToBasic(S+P%C)));y=h(P/C);_+=36}f(t,u(digitToBasic(y)));d=adapt(s,w,v==m);s=0;v++}}s++;a++}return g(t,"")};e.exports=function(e){var t,r,i=[],n=v(m(b(e),s,"."),".");for(t=0;t<n.length;t++){r=n[t];f(i,d(a,r)?"xn--"+encode(r):r)}return g(i,".")}},(e,t,r)=>{"use strict";r(8);var i=r(64),n=r(2),o=r(28),a=r(39),s=r(11),l=r(130),c=r(67),d=r(94),h=r(78),u=r(74),p=r(58),g=r(96),f=r(7),m=r(22),v=r(98),b=r(85),w=r(31),y=r(6),_=r(84),S=r(30),P=r(62),C=r(100),R=r(101),E=r(110),x=r(17),T=r(138),I=x("iterator"),L="URLSearchParams",A="URLSearchParamsIterator",D=p.set,B=p.getterFor(L),M=p.getterFor(A),O=o("fetch"),k=o("Request"),N=o("Headers"),V=k&&k.prototype,W=N&&N.prototype,U=n.RegExp,j=n.TypeError,z=n.decodeURIComponent,H=n.encodeURIComponent,q=s("".charAt),G=s([].join),Y=s([].push),Q=s("".replace),X=s([].shift),K=s([].splice),Z=s("".split),$=s("".slice),J=/\+/g,ee=Array(4),percentSequence=function(e){return ee[e-1]||(ee[e-1]=U("((?:%[\\da-f]{2}){"+e+"})","gi"))},percentDecode=function(e){try{return z(e)}catch(t){return e}},deserialize=function(e){var t=Q(e,J," "),r=4;try{return z(t)}catch(e){for(;r;)t=Q(t,percentSequence(r--),percentDecode);return t}},te=/[!'()~]|%20/g,re={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},replacer=function(e){return re[e]},serialize=function(e){return Q(H(e),te,replacer)},ie=u((function Iterator(e,t){D(this,{type:A,iterator:C(B(e).entries),kind:t})}),"Iterator",(function next(){var e=M(this),t=e.kind,r=e.iterator.next(),i=r.value;r.done||(r.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]);return r}),!0),URLSearchParamsState=function(e){this.entries=[];this.url=null;void 0!==e&&(y(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===q(e,0)?$(e,1):e:_(e)))};URLSearchParamsState.prototype={type:L,bindURL:function(e){this.url=e;this.update()},parseObject:function(e){var t,r,i,n,o,s,l,c=R(e);if(c){r=(t=C(e,c)).next;for(;!(i=a(r,t)).done;){o=(n=C(w(i.value))).next;if((s=a(o,n)).done||(l=a(o,n)).done||!a(o,n).done)throw j("Expected sequence with length 2");Y(this.entries,{key:_(s.value),value:_(l.value)})}}else for(var d in e)m(e,d)&&Y(this.entries,{key:d,value:_(e[d])})},parseQuery:function(e){if(e)for(var t,r,i=Z(e,"&"),n=0;n<i.length;)if((t=i[n++]).length){r=Z(t,"=");Y(this.entries,{key:deserialize(X(r)),value:deserialize(G(r,"="))})}},serialize:function(){for(var e,t=this.entries,r=[],i=0;i<t.length;){e=t[i++];Y(r,serialize(e.key)+"="+serialize(e.value))}return G(r,"&")},update:function(){this.entries.length=0;this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ne=function URLSearchParams(){g(this,oe);var e=arguments.length>0?arguments[0]:void 0;D(this,new URLSearchParamsState(e))},oe=ne.prototype;d(oe,{append:function append(e,t){E(arguments.length,2);var r=B(this);Y(r.entries,{key:_(e),value:_(t)});r.updateURL()},delete:function(e){E(arguments.length,1);for(var t=B(this),r=t.entries,i=_(e),n=0;n<r.length;)r[n].key===i?K(r,n,1):n++;t.updateURL()},get:function get(e){E(arguments.length,1);for(var t=B(this).entries,r=_(e),i=0;i<t.length;i++)if(t[i].key===r)return t[i].value;return null},getAll:function getAll(e){E(arguments.length,1);for(var t=B(this).entries,r=_(e),i=[],n=0;n<t.length;n++)t[n].key===r&&Y(i,t[n].value);return i},has:function has(e){E(arguments.length,1);for(var t=B(this).entries,r=_(e),i=0;i<t.length;)if(t[i++].key===r)return!0;return!1},set:function set(e,t){E(arguments.length,1);for(var r,i=B(this),n=i.entries,o=!1,a=_(e),s=_(t),l=0;l<n.length;l++)if((r=n[l]).key===a)if(o)K(n,l--,1);else{o=!0;r.value=s}o||Y(n,{key:a,value:s});i.updateURL()},sort:function sort(){var e=B(this);T(e.entries,(function(e,t){return e.key>t.key?1:-1}));e.updateURL()},forEach:function forEach(e){for(var t,r=B(this).entries,i=v(e,arguments.length>1?arguments[1]:void 0),n=0;n<r.length;)i((t=r[n++]).value,t.key,this)},keys:function keys(){return new ie(this,"keys")},values:function values(){return new ie(this,"values")},entries:function entries(){return new ie(this,"entries")}},{enumerable:!0});c(oe,I,oe.entries,{name:"entries"});c(oe,"toString",(function toString(){return B(this).serialize()}),{enumerable:!0});h(ne,L);i({global:!0,forced:!l},{URLSearchParams:ne});if(!l&&f(N)){var ae=s(W.has),se=s(W.set),wrapRequestOptions=function(e){if(y(e)){var t,r=e.body;if(b(r)===L){t=e.headers?new N(e.headers):new N;ae(t,"content-type")||se(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8");return S(e,{body:P(0,_(r)),headers:P(0,t)})}}return e};f(O)&&i({global:!0,enumerable:!0,forced:!0},{fetch:function fetch(e){return O(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})}});if(f(k)){var le=function Request(e){g(this,V);return new k(e,arguments.length>1?wrapRequestOptions(arguments[1]):{})};V.constructor=le;le.prototype=V;i({global:!0,forced:!0},{Request:le})}}e.exports={URLSearchParams:ne,getState:B}},(e,t,r)=>{var i=r(135),n=Math.floor,mergeSort=function(e,t){var r=e.length,o=n(r/2);return r<8?insertionSort(e,t):merge(e,mergeSort(i(e,0,o),t),mergeSort(i(e,o),t),t)},insertionSort=function(e,t){for(var r,i,n=e.length,o=1;o<n;){i=o;r=e[o];for(;i&&t(e[i-1],r)>0;)e[i]=e[--i];i!==o++&&(e[i]=r)}return e},merge=function(e,t,r,i){for(var n=t.length,o=r.length,a=0,s=0;a<n||s<o;)e[a+s]=a<n&&s<o?i(t[a],r[s])<=0?t[a++]:r[s++]:a<n?t[a++]:r[s++];return e};e.exports=mergeSort},(e,t,r)=>{r(140)("Uint8",(function(e){return function Uint8Array(t,r,i){return e(this,t,r,i)}}))},(e,t,r)=>{"use strict";var i=r(64),n=r(2),o=r(39),a=r(33),s=r(141),l=r(142),c=r(144),d=r(96),h=r(62),u=r(61),p=r(148),g=r(52),f=r(145),m=r(149),v=r(37),b=r(22),w=r(85),y=r(6),_=r(40),S=r(30),P=r(41),C=r(79),R=r(71).f,E=r(151),x=r(152).forEach,T=r(95),I=r(35),L=r(65),A=r(58),D=r(156),B=A.get,M=A.set,O=I.f,k=L.f,N=Math.round,V=n.RangeError,W=c.ArrayBuffer,U=W.prototype,j=c.DataView,z=l.NATIVE_ARRAY_BUFFER_VIEWS,H=l.TYPED_ARRAY_CONSTRUCTOR,q=l.TYPED_ARRAY_TAG,G=l.TypedArray,Y=l.TypedArrayPrototype,Q=l.aTypedArrayConstructor,X=l.isTypedArray,K="BYTES_PER_ELEMENT",Z="Wrong length",fromList=function(e,t){Q(e);for(var r=0,i=t.length,n=new e(i);i>r;)n[r]=t[r++];return n},addGetter=function(e,t){O(e,t,{get:function(){return B(this)[t]}})},isArrayBuffer=function(e){var t;return P(U,e)||"ArrayBuffer"==(t=w(e))||"SharedArrayBuffer"==t},isTypedArrayIndex=function(e,t){return X(e)&&!_(t)&&t in e&&p(+t)&&t>=0},$=function getOwnPropertyDescriptor(e,t){t=v(t);return isTypedArrayIndex(e,t)?h(2,e[t]):k(e,t)},J=function defineProperty(e,t,r){t=v(t);if(isTypedArrayIndex(e,t)&&y(r)&&b(r,"value")&&!b(r,"get")&&!b(r,"set")&&!r.configurable&&(!b(r,"writable")||r.writable)&&(!b(r,"enumerable")||r.enumerable)){e[t]=r.value;return e}return O(e,t,r)};if(a){if(!z){L.f=$;I.f=J;addGetter(Y,"buffer");addGetter(Y,"byteOffset");addGetter(Y,"byteLength");addGetter(Y,"length")}i({target:"Object",stat:!0,forced:!z},{getOwnPropertyDescriptor:$,defineProperty:J});e.exports=function(e,t,r){var a=e.match(/\d+$/)[0]/8,l=e+(r?"Clamped":"")+"Array",c="get"+e,h="set"+e,p=n[l],v=p,b=v&&v.prototype,w={},addElement=function(e,t){O(e,t,{get:function(){return function(e,t){var r=B(e);return r.view[c](t*a+r.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,i){var n=B(e);r&&(i=(i=N(i))<0?0:i>255?255:255&i);n.view[h](t*a+n.byteOffset,i,!0)}(this,t,e)},enumerable:!0})};if(z){if(s){v=t((function(e,t,r,i){d(e,b);return D(y(t)?isArrayBuffer(t)?void 0!==i?new p(t,m(r,a),i):void 0!==r?new p(t,m(r,a)):new p(t):X(t)?fromList(v,t):o(E,v,t):new p(f(t)),e,v)}));C&&C(v,G);x(R(p),(function(e){e in v||u(v,e,p[e])}));v.prototype=b}}else{v=t((function(e,t,r,i){d(e,b);var n,s,l,c=0,h=0;if(y(t)){if(!isArrayBuffer(t))return X(t)?fromList(v,t):o(E,v,t);n=t;h=m(r,a);var u=t.byteLength;if(void 0===i){if(u%a)throw V(Z);if((s=u-h)<0)throw V(Z)}else if((s=g(i)*a)+h>u)throw V(Z);l=s/a}else{l=f(t);n=new W(s=l*a)}M(e,{buffer:n,byteOffset:h,byteLength:s,length:l,view:new j(n)});for(;c<l;)addElement(e,c++)}));C&&C(v,G);b=v.prototype=S(Y)}b.constructor!==v&&u(b,"constructor",v);u(b,H,v);q&&u(b,q,l);w[l]=v;i({global:!0,forced:v!=p,sham:!z},w);K in v||u(v,K,a);K in b||u(b,K,a);T(l)}}else e.exports=function(){}},(e,t,r)=>{var i=r(2),n=r(13),o=r(103),a=r(142).NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,l=i.Int8Array;e.exports=!a||!n((function(){l(1)}))||!n((function(){new l(-1)}))||!o((function(e){new l;new l(null);new l(1.5);new l(e)}),!0)||n((function(){return 1!==new l(new s(2),1,void 0).length}))},(e,t,r)=>{"use strict";var i,n,o,a=r(143),s=r(33),l=r(2),c=r(7),d=r(6),h=r(22),u=r(85),p=r(44),g=r(61),f=r(67),m=r(35).f,v=r(41),b=r(76),w=r(79),y=r(17),_=r(24),S=l.Int8Array,P=S&&S.prototype,C=l.Uint8ClampedArray,R=C&&C.prototype,E=S&&b(S),x=P&&b(P),T=Object.prototype,I=l.TypeError,L=y("toStringTag"),A=_("TYPED_ARRAY_TAG"),D=_("TYPED_ARRAY_CONSTRUCTOR"),B=a&&!!w&&"Opera"!==u(l.opera),M=!1,O={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},k={BigInt64Array:8,BigUint64Array:8},isTypedArray=function(e){if(!d(e))return!1;var t=u(e);return h(O,t)||h(k,t)};for(i in O)(o=(n=l[i])&&n.prototype)?g(o,D,n):B=!1;for(i in k)(o=(n=l[i])&&n.prototype)&&g(o,D,n);if(!B||!c(E)||E===Function.prototype){E=function TypedArray(){throw I("Incorrect invocation")};if(B)for(i in O)l[i]&&w(l[i],E)}if(!B||!x||x===T){x=E.prototype;if(B)for(i in O)l[i]&&w(l[i].prototype,x)}B&&b(R)!==x&&w(R,x);if(s&&!h(x,L)){M=!0;m(x,L,{get:function(){return d(this)?this[A]:void 0}});for(i in O)l[i]&&g(l[i],A,i)}e.exports={NATIVE_ARRAY_BUFFER_VIEWS:B,TYPED_ARRAY_CONSTRUCTOR:D,TYPED_ARRAY_TAG:M&&A,aTypedArray:function(e){if(isTypedArray(e))return e;throw I("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!w||v(E,e)))return e;throw I(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,r,i){if(s){if(r)for(var n in O){var o=l[n];if(o&&h(o.prototype,e))try{delete o.prototype[e]}catch(r){try{o.prototype[e]=t}catch(e){}}}x[e]&&!r||f(x,e,r?t:B&&P[e]||t,i)}},exportTypedArrayStaticMethod:function(e,t,r){var i,n;if(s){if(w){if(r)for(i in O)if((n=l[i])&&h(n,e))try{delete n[e]}catch(e){}if(E[e]&&!r)return;try{return f(E,e,r?t:B&&E[e]||t)}catch(e){}}for(i in O)!(n=l[i])||n[e]&&!r||f(n,e,t)}},isView:function isView(e){if(!d(e))return!1;var t=u(e);return"DataView"===t||h(O,t)||h(k,t)},isTypedArray:isTypedArray,TypedArray:E,TypedArrayPrototype:x}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,r)=>{"use strict";var i=r(2),n=r(11),o=r(33),a=r(143),s=r(68),l=r(61),c=r(94),d=r(13),h=r(96),u=r(50),p=r(52),g=r(145),f=r(146),m=r(76),v=r(79),b=r(71).f,w=r(35).f,y=r(147),_=r(135),S=r(78),P=r(58),C=s.PROPER,R=s.CONFIGURABLE,E=P.get,x=P.set,T="ArrayBuffer",I="DataView",L="Wrong index",A=i.ArrayBuffer,D=A,B=D&&D.prototype,M=i.DataView,O=M&&M.prototype,k=Object.prototype,N=i.Array,V=i.RangeError,W=n(y),U=n([].reverse),j=f.pack,z=f.unpack,packInt8=function(e){return[255&e]},packInt16=function(e){return[255&e,e>>8&255]},packInt32=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},unpackInt32=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},packFloat32=function(e){return j(e,23,4)},packFloat64=function(e){return j(e,52,8)},addGetter=function(e,t){w(e.prototype,t,{get:function(){return E(this)[t]}})},get=function(e,t,r,i){var n=g(r),o=E(e);if(n+t>o.byteLength)throw V(L);var a=E(o.buffer).bytes,s=n+o.byteOffset,l=_(a,s,s+t);return i?l:U(l)},set=function(e,t,r,i,n,o){var a=g(r),s=E(e);if(a+t>s.byteLength)throw V(L);for(var l=E(s.buffer).bytes,c=a+s.byteOffset,d=i(+n),h=0;h<t;h++)l[c+h]=d[o?h:t-h-1]};if(a){var H=C&&A.name!==T;if(d((function(){A(1)}))&&d((function(){new A(-1)}))&&!d((function(){new A;new A(1.5);new A(NaN);return H&&!R})))H&&R&&l(A,"name",T);else{(D=function ArrayBuffer(e){h(this,B);return new A(g(e))}).prototype=B;for(var q,G=b(A),Y=0;G.length>Y;)(q=G[Y++])in D||l(D,q,A[q]);B.constructor=D}v&&m(O)!==k&&v(O,k);var Q=new M(new D(2)),X=n(O.setInt8);Q.setInt8(0,2147483648);Q.setInt8(1,2147483649);!Q.getInt8(0)&&Q.getInt8(1)||c(O,{setInt8:function setInt8(e,t){X(this,e,t<<24>>24)},setUint8:function setUint8(e,t){X(this,e,t<<24>>24)}},{unsafe:!0})}else{B=(D=function ArrayBuffer(e){h(this,B);var t=g(e);x(this,{bytes:W(N(t),0),byteLength:t});o||(this.byteLength=t)}).prototype;O=(M=function DataView(e,t,r){h(this,O);h(e,B);var i=E(e).byteLength,n=u(t);if(n<0||n>i)throw V("Wrong offset");if(n+(r=void 0===r?i-n:p(r))>i)throw V("Wrong length");x(this,{buffer:e,byteLength:r,byteOffset:n});if(!o){this.buffer=e;this.byteLength=r;this.byteOffset=n}}).prototype;if(o){addGetter(D,"byteLength");addGetter(M,"buffer");addGetter(M,"byteLength");addGetter(M,"byteOffset")}c(O,{getInt8:function getInt8(e){return get(this,1,e)[0]<<24>>24},getUint8:function getUint8(e){return get(this,1,e)[0]},getInt16:function getInt16(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function getUint16(e){var t=get(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function getInt32(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function getUint32(e){return unpackInt32(get(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function getFloat32(e){return z(get(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function getFloat64(e){return z(get(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function setInt8(e,t){set(this,1,e,packInt8,t)},setUint8:function setUint8(e,t){set(this,1,e,packInt8,t)},setInt16:function setInt16(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setUint16:function setUint16(e,t){set(this,2,e,packInt16,t,arguments.length>2?arguments[2]:void 0)},setInt32:function setInt32(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setUint32:function setUint32(e,t){set(this,4,e,packInt32,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function setFloat32(e,t){set(this,4,e,packFloat32,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function setFloat64(e,t){set(this,8,e,packFloat64,t,arguments.length>2?arguments[2]:void 0)}})}S(D,T);S(M,I);e.exports={ArrayBuffer:D,DataView:M}},(e,t,r)=>{var i=r(2),n=r(50),o=r(52),a=i.RangeError;e.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw a("Wrong length or index");return r}},(e,t,r)=>{var i=r(2).Array,n=Math.abs,o=Math.pow,a=Math.floor,s=Math.log,l=Math.LN2;e.exports={pack:function(e,t,r){var c,d,h,u=i(r),p=8*r-t-1,g=(1<<p)-1,f=g>>1,m=23===t?o(2,-24)-o(2,-77):0,v=e<0||0===e&&1/e<0?1:0,b=0;if((e=n(e))!=e||e===1/0){d=e!=e?1:0;c=g}else{c=a(s(e)/l);if(e*(h=o(2,-c))<1){c--;h*=2}if((e+=c+f>=1?m/h:m*o(2,1-f))*h>=2){c++;h/=2}if(c+f>=g){d=0;c=g}else if(c+f>=1){d=(e*h-1)*o(2,t);c+=f}else{d=e*o(2,f-1)*o(2,t);c=0}}for(;t>=8;){u[b++]=255&d;d/=256;t-=8}c=c<<t|d;p+=t;for(;p>0;){u[b++]=255&c;c/=256;p-=8}u[--b]|=128*v;return u},unpack:function(e,t){var r,i=e.length,n=8*i-t-1,a=(1<<n)-1,s=a>>1,l=n-7,c=i-1,d=e[c--],h=127&d;d>>=7;for(;l>0;){h=256*h+e[c--];l-=8}r=h&(1<<-l)-1;h>>=-l;l+=t;for(;l>0;){r=256*r+e[c--];l-=8}if(0===h)h=1-s;else{if(h===a)return r?NaN:d?-1/0:1/0;r+=o(2,t);h-=s}return(d?-1:1)*r*o(2,h-t)}}},(e,t,r)=>{"use strict";var i=r(23),n=r(49),o=r(51);e.exports=function fill(e){for(var t=i(this),r=o(t),a=arguments.length,s=n(a>1?arguments[1]:void 0,r),l=a>2?arguments[2]:void 0,c=void 0===l?r:n(l,r);c>s;)t[s++]=e;return t}},(e,t,r)=>{var i=r(6),n=Math.floor;e.exports=Number.isInteger||function isInteger(e){return!i(e)&&isFinite(e)&&n(e)===e}},(e,t,r)=>{var i=r(2),n=r(150),o=i.RangeError;e.exports=function(e,t){var r=n(e);if(r%t)throw o("Wrong offset");return r}},(e,t,r)=>{var i=r(2),n=r(50),o=i.RangeError;e.exports=function(e){var t=n(e);if(t<0)throw o("The argument can't be less than 0");return t}},(e,t,r)=>{var i=r(98),n=r(39),o=r(105),a=r(23),s=r(51),l=r(100),c=r(101),d=r(99),h=r(142).aTypedArrayConstructor;e.exports=function from(e){var t,r,u,p,g,f,m=o(this),v=a(e),b=arguments.length,w=b>1?arguments[1]:void 0,y=void 0!==w,_=c(v);if(_&&!d(_)){f=(g=l(v,_)).next;v=[];for(;!(p=n(f,g)).done;)v.push(p.value)}y&&b>2&&(w=i(w,arguments[2]));r=s(v);u=new(h(m))(r);for(t=0;r>t;t++)u[t]=y?w(v[t],t):v[t];return u}},(e,t,r)=>{var i=r(98),n=r(11),o=r(10),a=r(23),s=r(51),l=r(153),c=n([].push),createMethod=function(e){var t=1==e,r=2==e,n=3==e,d=4==e,h=6==e,u=7==e,p=5==e||h;return function(g,f,m,v){for(var b,w,y=a(g),_=o(y),S=i(f,m),P=s(_),C=0,R=v||l,E=t?R(g,P):r||u?R(g,0):void 0;P>C;C++)if(p||C in _){w=S(b=_[C],C,y);if(e)if(t)E[C]=w;else if(w)switch(e){case 3:return!0;case 5:return b;case 6:return C;case 2:c(E,b)}else switch(e){case 4:return!1;case 7:c(E,b)}}return h?-1:n||d?d:E}};e.exports={forEach:createMethod(0),map:createMethod(1),filter:createMethod(2),some:createMethod(3),every:createMethod(4),find:createMethod(5),findIndex:createMethod(6),filterReject:createMethod(7)}},(e,t,r)=>{var i=r(154);e.exports=function(e,t){return new(i(e))(0===t?0:t)}},(e,t,r)=>{var i=r(2),n=r(155),o=r(106),a=r(6),s=r(17)("species"),l=i.Array;e.exports=function(e){var t;if(n(e)){t=e.constructor;(o(t)&&(t===l||n(t.prototype))||a(t)&&null===(t=t[s]))&&(t=void 0)}return void 0===t?l:t}},(e,t,r)=>{var i=r(14);e.exports=Array.isArray||function isArray(e){return"Array"==i(e)}},(e,t,r)=>{var i=r(7),n=r(6),o=r(79);e.exports=function(e,t,r){var a,s;o&&i(a=t.constructor)&&a!==r&&n(s=a.prototype)&&s!==r.prototype&&o(e,s);return e}},(e,t,r)=>{"use strict";var i=r(2),n=r(39),o=r(142),a=r(51),s=r(149),l=r(23),c=r(13),d=i.RangeError,h=i.Int8Array,u=h&&h.prototype,p=u&&u.set,g=o.aTypedArray,f=o.exportTypedArrayMethod,m=!c((function(){var e=new Uint8ClampedArray(2);n(p,e,{length:1,0:3},1);return 3!==e[1]})),v=m&&o.NATIVE_ARRAY_BUFFER_VIEWS&&c((function(){var e=new h(2);e.set(1);e.set("2",1);return 0!==e[0]||2!==e[1]}));f("set",(function set(e){g(this);var t=s(arguments.length>1?arguments[1]:void 0,1),r=l(e);if(m)return n(p,this,r,t);var i=this.length,o=a(r),c=0;if(o+t>i)throw d("Wrong length");for(;c<o;)this[t+c]=r[c++]}),!m||v)},(e,t,r)=>{"use strict";var i=r(2),n=r(11),o=r(13),a=r(43),s=r(138),l=r(142),c=r(159),d=r(160),h=r(26),u=r(161),p=i.Array,g=l.aTypedArray,f=l.exportTypedArrayMethod,m=i.Uint16Array,v=m&&n(m.prototype.sort),b=!(!v||o((function(){v(new m(2),null)}))&&o((function(){v(new m(2),{})}))),w=!!v&&!o((function(){if(h)return h<74;if(c)return c<67;if(d)return!0;if(u)return u<602;var e,t,r=new m(516),i=p(516);for(e=0;e<516;e++){t=e%4;r[e]=515-e;i[e]=e-2*t+3}v(r,(function(e,t){return(e/4|0)-(t/4|0)}));for(e=0;e<516;e++)if(r[e]!==i[e])return!0}));f("sort",(function sort(e){void 0!==e&&a(e);return w?v(this,e):s(g(this),function(e){return function(t,r){return void 0!==e?+e(t,r)||0:r!=r?-1:t!=t?1:0===t&&0===r?1/t>0&&1/r<0?1:-1:t>r}}(e))}),!w||b)},(e,t,r)=>{var i=r(27).match(/firefox\/(\d+)/i);e.exports=!!i&&+i[1]},(e,t,r)=>{var i=r(27);e.exports=/MSIE|Trident/.test(i)},(e,t,r)=>{var i=r(27).match(/AppleWebKit\/(\d+)\./);e.exports=!!i&&+i[1]},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.RendererType=t.ProgressBar=t.PresentationModeState=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.AutoPrintRegExp=void 0;t.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(e){let t=n.VERTICAL,r=o.NONE;switch(e){case"SinglePage":t=n.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=n.PAGE;case"TwoColumnLeft":r=o.ODD;break;case"TwoPageRight":t=n.PAGE;case"TwoColumnRight":r=o.EVEN}return{scrollMode:t,spreadMode:r}};t.apiPageModeToSidebarView=function apiPageModeToSidebarView(e){switch(e){case"UseNone":return i.NONE;case"UseThumbs":return i.THUMBS;case"UseOutlines":return i.OUTLINE;case"UseAttachments":return i.ATTACHMENTS;case"UseOC":return i.LAYERS}return i.NONE};t.approximateFraction=function approximateFraction(e){if(Math.floor(e)===e)return[e,1];const t=1/e;if(t>8)return[1,8];if(Math.floor(t)===t)return[1,t];const r=e>1?t:e;let i,n=0,o=1,a=1,s=1;for(;;){const e=n+a,t=o+s;if(t>8)break;if(r<=e/t){a=e;s=t}else{n=e;o=t}}i=r-n/o<a/s-r?r===e?[n,o]:[o,n]:r===e?[a,s]:[s,a];return i};t.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements;t.binarySearchFirstItem=binarySearchFirstItem;t.getActiveOrFocusedElement=function getActiveOrFocusedElement(){let e=document,t=e.activeElement||e.querySelector(":focus");for(;null!==(r=t)&&void 0!==r&&r.shadowRoot;){var r;e=t.shadowRoot;t=e.activeElement||e.querySelector(":focus")}return t};t.getOutputScale=function getOutputScale(e){const t=window.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.backingStorePixelRatio||1,i=t/r;return{sx:i,sy:i,scaled:1!==i}};t.getPageSizeInches=function getPageSizeInches(e){let{view:t,userUnit:r,rotate:i}=e;const[n,o,a,s]=t,l=i%180!=0,c=(a-n)/72*r,d=(s-o)/72*r;return{width:l?d:c,height:l?c:d}};t.getVisibleElements=function getVisibleElements(e){let{scrollEl:t,views:r,sortByVisibility:i=!1,horizontal:n=!1,rtl:o=!1}=e;const a=t.scrollTop,s=a+t.clientHeight,l=t.scrollLeft,c=l+t.clientWidth;const d=[],h=new Set,u=r.length;let p=binarySearchFirstItem(r,n?function isElementNextAfterViewHorizontally(e){const t=e.div,r=t.offsetLeft+t.clientLeft,i=r+t.clientWidth;return o?r<c:i>l}:function isElementBottomAfterViewTop(e){const t=e.div;return t.offsetTop+t.clientTop+t.clientHeight>a});p>0&&p<u&&!n&&(p=backtrackBeforeAllVisibleElements(p,r,a));let g=n?c:-1;for(let e=p;e<u;e++){const t=r[e],i=t.div,o=i.offsetLeft+i.clientLeft,u=i.offsetTop+i.clientTop,p=i.clientWidth,f=i.clientHeight,m=o+p,v=u+f;if(-1===g)v>=s&&(g=v);else if((n?o:u)>g)break;if(v<=a||u>=s||m<=l||o>=c)continue;const b=Math.max(0,a-u)+Math.max(0,v-s),w=Math.max(0,l-o)+Math.max(0,m-c),y=(p-w)/p,_=(f-b)/f*y*100|0;d.push({id:t.id,x:o,y:u,view:t,percent:_,widthPercent:100*y|0});h.add(t.id)}const f=d[0],m=d[d.length-1];i&&d.sort((function(e,t){const r=e.percent-t.percent;return Math.abs(r)>.001?-r:e.id-t.id}));return{first:f,last:m,views:d,ids:h}};t.isPortraitOrientation=function isPortraitOrientation(e){return e.width<=e.height};t.isValidRotation=function isValidRotation(e){return Number.isInteger(e)&&e%90==0};t.isValidScrollMode=function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(n).includes(e)&&e!==n.UNKNOWN};t.isValidSpreadMode=function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(o).includes(e)&&e!==o.UNKNOWN};t.noContextMenuHandler=function noContextMenuHandler(e){e.preventDefault()};t.normalizeWheelEventDelta=function normalizeWheelEventDelta(e){let t=normalizeWheelEventDirection(e);0===e.deltaMode?t/=900:1===e.deltaMode&&(t/=30);return t};t.normalizeWheelEventDirection=normalizeWheelEventDirection;t.parseQueryString=function parseQueryString(e){const t=new Map;for(const[r,i]of new URLSearchParams(e))t.set(r.toLowerCase(),i);return t};t.roundToDivide=function roundToDivide(e,t){const r=e%t;return 0===r?e:Math.round(e-r+t)};t.scrollIntoView=function scrollIntoView(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.classList.contains("stf__item")){Window.ngxConsole.log("don't scroll in book mode");return}let n=e.offsetParent;if(!n){Window.ngxConsole.error("offsetParent is not set -- cannot scroll");return}let o=e.offsetTop+e.clientTop,a=e.offsetLeft+e.clientLeft;for(;n.clientHeight===n.scrollHeight&&n.clientWidth===n.scrollWidth||r&&(n.classList.contains("markedContent")||"hidden"===getComputedStyle(n).overflow);){o+=n.offsetTop;a+=n.offsetLeft;n=n.offsetParent;if(!n){if(i&&document.body.clientHeight>o){o-=32;window.scrollTo(window.scrollX,o)}return}}if(t){void 0!==t.top&&(o+=t.top);if(void 0!==t.left){a+=t.left;n.scrollLeft=a}}n.scrollTop=o};t.watchScroll=function watchScroll(e,t){const debounceScroll=function(n){i||(i=window.requestAnimationFrame((function viewAreaElementScrolled(){i=null;const n=e.scrollLeft,o=r.lastX;n!==o&&(r.right=n>o);r.lastX=n;const a=e.scrollTop,s=r.lastY;a!==s&&(r.down=a>s);r.lastY=a;t(r)})))},r={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:debounceScroll};let i=null;e.addEventListener("scroll",debounceScroll,!0);return r};r(1);r(137);r(163);r(92);t.DEFAULT_SCALE_VALUE="auto";t.DEFAULT_SCALE=1;t.DEFAULT_SCALE_DELTA=1.1;t.MIN_SCALE=.1;t.MAX_SCALE=10;t.UNKNOWN_SCALE=0;t.MAX_AUTO_SCALE=1.25;t.SCROLLBAR_PADDING=40;t.VERTICAL_PADDING=5;t.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const i={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=i;t.RendererType={CANVAS:"canvas",SVG:"svg"};t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const n={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=n;const o={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=o;t.AutoPrintRegExp=/\bprint\s*\(/;function binarySearchFirstItem(e,t){let r=0,i=e.length-1;if(i<0||!t(e[i]))return e.length;if(t(e[r]))return r;for(;r<i;){const n=r+i>>1;t(e[n])?i=n:r=n+1}return r}function backtrackBeforeAllVisibleElements(e,t,r){if(e<2)return e;let i=t[e].div,n=i.offsetTop+i.clientTop;if(n>=r){i=t[e-1].div;n=i.offsetTop+i.clientTop}for(let r=e-2;r>=0;--r){i=t[r].div;if(i.offsetTop+i.clientTop+i.clientHeight<=n)break;e=r}return e}function normalizeWheelEventDirection(e){let t=Math.hypot(e.deltaX,e.deltaY);const r=Math.atan2(e.deltaY,e.deltaX);-.25*Math.PI<r&&r<.75*Math.PI&&(t=-t);return t}const a=new Promise((function(e){window.ngxZone.runOutsideAngular((()=>{window.requestAnimationFrame(e)}))}));t.animationStarted=a;t.ProgressBar=class ProgressBar{constructor(e){let{height:t,width:r,units:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.visible=!0;this.div=document.querySelector(e+" .progress");this.div&&(this.bar=this.div.parentNode);this.height=t||100;this.width=r||100;this.units=i||"%";this.div&&(this.div.style.height=this.height+this.units);this.percent=0}_updateBar(){if(this._indeterminate){this.div.classList.add("indeterminate");this.div.style.width=this.width+this.units;return}this.div&&this.div.classList.remove("indeterminate");const e=this.width*this._percent/100;this.div&&(this.div.style.width=e+this.units)}get percent(){return this._percent}set percent(e){this._indeterminate=isNaN(e);this._percent=function clamp(e,t,r){return Math.min(Math.max(e,t),r)}(e,0,100);this._updateBar()}setWidth(e){if(!e)return;const t=e.parentNode.offsetWidth-e.offsetWidth;if(t>0){document.documentElement.style.setProperty("--loadingBar-end-offset","".concat(t,"px"))}}hide(){if(this.visible){this.visible=!1;this.div=document.querySelector(".body #mainContainer .progress");if(this.div){this.bar=this.div.parentNode;this.bar.classList.add("hidden")}document.body.classList.remove("loadingInProgress")}}show(){if(!this.visible){this.visible=!0;this.bar.classList.remove("hidden")}}}},(e,t,r)=>{var i=r(64),n=Math.hypot,o=Math.abs,a=Math.sqrt;i({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function hypot(e,t){for(var r,i,n=0,s=0,l=arguments.length,c=0;s<l;)if(c<(r=o(arguments[s++]))){n=n*(i=c/r)*i+1;c=r}else n+=r>0?(i=r/c)*i:r;return c===1/0?1/0:c*a(n)}})},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0;t.waitOnEventOrTimeout=function waitOnEventOrTimeout(e){let{target:t,name:r,delay:n=0}=e;return new Promise((function(e,o){if("object"!=typeof t||!r||"string"!=typeof r||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){t instanceof EventBus?t._off(r,a):t.removeEventListener(r,a);l&&clearTimeout(l);e(i)}const a=handler.bind(null,i.EVENT);t instanceof EventBus?t._on(r,a):t.addEventListener(r,a);const s=handler.bind(null,i.TIMEOUT),l=setTimeout(s,n)}))};r(92);r(1);const i={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=i;class EventBus{constructor(){this._listeners=Object.create(null)}on(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(e,t,{external:!0,once:null==r?void 0:r.once})}off(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(e,t,{external:!0,once:null==r?void 0:r.once})}dispatch(e,t){const r=this._listeners[e];if(!r||0===r.length)return;let i;for(const{listener:n,external:o,once:a}of r.slice(0)){a&&this._off(e,n);o?(i||(i=[])).push(n):n(t)}if(i){for(const e of i)e(t);i=null}}_on(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;((r=this._listeners)[e]||(r[e]=[])).push({listener:t,external:!0===(null==i?void 0:i.external),once:!0===(null==i?void 0:i.once)})}_off(e,t){const r=this._listeners[e];if(r)for(let e=0,i=r.length;e<i;e++)if(r[e].listener===t){r.splice(e,1);return}}}t.EventBus=EventBus;t.AutomationEventBus=class AutomationEventBus extends EventBus{dispatch(e,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},e=>{"use strict";e.exports=window["pdfjs-dist/build/pdf"]},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFCursorTools=t.CursorTool=void 0;r(92);var i=r(167),n=r(162);const o={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=o;t.PDFCursorTools=class PDFCursorTools{constructor(e){let{container:t,eventBus:r,cursorToolOnLoad:n=o.SELECT}=e;this.container=t;this.eventBus=r;this.active=o.SELECT;this.activeBeforePresentationMode=null;this.handTool=new i.GrabToPan({element:this.container});this._addEventListeners();Promise.resolve().then((()=>{this.switchTool(n)}))}get activeTool(){return this.active}switchTool(e){if(null!==this.activeBeforePresentationMode)return;if(e===this.active)return;const disableActiveTool=()=>{switch(this.active){case o.SELECT:break;case o.HAND:this.handTool.deactivate();case o.ZOOM:}};switch(e){case o.SELECT:disableActiveTool();break;case o.HAND:disableActiveTool();this.handTool.activate();break;case o.ZOOM:default:Window.ngxConsole.error('switchTool: "'.concat(e,'" is an unsupported value.'));return}this.active=e;this._dispatchEvent()}_dispatchEvent(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}_addEventListeners(){this.eventBus._on("switchcursortool",(e=>{this.switchTool(e.tool)}));this.eventBus._on("presentationmodechanged",(e=>{switch(e.state){case n.PresentationModeState.FULLSCREEN:{const e=this.active;this.switchTool(o.SELECT);this.activeBeforePresentationMode=e;break}case n.PresentationModeState.NORMAL:{const e=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null;this.switchTool(e);break}}}))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GrabToPan=void 0;r(1);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}const i="grab-to-pan-grab";var n=new WeakSet,o=new WeakSet,a=new WeakSet;t.GrabToPan=class GrabToPan{constructor(e){_classPrivateMethodInitSpec(this,a);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,n);this.element=e.element;this.document=e.element.ownerDocument;"function"==typeof e.ignoreTarget&&(this.ignoreTarget=e.ignoreTarget);this.onActiveChanged=e.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=_classPrivateMethodGet(this,n,_onMouseDown2).bind(this);this._onMouseMove=_classPrivateMethodGet(this,o,_onMouseMove2).bind(this);this._endPan=_classPrivateMethodGet(this,a,_endPan2).bind(this);(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}activate(){if(!this.active){var e;this.active=!0;this.element.addEventListener("mousedown",this._onMouseDown,!0);this.element.classList.add(i);null===(e=this.onActiveChanged)||void 0===e||e.call(this,!0)}}deactivate(){if(this.active){var e;this.active=!1;this.element.removeEventListener("mousedown",this._onMouseDown,!0);this._endPan();this.element.classList.remove(i);null===(e=this.onActiveChanged)||void 0===e||e.call(this,!1)}}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(e){return!!document.querySelector(".stf__item")||e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}};function _onMouseDown2(e){if(0!==e.button||this.ignoreTarget(e.target))return;if(e.originalTarget)try{e.originalTarget.tagName}catch(e){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=e.clientX;this.clientYStart=e.clientY;if(isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-x"))return;if(isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-y"))return;this.document.addEventListener("mousemove",this._onMouseMove,!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);e.preventDefault();e.stopPropagation();const t=document.activeElement;t&&!t.contains(e.target)&&t.blur()}function _onMouseMove2(e){this.element.removeEventListener("scroll",this._endPan,!0);if(!(1&e.buttons)){this._endPan();return}const t=e.clientX-this.clientXStart,r=e.clientY-this.clientYStart,i=this.scrollTopStart-r,n=this.scrollLeftStart-t;if(this.element.scrollTo)this.element.scrollTo({top:i,left:n,behavior:"instant"});else{this.element.scrollTop=i;this.element.scrollLeft=n}this.overlay.parentNode||document.body.appendChild(this.overlay)}function _endPan2(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onMouseMove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.remove()}function isOverPerfectScrollbar(e,t,r){const i=document.getElementsByClassName(r);if(i&&1===i.length){var{top:n,right:o,bottom:a,left:s}=i[0].getBoundingClientRect();if(t>=n&&t<=a&&e<=o&&e>=s)return!0}return!1}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OverlayManager=void 0;r(92);t.OverlayManager=class OverlayManager{constructor(){this._overlays={};this._active=null;this._keyDownBound=this._keyDown.bind(this)}get active(){return this._active}async register(e,t){let r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!(e&&t&&(r=t.parentNode)))throw new Error("Not enough parameters.");if(this._overlays[e])throw new Error("The overlay is already registered.");this._overlays[e]={element:t,container:r,callerCloseMethod:i,canForceClose:n}}async unregister(e){if(!this._overlays[e])throw new Error("The overlay does not exist.");if(this._active===e)throw new Error("The overlay cannot be removed while it is active.");delete this._overlays[e]}async open(e){if(!this._overlays[e])throw new Error("The overlay does not exist.");if(this._active){if(!this._overlays[e].canForceClose)throw this._active===e?new Error("The overlay is already active."):new Error("Another overlay is currently active.");this._closeThroughCaller()}this._active=e;this._overlays[this._active].element.classList.remove("hidden");this._overlays[this._active].container.classList.remove("hidden");window.addEventListener("keydown",this._keyDownBound)}async close(e){if(!this._overlays[e])throw new Error("The overlay does not exist.");if(!this._active)throw new Error("The overlay is currently not active.");if(this._active!==e)throw new Error("Another overlay is currently active.");this._overlays[this._active].container.classList.add("hidden");this._overlays[this._active].element.classList.add("hidden");this._active=null;window.removeEventListener("keydown",this._keyDownBound)}_keyDown(e){if(this._active&&27===e.keyCode){this._closeThroughCaller();e.preventDefault()}}_closeThroughCaller(){this._overlays[this._active].callerCloseMethod&&this._overlays[this._active].callerCloseMethod();this._active&&this.close(this._active)}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PasswordPrompt=void 0;r(92);var i=r(165);t.PasswordPrompt=class PasswordPrompt{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.overlayName=e.overlayName;this.container=e.container;this.label=e.label;this.input=e.input;this.submitButton=e.submitButton;this.cancelButton=e.cancelButton;this.overlayManager=t;this.l10n=r;this._isViewerEmbedded=i;this.updateCallback=null;this.reason=null;this.submitButton.addEventListener("click",this.verify.bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",(e=>{13===e.keyCode&&this.verify()}));this.overlayManager.register(this.overlayName,this.container,this.close.bind(this),!0)}async open(){await this.overlayManager.open(this.overlayName);this.input.type="password";this.input.focus();const e=this.reason===i.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!e||this.input.focus();this.label.textContent=await this.l10n.get("password_".concat(e?"invalid":"label"))}close(){this.overlayManager.close(this.overlayName).then((()=>{this.input.type="";this.input.value=""}))}verify(){const e=this.input.value;if((null==e?void 0:e.length)>0){this.close();this.updateCallback(e)}}setUpdateCallback(e,t){this.updateCallback=e;this.reason=t}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFAttachmentViewer=void 0;r(1);var i=r(165),n=r(171);class PDFAttachmentViewer extends n.BaseTreeViewer{constructor(e){super(e);this.downloadManager=e.downloadManager;this.eventBus._on("fileattachmentannotation",this._appendAttachment.bind(this))}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.reset();this._attachments=null;e||(this._renderedCapability=(0,i.createPromiseCapability)());this._pendingDispatchEvent&&clearTimeout(this._pendingDispatchEvent);this._pendingDispatchEvent=null}_dispatchEvent(e){this._renderedCapability.resolve();if(this._pendingDispatchEvent){clearTimeout(this._pendingDispatchEvent);this._pendingDispatchEvent=null}0!==e?this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e}):this._pendingDispatchEvent=setTimeout((()=>{this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:0});this._pendingDispatchEvent=null}))}_bindLink(e,t){let{content:r,filename:i}=t;e.onclick=()=>{this.downloadManager.openOrDownloadData(e,r,i);return!1}}render(e){let{attachments:t,keepRenderedCapability:r=!1}=e;this._attachments&&this.reset(r);this._attachments=t||null;if(!t){this._dispatchEvent(0);return}const n=Object.keys(t).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})),o=document.createDocumentFragment();let a=0;for(const e of n){const r=t[e],n=r.content,s=(0,i.getFilenameFromUrl)(r.filename),l=document.createElement("div");l.className="treeItem";const c=document.createElement("a");this._bindLink(c,{content:n,filename:s});c.textContent=this._normalizeTextContent(s);l.appendChild(c);o.appendChild(l);a++}this._finishRendering(o,a)}_appendAttachment(e){let{id:t,filename:r,content:i}=e;const n=this._renderedCapability.promise;n.then((()=>{if(n!==this._renderedCapability.promise)return;let e=this._attachments;if(e){for(const r in e)if(t===r)return}else e=Object.create(null);e[t]={filename:r,content:i};this.render({attachments:e,keepRenderedCapability:!0})}))}}t.PDFAttachmentViewer=PDFAttachmentViewer},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseTreeViewer=void 0;r(1);var i=r(165);const n="selected";class BaseTreeViewer{constructor(e){if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=e.container;this.eventBus=e.eventBus;this.reset()}reset(){this._pdfDocument=null;this._lastToggleIsShow=!0;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,t){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,i.removeNullCharacters)(e,!0)||"â"}_addToggleButton(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=document.createElement("div");r.className="treeItemToggler";t&&r.classList.add("treeItemsHidden");r.onclick=t=>{t.stopPropagation();r.classList.toggle("treeItemsHidden");if(t.shiftKey){const t=!r.classList.contains("treeItemsHidden");this._toggleTreeItem(e,t)}};e.insertBefore(r,e.firstChild)}_toggleTreeItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._lastToggleIsShow=t;for(const r of e.querySelectorAll(".treeItemToggler"))r.classList.toggle("treeItemsHidden",!t)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")}this.container.appendChild(e);this._dispatchEvent(t)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._currentTreeItem){this._currentTreeItem.classList.remove(n);this._currentTreeItem=null}if(e){e.classList.add(n);this._currentTreeItem=e}}_scrollToCurrentTreeItem(e){if(!e)return;let t=e.parentNode;for(;t&&t!==this.container;){if(t.classList.contains("treeItem")){const e=t.firstElementChild;null==e||e.classList.remove("treeItemsHidden")}t=t.parentNode}this._updateCurrentTreeItem(e);this.container.scrollTo(e.offsetLeft,e.offsetTop+-100)}}t.BaseTreeViewer=BaseTreeViewer},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFDocumentProperties=void 0;r(92);r(1);var i=r(165),n=r(162);const o=["en-us","en-lr","my"],a={"8.5x11":"Letter","8.5x14":"Legal"},s={"297x420":"A3","210x297":"A4"};function getPageName(e,t,r){const i=t?e.width:e.height,n=t?e.height:e.width;return r["".concat(i,"x").concat(n)]}t.PDFDocumentProperties=class PDFDocumentProperties{constructor(e,t,r,i){let{overlayName:n,fields:a,container:s,closeButton:l}=e;this.overlayName=n;this.fields=a;this.container=s;this.overlayManager=t;this.l10n=i;this._reset();l.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.overlayName,this.container,this.close.bind(this));r._on("pagechanging",(e=>{this._currentPageNumber=e.pageNumber}));r._on("rotationchanging",(e=>{this._pagesRotation=e.pagesRotation}));this._isNonMetricLocale=!0;i.getLanguage().then((e=>{this._isNonMetricLocale=o.includes(e)}))}async open(){const freezeFieldData=e=>{Object.defineProperty(this,"fieldData",{value:Object.freeze(e),writable:!1,enumerable:!0,configurable:!0})};await Promise.all([this.overlayManager.open(this.overlayName),this._dataAvailableCapability.promise]);const e=this._currentPageNumber,t=this._pagesRotation;if(this.fieldData&&e===this.fieldData._currentPageNumber&&t===this.fieldData._pagesRotation){this._updateUI();return}const{info:r,contentDispositionFilename:o,contentLength:a}=await this.pdfDocument.getMetadata(),[s,l,c,d,h,u]=await Promise.all([o||(0,i.getPdfFilenameFromUrl)(this.url),this._parseFileSize(a),this._parseDate(r.CreationDate),this._parseDate(r.ModDate),this.pdfDocument.getPage(e).then((e=>this._parsePageSize((0,n.getPageSizeInches)(e),t))),this._parseLinearization(r.IsLinearized)]);freezeFieldData({fileName:s,fileSize:l,title:r.Title,author:r.Author,subject:r.Subject,keywords:r.Keywords,creationDate:c,modificationDate:d,creator:r.Creator,producer:r.Producer,version:r.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:h,linearized:u,_currentPageNumber:e,_pagesRotation:t});this._updateUI();const{length:p}=await this.pdfDocument.getDownloadInfo();if(a===p)return;const g=Object.assign(Object.create(null),this.fieldData);g.fileSize=await this._parseFileSize(p);freezeFieldData(g);this._updateUI()}close(){this.overlayManager.close(this.overlayName)}setDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.pdfDocument){this._reset();this._updateUI(!0)}if(e){this.pdfDocument=e;this.url=t;this._dataAvailableCapability.resolve()}}_reset(){this.pdfDocument=null;this.url=null;delete this.fieldData;this._dataAvailableCapability=(0,i.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}_updateUI(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.fieldData){if(this.overlayManager.active===this.overlayName)for(const e in this.fields){const t=this.fieldData[e];this.fields[e].textContent=t||0===t?t:"-"}}else for(const e in this.fields)this.fields[e].textContent="-"}async _parseFileSize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=e/1024,r=t/1024;if(t)return this.l10n.get("document_properties_".concat(r>=1?"mb":"kb"),{size_mb:r>=1&&(+r.toPrecision(3)).toLocaleString(),size_kb:r<1&&(+t.toPrecision(3)).toLocaleString(),size_b:e.toLocaleString()})}async _parsePageSize(e,t){if(!e)return;t%180!=0&&(e={width:e.height,height:e.width});const r=(0,n.isPortraitOrientation)(e);let i={width:Math.round(100*e.width)/100,height:Math.round(100*e.height)/100},o={width:Math.round(25.4*e.width*10)/10,height:Math.round(25.4*e.height*10)/10},l=getPageName(i,r,a)||getPageName(o,r,s);if(!(l||Number.isInteger(o.width)&&Number.isInteger(o.height))){const t={width:25.4*e.width,height:25.4*e.height},n={width:Math.round(o.width),height:Math.round(o.height)};if(Math.abs(t.width-n.width)<.1&&Math.abs(t.height-n.height)<.1){l=getPageName(n,r,s);if(l){i={width:Math.round(n.width/25.4*100)/100,height:Math.round(n.height/25.4*100)/100};o=n}}}const[{width:c,height:d},h,u,p]=await Promise.all([this._isNonMetricLocale?i:o,this.l10n.get("document_properties_page_size_unit_".concat(this._isNonMetricLocale?"inches":"millimeters")),l&&this.l10n.get("document_properties_page_size_name_".concat(l.toLowerCase())),this.l10n.get("document_properties_page_size_orientation_".concat(r?"portrait":"landscape"))]);return this.l10n.get("document_properties_page_size_dimension_".concat(u?"name_":"","string"),{width:c.toLocaleString(),height:d.toLocaleString(),unit:h,name:u,orientation:p})}async _parseDate(e){const t=i.PDFDateString.toDateObject(e);if(t)return this.l10n.get("document_properties_date_string",{date:t.toLocaleDateString(),time:t.toLocaleTimeString()})}_parseLinearization(e){return this.l10n.get("document_properties_linearized_".concat(e?"yes":"no"))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFFindBar=void 0;r(92);var i=r(174);t.PDFFindBar=class PDFFindBar{constructor(e,t,r){this.opened=!1;this.bar=e.bar;this.toggleButton=e.toggleButton;this.findField=e.findField;this.highlightAll=e.highlightAllCheckbox;this.currentPage=e.findCurrentPageCheckbox;this.pageRange=e.findPageRangeField;this.caseSensitive=e.caseSensitiveCheckbox;this.entireWord=e.entireWordCheckbox;this.findMsg=e.findMsg;this.findResultsCount=e.findResultsCount;this.findPreviousButton=e.findPreviousButton;this.findNextButton=e.findNextButton;this.findFieldMultiline=e.findFieldMultiline||null;this.multipleSearchTexts=e.findMultipleSearchTextsCheckbox||null;this.ignoreAccents=e.ignoreAccentsCheckbox||null;this.fuzzySearch=e.fuzzyCheckbox||null;this.eventBus=t;this.l10n=r;this.toggleButton.addEventListener("click",(()=>{this.toggle()}));this.findFieldMultiline.addEventListener("input",(()=>{this.dispatchEvent("")}));this.findField.addEventListener("input",(()=>{this.dispatchEvent("")}));this.bar.addEventListener("keydown",(e=>{switch(e.keyCode){case 13:e.target===this.findField&&this.dispatchEvent("again",e.shiftKey);break;case 27:this.close()}}));this.findPreviousButton.addEventListener("click",(()=>{this.dispatchEvent("again",!0)}));this.findNextButton.addEventListener("click",(()=>{this.dispatchEvent("again",!1)}));this.highlightAll.addEventListener("click",(()=>{this.dispatchEvent("highlightallchange")}));this.caseSensitive.addEventListener("click",(()=>{this.dispatchEvent("casesensitivitychange")}));this.entireWord.addEventListener("click",(()=>{this.dispatchEvent("entirewordchange")}));this.multipleSearchTexts.addEventListener("click",(()=>{this.dispatchEvent("multiplesearchtextschange")}));this.ignoreAccents.addEventListener("click",(()=>{this.dispatchEvent("ignoreAccentsChange")}));this.fuzzySearch.addEventListener("click",(()=>{this.dispatchEvent("fuzzySearchChange")}));this.currentPage.addEventListener("click",(()=>{this.dispatchEvent("currentPageChange")}));this.pageRange.addEventListener("input",(()=>{this.dispatchEvent("pageRangeChange")}));this.eventBus._on("resize",this._adjustWidth.bind(this))}reset(){this.updateUIState()}dispatchEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eventBus.dispatch("find",{source:this,type:e,query:this.findFieldMultiline.classList.contains("hidden")?this.findField.value:this.findFieldMultiline.value,phraseSearch:!this.multipleSearchTexts.checked,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,ignoreAccents:this.ignoreAccents.checked,fuzzySearch:this.fuzzySearch.checked,highlightAll:this.highlightAll.checked,currentPage:this.currentPage.checked,pageRange:this.pageRange.value,findPrevious:t})}updateUIState(e,t,r){let n=Promise.resolve(""),o="";switch(e){case i.FindState.FOUND:break;case i.FindState.PENDING:o="pending";break;case i.FindState.NOT_FOUND:n=this.l10n.get("find_not_found");o="notFound";break;case i.FindState.WRAPPED:n=this.l10n.get("find_reached_".concat(t?"top":"bottom"))}this.findField.setAttribute("data-status",o);this.findFieldMultiline.classList.toggle("notFound","notFound"===o);this.findFieldMultiline.setAttribute("data-status",o);n.then((e=>{this.findMsg.textContent=e;this._adjustWidth()}));this.updateResultsCount(r)}updateResultsCount(){let{current:e=0,total:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let r=Promise.resolve("");if(t>0)if(t>1e3){let e="find_match_count_limit";r=this.l10n.get(e,{limit:1e3})}else{let i="find_match_count";r=this.l10n.get(i,{current:e,total:t})}r.then((e=>{this.findResultsCount.textContent=e;this.findResultsCount.classList.toggle("hidden",!t);this._adjustWidth()}))}open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this.dispatchEvent("");this._adjustWidth()}close(){if(this.opened){this.opened=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}}toggle(){this.opened?this.close():this.open()}_adjustWidth(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers")}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFFindController=t.FindState=void 0;r(175);r(82);r(122);r(1);r(92);var i=r(165),n=r(177),o=r(178),a=r(179),s=r(162);const l={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=l;const c={"â":"-","â":"'","â":"'","â":"'","â":"'","â":'"',"â":'"',"â":'"',"â":'"',"Â¼":"1/4","Â½":"1/2","Â¾":"3/4"};let d=null;function normalize(e){if(!d){const e=Object.keys(c).join("");d=new RegExp("[".concat(e,"]"),"g")}let t=null;return[e.replace(d,(function(e,r){const i=c[e],n=i.length-e.length;0!==n&&(t||(t=[])).push([r,n]);return i})),t]}function getOriginalIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return e;let r=0;for(const[i,n]of t){const t=i+r;if(t>=e)break;if(t+n>e){r+=e-t;break}r+=n}return e-r}t.PDFFindController=class PDFFindController{constructor(e){let{linkService:t,eventBus:r,pageViewMode:i}=e;this._linkService=t;this._eventBus=r;this._pageViewMode=i;this._reset();r._on("find",this._onFind.bind(this));r._on("findbarclose",this._onFindBarClose.bind(this));this.executeCommand=(e,t)=>{Window.ngxConsole.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');const r=Object.assign(Object.create(null),t,{type:e.substring("find".length)});this._onFind(r)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesColor(){return this._pageMatchesColor}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(e){this._pdfDocument&&this._reset();if(e){this._pdfDocument=e;this._firstPageCapability.resolve()}}_onFind(e){if(!e)return;const t=this._pdfDocument,{type:r}=e;(null===this._state||this._shouldDirtyMatch(e))&&(this._dirtyMatch=!0);this._state=e;"highlightallchange"!==r&&this._updateUIState(l.PENDING);this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this._extractText();const e=!this._highlightMatches,i=!!this._findTimeout;if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(r)if(this._dirtyMatch)this._nextMatch();else if("again"===r){this._nextMatch();e&&this._state.highlightAll&&this._updateAllPages()}else if("highlightallchange"===r){i?this._nextMatch():this._highlightMatches=!0;this._updateAllPages()}else this._nextMatch();else this._findTimeout=setTimeout((()=>{this._nextMatch();this._findTimeout=null}),250)}))}scrollMatchIntoView(e){let{element:t=null,selectedLeft:r=0,pageIndex:i=-1,matchIndex:n=-1}=e;if(!this._scrollMatches||!t)return;if(-1===n||n!==this._selected.matchIdx)return;if(-1===i||i!==this._selected.pageIdx)return;this._scrollMatches=!1;const o={top:-50,left:r+-400};(0,s.scrollIntoView)(t,o,!0,"infinite-scroll"===this._pageViewMode)}_reset(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._pageMatchesColor=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,i.createPromiseCapability)()}get _query(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;[this._normalizedQuery]=normalize(this._state.query)}return this._normalizedQuery}_shouldDirtyMatch(e){if(e.query!==this._state.query)return!0;switch(e.type){case"again":const e=this._selected.pageIdx+1,t=this._linkService;return e>=1&&e<=t.pagesCount&&e!==t.page&&!t.isPageVisible(e);case"highlightallchange":return!1}return!0}_prepareMatches(e,t,r,i){function isSubTerm(t){const r=e[t],i=e[t+1];if(t<e.length-1&&r.match===i.match){r.skipped=!0;return!0}for(let i=t-1;i>=0;i--){const t=e[i];if(!t.skipped){if(t.match+t.matchLength<r.match)break;if(t.match+t.matchLength>=r.match+r.matchLength){r.skipped=!0;return!0}}}return!1}e.sort((function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match}));for(let n=0,o=e.length;n<o;n++)if(!isSubTerm(n)){t.push(e[n].match);r.push(e[n].matchLength);i.push(e[n].color)}}_isEntireWord(e,t,r){if(t>0){const r=e.charCodeAt(t),i=e.charCodeAt(t-1);if((0,o.getCharacterType)(r)===(0,o.getCharacterType)(i))return!1}const i=t+r-1;if(i<e.length-1){const t=e.charCodeAt(i),r=e.charCodeAt(i+1);if((0,o.getCharacterType)(t)===(0,o.getCharacterType)(r))return!1}return!0}_calculateFuzzyMatch(e,t,r,i){const n=[],o=[],s=e.length,l=s<5?s:5,c=Math.round(s/5),d=e.substring(0,l),h={useCollator:!0};for(let t=0;t<r.length-s;t++){const u=r.substring(t,t+l);if(a.Levenshtein.distance(d,u,h)<3){const l=r.substring(t,t+s),d=a.Levenshtein.distance(e,l,h);if(d<=c){if(t+1<r.length-s){const i=r.substring(t+1,t+1+s);if(d>=a.Levenshtein.distance(e,i,h))continue}const l=getOriginalIndex(t,i),c=getOriginalIndex(t+s-1,i)-l+1;n.push(l);o.push(c);t+=s-1}}}this._pageMatches[t]=n;this._pageMatchesLength[t]=o}_calculatePhraseMatch(e,t,r,i,o,a){if(a){r=(0,n.deburr)(r);e=(0,n.deburr)(e)}const s=[],l=[],c=e.length;let d=-c;for(;;){d=r.indexOf(e,d+c);if(-1===d)break;if(o&&!this._isEntireWord(r,d,c))continue;const t=getOriginalIndex(d,i),n=getOriginalIndex(d+c-1,i)-t+1;s.push(t);l.push(n)}this._pageMatches[t]=s;this._pageMatchesLength[t]=l}_calculateWordMatch(e,t,r,i,o,a){if(a){r=(0,n.deburr)(r);e=(0,n.deburr)(e)}const s=[],l=e.includes("\n")?e.trim().split(/\n+/g):e.trim().match(/\S+/g);for(let e=0,t=l.length;e<t;e++){const t=l[e],n=t.length;if(0===n)continue;let a=-n;for(;;){a=r.indexOf(t,a+n);if(-1===a)break;if(o&&!this._isEntireWord(r,a,n))continue;const l=getOriginalIndex(a,i),c=getOriginalIndex(a+n-1,i)-l+1;s.push({match:l,matchLength:c,skipped:!1,color:e})}}this._pageMatchesLength[t]=[];this._pageMatchesColor[t]=[];this._pageMatches[t]=[];this._prepareMatches(s,this._pageMatches[t],this._pageMatchesLength[t],this._pageMatchesColor[t])}_isInPageRanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1,3,6-7";try{if(!t)return!0;return t.split(",").some((t=>this._isInPageRange(e,t)))}catch(e){return!0}}_isInPageRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"6-7";try{if(!t)return!0;if(t.includes("-")){const r=t.split("-"),i=r[0].trim();if(i.length>0&&e<Number(i))return!1;const n=r[1].trim();if(n.length>0&&e>Number(n))return!1}else{const r=t.trim();if(r.length>0)return Number(r)===e}return!0}catch(e){return!0}}_calculateMatch(e){if(!this.state)return;let t=this._pageContents[e];const r=this._pageDiffs[e];let i=this._query;const{caseSensitive:n,entireWord:o,ignoreAccents:a,fuzzySearch:s,phraseSearch:l,currentPage:c,pageRange:d}=this._state;let h=!1;if(c&&e!==this._linkService.page-1){h=!0;this._pageMatches[e]=[]}if(!this._isInPageRanges(e+1,d)){h=!0;this._pageMatches[e]=[]}if(0===i.length)return;if(!h){if(!n){t=t.toLowerCase();i=i.toLowerCase()}s?i.length<=2?this._calculatePhraseMatch(i,e,t,r,!1):this._calculateFuzzyMatch(i,e,t,r):l?this._calculatePhraseMatch(i,e,t,r,o,a):this._calculateWordMatch(i,e,t,r,o,a)}this._state.highlightAll&&this._updatePage(e);if(this._resumePageIdx===e){this._resumePageIdx=null;this._nextPageMatch()}const u=this._pageMatches[e].length;if(u>0){this._matchesCountTotal+=u;this._updateUIResultsCount()}else e+1===this._pageContents.length&&0===this._matchesCountTotal&&this._updateUIResultsCount()}_extractText(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();for(let t=0,r=this._linkService.pagesCount;t<r;t++){const r=(0,i.createPromiseCapability)();this._extractTextPromises[t]=r.promise;e=e.then((()=>this._pdfDocument&&this._extractTextPromises.length>0?this._pdfDocument.getPage(t+1).then((e=>e.getTextContent({normalizeWhitespace:!0}))).then((e=>{const i=e.items,n=[];for(let e=0,t=i.length;e<t;e++)n.push(i[e].str);[this._pageContents[t],this._pageDiffs[t]]=normalize(n.join(""));r.resolve(t)}),(e=>{Window.ngxConsole.error("Unable to get text content for page ".concat(t+1),e);this._pageContents[t]="";this._pageDiffs[t]=null;r.resolve(t)})):Promise.resolve()))}}_updatePage(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const e=this._state.findPrevious,t=this._linkService.page-1,r=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=t;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._pageMatchesColor.length=0;this._matchesCountTotal=0;this._updateAllPages();const{currentPage:e}=this.state;let i=0,n=r-1;if(e){i=this._linkService.page-1;n=i}for(let e=i;e<=n;e++)if(!this._pendingFindMatches.has(e)){this._pendingFindMatches.add(e);this._extractTextPromises[e].then((e=>{this._pendingFindMatches.delete(e);this._calculateMatch(e)}))}}if(""===this._query){this._updateUIState(l.FOUND);return}if(this._resumePageIdx)return;const i=this._offset;this._pagesToSearch=r;if(null!==i.matchIdx){const t=this._pageMatches[i.pageIdx].length;if(!e&&i.matchIdx+1<t||e&&i.matchIdx>0){i.matchIdx=e?i.matchIdx-1:i.matchIdx+1;this._updateMatch(!0);return}this._advanceOffsetPage(e)}this._nextPageMatch()}_matchesReady(e){const t=this._offset,r=e.length,i=this._state.findPrevious;if(r){t.matchIdx=i?r-1:0;this._updateMatch(!0);return!0}this._advanceOffsetPage(i);if(t.wrapped){t.matchIdx=null;if(this._pagesToSearch<0){this._updateMatch(!1);return!0}}return!1}_nextPageMatch(){null!==this._resumePageIdx&&Window.ngxConsole.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;e=this._pageMatches[t];if(!e){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}_advanceOffsetPage(e){const t=this._offset,r=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1;t.matchIdx=null;this._pagesToSearch--;if(t.pageIdx>=r||t.pageIdx<0){t.pageIdx=e?r-1:0;t.wrapped=!0}}_updateMatch(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l.NOT_FOUND;const r=this._offset.wrapped;this._offset.wrapped=!1;if(e){const e=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;t=r?l.WRAPPED:l.FOUND;-1!==e&&e!==this._selected.pageIdx&&this._updatePage(e)}this._updateUIState(t,this._state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;this._updatePage(this._selected.pageIdx)}}_onFindBarClose(e){const t=this._pdfDocument;this._firstPageCapability.promise.then((()=>{if(this._pdfDocument&&(!t||this._pdfDocument===t)){if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(this._resumePageIdx){this._resumePageIdx=null;this._dirtyMatch=!0}this._updateUIState(l.FOUND);this._highlightMatches=!1;this._updateAllPages()}}))}_requestMatchesCount(){const{pageIdx:e,matchIdx:t}=this._selected;let r=0,i=this._matchesCountTotal;if(-1!==t){for(let t=0;t<e;t++){var n;r+=(null===(n=this._pageMatches[t])||void 0===n?void 0:n.length)||0}r+=t+1}(r<1||r>i)&&(r=i=0);return{current:r,total:i}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:i,matchesCount:this._requestMatchesCount(),rawQuery:null!==(t=null===(r=this._state)||void 0===r?void 0:r.query)&&void 0!==t?t:null})}}},(e,t,r)=>{var i=r(33),n=r(2),o=r(11),a=r(73),s=r(156),l=r(61),c=r(35).f,d=r(71).f,h=r(41),u=r(176),p=r(84),g=r(87),f=r(88),m=r(67),v=r(13),b=r(22),w=r(58).enforce,y=r(95),_=r(17),S=r(89),P=r(90),C=_("match"),R=n.RegExp,E=R.prototype,x=n.SyntaxError,T=o(g),I=o(E.exec),L=o("".charAt),A=o("".replace),D=o("".indexOf),B=o("".slice),M=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,O=/a/g,k=/a/g,N=new R(O)!==O,V=f.MISSED_STICKY,W=f.UNSUPPORTED_Y,U=i&&(!N||V||S||P||v((function(){k[C]=!1;return R(O)!=O||R(k)==k||"/a/i"!=R(O,"i")})));if(a("RegExp",U)){for(var j=function RegExp(e,t){var r,i,n,o,a,c,d=h(E,this),g=u(e),f=void 0===t,m=[],v=e;if(!d&&g&&f&&e.constructor===j)return e;if(g||h(E,e)){e=e.source;f&&(t="flags"in v?v.flags:T(v))}e=void 0===e?"":p(e);t=void 0===t?"":p(t);v=e;S&&"dotAll"in O&&(i=!!t&&D(t,"s")>-1)&&(t=A(t,/s/g,""));r=t;V&&"sticky"in O&&(n=!!t&&D(t,"y")>-1)&&W&&(t=A(t,/y/g,""));if(P){o=function(e){for(var t,r=e.length,i=0,n="",o=[],a={},s=!1,l=!1,c=0,d="";i<=r;i++){if("\\"===(t=L(e,i)))t+=L(e,++i);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:if(I(M,B(e,i+1))){i+=2;l=!0}n+=t;c++;continue;case">"===t&&l:if(""===d||b(a,d))throw new x("Invalid capture group name");a[d]=!0;o[o.length]=[d,c];l=!1;d="";continue}l?d+=t:n+=t}return[n,o]}(e);e=o[0];m=o[1]}a=s(R(e,t),d?this:E,j);if(i||n||m.length){c=w(a);if(i){c.dotAll=!0;c.raw=j(function(e){for(var t,r=e.length,i=0,n="",o=!1;i<=r;i++)if("\\"!==(t=L(e,i)))if(o||"."!==t){"["===t?o=!0:"]"===t&&(o=!1);n+=t}else n+="[\\s\\S]";else n+=t+L(e,++i);return n}(e),r)}n&&(c.sticky=!0);m.length&&(c.groups=m)}if(e!==v)try{l(a,"source",""===v?"(?:)":v)}catch(e){}return a},proxy=function(e){e in j||c(j,e,{configurable:!0,get:function(){return R[e]},set:function(t){R[e]=t}})},z=d(R),H=0;z.length>H;)proxy(z[H++]);E.constructor=j;j.prototype=E;m(n,"RegExp",j)}y("RegExp")},(e,t,r)=>{var i=r(6),n=r(14),o=r(17)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==n(e))}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.deburr=function deburr(e){return(e=function toString(e){return null==e?"":function baseToString(e){if("string"==typeof e)return e;if(function isSymbol(e){return"symbol"==typeof e||function isObjectLike(e){return!!e&&"object"==typeof e}(e)&&d.call(e)==i}(e))return p?p.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e))&&e.replace(n,c).replace(o,"")};r(175);r(82);r(122);var i="[object Symbol]",n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),a="object"==typeof global&&global&&global.Object===Object&&global,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")();var c=function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}({"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss","Ä":"A","Ä":"A","Ä":"A","Ä":"a","Ä":"a","Ä":"a","Ä":"C","Ä":"C","Ä":"C","Ä":"C","Ä":"c","Ä":"c","Ä":"c","Ä":"c","Ä":"D","Ä":"D","Ä":"d","Ä":"d","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"E","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"e","Ä":"G","Ä":"G","Ä ":"G","Ä¢":"G","Ä":"g","Ä":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å":"l","Å":"l","Å":"N","Å":"N","Å":"N","Å":"N","Å":"n","Å":"n","Å":"n","Å":"n","Å":"O","Å":"O","Å":"O","Å":"o","Å":"o","Å":"o","Å":"R","Å":"R","Å":"R","Å":"r","Å":"r","Å":"r","Å":"S","Å":"S","Å":"S","Å ":"S","Å":"s","Å":"s","Å":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å":"Oe","Å":"oe","Å":"'n","Å¿":"ss"}),d=Object.prototype.toString,h=l.Symbol,u=h?h.prototype:void 0,p=u?u.toString:void 0},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CharacterType=void 0;t.getCharacterType=function getCharacterType(e){if(function isAlphabeticalScript(e){return e<11904}(e))return function isAscii(e){return 0==(65408&e)}(e)?function isAsciiSpace(e){return 32===e||9===e||13===e||10===e}(e)?r.SPACE:function isAsciiAlpha(e){return e>=97&&e<=122||e>=65&&e<=90}(e)||function isAsciiDigit(e){return e>=48&&e<=57}(e)||95===e?r.ALPHA_LETTER:r.PUNCT:function isThai(e){return 3584==(65408&e)}(e)?r.THAI_LETTER:160===e?r.SPACE:r.ALPHA_LETTER;if(function isHan(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}(e))return r.HAN_LETTER;if(function isKatakana(e){return e>=12448&&e<=12543}(e))return r.KATAKANA_LETTER;if(function isHiragana(e){return e>=12352&&e<=12447}(e))return r.HIRAGANA_LETTER;if(function isHalfwidthKatakana(e){return e>=65376&&e<=65439}(e))return r.HALFWIDTH_KATAKANA_LETTER;return r.ALPHA_LETTER};const r={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=r},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Levenshtein=void 0;let r;try{r=Intl.Collator("und",{sensitivity:"base"})}catch(e){try{r=Intl.Collator("generic",{sensitivity:"base"})}catch(e){r=void 0}}const i=[],n=[];t.Levenshtein=class Levenshtein{static distance(e,t,o){const a=o&&r&&o.useCollator,s=e.length,l=t.length;if(0===s)return l;if(0===l)return s;let c,d,h,u,p,g;for(h=0;h<l;++h){i[h]=h;n[h]=t.charCodeAt(h)}i[l]=l;if(a)for(h=0;h<s;++h){d=h+1;for(u=0;u<l;++u){c=d;g=0===r.compare(e.charAt(h),String.fromCharCode(n[u]));d=i[u]+(g?0:1);p=c+1;d>p&&(d=p);p=i[u+1]+1;d>p&&(d=p);i[u]=c}i[u]=d}else for(h=0;h<s;++h){d=h+1;for(u=0;u<l;++u){c=d;g=e.charCodeAt(h)===n[u];d=i[u]+(g?0:1);p=c+1;d>p&&(d=p);p=i[u+1]+1;d>p&&(d=p);i[u]=c}i[u]=d}return d}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFHistory=void 0;t.isDestArraysEqual=isDestArraysEqual;t.isDestHashesEqual=isDestHashesEqual;r(92);r(82);r(1);var i=r(162),n=r(164);function getCurrentHash(){return document.location.hash}t.PDFHistory=class PDFHistory{constructor(e){let{linkService:t,eventBus:r}=e;this.linkService=t;this.eventBus=r;this._initialized=!1;this._fingerprint="";this.reset();this._boundEvents=null;this._isViewerInPresentationMode=!1;this.eventBus._on("presentationmodechanged",(e=>{this._isViewerInPresentationMode=e.state!==i.PresentationModeState.NORMAL}));this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1;this.eventBus._on("pagesloaded",(e=>{this._isPagesLoaded=!!e.pagesCount}),{once:!0})}))}initialize(e){let{fingerprint:t,resetHistory:r=!1,updateUrl:i=!1}=e;if(!t||"string"!=typeof t){Window.ngxConsole.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const n=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t;this._updateUrl=!0===i;this._initialized=!0;this._bindEvents();const o=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(!this._isValidState(o,!0)||r){const{hash:e,page:t,rotation:i}=this._parseCurrentHash(!0);if(!e||n||r){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:e,page:t,rotation:i},!0);return}const a=o.destination;this._updateInternalState(a,o.uid,!0);void 0!==a.rotation&&(this._initialRotation=a.rotation);if(a.dest){this._initialBookmark=JSON.stringify(a.dest);this._destination.page=null}else a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark="page=".concat(a.page))}reset(){if(this._initialized){this._pageHide();this._initialized=!1;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}push(e){let{namedDest:t=null,explicitDest:r,pageNumber:i}=e;if(!this._initialized)return;if(t&&"string"!=typeof t){Window.ngxConsole.error("PDFHistory.push: "+'"'.concat(t,'" is not a valid namedDest parameter.'));return}if(!Array.isArray(r)){Window.ngxConsole.error("PDFHistory.push: "+'"'.concat(r,'" is not a valid explicitDest parameter.'));return}if(!this._isValidPage(i)&&(null!==i||this._destination)){Window.ngxConsole.error("PDFHistory.push: "+'"'.concat(i,'" is not a valid pageNumber parameter.'));return}const n=t||JSON.stringify(r);if(!n)return;let o=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,n)||isDestArraysEqual(this._destination.dest,r))){if(this._destination.page)return;o=!0}if(!this._popStateInProgress||o){this._pushOrReplaceState({dest:r,hash:n,page:i,rotation:this.linkService.rotation},o);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}pushPage(e){var t;if(this._initialized)if(this._isValidPage(e)){if((null===(t=this._destination)||void 0===t?void 0:t.page)!==e&&!this._popStateInProgress){this._pushOrReplaceState({dest:null,hash:"page=".concat(e),page:e,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}else Window.ngxConsole.error('PDFHistory.pushPage: "'.concat(e,'" is not a valid page number.'))}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,r={fingerprint:this._fingerprint,uid:t?this._uid:this._uid+1,destination:e};this._updateInternalState(e,r.uid);let i;if(this._updateUrl&&null!=e&&e.hash){const t=document.location.href.split("#")[0];t.startsWith("file://")||(i="".concat(t,"#").concat(e.hash))}t?window.history.replaceState(r,"",i):window.history.pushState(r,"",i)}_tryPushCurrentPosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._position)return;let t=this._position;if(e){t=Object.assign(Object.create(null),this._position);t.temporary=!0}if(!this._destination){this._pushOrReplaceState(t);return}if(this._destination.temporary){this._pushOrReplaceState(t,!0);return}if(this._destination.hash===t.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let r=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;r=!0}this._pushOrReplaceState(t,r)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[t]=performance.getEntriesByType("navigation");if("reload"!==(null==t?void 0:t.type))return!1}}return!(!Number.isInteger(e.uid)||e.uid<0)&&(null!==e.destination&&"object"==typeof e.destination)}_updateInternalState(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}r&&null!=e&&e.temporary&&delete e.temporary;this._destination=e;this._uid=t;this._maxUid=Math.max(this._maxUid,t);this._numPositionUpdates=0}_parseCurrentHash(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=unescape(getCurrentHash()).substring(1),r=(0,i.parseQueryString)(t),n=r.get("nameddest")||"";let o=0|r.get("page");(!this._isValidPage(o)||e&&n.length>0)&&(o=null);return{hash:t,page:o,rotation:this.linkService.rotation}}_updateViewarea(e){let{location:t}=e;if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:this._isViewerInPresentationMode?"page=".concat(t.pageNumber):t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0);this._updateViewareaTimeout=null}),1e3)}}_popState(e){let{state:t}=e;const r=getCurrentHash(),o=this._currentHash!==r;this._currentHash=r;if(!t){this._uid++;const{hash:e,page:t,rotation:r}=this._parseCurrentHash();this._pushOrReplaceState({hash:e,page:t,rotation:r},!0);return}if(!this._isValidState(t))return;this._popStateInProgress=!0;if(o){this._blockHashChange++;(0,n.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--}))}const a=t.destination;this._updateInternalState(a,t.uid,!0);(0,i.isValidRotation)(a.rotation)&&(this.linkService.rotation=a.rotation);a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page);Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){if(!this._boundEvents){this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}}_unbindEvents(){if(this._boundEvents){this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}};function isDestHashesEqual(e,t){if("string"!=typeof e||"string"!=typeof t)return!1;if(e===t)return!0;return(0,i.parseQueryString)(e).get("nameddest")===t}function isDestArraysEqual(e,t){function isEntryEqual(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e)||Array.isArray(t))return!1;if(null!==e&&"object"==typeof e&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!isEntryEqual(e[r],t[r]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(!isEntryEqual(e[r],t[r]))return!1;return!0}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFLayerViewer=void 0;r(92);r(1);var i=r(171);class PDFLayerViewer extends i.BaseTreeViewer{constructor(e){super(e);this.l10n=e.l10n;this.eventBus._on("resetlayers",this._resetLayers.bind(this));this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset();this._optionalContentConfig=null}_dispatchEvent(e){this.eventBus.dispatch("layersloaded",{source:this,layersCount:e})}_bindLink(e,t){let{groupId:r,input:i}=t;const setVisibility=()=>{this._optionalContentConfig.setVisibility(r,i.checked);this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};e.onclick=t=>{if(t.target===i){setVisibility();return!0}if(t.target!==e)return!0;i.checked=!i.checked;setVisibility();return!1}}async _setNestedName(e,t){let{name:r=null}=t;if("string"!=typeof r){e.textContent=await this.l10n.get("additional_layers");e.style.fontStyle="italic"}else e.textContent=this._normalizeTextContent(r)}_addToggleButton(e,t){let{name:r=null}=t;super._addToggleButton(e,null===r)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render(e){let{optionalContentConfig:t,pdfDocument:r}=e;this._optionalContentConfig&&this.reset();this._optionalContentConfig=t||null;this._pdfDocument=r||null;const i=null==t?void 0:t.getOrder();if(!i){this._dispatchEvent(0);return}const n=document.createDocumentFragment(),o=[{parent:n,groups:i}];let a=0,s=!1;for(;o.length>0;){const e=o.shift();for(const r of e.groups){const i=document.createElement("div");i.className="treeItem";const n=document.createElement("a");i.appendChild(n);if("object"==typeof r){s=!0;this._addToggleButton(i,r);this._setNestedName(n,r);const e=document.createElement("div");e.className="treeItems";i.appendChild(e);o.push({parent:e,groups:r.order})}else{const e=t.getGroup(r),i=document.createElement("input");this._bindLink(n,{groupId:r,input:i});i.type="checkbox";i.id=r;i.checked=e.visible;const o=document.createElement("label");o.setAttribute("for",r);o.textContent=this._normalizeTextContent(e.name);n.appendChild(i);n.appendChild(o);a++}e.parent.appendChild(i)}}this._finishRendering(n,a,s)}async _resetLayers(){if(!this._optionalContentConfig)return;const e=await this._pdfDocument.getOptionalContentConfig();this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(e)});this.render({optionalContentConfig:e,pdfDocument:this._pdfDocument})}}t.PDFLayerViewer=PDFLayerViewer},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SimpleLinkService=t.PDFLinkService=void 0;r(92);r(82);r(122);var i=r(165),n=r(162);t.PDFLinkService=class PDFLinkService{constructor(){let{eventBus:e,externalLinkTarget:t=null,externalLinkRel:r=null,ignoreDestinationZoom:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.eventBus=e;this.externalLinkTarget=t;this.externalLinkRel=r;this.externalLinkEnabled=!0;this._ignoreDestinationZoom=i;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null;this._pagesRefCache=null}setDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=t;this.pdfDocument=e;this._pagesRefCache=Object.create(null)}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}_goToDestinationHelper(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2?arguments[2]:void 0;const i=r[0];let n;if("object"==typeof i&&null!==i){n=this._cachedPageNumber(i);if(!n){this.pdfDocument.getPageIndex(i).then((n=>{this.cachePageRef(n+1,i);this._goToDestinationHelper(e,t,r)})).catch((()=>{Window.ngxConsole.error('PDFLinkService._goToDestinationHelper: "'.concat(i,'" is not ')+'a valid page reference, for dest="'.concat(e,'".'))}));return}}else{if(!Number.isInteger(i)){Window.ngxConsole.error('PDFLinkService._goToDestinationHelper: "'.concat(i,'" is not ')+'a valid destination reference, for dest="'.concat(e,'".'));return}n=i+1}if(!n||n<1||n>this.pagesCount)Window.ngxConsole.error('PDFLinkService._goToDestinationHelper: "'.concat(n,'" is not ')+'a valid page number, for dest="'.concat(e,'".'));else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:t,explicitDest:r,pageNumber:n})}this.pdfViewer.scrollPageIntoView({pageNumber:n,destArray:r,ignoreDestinationZoom:this._ignoreDestinationZoom})}}async goToDestination(e){if(!this.pdfDocument)return;let t,r;if("string"==typeof e){t=e;r=await this.pdfDocument.getDestination(e)}else{t=null;r=await e}Array.isArray(r)?this._goToDestinationHelper(e,t,r):Window.ngxConsole.error('PDFLinkService.goToDestination: "'.concat(r,'" is not ')+'a valid destination array, for dest="'.concat(e,'".'))}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;if(Number.isInteger(t)&&t>0&&t<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(t)}this.pdfViewer.scrollPageIntoView({pageNumber:t})}else Window.ngxConsole.error('PDFLinkService.goToPage: "'.concat(e,'" is not a valid page.'))}addLinkAttributes(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,i.addLinkAttributes)(e,{url:t,target:r?i.LinkTarget.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return(this.baseUrl||"")+e}setHash(e){if(!this.pdfDocument)return;let t,r;if(e.includes("=")){const i=(0,n.parseQueryString)(e);i.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:i.get("search").replace(/"/g,""),phraseSearch:"true"===i.get("phrase")});i.has("page")&&(t=0|i.get("page")||1);if(i.has("zoom")){const e=i.get("zoom").split(","),t=e[0],n=parseFloat(t);t.includes("Fit")?"Fit"===t||"FitB"===t?r=[null,{name:t}]:"FitH"===t||"FitBH"===t||"FitV"===t||"FitBV"===t?r=[null,{name:t},e.length>1?0|e[1]:null]:"FitR"===t?5!==e.length?Window.ngxConsole.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):r=[null,{name:t},0|e[1],0|e[2],0|e[3],0|e[4]]:Window.ngxConsole.error('PDFLinkService.setHash: "'.concat(t,'" is not ')+"a valid zoom value."):r=[null,{name:"XYZ"},e.length>1?0|e[1]:null,e.length>2?0|e[2]:null,n?n/100:t]}r?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:r,allowNegativeOffset:!0}):t&&(this.page=t);i.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:i.get("pagemode")});i.has("nameddest")&&this.goToDestination(i.get("nameddest"))}else{r=unescape(e);try{r=JSON.parse(r);Array.isArray(r)||(r=r.toString())}catch(e){}if("string"==typeof r||function isValidExplicitDestination(e){if(!Array.isArray(e))return!1;const t=e.length;if(t<2)return!1;const r=e[0];if(!("object"==typeof r&&Number.isInteger(r.num)&&Number.isInteger(r.gen)||Number.isInteger(r)&&r>=0))return!1;const i=e[1];if("object"!=typeof i||"string"!=typeof i.name)return!1;let n=!0;switch(i.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;n=!1;break;default:return!1}for(let r=2;r<t;r++){const t=e[r];if(!("number"==typeof t||n&&null===t))return!1}return!0}(r)){this.goToDestination(r);return}Window.ngxConsole.error('PDFLinkService.setHash: "'.concat(unescape(e),'" is not ')+"a valid destination.")}}executeNamedAction(e){var t,r;switch(e){case"GoBack":null===(t=this.pdfHistory)||void 0===t||t.back();break;case"GoForward":null===(r=this.pdfHistory)||void 0===r||r.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}cachePageRef(e,t){if(!t)return;const r=0===t.gen?"".concat(t.num,"R"):"".concat(t.num,"R").concat(t.gen);this._pagesRefCache[r]=e}_cachedPageNumber(e){var t;if(!e)return null;const r=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return(null===(t=this._pagesRefCache)||void 0===t?void 0:t[r])||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}};t.SimpleLinkService=class SimpleLinkService{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,t){(0,i.addLinkAttributes)(e,{url:t,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}cachePageRef(e,t){}isPageVisible(e){return!0}isPageCached(e){return!0}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFOutlineViewer=void 0;r(1);r(92);var i=r(171),n=r(165),o=r(162);class PDFOutlineViewer extends i.BaseTreeViewer{constructor(e){super(e);this.linkService=e.linkService;this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this));this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this));this.eventBus._on("pagechanging",(e=>{this._currentPageNumber=e.pageNumber}));this.eventBus._on("pagesloaded",(e=>{this._isPagesLoaded=!!e.pagesCount;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}));this.eventBus._on("sidebarviewchanged",(e=>{this._sidebarView=e.view}))}reset(){super.reset();this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1);this._currentOutlineItemCapability=null}_dispatchEvent(e){var t;this._currentOutlineItemCapability=(0,n.createPromiseCapability)();0===e||null!==(t=this._pdfDocument)&&void 0!==t&&t.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):null!==this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded);this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,t){let{url:r,newWindow:i,dest:n}=t;const{linkService:o}=this;if(r)o.addLinkAttributes(e,r,i);else{e.href=o.getDestinationHash(n);e.onclick=e=>{this._updateCurrentTreeItem(e.target.parentNode);n&&o.goToDestination(n);return!1}}}_setStyles(e,t){let{bold:r,italic:i}=t;r&&(e.style.fontWeight="bold");i&&(e.style.fontStyle="italic")}_addToggleButton(e,t){let{count:r,items:i}=t,n=!1;if(r<0){let e=i.length;if(e>0){const t=[...i];for(;t.length>0;){const{count:r,items:i}=t.shift();if(r>0&&i.length>0){e+=i.length;t.push(...i)}}}Math.abs(r)===e&&(n=!0)}super._addToggleButton(e,n)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render(e){let{outline:t,pdfDocument:r}=e;this._outline&&this.reset();this._outline=t||null;this._pdfDocument=r||null;if(!t){this._dispatchEvent(0);return}const i=document.createDocumentFragment(),n=[{parent:i,items:t}];let o=0,a=!1;for(;n.length>0;){const e=n.shift();for(const t of e.items){const r=document.createElement("div");r.className="treeItem";const i=document.createElement("a");this._bindLink(i,t);this._setStyles(i,t);i.textContent=this._normalizeTextContent(t.title);r.appendChild(i);if(t.items.length>0){a=!0;this._addToggleButton(r,t);const e=document.createElement("div");e.className="treeItems";r.appendChild(e);n.push({parent:e,items:t.items})}e.parent.appendChild(r);o++}}this._finishRendering(i,o,a)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const e=await this._getPageNumberToDestHash(this._pdfDocument);if(e){this._updateCurrentTreeItem(null);if(this._sidebarView===o.SidebarView.OUTLINE)for(let t=this._currentPageNumber;t>0;t--){const r=e.get(t);if(!r)continue;const i=this.container.querySelector('a[href="'.concat(r,'"]'));if(i){this._scrollToCurrentTreeItem(i.parentNode);break}}}}async _getPageNumberToDestHash(e){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=(0,n.createPromiseCapability)();const t=new Map,r=new Map,i=[{nesting:0,items:this._outline}];for(;i.length>0;){const n=i.shift(),o=n.nesting;for(const{dest:a,items:s}of n.items){let n,l;if("string"==typeof a){n=await e.getDestination(a);if(e!==this._pdfDocument)return null}else n=a;if(Array.isArray(n)){const[i]=n;if("object"==typeof i&&null!==i){l=this.linkService._cachedPageNumber(i);if(!l)try{l=await e.getPageIndex(i)+1;if(e!==this._pdfDocument)return null;this.linkService.cachePageRef(l,i)}catch(e){}}else Number.isInteger(i)&&(l=i+1);if(Number.isInteger(l)&&(!t.has(l)||o>r.get(l))){const e=this.linkService.getDestinationHash(a);t.set(l,e);r.set(l,o)}}s.length>0&&i.push({nesting:o+1,items:s})}}this._pageNumberToDestHashCapability.resolve(t.size>0?t:null);return this._pageNumberToDestHashCapability.promise}}t.PDFOutlineViewer=PDFOutlineViewer},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPresentationMode=void 0;var i=r(162);const n="pdfPresentationMode",o="pdfPresentationModeControls",a=Math.PI/6;t.PDFPresentationMode=class PDFPresentationMode{constructor(e){let{container:t,pdfViewer:r,eventBus:i}=e;this.container=t;this.pdfViewer=r;this.eventBus=i;this.active=!1;this.args=null;this.contextMenuOpen=!1;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}request(){if(this.switchInProgress||this.active||!this.pdfViewer.pagesCount)return!1;this._addFullscreenChangeListeners();this._setSwitchInProgress();this._notifyStateChange();if(this.container.requestFullscreen)this.container.requestFullscreen();else if(this.container.mozRequestFullScreen)this.container.mozRequestFullScreen();else{if(!this.container.webkitRequestFullscreen)return!1;document.body.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);this._prepareFullscreenMode()}this.args={pageNumber:this.pdfViewer.currentPageNumber,scaleValue:this.pdfViewer.currentScaleValue,scrollMode:this.pdfViewer.scrollMode,spreadMode:this.pdfViewer.spreadMode};return!0}_mouseWheel(e){if(!this.active)return;e.preventDefault();const t=(0,i.normalizeWheelEventDelta)(e),r=Date.now(),n=this.mouseScrollTimeStamp;if(!(r>n&&r-n<50)){(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0)&&this._resetMouseScrollState();this.mouseScrollDelta+=t;if(Math.abs(this.mouseScrollDelta)>=.1){const e=this.mouseScrollDelta;this._resetMouseScrollState();(e>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=r)}}}get isFullscreen(){return!!(document.fullscreenElement||document.mozFullScreen||document.webkitIsFullScreen)}_notifyStateChange(){let e=i.PresentationModeState.NORMAL;this.switchInProgress?e=i.PresentationModeState.CHANGING:this.active&&(e=i.PresentationModeState.FULLSCREEN);this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}_setSwitchInProgress(){this.switchInProgress&&clearTimeout(this.switchInProgress);this.switchInProgress=setTimeout((()=>{this._removeFullscreenChangeListeners();delete this.switchInProgress;this._notifyStateChange()}),1500)}_resetSwitchInProgress(){if(this.switchInProgress){clearTimeout(this.switchInProgress);delete this.switchInProgress}}_enter(){this.active=!0;this._resetSwitchInProgress();this._notifyStateChange();this.container.classList.add(n);setTimeout((()=>{this.pdfViewer.scrollMode=i.ScrollMode.PAGE;this.pdfViewer.spreadMode=i.SpreadMode.NONE;this.pdfViewer.currentPageNumber=this.args.pageNumber;this.pdfViewer.currentScaleValue="page-fit"}),0);this._addWindowListeners();this._showControls();this.contextMenuOpen=!1;window.getSelection().removeAllRanges()}_exit(){this._tidyUpFullscreenMode();const e=this.pdfViewer.currentPageNumber;this.container.classList.remove(n);setTimeout((()=>{this.active=!1;this._removeFullscreenChangeListeners();this._notifyStateChange();this.pdfViewer.scrollMode=this.args.scrollMode;this.pdfViewer.spreadMode=this.args.spreadMode;this.pdfViewer.currentScaleValue=this.args.scaleValue;this.pdfViewer.currentPageNumber=e;this.args=null}),0);this._removeWindowListeners();this._hideControls();this._resetMouseScrollState();this.contextMenuOpen=!1}_prepareFullscreenMode(){const e=document.getElementsByClassName("zoom")[0].parentElement,t=e.parentElement;this.ngxContainer=t;for(let r=0;r<t.childElementCount;r++)t.children.item(r)===e&&(this.ngxContainerIndex=r);t.removeChild(e);document.body.append(e);const r=document.body.children;for(let t=0;t<r.length;t++){const i=r.item(t);i!==e&&i instanceof HTMLElement&&i.classList.add("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.add("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.add("hidden-by-fullscreen")}_tidyUpFullscreenMode(){if(this.ngxContainer){const e=document.getElementsByClassName("zoom")[0].parentElement;document.body.removeChild(e);this.ngxContainerIndex>=this.ngxContainer.childElementCount?this.ngxContainer.append(e):this.ngxContainer.insertBefore(e,this.ngxContainer.children.item(this.ngxContainerIndex));this.ngxContainer=void 0;const t=document.body.children;for(let r=0;r<t.length;r++){const i=t.item(r);i!==e&&i instanceof HTMLElement&&i.classList.contains("hidden-by-fullscreen")&&i.classList.remove("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.remove("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.remove("hidden-by-fullscreen")}}_mouseDown(e){if(this.contextMenuOpen){this.contextMenuOpen=!1;e.preventDefault()}else if(0===e.button){if(!(e.target.href&&e.target.classList.contains("internalLink"))){e.preventDefault();e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()}}}_contextMenu(){this.contextMenuOpen=!0}_showControls(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(o);this.controlsTimeout=setTimeout((()=>{this.container.classList.remove(o);delete this.controlsTimeout}),3e3)}_hideControls(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout);this.container.classList.remove(o);delete this.controlsTimeout}}_resetMouseScrollState(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}_touchSwipe(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=e.touches[0].pageX;this.touchSwipeState.endY=e.touches[0].pageY;e.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;let t=0;const r=this.touchSwipeState.endX-this.touchSwipeState.startX,i=this.touchSwipeState.endY-this.touchSwipeState.startY,n=Math.abs(Math.atan2(i,r));Math.abs(r)>50&&(n<=a||n>=Math.PI-a)?t=r:Math.abs(i)>50&&Math.abs(n-Math.PI/2)<=a&&(t=i);t>0?this.pdfViewer.previousPage():t<0&&this.pdfViewer.nextPage()}}_addWindowListeners(){this.showControlsBind=this._showControls.bind(this);this.mouseDownBind=this._mouseDown.bind(this);this.mouseWheelBind=this._mouseWheel.bind(this);this.resetMouseScrollStateBind=this._resetMouseScrollState.bind(this);this.contextMenuBind=this._contextMenu.bind(this);this.touchSwipeBind=this._touchSwipe.bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:!1});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}_removeWindowListeners(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}_fullscreenChange(){this.isFullscreen?this._enter():this._exit()}_addFullscreenChangeListeners(){this.fullscreenChangeBind=this._fullscreenChange.bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind);window.addEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.addEventListener("webkitfullscreenchange",this.fullscreenChangeBind)}_removeFullscreenChangeListeners(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);window.removeEventListener("mozfullscreenchange",this.fullscreenChangeBind);window.removeEventListener("webkitfullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFRenderingQueue=void 0;r(92);r(186);var i=r(165),n=r(162);t.PDFRenderingQueue=class PDFRenderingQueue{constructor(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){var t;if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(e)||this.isThumbnailViewEnabled&&null!==(t=this.pdfThumbnailViewer)&&void 0!==t&&t.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=e.views,o=n.length;if(0===o)return null;for(let e=0;e<o;e++){const t=n[e].view;if(!this.isViewFinished(t))return t}const a=e.first.id,s=e.last.id;if(s-a+1>o){const i=e.ids;for(let e=1,n=s-a;e<n;e++){const n=r?a+e:s-e;if(i.has(n))continue;const o=t[n-1];if(!this.isViewFinished(o))return o}}let l=r?s:a-2,c=t[l];if(c&&!this.isViewFinished(c))return c;if(i){l+=r?1:-1;c=t[l];if(c&&!this.isViewFinished(c))return c}return null}isViewFinished(e){return e.renderingState===n.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case n.RenderingStates.FINISHED:return!1;case n.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId;e.resume();break;case n.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case n.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId;e.draw().finally((()=>{this.renderHighestPriority()})).catch((e=>{e instanceof i.RenderingCancelledException||Window.ngxConsole.error('renderView: "'.concat(e,'"'))}))}return!0}}},(e,t,r)=>{"use strict";var i=r(64),n=r(19),o=r(93),a=r(13),s=r(28),l=r(7),c=r(104),d=r(116),h=r(67);i({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),r=l(e);return this.then(r?function(r){return d(t,e()).then((function(){return r}))}:e,r?function(r){return d(t,e()).then((function(){throw r}))}:e)}});if(!n&&l(o)){var u=s("Promise").prototype.finally;o.prototype.finally!==u&&h(o.prototype,"finally",u,{unsafe:!0})}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFScriptingManager=void 0;r(92);r(1);var i=r(162),n=r(165);t.PDFScriptingManager=class PDFScriptingManager{constructor(e){let{eventBus:t,sandboxBundleSrc:r=null,scriptingFactory:i=null,docPropertiesLookup:n=null}=e;this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._ready=!1;this._eventBus=t;this._sandboxBundleSrc=r;this._scriptingFactory=i;this._docPropertiesLookup=n}setViewer(e){this._pdfViewer=e}async setDocument(e){var t;this._pdfDocument&&await this._destroyScripting();this._pdfDocument=e;if(!e)return;const[r,i,n]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(r||n){if(e===this._pdfDocument){try{this._scripting=this._createScripting()}catch(e){Window.ngxConsole.error('PDFScriptingManager.setDocument: "'.concat(null==e?void 0:e.message,'".'));await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",(e=>{(null==e?void 0:e.source)===window&&this._updateFromSandbox(e.detail)}));this._internalEvents.set("dispatcheventinsandbox",(e=>{var t;null===(t=this._scripting)||void 0===t||t.dispatchEventInSandbox(e.detail)}));this._internalEvents.set("pagechanging",(e=>{let{pageNumber:t,previous:r}=e;if(t!==r){this._dispatchPageClose(r);this._dispatchPageOpen(t)}}));this._internalEvents.set("pagerendered",(e=>{let{pageNumber:t}=e;this._pageOpenPending.has(t)&&t===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(t)}));this._internalEvents.set("pagesdestroy",(async e=>{var t,r;await this._dispatchPageClose(this._pdfViewer.currentPageNumber);await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillClose"}));null===(r=this._closeCapability)||void 0===r||r.resolve()}));this._domEvents.set("mousedown",(e=>{this._mouseState.isDown=!0}));this._domEvents.set("mouseup",(e=>{this._mouseState.isDown=!1}));for(const[e,t]of this._internalEvents)this._eventBus._on(e,t);for(const[e,t]of this._domEvents)window.addEventListener(e,t);try{const t=await this._getDocProperties();if(e!==this._pdfDocument)return;await this._scripting.createSandbox({objects:r,calculationOrder:i,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...t,actions:n}});this._eventBus.dispatch("sandboxcreated",{source:this})}catch(e){Window.ngxConsole.error('PDFScriptingManager.setDocument: "'.concat(null==e?void 0:e.message,'".'));await this._destroyScripting();return}await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"Open"}));await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);Promise.resolve().then((()=>{e===this._pdfDocument&&(this._ready=!0)}))}}else await this._destroyScripting()}async dispatchWillSave(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){var e;return(null===(e=this._destroyCapability)||void 0===e?void 0:e.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,n.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,n.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,n.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,n.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(e){const t=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:r,siblings:n,command:o,value:a}=e;if(!r){switch(o){case"clear":Window.ngxConsole.clear();break;case"error":Window.ngxConsole.error(a);break;case"layout":if(t)return;const e=(0,i.apiPageLayoutToViewerModes)(a);this._pdfViewer.spreadMode=e.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=a+1;break;case"print":await this._pdfViewer.pagesPromise;this._eventBus.dispatch("print",{source:this});break;case"println":Window.ngxConsole.log(a);break;case"zoom":if(t)return;this._pdfViewer.currentScaleValue=a;break;case"SaveAs":this._eventBus.dispatch("save",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(t)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(t)return;this._pdfViewer.decreaseScale()}return}if(t&&e.focus)return;delete e.id;delete e.siblings;const s=n?[r,...n]:[r];for(const t of s){const r=document.getElementById(t);if(r)r.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e}));else{var l;null===(l=this._pdfDocument)||void 0===l||l.annotationStorage.setValue(t,void 0,e)}}}async _dispatchPageOpen(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this._pdfDocument,o=this._visitedPages;t&&(this._closeCapability=(0,n.createPromiseCapability)());if(!this._closeCapability)return;const a=this._pdfViewer.getPageView(e-1);if((null==a?void 0:a.renderingState)!==i.RenderingStates.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);const s=(async()=>{var t,i;const n=await(o.has(e)?null:null===(t=a.pdfPage)||void 0===t?void 0:t.getJSActions());r===this._pdfDocument&&await(null===(i=this._scripting)||void 0===i?void 0:i.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:n}))})();o.set(e,s)}async _dispatchPageClose(e){var t;const r=this._pdfDocument,i=this._visitedPages;if(!this._closeCapability)return;if(this._pageOpenPending.has(e))return;const n=i.get(e);if(n){i.set(e,null);await n;r===this._pdfDocument&&await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e}))}}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);throw new Error("_getDocProperties: Unable to lookup properties.")}_createScripting(){this._destroyCapability=(0,n.createPromiseCapability)();if(this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}async _destroyScripting(){var e;if(this._scripting){if(this._closeCapability){await Promise.race([this._closeCapability.promise,new Promise((e=>{setTimeout(e,1e3)}))]).catch((e=>{}));this._closeCapability=null}this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(e){}for(const[e,t]of this._internalEvents)this._eventBus._off(e,t);this._internalEvents.clear();for(const[e,t]of this._domEvents)window.removeEventListener(e,t);this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._ready=!1;null===(e=this._destroyCapability)||void 0===e||e.resolve()}else{var t;this._pdfDocument=null;null===(t=this._destroyCapability)||void 0===t||t.resolve()}}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFSidebar=void 0;r(92);var i=r(162);const n="pdfSidebarNotification";t.PDFSidebar=class PDFSidebar{constructor(e){let{elements:t,pdfViewer:r,pdfThumbnailViewer:n,eventBus:o,l10n:a}=e;this.isOpen=!1;this.active=i.SidebarView.THUMBS;this.isInitialViewSet=!1;this.onToggled=null;this.pdfViewer=r;this.pdfThumbnailViewer=n;this.outerContainer=t.outerContainer;this.viewerContainer=t.viewerContainer;this.toggleButton=t.toggleButton;this.thumbnailButton=t.thumbnailButton;this.outlineButton=t.outlineButton;this.attachmentsButton=t.attachmentsButton;this.layersButton=t.layersButton;this.thumbnailView=t.thumbnailView;this.outlineView=t.outlineView;this.attachmentsView=t.attachmentsView;this.layersView=t.layersView;this._outlineOptionsContainer=t.outlineOptionsContainer;this._currentOutlineItemButton=t.currentOutlineItemButton;this.eventBus=o;this.l10n=a;this._addEventListeners()}async reset(){this.isInitialViewSet=!1;this._hideUINotification(!0);this.switchView(i.SidebarView.THUMBS);this.outlineButton.disabled=!1;this.attachmentsButton.disabled=!1;this.layersButton.disabled=!1;this.outlineButton.hidden=!1;this.attachmentsButton.hidden=!1;this.layersButton.hidden=!1;this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:i.SidebarView.NONE}get isThumbnailViewVisible(){return this.isOpen&&this.active===i.SidebarView.THUMBS}get isOutlineViewVisible(){return this.isOpen&&this.active===i.SidebarView.OUTLINE}get isAttachmentsViewVisible(){return this.isOpen&&this.active===i.SidebarView.ATTACHMENTS}get isLayersViewVisible(){return this.isOpen&&this.active===i.SidebarView.LAYERS}setInitialView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.SidebarView.NONE;if(!this.isInitialViewSet){this.isInitialViewSet=!0;e!==i.SidebarView.NONE&&e!==i.SidebarView.UNKNOWN&&this._switchView(e,!0)||this._dispatchEvent()}}async switchView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];await this._switchView(e,t)}async _switchView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=e!==this.active;let n=!1;switch(e){case i.SidebarView.NONE:if(this.isOpen){this.close();return!0}return!1;case i.SidebarView.THUMBS:this.isOpen&&r&&(n=!0);break;case i.SidebarView.OUTLINE:if(this.outlineButton.disabled)return!1;break;case i.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return!1;break;case i.SidebarView.LAYERS:if(this.layersButton.disabled)return!1;break;default:Window.ngxConsole.error('PDFSidebar._switchView: "'.concat(e,'" is not a valid view.'));return!1}this.active=e;this.thumbnailButton.classList.toggle("toggled",e===i.SidebarView.THUMBS);this.outlineButton.classList.toggle("toggled",e===i.SidebarView.OUTLINE);this.attachmentsButton.classList.toggle("toggled",e===i.SidebarView.ATTACHMENTS);this.layersButton.classList.toggle("toggled",e===i.SidebarView.LAYERS);this.thumbnailView.classList.toggle("hidden",e!==i.SidebarView.THUMBS);this.outlineView.classList.toggle("hidden",e!==i.SidebarView.OUTLINE);this.attachmentsView.classList.toggle("hidden",e!==i.SidebarView.ATTACHMENTS);this.layersView.classList.toggle("hidden",e!==i.SidebarView.LAYERS);this._outlineOptionsContainer.classList.toggle("hidden",e!==i.SidebarView.OUTLINE);if(t&&!this.isOpen){await this.open();return!0}await this.pdfThumbnailViewer.renderThumbnails();if(n){this._updateThumbnailViewer();this._forceRendering()}r&&this._dispatchEvent();return r}async open(){if(!this.isOpen){await this.pdfThumbnailViewer.renderThumbnails();this.isOpen=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");this.active===i.SidebarView.THUMBS&&this._updateThumbnailViewer();this._forceRendering();this._dispatchEvent();this._hideUINotification()}}close(){if(this.isOpen){this.isOpen=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");this._forceRendering();this._dispatchEvent()}}toggle(){this.isOpen?this.close():this.open()}_dispatchEvent(){this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}_forceRendering(){if(this.onToggled)this.onToggled();else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}_updateThumbnailViewer(){const{pdfViewer:e,pdfThumbnailViewer:t}=this,r=e.pagesCount;for(let n=0;n<r;n++){const r=e.getPageView(n);if((null==r?void 0:r.renderingState)===i.RenderingStates.FINISHED){t.getThumbnail(n).setImage(r)}}t.scrollThumbnailIntoView(e.currentPageNumber)}_showUINotification(){this.l10n.get("toggle_sidebar_notification2.title").then((e=>{this.toggleButton.title=e}));this.isOpen||this.toggleButton.classList.add(n)}_hideUINotification(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isOpen||e)&&this.toggleButton.classList.remove(n);e&&this.l10n.get("toggle_sidebar.title").then((e=>{this.toggleButton.title=e}))}_addEventListeners(){this.viewerContainer.addEventListener("transitionend",(e=>{e.target===this.viewerContainer&&this.outerContainer.classList.remove("sidebarMoving")}));this.toggleButton.addEventListener("click",(()=>{this.toggle()}));this.thumbnailButton.addEventListener("click",(()=>{this.switchView(i.SidebarView.THUMBS)}));this.outlineButton.addEventListener("click",(()=>{this.switchView(i.SidebarView.OUTLINE)}));this.outlineButton.addEventListener("dblclick",(()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}));this.attachmentsButton.addEventListener("click",(()=>{this.switchView(i.SidebarView.ATTACHMENTS)}));this.layersButton.addEventListener("click",(()=>{this.switchView(i.SidebarView.LAYERS)}));this.layersButton.addEventListener("dblclick",(()=>{this.eventBus.dispatch("resetlayers",{source:this})}));this._currentOutlineItemButton.addEventListener("click",(()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})}));const onTreeLoaded=(e,t,r)=>{t.disabled=!e;t.hidden=!e;e?this._showUINotification():this.active===r&&this.switchView(i.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",(e=>{onTreeLoaded(e.outlineCount,this.outlineButton,i.SidebarView.OUTLINE);e.enableCurrentOutlineItemButton&&e.currentOutlineItemPromise&&e.currentOutlineItemPromise.then((e=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!e)}))}));this.eventBus._on("attachmentsloaded",(e=>{onTreeLoaded(e.attachmentsCount,this.attachmentsButton,i.SidebarView.ATTACHMENTS)}));this.eventBus._on("layersloaded",(e=>{onTreeLoaded(e.layersCount,this.layersButton,i.SidebarView.LAYERS)}));this.eventBus._on("presentationmodechanged",(e=>{e.state===i.PresentationModeState.NORMAL&&this.isThumbnailViewVisible&&this._updateThumbnailViewer()}))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFSidebarResizer=void 0;r(92);const i="sidebarResizing";t.PDFSidebarResizer=class PDFSidebarResizer{constructor(e,t,r){this.isRTL=!1;this.sidebarOpen=!1;this.doc=document.documentElement;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=e.outerContainer;this.resizer=e.resizer;this.eventBus=t;r.getDirection().then((e=>{this.isRTL="rtl"===e}));this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}_updateWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Math.floor(this.outerContainerWidth/2);e>t&&(e=t);e<200&&(e=200);if(e===this._width)return!1;this._width=e;this.doc.style.setProperty("--sidebar-width","".concat(e,"px"));return!0}_mouseMove(e){let t=e.clientX;this.isRTL&&(t=this.outerContainerWidth-t);this._updateWidth(t)}_mouseUp(e){this.outerContainer.classList.remove(i);this.eventBus.dispatch("resize",{source:this});const t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove);window.removeEventListener("mouseup",t.mouseUp)}_addEventListeners(){const e=this._boundEvents;e.mouseMove=this._mouseMove.bind(this);e.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",(t=>{if(0===t.button){this.outerContainer.classList.add(i);window.addEventListener("mousemove",e.mouseMove);window.addEventListener("mouseup",e.mouseUp)}}));this.eventBus._on("sidebarviewchanged",(e=>{this.sidebarOpen=!(null==e||!e.view)}));this.eventBus._on("resize",(e=>{if((null==e?void 0:e.source)!==window)return;this._outerContainerWidth=null;if(!this._width)return;if(!this.sidebarOpen){this._updateWidth(this._width);return}this.outerContainer.classList.add(i);const t=this._updateWidth(this._width);Promise.resolve().then((()=>{this.outerContainer.classList.remove(i);t&&this.eventBus.dispatch("resize",{source:this})}))}))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFThumbnailViewer=void 0;r(1);r(92);var i=r(162),n=r(191);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}const o="selected";var a=new WeakSet,s=new WeakSet;t.PDFThumbnailViewer=class PDFThumbnailViewer{constructor(e){let{container:t,eventBus:r,linkService:n,renderingQueue:o,l10n:l}=e;_classPrivateMethodInitSpec(this,s);_classPrivateMethodInitSpec(this,a);this.container=t;this.linkService=n;this.renderingQueue=o;this.l10n=l;this.scroll=(0,i.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView();r._on("optionalcontentconfigchanged",(()=>{this._setImageDisabled=!0}))}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(e){return this._thumbnails[e]}_getVisibleThumbs(){return(0,i.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(e){if(!this.pdfDocument)return;const t=this._thumbnails[e-1];if(!t){Window.ngxConsole.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}if(e!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(o);t.div.classList.add(o)}const{first:r,last:n,views:a}=this._getVisibleThumbs();if(a.length>0){let o=!1;if(e<=r.id||e>=n.id)o=!0;else for(const{id:t,percent:r}of a)if(t===e){o=r<100;break}o&&(0,i.scrollIntoView)(t.div,{top:-19})}this._currentPageNumber=e}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,i.isValidRotation)(e))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===e)return;this._pagesRotation=e;const t={rotation:e};for(const e of this._thumbnails)e.update(t)}cleanup(){for(let e=0,t=this._thumbnails.length;e<t;e++)this._thumbnails[e]&&this._thumbnails[e].renderingState!==i.RenderingStates.FINISHED&&this._thumbnails[e].reset();n.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._setImageDisabled=!1;this.container.textContent=""}setDocument(e){this.initialized=!1;if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=e}async renderThumbnails(){if(!this.pdfDocument)return;if(this.initialized)return;this.initialized=!0;const e=this.pdfDocument,t=e.getPage(1),r=e.getOptionalContentConfig();try{const i=await t;this._optionalContentConfigPromise=r;const a=e.numPages,s=i.getViewport({scale:1}),checkSetImageDisabled=()=>this._setImageDisabled;for(let e=1;e<=a;++e){const t=new n.PDFThumbnailView({container:this.container,id:e,defaultViewport:s.clone(),optionalContentConfigPromise:r,linkService:this.linkService,renderingQueue:this.renderingQueue,checkSetImageDisabled:checkSetImageDisabled,l10n:this.l10n});this._thumbnails.push(t)}const l=this._thumbnails[0];l&&l.setPdfPage(i);this._thumbnails[this._currentPageNumber-1].div.classList.add(o)}catch(e){Window.ngxConsole.error("Unable to initialize thumbnail viewer",e)}}_cancelRendering(){for(let e=0,t=this._thumbnails.length;e<t;e++)this._thumbnails[e]&&this._thumbnails[e].cancelRendering()}setPageLabels(e){if(this.pdfDocument){if(e)if(Array.isArray(e)&&this.pdfDocument.numPages===e.length)this._pageLabels=e;else{this._pageLabels=null;Window.ngxConsole.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(let e=0,i=this._thumbnails.length;e<i;e++){var t,r;this._thumbnails[e].setPageLabel(null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[e])&&void 0!==t?t:null)}}}forceRendering(){const e=this._getVisibleThumbs(),t=_classPrivateMethodGet(this,s,_getScrollAhead2).call(this,e),r=this.renderingQueue.getHighestPriority(e,this._thumbnails,t);if(r){_classPrivateMethodGet(this,a,_ensurePdfPageLoaded2).call(this,r).then((()=>{this.renderingQueue.renderView(r)}));return!0}return!1}};async function _ensurePdfPageLoaded2(e){if(e.pdfPage)return e.pdfPage;try{const t=await this.pdfDocument.getPage(e.id);e.pdfPage||e.setPdfPage(t);return t}catch(e){Window.ngxConsole.error("Unable to get page for thumb view",e);return null}}function _getScrollAhead2(e){var t,r;return 1===(null===(t=e.first)||void 0===t?void 0:t.id)||(null===(r=e.last)||void 0===r?void 0:r.id)!==this._thumbnails.length&&this.scroll.down}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TempImageFactory=t.PDFThumbnailView=void 0;r(92);r(186);r(1);var i=r(162),n=r(165);function _classStaticPrivateFieldSpecSet(e,t,r,i){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(r,"set");!function _classApplyDescriptorSet(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,r,i);return i}function _classStaticPrivateFieldSpecGet(e,t,r){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(r,"get");return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,r)}function _classCheckPrivateStaticFieldDescriptor(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}class TempImageFactory{static getCanvas(e,t){const r=_classStaticPrivateFieldSpecGet(this,TempImageFactory,o)||_classStaticPrivateFieldSpecSet(this,TempImageFactory,o,document.createElement("canvas"));r.width=e;r.height=t;r.mozOpaque=!0;const i=r.getContext("2d",{alpha:!1});i.save();i.fillStyle="rgb(255, 255, 255)";i.fillRect(0,0,e,t);i.restore();return[r,r.getContext("2d")]}static destroyCanvas(){const e=_classStaticPrivateFieldSpecGet(this,TempImageFactory,o);if(e){e.width=0;e.height=0}_classStaticPrivateFieldSpecSet(this,TempImageFactory,o,null)}}t.TempImageFactory=TempImageFactory;var o={writable:!0,value:null};t.PDFThumbnailView=class PDFThumbnailView{constructor(e){let{container:t,id:r,defaultViewport:n,optionalContentConfigPromise:o,linkService:a,renderingQueue:s,checkSetImageDisabled:l,l10n:c}=e;this.id=r;this.renderingId="thumbnail"+r;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=n;this.pdfPageRotate=n.rotation;this._optionalContentConfigPromise=o||null;this.linkService=a;this.renderingQueue=s;this.renderTask=null;this.renderingState=i.RenderingStates.INITIAL;this.resume=null;this._checkSetImageDisabled=l||function(){return!1};const d=this.viewport.width,h=d/this.viewport.height;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/h|0;this.scale=this.canvasWidth/d;this.l10n=c;window.pdfThumbnailGenerator?window.pdfThumbnailGenerator(this,a,r,t,this._thumbPageTitle):this.createThumbnail(this,a,r,t,this._thumbPageTitle)}createThumbnail(e,t,r,i,n){const o=document.createElement("a");o.href=t.getAnchorUrl("#page="+r);n.then((e=>{o.title=e}));o.onclick=function(){t.goToPage(r);return!1};e.anchor=o;const a=document.createElement("div");a.className="thumbnail";a.setAttribute("data-page-number",this.id);e.div=a;const s=document.createElement("div");s.className="thumbnailSelectionRing";s.style.width=this.canvasWidth+2+"px";s.style.height=this.canvasHeight+2+"px";e.ring=s;a.appendChild(s);o.appendChild(a);i.appendChild(o)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t});this.reset()}reset(){this.cancelRendering();this.renderingState=i.RenderingStates.INITIAL;const e=this.viewport.width,t=e/this.viewport.height;this.canvasHeight=this.canvasWidth/t|0;this.scale=this.canvasWidth/e;this.div.removeAttribute("data-loaded");const r=this.ring;r.textContent="";r.style.width=this.canvasWidth+2+"px";r.style.height=this.canvasHeight+2+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}update(e){let{rotation:t=null}=e;"number"==typeof t&&(this.rotation=t);const r=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:r});this.reset()}cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}_getPageDrawContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=document.createElement("canvas");t.mozOpaque=!0;const r=t.getContext("2d",{alpha:!1}),n=(0,i.getOutputScale)(r);t.width=e*this.canvasWidth*n.sx|0;t.height=e*this.canvasHeight*n.sy|0;return{ctx:r,canvas:t,transform:n.scaled?[n.sx,0,0,n.sy,0,0]:null}}_convertCanvasToImage(e){if(this.renderingState!==i.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const t=this._reduceImage(e),r=document.createElement("img");r.className="thumbnailImage";this._thumbPageCanvas.then((e=>{r.setAttribute("aria-label",e)}));r.style.width=this.canvasWidth+"px";r.style.height=this.canvasHeight+"px";r.src=t.toDataURL();this.image=r;this.div.setAttribute("data-loaded",!0);this.ring.appendChild(r);t.width=0;t.height=0}draw(){var e=this;if(this.renderingState!==i.RenderingStates.INITIAL){Window.ngxConsole.error("Must be in new state before drawing");return Promise.resolve()}const{pdfPage:t}=this;if(!t){this.renderingState=i.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=i.RenderingStates.RUNNING;const finishRenderTask=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l===e.renderTask&&(e.renderTask=null);if(!(t instanceof n.RenderingCancelledException)){e.renderingState=i.RenderingStates.FINISHED;e._convertCanvasToImage(o);if(t)throw t}},{ctx:r,canvas:o,transform:a}=this._getPageDrawContext(2),s={canvasContext:r,transform:a,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,background:PDFViewerApplicationOptions.get("pdfBackgroundColor")},l=this.renderTask=t.render(s);l.onContinue=e=>{if(this.renderingQueue.isHighestPriority(this))e();else{this.renderingState=i.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=i.RenderingStates.RUNNING;e()}}};const c=l.promise.then((function(){return finishRenderTask(null)}),(function(e){return finishRenderTask(e)}));c.finally((()=>{o.width=0;o.height=0;if(!this.linkService.isPageCached(this.id)){var e;null===(e=this.pdfPage)||void 0===e||e.cleanup()}}));return c}setImage(e){if(this._checkSetImageDisabled())return;if(this.renderingState!==i.RenderingStates.INITIAL)return;const{canvas:t,pdfPage:r}=e;if(t){this.pdfPage||this.setPdfPage(r);this.renderingState=i.RenderingStates.FINISHED;this._convertCanvasToImage(t)}}_reduceImage(e){const{ctx:t,canvas:r}=this._getPageDrawContext();if(e.width<=2*r.width){t.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height);return r}let i=r.width<<3,n=r.height<<3;const[o,a]=TempImageFactory.getCanvas(i,n);for(;i>e.width||n>e.height;){i>>=1;n>>=1}a.drawImage(e,0,0,e.width,e.height,0,0,i,n);for(;i>2*r.width;){a.drawImage(o,0,0,i,n,0,0,i>>1,n>>1);i>>=1;n>>=1}t.drawImage(o,0,0,i,n,0,0,r.width,r.height);return r}get _thumbPageTitle(){var e;return this.l10n.get("thumb_page_title",{page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})}get _thumbPageCanvas(){var e;return this.l10n.get("thumb_page_canvas",{page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})}setPageLabel(e){this.pageLabel="string"==typeof e?e:null;this._thumbPageTitle.then((e=>{this.anchor.title=e}));this.renderingState===i.RenderingStates.FINISHED&&this._thumbPageCanvas.then((e=>{var t;null===(t=this.image)||void 0===t||t.setAttribute("aria-label",e)}))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFViewer=t.PDFSinglePageViewer=void 0;var i=r(162),n=r(193);class PDFViewer extends n.BaseViewer{}t.PDFViewer=PDFViewer;class PDFSinglePageViewer extends n.BaseViewer{_resetView(){super._resetView();this._scrollMode=i.ScrollMode.PAGE;this._spreadMode=i.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}t.PDFSinglePageViewer=PDFSinglePageViewer},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PagesCountLimit=t.PDFPageViewBuffer=t.BaseViewer=void 0;r(1);r(92);var i=r(165),n=r(162),o=r(194),a=r(195),s=r(196),l=r(197),c=r(185),d=r(182),h=r(222),u=r(223),p=r(224),g=r(225);let f;function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateFieldInitSpec(e,t,r){_checkPrivateRedeclaration(e,t);t.set(e,r)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,r){!function _classApplyDescriptorSet(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_classExtractFieldDescriptor(e,t,"set"),r);return r}function _classExtractFieldDescriptor(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const m="enablePermissions",v={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:500};t.PagesCountLimit=v;var b=new WeakMap,w=new WeakMap,y=new WeakSet;f=Symbol.iterator;class PDFPageViewBuffer{constructor(e){_classPrivateMethodInitSpec(this,y);_classPrivateFieldInitSpec(this,b,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,w,{writable:!0,value:0});_classPrivateFieldSet(this,w,e)}push(e){const t=_classPrivateFieldGet(this,b);t.has(e)&&t.delete(e);t.add(e);t.size>_classPrivateFieldGet(this,w)&&_classPrivateMethodGet(this,y,_destroyFirstView2).call(this)}resize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,w,e);const r=_classPrivateFieldGet(this,b);if(t){const e=r.size;let i=1;for(const n of r){if(t.has(n.id)){r.delete(n);r.add(n)}if(++i>e)break}}for(;r.size>_classPrivateFieldGet(this,w);)_classPrivateMethodGet(this,y,_destroyFirstView2).call(this)}has(e){return _classPrivateFieldGet(this,b).has(e)}[f](){return _classPrivateFieldGet(this,b).keys()}}t.PDFPageViewBuffer=PDFPageViewBuffer;function _destroyFirstView2(){const e=_classPrivateFieldGet(this,b).keys().next().value;null==e||e.destroy();_classPrivateFieldGet(this,b).delete(e)}var _=new WeakMap,S=new WeakMap,P=new WeakMap,C=new WeakMap,R=new WeakMap,E=new WeakMap,x=new WeakSet,T=new WeakSet,I=new WeakSet,L=new WeakSet,A=new WeakSet,D=new WeakSet,B=new WeakSet;class BaseViewer{constructor(e){var t,r,o,s;_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,A);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,T);_classPrivateMethodInitSpec(this,x);_classPrivateFieldInitSpec(this,_,{writable:!0,value:null});_classPrivateFieldInitSpec(this,S,{writable:!0,value:i.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,P,{writable:!0,value:null});_classPrivateFieldInitSpec(this,C,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,R,{writable:!0,value:0});_classPrivateFieldInitSpec(this,E,{writable:!0,value:null});if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");const l="2.12.558";if(i.version!==l)throw new Error('The API version "'.concat(i.version,'" does not match the Viewer version "').concat(l,'".'));this.container=e.container;this.viewer=e.viewer||e.container.firstElementChild;this.pageViewMode=e.pageViewMode||"multiple";if("DIV"!==(null===(t=this.container)||void 0===t?void 0:t.tagName.toUpperCase())||"DIV"!==(null===(r=this.viewer)||void 0===r?void 0:r.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=e.eventBus;this.linkService=e.linkService||new d.SimpleLinkService;this.downloadManager=e.downloadManager||null;this.findController=e.findController||null;this._scriptingManager=e.scriptingManager||null;this.removePageBorders=e.removePageBorders||!1;this.textLayerMode=null!==(o=e.textLayerMode)&&void 0!==o?o:n.TextLayerMode.ENABLE;_classPrivateFieldSet(this,S,null!==(s=e.annotationMode)&&void 0!==s?s:i.AnnotationMode.ENABLE_FORMS);this.imageResourcesPath=e.imageResourcesPath||"";this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1;this.renderer=e.renderer||n.RendererType.CANVAS;this.useOnlyCssZoom=e.useOnlyCssZoom||!1;this.maxCanvasPixels=e.maxCanvasPixels;this.l10n=e.l10n||a.NullL10n;_classPrivateFieldSet(this,C,e.enablePermissions||!1);this.defaultRenderingQueue=!e.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new c.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=e.renderingQueue;this._doc=document.documentElement;this.scroll=(0,n.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=n.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");Promise.resolve().then((()=>{this.eventBus.dispatch("baseviewerinit",{source:this})}))}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(e){return null==e?void 0:e.pdfPage}))}get renderForms(){return _classPrivateFieldGet(this,S)===i.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");if(!this.pdfDocument)return;const t=Math.abs(this._currentPageNumber-e)<2;this._setCurrentPageNumber(e,!0)||Window.ngxConsole.error('currentPageNumber: "'.concat(e,'" is not a valid page.'));if(this.pageFlip)if(t){Window.ngxConsole.log("Flip");this.pageFlip.flip(e-1)}else{Window.ngxConsole.log("turn to page");this.pageFlip.turnToPage(e-1)}}hidePagesDependingOnpageViewMode(){"book"===this.pageViewMode&&(this.pageFlip||setTimeout((()=>{if(!this.pageFlip){const e=this._pages[0].div,t=e.parentElement,r=t.parentElement;r.style.width=2*e.clientWidth+"px";r.style.overflow="hidden";r.style.marginLeft="auto";r.style.marginRight="auto";this.pageFlip=new s.PageFlip(t,{width:e.clientWidth,height:e.clientHeight,showCover:!0,size:"fixed"});this.pageFlip.loadFromHTML(document.querySelectorAll(".page"));this.ensureAdjecentPagesAreLoaded();this.pageFlip.on("flip",(e=>{this._currentPageNumber!==e.data+1&&this._setCurrentPageNumber(e.data+1,!1)}))}}),100))}_setCurrentPageNumber(e){var t,r;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===e){i&&this._resetCurrentPageView();return!0}if(!(0<e&&e<=this.pagesCount))return!1;const n=this._currentPageNumber;this._currentPageNumber=e;this.hidePagesDependingOnpageViewMode();if("book"===this.pageViewMode||"infinite-scroll"===this.pageViewMode){const e=this._pages[this.currentPageNumber-1];if(e.div.parentElement.classList.contains("spread"))e.div.parentElement.childNodes.forEach((e=>{const t=Number(e.getAttribute("data-page-number")),r=this._pages[t-1];_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,r).then((()=>{this.renderingQueue.renderView(r)}));e.style.display="inline-block"}));else{_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,e).then((()=>{this.renderingQueue.renderView(e)}));"book"===this.pageViewMode&&this.ensureAdjecentPagesAreLoaded()}}this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[e-1])&&void 0!==t?t:null,previous:n});i&&this._resetCurrentPageView();return!0}addPageToRenderQueue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>=0&&e<=this._pages.length-1){const t=this._pages[e];if(t.div.querySelector(".loadingIcon")){_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}));return!0}}return!1}ensureAdjecentPagesAreLoaded(){if(!window.adjacentPagesLoader){window.adjacentPagesLoader=e=>{Window.ngxConsole.log("rendered",e);let t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber)];if(t){let e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+1)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 1 page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+2)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 2 page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+3)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 3 page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.max(0,this.currentPageNumber-1)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the current page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.max(0,this.currentPageNumber-2)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the previous page");_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else Window.ngxConsole.log("Finished preloading the pages")}}}}}}};this.eventBus._on("pagerendered",window.adjacentPagesLoader)}window.adjacentPagesLoader()}get currentPageLabel(){var e,t;return null!==(e=null===(t=this._pageLabels)||void 0===t?void 0:t[this._currentPageNumber-1])&&void 0!==e?e:null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const r=this._pageLabels.indexOf(e);r>=0&&(t=r+1)}this._setCurrentPageNumber(t,!0)||Window.ngxConsole.error('currentPageLabel: "'.concat(e,'" is not a valid page.'))}get currentScale(){return this._currentScale!==n.UNKNOWN_SCALE?this._currentScale:n.DEFAULT_SCALE}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(e,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this._setScale(e,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,n.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;(e%=360)<0&&(e+=360);if(this._pagesRotation===e)return;this._pagesRotation=e;const t=this._currentPageNumber,r={rotation:e};for(const e of this._pages)e.update(r);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0);this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t});this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(e){if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();this.findController&&this.findController.setDocument(null);this._scriptingManager&&this._scriptingManager.setDocument(null)}this.pdfDocument=e;if(!e)return;const t=e.isPureXfa,r=e.numPages,o=e.getPage(1),a=e.getOptionalContentConfig(),s=_classPrivateFieldGet(this,C)?e.getPermissions():Promise.resolve();if(r>v.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const e=this._scrollMode=n.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:r})}),(()=>{}));this._onBeforeDraw=e=>{const t=this._pages[e.pageNumber-1];t&&_classPrivateFieldGet(this,_).push(t)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=e=>{if(!e.cssTransform&&!this._onePageRenderedCapability.settled){this._onePageRenderedCapability.resolve({timestamp:e.timestamp});this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([o,s]).then((o=>{let[s,c]=o;if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(s);this._optionalContentConfigPromise=a;_classPrivateMethodGet(this,x,_initializePermissions2).call(this,c);const d=this._scrollMode===n.ScrollMode.PAGE?null:this.viewer,h=this.currentScale,u=s.getViewport({scale:h*i.PixelsPerInch.PDF_TO_CSS_UNITS}),p=this.textLayerMode===n.TextLayerMode.DISABLE||t?null:this,g=_classPrivateFieldGet(this,S)!==i.AnnotationMode.DISABLE?this:null,f=t?this:null;for(let e=1;e<=r;++e){const t=new l.PDFPageView({container:d,eventBus:this.eventBus,id:e,scale:h,defaultViewport:u.clone(),optionalContentConfigPromise:a,renderingQueue:this.renderingQueue,textLayerFactory:p,textLayerMode:this.textLayerMode,annotationLayerFactory:g,annotationMode:_classPrivateFieldGet(this,S),xfaLayerFactory:f,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,removePageBorders:this.removePageBorders,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,l10n:this.l10n});this._pages.push(t)}const m=this._pages[0];if(m){m.setPdfPage(s);this.linkService.cachePageRef(1,s.ref)}this._scrollMode===n.ScrollMode.PAGE?_classPrivateMethodGet(this,I,_ensurePageViewVisible2).call(this):this._spreadMode!==n.SpreadMode.NONE&&this._updateSpreadMode();_classPrivateMethodGet(this,T,_onePageRenderedOrForceFetch2).call(this).then((async()=>{this.findController&&this.findController.setDocument(e);this._scriptingManager&&this._scriptingManager.setDocument(e);if(e.loadingParams.disableAutoFetch||r>v.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let t=r-1;if(t<=0)this._pagesCapability.resolve();else for(let i=2;i<=r;++i){const r=e.getPage(i).then((e=>{const r=this._pages[i-1];r.pdfPage||r.setPdfPage(e);this.linkService.cachePageRef(i,e.ref);0==--t&&this._pagesCapability.resolve()}),(e=>{Window.ngxConsole.error("Unable to get page ".concat(i," to initialize viewer"),e);0==--t&&this._pagesCapability.resolve()}));i%v.PAUSE_EAGER_PAGE_INIT==0&&await r}}));this.hidePagesDependingOnpageViewMode();this.eventBus.dispatch("pagesinit",{source:this});e.getMetadata().then((t=>{let{info:r}=t;e===this.pdfDocument&&r.Language&&(this.viewer.lang=r.Language)}));this.defaultRenderingQueue&&this.update()})).catch((e=>{Window.ngxConsole.error("Unable to initialize viewer",e);this._pagesCapability.reject(e)}))}setPageLabels(e){if(this.pdfDocument){if(e)if(Array.isArray(e)&&this.pdfDocument.numPages===e.length)this._pageLabels=e;else{this._pageLabels=null;Window.ngxConsole.error("setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(let e=0,i=this._pages.length;e<i;e++){var t,r;this._pages[e].setPageLabel(null!==(t=null===(r=this._pageLabels)||void 0===r?void 0:r[e])&&void 0!==t?t:null)}}}_resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=n.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;const e=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10;_classPrivateFieldSet(this,_,new PDFPageViewBuffer(e));this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,i.createPromiseCapability)();this._onePageRenderedCapability=(0,i.createPromiseCapability)();this._pagesCapability=(0,i.createPromiseCapability)();this._scrollMode=n.ScrollMode.VERTICAL;this._previousScrollMode=n.ScrollMode.UNKNOWN;this._spreadMode=n.SpreadMode.NONE;_classPrivateFieldSet(this,E,{previousPageNumber:1,scrollDown:!0,pages:[]});if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(m);if(null!==_classPrivateFieldGet(this,P)){_classPrivateFieldSet(this,S,_classPrivateFieldGet(this,P));_classPrivateFieldSet(this,P,null)}}_scrollUpdate(){0!==this.pagesCount&&this.update()}_scrollIntoView(e){let{pageDiv:t,pageSpot:r=null,pageNumber:i=null}=e;if(this._scrollMode===n.ScrollMode.PAGE){i&&this._setCurrentPageNumber(i);_classPrivateMethodGet(this,I,_ensurePageViewVisible2).call(this);this.update()}if(!r&&!this.isInPresentationMode){const e=t.offsetLeft+t.clientLeft,i=e+t.clientWidth,{scrollLeft:o,clientWidth:a}=this.container;(this._scrollMode===n.ScrollMode.HORIZONTAL||e<o||i>o+a)&&(r={left:0,top:0})}(0,n.scrollIntoView)(t,r,!1,"infinite-scroll"===this.pageViewMode)}_setScaleUpdatePages(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._currentScaleValue=t.toString();if(_classPrivateMethodGet(this,L,_isSameScale2).call(this,e)){n&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t});return}this._doc.style.setProperty("--zoom-factor",e);this._doc.style.setProperty("--viewport-scale-factor",e*i.PixelsPerInch.PDF_TO_CSS_UNITS);const o={scale:e};for(const e of this._pages)e.update(o);this._currentScale=e;if(!r){let e,t=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){t=this._location.pageNumber;e=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:t,destArray:e,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:n?t:void 0});this.defaultRenderingQueue&&this.update();_classPrivateFieldSet(this,R,this.container.clientHeight)}get _pageWidthScaleFactor(){return this._spreadMode!==n.SpreadMode.NONE&&this._scrollMode!==n.ScrollMode.HORIZONTAL?2:1}_setScale(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===e&&(e="auto");let r=parseFloat(e);if(r>0)this._setScaleUpdatePages(r,e,t,!1);else{const i=this._pages[this._currentPageNumber-1];if(!i)return;let o=n.SCROLLBAR_PADDING,a=n.VERTICAL_PADDING;this.isInPresentationMode?o=a=4:this.removePageBorders&&(o=a=0);this._scrollMode===n.ScrollMode.HORIZONTAL&&([o,a]=[a,o]);const s=(this.container.clientWidth-o)/i.width*i.scale/this._pageWidthScaleFactor,l=(this.container.clientHeight-a)/i.height*i.scale;switch(e){case"page-actual":r=1;break;case"page-width":r=s;break;case"page-height":r=l;break;case"page-fit":r=Math.min(s,l);break;case"auto":const t=(0,n.isPortraitOrientation)(i)?s:Math.min(l,s);r=Math.min(n.MAX_AUTO_SCALE,t);break;default:Window.ngxConsole.error('_setScale: "'.concat(e,'" is an unknown zoom value.'));return}this._setScaleUpdatePages(r,e,t,!0)}}_resetCurrentPageView(){this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);const e=this._pages[this._currentPageNumber-1];this._scrollIntoView({pageDiv:e.div})}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView(e){let{pageNumber:t,destArray:r=null,allowNegativeOffset:o=!1,ignoreDestinationZoom:a=!1}=e;if(!this.pdfDocument)return;const s=Number.isInteger(t)&&this._pages[t-1];if(!s){Window.ngxConsole.error('scrollPageIntoView: "'.concat(t,'" is not a valid pageNumber parameter.'));return}if(this.isInPresentationMode||!r){this._setCurrentPageNumber(t,!0);return}let l,c,d=0,h=0,u=0,p=0;const g=s.rotation%180!=0,f=(g?s.height:s.width)/s.scale/i.PixelsPerInch.PDF_TO_CSS_UNITS,m=(g?s.width:s.height)/s.scale/i.PixelsPerInch.PDF_TO_CSS_UNITS;let v=0;switch(r[1].name){case"XYZ":d=r[2];h=r[3];v=r[4];d=null!==d?d:0;h=null!==h?h:m;break;case"Fit":case"FitB":v="page-fit";break;case"FitH":case"FitBH":h=r[2];v="page-width";if(null===h&&this._location){d=this._location.left;h=this._location.top}else("number"!=typeof h||h<0)&&(h=m);break;case"FitV":case"FitBV":d=r[2];u=f;p=m;v="page-height";break;case"FitR":d=r[2];h=r[3];u=r[4]-d;p=r[5]-h;const e=this.removePageBorders?0:n.SCROLLBAR_PADDING,t=this.removePageBorders?0:n.VERTICAL_PADDING;l=(this.container.clientWidth-e)/u/i.PixelsPerInch.PDF_TO_CSS_UNITS;c=(this.container.clientHeight-t)/p/i.PixelsPerInch.PDF_TO_CSS_UNITS;v=Math.min(Math.abs(l),Math.abs(c));break;default:Window.ngxConsole.error('scrollPageIntoView: "'.concat(r[1].name,'" is not a valid destination type.'));return}a||(v&&v!==this._currentScale?this.currentScaleValue=v:this._currentScale===n.UNKNOWN_SCALE&&(this.currentScaleValue=n.DEFAULT_SCALE_VALUE));_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,s).then((()=>{this.renderingQueue.renderView(s);"single"===this.pageViewMode&&this.currentPageNumber!==t&&(this.currentPageNumber=t)}));if("page-fit"===v&&!r[4]){this._scrollIntoView({pageDiv:s.div,pageNumber:t});return}const b=[s.viewport.convertToViewportPoint(d,h),s.viewport.convertToViewportPoint(d+u,h+p)];let w=Math.min(b[0][0],b[1][0]),y=Math.min(b[0][1],b[1][1]);if(!o){w=Math.max(w,0);y=Math.max(y,0)}this._scrollIntoView({pageDiv:s.div,pageSpot:{left:w,top:y},pageNumber:t})}_updateLocation(e){const t=this._currentScale,r=this._currentScaleValue,i=parseFloat(r)===t?Math.round(1e4*t)/100:r,n=e.id;let o="#page="+n;o+="&zoom="+i;const a=this._pages[n-1],s=this.container,l=a.getPagePoint(s.scrollLeft-e.x,s.scrollTop-e.y),c=Math.round(l[0]),d=Math.round(l[1]);o+=","+c+","+d;this._location={pageNumber:n,scale:i,top:d,left:c,rotation:this._pagesRotation,pdfOpenParams:o}}update(){this.scrollMode===n.ScrollMode.PAGE?this.viewer.classList.add("singlePageView"):this.viewer.classList.remove("singlePageView");const e=this._getVisiblePages(),t=e.views,r=t.length;if(0===r)return;const i=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10,o=Math.max(i,2*r+1);_classPrivateFieldGet(this,_).resize(o,e.ids);this.renderingQueue.renderHighestPriority(e);if(!this.isInPresentationMode){const e=this._spreadMode===n.SpreadMode.NONE&&(this._scrollMode===n.ScrollMode.PAGE||this._scrollMode===n.ScrollMode.VERTICAL);let r=this._currentPageNumber,i=!1;for(const n of t){if(n.percent<100)break;if(n.id===r&&e){i=!0;break}}i||(r=t[0].id);this._setCurrentPageNumber(r)}this._updateLocation(e.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location});this.hidePagesDependingOnpageViewMode()}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===n.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===n.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getCurrentVisiblePage(){if(!this.pagesCount)return{views:[]};const e=this._pages[this._currentPageNumber-1],t=e.div,r={id:e.id,x:t.offsetLeft+t.clientLeft,y:t.offsetTop+t.clientTop,view:e};return{first:r,last:r,views:[r],ids:new Set([e.id])}}_getVisiblePages(){if(this.isInPresentationMode)return this._getCurrentVisiblePage();const e=this._scrollMode===n.ScrollMode.PAGE?_classPrivateFieldGet(this,E).pages:this._pages,t=this._scrollMode===n.ScrollMode.HORIZONTAL,r=t&&this._isContainerRtl;return(0,n.getVisibleElements)({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:r})}isPageVisible(e){if(!this.pdfDocument)return!1;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){Window.ngxConsole.error('isPageVisible: "'.concat(e,'" is not a valid page.'));return!1}return this._getVisiblePages().ids.has(e)}isPageCached(e){if(!this.pdfDocument)return!1;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){Window.ngxConsole.error('isPageCached: "'.concat(e,'" is not a valid page.'));return!1}const t=this._pages[e-1];return _classPrivateFieldGet(this,_).has(t)}cleanup(){for(let e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].renderingState!==n.RenderingStates.FINISHED&&this._pages[e].reset()}_cancelRendering(){for(let e=0,t=this._pages.length;e<t;e++)this._pages[e]&&this._pages[e].cancelRendering()}forceRendering(e){const t=e||this._getVisiblePages(),r=_classPrivateMethodGet(this,D,_getScrollAhead2).call(this,t),i=this._spreadMode!==n.SpreadMode.NONE&&this._scrollMode!==n.ScrollMode.HORIZONTAL,o=this.renderingQueue.getHighestPriority(t,this._pages,r,i);_classPrivateMethodGet(this,B,_toggleLoadingIconSpinner2).call(this,t.ids);if(o){_classPrivateMethodGet(this,A,_ensurePdfPageLoaded2).call(this,o).then((()=>{this.renderingQueue.renderView(o)}));return!0}return!1}createTextLayerBuilder(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return new p.TextLayerBuilder({textLayerDiv:e,eventBus:n,pageIndex:t,viewport:r,enhanceTextSelection:!this.isInPresentationMode&&i,highlighter:o})}createTextHighlighter(e,t){return new u.TextHighlighter({eventBus:t,pageIndex:e,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(e,t){var r,i,n,s;let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",d=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.NullL10n,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,m=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null;return new o.AnnotationLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:l||(null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage),imageResourcesPath:c,renderForms:d,linkService:this.linkService,downloadManager:this.downloadManager,l10n:h,enableScripting:null!=u?u:this.enableScripting,hasJSActionsPromise:p||(null===(i=this.pdfDocument)||void 0===i?void 0:i.hasJSActions()),fieldObjectsPromise:f||(null===(n=this.pdfDocument)||void 0===n?void 0:n.getFieldObjects()),mouseState:g||(null===(s=this._scriptingManager)||void 0===s?void 0:s.mouseState),annotationCanvasMap:m})}createXfaLayerBuilder(e,t){var r;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new g.XfaLayerBuilder({pageDiv:e,pdfPage:t,annotationStorage:i||(null===(r=this.pdfDocument)||void 0===r?void 0:r.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(e){return new h.StructTreeLayerBuilder({pdfPage:e})}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,r=this._pages.length;t<r;++t){const r=this._pages[t];if(r.width!==e.width||r.height!==e.height)return!1}return!0}getPagesOverview(){return this._pages.map((e=>{const t=e.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,n.isPortraitOrientation)(t)?{width:t.width,height:t.height,rotation:t.rotation}:{width:t.height,height:t.width,rotation:(t.rotation-90)%360}}))}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error("Invalid optionalContentConfigPromise: ".concat(e));if(!this.pdfDocument)return;if(!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=e;const t={optionalContentConfigPromise:e};for(const e of this._pages)e.update(t);this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!(0,n.isValidScrollMode)(e))throw new Error("Invalid scroll mode: ".concat(e));if(!(this.pagesCount>v.FORCE_SCROLL_MODE_PAGE)){this._previousScrollMode=this._scrollMode;this._scrollMode=e;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e});this._updateScrollMode(this._currentPageNumber)}}}_updateScrollMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this._scrollMode,r=this.viewer;r.classList.toggle("scrollHorizontal",t===n.ScrollMode.HORIZONTAL);r.classList.toggle("scrollWrapped",t===n.ScrollMode.WRAPPED);if(this.pdfDocument&&e){t===n.ScrollMode.PAGE?_classPrivateMethodGet(this,I,_ensurePageViewVisible2).call(this):this._previousScrollMode===n.ScrollMode.PAGE&&this._updateSpreadMode();this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(e,!0);this.update()}}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!(0,n.isValidSpreadMode)(e))throw new Error("Invalid spread mode: ".concat(e));this._spreadMode=e;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e});this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.pdfDocument)return;const t=this.viewer,r=this._pages;if(this._scrollMode===n.ScrollMode.PAGE)_classPrivateMethodGet(this,I,_ensurePageViewVisible2).call(this);else{t.textContent="";if(this._spreadMode===n.SpreadMode.NONE)for(let e=0,i=r.length;e<i;++e)t.appendChild(r[e].div);else{const e=this._spreadMode-1;let i=null;for(let n=0,o=r.length;n<o;++n){if(null===i){i=document.createElement("div");i.className="spread";t.appendChild(i)}else if(n%2===e){i=i.cloneNode(!1);t.appendChild(i)}i.appendChild(r[n].div)}}}this.hidePagesDependingOnpageViewMode();if(e){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(e,!0);this.update()}}_getPageAdvance(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case n.ScrollMode.WRAPPED:{const{views:r}=this._getVisiblePages(),i=new Map;for(const{id:e,y:t,percent:n,widthPercent:o}of r){if(0===n||o<100)continue;let r=i.get(t);r||i.set(t,r||(r=[]));r.push(e)}for(const r of i.values()){const i=r.indexOf(e);if(-1===i)continue;const n=r.length;if(1===n)break;if(t)for(let t=i-1,n=0;t>=n;t--){const i=r[t],n=r[t+1]-1;if(i<n)return e-n}else for(let t=i+1,o=n;t<o;t++){const i=r[t],n=r[t-1]+1;if(i>n)return n-e}if(t){const t=r[0];if(t<e)return e-t+1}else{const t=r[n-1];if(t>e)return t-e+1}break}break}case n.ScrollMode.HORIZONTAL:break;case n.ScrollMode.PAGE:case n.ScrollMode.VERTICAL:{if(this._spreadMode===n.SpreadMode.NONE)break;const r=this._spreadMode-1;if(t&&e%2!==r)break;if(!t&&e%2===r)break;const{views:i}=this._getVisiblePages(),o=t?e-1:e+1;for(const{id:e,percent:t,widthPercent:r}of i)if(e===o){if(t>0&&100===r)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const r=this._getPageAdvance(e,!1)||1;this.currentPageNumber=Math.min(e+r,t);return!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;this.currentPageNumber=Math.max(e-t,1);return!0}increaseScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._currentScale,r=Number(PDFViewerApplicationOptions.get("maxZoom"));r||(r=n.MAX_SCALE);do{t=(t*n.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.ceil(10*t)/10;t=Math.min(r,t)}while(--e>0&&t<r);this.currentScaleValue=t}decreaseScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._currentScale,r=Number(PDFViewerApplicationOptions.get("minZoom"));r||(r=n.MIN_SCALE);do{t=(t/n.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.floor(10*t)/10;t=Math.max(r,t)}while(--e>0&&t>r);this.currentScaleValue=t}}t.BaseViewer=BaseViewer;function _initializePermissions2(e){if(e){e.includes(i.PermissionFlag.COPY)||this.viewer.classList.add(m);if(!e.includes(i.PermissionFlag.MODIFY_ANNOTATIONS)&&!e.includes(i.PermissionFlag.FILL_INTERACTIVE_FORMS)&&_classPrivateFieldGet(this,S)===i.AnnotationMode.ENABLE_FORMS){_classPrivateFieldSet(this,P,_classPrivateFieldGet(this,S));_classPrivateFieldSet(this,S,i.AnnotationMode.ENABLE)}}}function _onePageRenderedOrForceFetch2(){return this.container.offsetParent&&0!==this._getVisiblePages().views.length?this._onePageRenderedCapability.promise:Promise.resolve()}function _ensurePageViewVisible2(){if(this._scrollMode!==n.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=_classPrivateFieldGet(this,E),r=this.viewer;r.textContent="";t.pages.length=0;if(this._spreadMode===n.SpreadMode.NONE){const i=this._pages[e-1];if(this.isInPresentationMode){const e=document.createElement("div");e.className="spread";const t=document.createElement("div");t.className="dummyPage";t.style.height="".concat(this.container.clientHeight,"px");e.appendChild(t);e.appendChild(i.div);r.appendChild(e)}else r.appendChild(i.div);t.pages.push(i)}else{const i=new Set,n=this._spreadMode-1;if(e%2!==n){i.add(e-1);i.add(e)}else{i.add(e-2);i.add(e-1)}let o=null;for(const e of i){const i=this._pages[e];if(i){if(null===o){o=document.createElement("div");o.className="spread";r.appendChild(o)}else if(e%2===n){o=o.cloneNode(!1);r.appendChild(o)}o.appendChild(i.div);t.pages.push(i)}}}t.scrollDown=e>=t.previousPageNumber;t.previousPageNumber=e}function _isSameScale2(e){return(!this.isInPresentationMode||this.container.clientHeight===_classPrivateFieldGet(this,R))&&(e===this._currentScale||Math.abs(e-this._currentScale)<1e-15)}async function _ensurePdfPageLoaded2(e){if(e.pdfPage)return e.pdfPage;try{const t=await this.pdfDocument.getPage(e.id);e.pdfPage||e.setPdfPage(t);this.linkService._cachedPageNumber(t.ref)||this.linkService.cachePageRef(e.id,t.ref);return t}catch(e){Window.ngxConsole.error("Unable to get page for page view",e);return null}}function _getScrollAhead2(e){var t,r;if(1===(null===(t=e.first)||void 0===t?void 0:t.id))return!0;if((null===(r=e.last)||void 0===r?void 0:r.id)===this.pagesCount)return!1;switch(this._scrollMode){case n.ScrollMode.PAGE:return _classPrivateFieldGet(this,E).scrollDown;case n.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(e){for(const t of e){const e=this._pages[t-1];null==e||e.toggleLoadingIconSpinner(!0)}for(const t of _classPrivateFieldGet(this,_))e.has(t.id)||t.toggleLoadingIconSpinner(!1)}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationLayerBuilder=void 0;r(92);r(1);var i=r(165),n=r(195);t.AnnotationLayerBuilder=class AnnotationLayerBuilder{constructor(e){let{pageDiv:t,pdfPage:r,linkService:i,downloadManager:o,annotationStorage:a=null,imageResourcesPath:s="",renderForms:l=!0,l10n:c=n.NullL10n,enableScripting:d=!1,hasJSActionsPromise:h=null,fieldObjectsPromise:u=null,mouseState:p=null,annotationCanvasMap:g=null}=e;this.pageDiv=t;this.pdfPage=r;this.linkService=i;this.downloadManager=o;this.imageResourcesPath=s;this.renderForms=l;this.l10n=c;this.annotationStorage=a;this.enableScripting=d;this._hasJSActionsPromise=h;this._fieldObjectsPromise=u;this._mouseState=p;this._annotationCanvasMap=g;this.div=null;this._cancelled=!1}async render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";const[r,n=!1,o=null]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||0===r.length)return;const a={viewport:e.clone({dontFlip:!0}),div:this.div,annotations:r,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:n,fieldObjects:o,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap};if(this.div)i.AnnotationLayer.update(a);else{this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.appendChild(this.div);a.div=this.div;i.AnnotationLayer.render(a);this.l10n.translate(this.div)}}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NullL10n=void 0;t.fixupLangCode=function fixupLangCode(e){return n[null==e?void 0:e.toLowerCase()]||e};t.getL10nFallback=getL10nFallback;r(82);r(122);r(92);const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} Ã {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} Ã {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loadingâ¦",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function getL10nFallback(e,t){switch(e){case"find_match_count":e="find_match_count[".concat(1===t.total?"one":"other","]");break;case"find_match_count_limit":e="find_match_count_limit[".concat(1===t.limit?"one":"other","]")}return i[e]||""}const n={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};const o={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function formatL10nValue(e,t){return t?e.replace(/\{\{\s*(\w+)\s*\}\}/g,((e,r)=>r in t?t[r]:"{{"+r+"}}")):e}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:getL10nFallback(e,t),t)},async translate(e){}};t.NullL10n=o},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PageFlip=void 0;r(1);r(175);r(82);class Page{constructor(e,t){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0};this.createdDensity=t;this.nowDrawingDensity=this.createdDensity;this.render=e}setDensity(e){this.createdDensity=e;this.nowDrawingDensity=e}setDrawingDensity(e){this.nowDrawingDensity=e}setPosition(e){this.state.position=e}setAngle(e){this.state.angle=e}setArea(e){this.state.area=e}setHardDrawingAngle(e){this.state.hardDrawingAngle=e}setHardAngle(e){this.state.hardAngle=e;this.state.hardDrawingAngle=e}setOrientation(e){this.orientation=e}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class ImagePage extends Page{constructor(e,t,r){super(e,r);this.image=null;this.isLoad=!1;this.loadingAngle=0;this.image=new Image;this.image.src=t}draw(e){const t=this.render.getContext(),r=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,n=this.render.getRect().height;t.save();t.translate(r.x,r.y);t.beginPath();for(let e of this.state.area)if(null!==e){e=this.render.convertToGlobal(e);t.lineTo(e.x-r.x,e.y-r.y)}t.rotate(this.state.angle);t.clip();this.isLoad?t.drawImage(this.image,0,0,i,n):this.drawLoader(t,{x:0,y:0},i,n);t.restore()}simpleDraw(e){const t=this.render.getRect(),r=this.render.getContext(),i=t.pageWidth,n=t.height,o=1===e?t.left+t.pageWidth:t.left,a=t.top;this.isLoad?r.drawImage(this.image,o,a,i,n):this.drawLoader(r,{x:o,y:a},i,n)}drawLoader(e,t,r,i){e.beginPath();e.strokeStyle="rgb(200, 200, 200)";e.fillStyle="rgb(255, 255, 255)";e.lineWidth=1;e.rect(t.x+1,t.y+1,r-1,i-1);e.stroke();e.fill();const n={x:t.x+r/2,y:t.y+i/2};e.beginPath();e.lineWidth=10;e.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle);e.stroke();e.closePath();this.loadingAngle+=.07;this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class PageCollection{constructor(e,t){this.pages=[];this.currentPageIndex=0;this.currentSpreadIndex=0;this.landscapeSpread=[];this.portraitSpread=[];this.render=t;this.app=e;this.currentPageIndex=0;this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[];this.portraitSpread=[];for(let e=0;e<this.pages.length;e++)this.portraitSpread.push([e]);let e=0;if(this.isShowCover){this.pages[0].setDensity("hard");this.landscapeSpread.push([e]);e++}for(let t=e;t<this.pages.length;t+=2)if(t<this.pages.length-1)this.landscapeSpread.push([t,t+1]);else{this.landscapeSpread.push([t]);this.pages[t].setDensity("hard")}}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(e){const t=this.getSpread();for(let r=0;r<t.length;r++)if(e===t[r][0]||e===t[r][1])return r;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(e){if(e>=0&&e<this.pages.length)return this.pages[e];throw new Error("Invalid page number")}nextBy(e){const t=this.pages.indexOf(e);return t<this.pages.length-1?this.pages[t+1]:null}prevBy(e){const t=this.pages.indexOf(e);return t>0?this.pages[t-1]:null}getFlippingPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t].newTemporaryCopy():this.pages[t-1];{const r=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===r.length||0===e?this.pages[r[0]]:this.pages[r[1]]}}getBottomPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t+1]:this.pages[t-1];{const r=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===r.length?this.pages[r[0]]:0===e?this.pages[r[1]]:this.pages[r[0]]}}showNext(){if(this.currentSpreadIndex<this.getSpread().length){this.currentSpreadIndex++;this.showSpread()}}showPrev(){if(this.currentSpreadIndex>0){this.currentSpreadIndex--;this.showSpread()}}getCurrentPageIndex(){return this.currentPageIndex}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=this.currentPageIndex);if(e<0||e>=this.pages.length)return;const t=this.getSpreadIndexByPage(e);if(null!==t){this.currentSpreadIndex=t;this.showSpread()}}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(e){if(!(e>=0&&e<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=e}showSpread(){const e=this.getSpread()[this.currentSpreadIndex];if(2===e.length){this.render.setLeftPage(this.pages[e[0]]);this.render.setRightPage(this.pages[e[1]])}else if("landscape"===this.render.getOrientation())if(e[0]===this.pages.length-1){this.render.setLeftPage(this.pages[e[0]]);this.render.setRightPage(null)}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[e[0]])}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[e[0]])}this.currentPageIndex=e[0];this.app.updatePageIndex(this.currentPageIndex)}}class ImagePageCollection extends PageCollection{constructor(e,t,r){super(e,t);this.imagesHref=r}load(){for(const e of this.imagesHref){const t=new ImagePage(this.render,e,"soft");t.load();this.pages.push(t)}this.createSpread()}}class Helper{static GetDistanceBetweenTwoPoint(e,t){return null===e||null===t?1/0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static GetSegmentLength(e){return Helper.GetDistanceBetweenTwoPoint(e[0],e[1])}static GetAngleBetweenTwoLine(e,t){const r=e[0].y-e[1].y,i=t[0].y-t[1].y,n=e[1].x-e[0].x,o=t[1].x-t[0].x;return Math.acos((r*i+n*o)/(Math.sqrt(r*r+n*n)*Math.sqrt(i*i+o*o)))}static PointInRect(e,t){return null===t?null:t.x>=e.left&&t.x<=e.width+e.left&&t.y>=e.top&&t.y<=e.top+e.height?t:null}static GetRotatedPoint(e,t,r){return{x:e.x*Math.cos(r)+e.y*Math.sin(r)+t.x,y:e.y*Math.cos(r)-e.x*Math.sin(r)+t.y}}static LimitPointToCircle(e,t,r){if(Helper.GetDistanceBetweenTwoPoint(e,r)<=t)return r;const i=e.x,n=e.y,o=r.x,a=r.y;let s=Math.sqrt(Math.pow(t,2)*Math.pow(i-o,2)/(Math.pow(i-o,2)+Math.pow(n-a,2)))+i;r.x<0&&(s*=-1);let l=(s-i)*(n-a)/(i-o)+n;i-o+n===0&&(l=t);return{x:s,y:l}}static GetIntersectBetweenTwoSegment(e,t,r){return Helper.PointInRect(e,Helper.GetIntersectBeetwenTwoLine(t,r))}static GetIntersectBeetwenTwoLine(e,t){const r=e[0].y-e[1].y,i=t[0].y-t[1].y,n=e[1].x-e[0].x,o=t[1].x-t[0].x,a=e[0].x*e[1].y-e[1].x*e[0].y,s=t[0].x*t[1].y-t[1].x*t[0].y,l=r*s-i*a,c=n*s-o*a,d=-(a*o-s*n)/(r*o-i*n),h=-(r*s-i*a)/(r*o-i*n);if(isFinite(d)&&isFinite(h))return{x:d,y:h};if(Math.abs(l-c)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(e,t){const r=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y),n=Math.max(r,i),o=[e];function getCord(e,t,r,i,n){return t>e?e+n*(r/i):t<e?e-n*(r/i):e}for(let a=1;a<=n;a+=1)o.push({x:getCord(e.x,t.x,r,n,a),y:getCord(e.y,t.y,i,n,a)});return o}}class HTMLPage extends Page{constructor(e,t,r){super(e,r);this.copiedElement=null;this.temporaryCopy=null;this.isLoad=!1;this.element=t;this.element.classList.add("stf__item");this.element.classList.add("--"+r)}newTemporaryCopy(){if("hard"===this.nowDrawingDensity)return this;if(null===this.temporaryCopy){this.copiedElement=this.element.cloneNode(!0);this.element.parentElement.appendChild(this.copiedElement);this.temporaryCopy=new HTMLPage(this.render,this.copiedElement,this.nowDrawingDensity)}return this.getTemporaryCopy()}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){if(null!==this.temporaryCopy){this.copiedElement.remove();this.copiedElement=null;this.temporaryCopy=null}}draw(e){const t=e||this.nowDrawingDensity,r=this.render.convertToGlobal(this.state.position),i=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove("--simple");const o="\n            position: absolute;\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(i,"px;\n            height: ").concat(n,"px;\n        ");"hard"===t?this.drawHard(o):this.drawSoft(r,o)}drawHard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.render.getRect().left+this.render.getRect().width/2,r=this.state.hardDrawingAngle,i=e+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0;\n                   transform: translate3d(0, 0, 0) rotateY(").concat(r,"deg);"):"transform-origin: 0 0;\n                   transform: translate3d(".concat(t,"px, 0, 0) rotateY(").concat(r,"deg);"));this.element.style.cssText=i}drawSoft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="polygon( ";for(const e of this.state.area)if(null!==e){let t=1===this.render.getDirection()?{x:-e.x+this.state.position.x,y:e.y-this.state.position.y}:{x:e.x-this.state.position.x,y:e.y-this.state.position.y};t=Helper.GetRotatedPoint(t,{x:0,y:0},this.state.angle);r+=t.x+"px "+t.y+"px, "}r=r.slice(0,-2);r+=")";const i=t+"transform-origin: 0 0; clip-path: ".concat(r,"; -webkit-clip-path: ").concat(r,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(e.x,"px, ").concat(e.y,"px);"):"transform: translate3d(".concat(e.x,"px, ").concat(e.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=i}simpleDraw(e){const t=this.render.getRect(),r=t.pageWidth,i=t.height,n=1===e?t.left+t.pageWidth:t.left,o=t.top;this.element.classList.add("--simple");this.element.style.cssText="\n            position: absolute;\n            display: block;\n            height: ".concat(i,"px;\n            left: ").concat(n,"px;\n            top: ").concat(o,"px;\n            width: ").concat(r,"px;\n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(e){super.setOrientation(e);this.element.classList.remove("--left","--right");this.element.classList.add(1===e?"--right":"--left")}setDrawingDensity(e){this.element.classList.remove("--soft","--hard");this.element.classList.add("--"+e);super.setDrawingDensity(e)}}class HTMLPageCollection extends PageCollection{constructor(e,t,r,i){super(e,t);this.element=r;this.pagesElement=i}load(){for(const e of this.pagesElement){const t=new HTMLPage(this.render,e,"hard"===e.dataset.density?"hard":"soft");t.load();this.pages.push(t)}this.createSpread()}}class FlipCalculation{constructor(e,t,r,i){this.direction=e;this.corner=t;this.topIntersectPoint=null;this.sideIntersectPoint=null;this.bottomIntersectPoint=null;this.pageWidth=parseInt(r,10);this.pageHeight=parseInt(i,10)}calc(e){try{this.position=this.calcAngleAndPosition(e);this.calculateIntersectPoint(this.position);return!0}catch(e){return!1}}getFlippingClipArea(){const e=[];let t=!1;e.push(this.rect.topLeft);e.push(this.topIntersectPoint);if(null===this.sideIntersectPoint)t=!0;else{e.push(this.sideIntersectPoint);null===this.bottomIntersectPoint&&(t=!1)}e.push(this.bottomIntersectPoint);(t||"bottom"===this.corner)&&e.push(this.rect.bottomLeft);return e}getBottomClipArea(){const e=[];e.push(this.topIntersectPoint);if("top"===this.corner)e.push({x:this.pageWidth,y:0});else{null!==this.topIntersectPoint&&e.push({x:this.pageWidth,y:0});e.push({x:this.pageWidth,y:this.pageHeight})}null!==this.sideIntersectPoint?Helper.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&e.push(this.sideIntersectPoint):"top"===this.corner&&e.push({x:this.pageWidth,y:this.pageHeight});e.push(this.bottomIntersectPoint);e.push(this.topIntersectPoint);return e}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const e=Helper.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?e:Math.PI-e}calcAngleAndPosition(e){let t=e;this.updateAngleAndGeometry(t);t="top"===this.corner?this.checkPositionAtCenterLine(t,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(t,{x:0,y:this.pageHeight},{x:0,y:0});if(Math.abs(t.x-this.pageWidth)<1&&Math.abs(t.y)<1)throw new Error("Point is too small");return t}updateAngleAndGeometry(e){this.angle=this.calculateAngle(e);this.rect=this.getPageRect(e)}calculateAngle(e){const t=this.pageWidth-e.x+1,r="bottom"===this.corner?this.pageHeight-e.y:e.y;let i=2*Math.acos(t/Math.sqrt(r*r+t*t));r<0&&(i=-i);const n=Math.PI-i;if(!isFinite(i)||n>=0&&n<.003)throw new Error("The G point is too small");"bottom"===this.corner&&(i=-i);return i}getPageRect(e){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],e):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],e)}getRectFromBasePoint(e,t){return{topLeft:this.getRotatedPoint(e[0],t),topRight:this.getRotatedPoint(e[1],t),bottomLeft:this.getRotatedPoint(e[2],t),bottomRight:this.getRotatedPoint(e[3],t)}}getRotatedPoint(e,t){return{x:e.x*Math.cos(this.angle)+e.y*Math.sin(this.angle)+t.x,y:e.y*Math.cos(this.angle)-e.x*Math.sin(this.angle)+t.y}}calculateIntersectPoint(e){const t={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};if("top"===this.corner){this.topIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}else{this.topIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}}checkPositionAtCenterLine(e,t,r){let i=e;const n=Helper.LimitPointToCircle(t,this.pageWidth,i);if(i!==n){i=n;this.updateAngleAndGeometry(i)}const o=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let a=this.rect.bottomRight,s=this.rect.topLeft;if("bottom"===this.corner){a=this.rect.topRight;s=this.rect.bottomLeft}if(a.x<=0){const e=Helper.LimitPointToCircle(r,o,s);if(e!==i){i=e;this.updateAngleAndGeometry(i)}}return i}getSegmentToShadowLine(){const e=this.getShadowStartPoint();return[e,e!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class Flip{constructor(e,t){this.flippingPage=null;this.bottomPage=null;this.calc=null;this.state="read";this.render=e;this.app=t}fold(e){this.setState("user_fold");null===this.calc&&this.start(e);this.do(this.render.convertToPage(e))}flip(e){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(e))return;null!==this.calc&&this.render.finishAnimation();if(!this.start(e))return;const t=this.getBoundsRect();this.setState("flipping");const r=t.height/10,i="bottom"===this.calc.getCorner()?t.height-r:r,n="bottom"===this.calc.getCorner()?t.height:0;this.calc.calc({x:t.pageWidth-r,y:i});this.animateFlippingTo({x:t.pageWidth-r,y:i},{x:-t.pageWidth,y:n},!0)}start(e){this.reset();const t=this.render.convertToBook(e),r=this.getBoundsRect(),i=this.getDirectionByPoint(t),n=t.y>=r.height/2?"bottom":"top";if(!this.checkDirection(i))return!1;try{this.flippingPage=this.app.getPageCollection().getFlippingPage(i);this.bottomPage=this.app.getPageCollection().getBottomPage(i);if("landscape"===this.render.getOrientation())if(1===i){const e=this.app.getPageCollection().nextBy(this.flippingPage);if(null!==e&&this.flippingPage.getDensity()!==e.getDensity()){this.flippingPage.setDrawingDensity("hard");e.setDrawingDensity("hard")}}else{const e=this.app.getPageCollection().prevBy(this.flippingPage);if(null!==e&&this.flippingPage.getDensity()!==e.getDensity()){this.flippingPage.setDrawingDensity("hard");e.setDrawingDensity("hard")}}this.render.setDirection(i);this.calc=new FlipCalculation(i,n,r.pageWidth.toString(10),r.height.toString(10));return!0}catch(e){return!1}}do(e){if(null!==this.calc&&this.calc.calc(e)){const e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea());this.bottomPage.setPosition(this.calc.getBottomPagePosition());this.bottomPage.setAngle(0);this.bottomPage.setHardAngle(0);this.flippingPage.setArea(this.calc.getFlippingClipArea());this.flippingPage.setPosition(this.calc.getActiveCorner());this.flippingPage.setAngle(this.calc.getAngle());0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100);this.render.setPageRect(this.calc.getRect());this.render.setBottomPage(this.bottomPage);this.render.setFlippingPage(this.flippingPage);this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}flipToPage(e,t){const r=this.app.getPageCollection().getCurrentSpreadIndex(),i=this.app.getPageCollection().getSpreadIndexByPage(e);try{if(i>r){this.app.getPageCollection().setCurrentSpreadIndex(i-1);this.flipNext(t)}if(i<r){this.app.getPageCollection().setCurrentSpreadIndex(i+1);this.flipPrev(t)}}catch(e){}}flipNext(e){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===e?1:this.render.getRect().height-2})}flipPrev(e){this.flip({x:10,y:"top"===e?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const e=this.calc.getPosition(),t=this.getBoundsRect(),r="bottom"===this.calc.getCorner()?t.height:0;e.x<=0?this.animateFlippingTo(e,{x:-t.pageWidth,y:r},!0):this.animateFlippingTo(e,{x:t.pageWidth,y:r},!1)}showCorner(e){if(!this.checkState("read","fold_corner"))return;const t=this.getBoundsRect(),r=t.pageWidth;if(this.isPointOnCorners(e))if(null===this.calc){if(!this.start(e))return;this.setState("fold_corner");this.calc.calc({x:r-1,y:1});const i=50,n="bottom"===this.calc.getCorner()?t.height-1:1,o="bottom"===this.calc.getCorner()?t.height-i:i;this.animateFlippingTo({x:r-1,y:n},{x:r-i,y:o},!1,!1)}else this.do(this.render.convertToPage(e));else{this.setState("read");this.render.finishAnimation();this.stopMove()}}animateFlippingTo(e,t,r){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=Helper.GetCordsFromTwoPoint(e,t),o=[];for(const e of n)o.push((()=>this.do(e)));const a=this.getAnimationDuration(n.length);this.render.startAnimation(o,a,(()=>{if(this.calc){r&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage());if(i){this.render.setBottomPage(null);this.render.setFlippingPage(null);this.render.clearShadow();this.setState("read");this.reset()}}}))}getCalculation(){return this.calc}getState(){return this.state}setState(e){if(this.state!==e){this.app.updateState(e);this.state=e}}getDirectionByPoint(e){const t=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(e.x-t.pageWidth<=t.width/5)return 1}else if(e.x<t.width/2)return 1;return 0}getAnimationDuration(e){const t=this.app.getSettings().flippingTime;return e>=1e3?t:e/1e3*t}checkDirection(e){return 0===e?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null;this.flippingPage=null;this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(e){const t=this.getBoundsRect(),r=t.pageWidth,i=Math.sqrt(Math.pow(r,2)+Math.pow(t.height,2))/5,n=this.render.convertToBook(e);return n.x>0&&n.y>0&&n.x<t.width&&n.y<t.height&&(n.x<i||n.x>t.width-i)&&(n.y<i||n.y>t.height-i)}}class Render{constructor(e,t){this.leftPage=null;this.rightPage=null;this.flippingPage=null;this.bottomPage=null;this.direction=null;this.orientation=null;this.shadow=null;this.animation=null;this.pageRect=null;this.boundsRect=null;this.timer=0;this.safari=!1;this.setting=t;this.app=e;const r=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==r.exec(window.navigator.userAgent)}render(e){if(null!==this.animation){const t=Math.round((e-this.animation.startedAt)/this.animation.durationFrame);if(t<this.animation.frames.length)this.animation.frames[t]();else{this.animation.onAnimateEnd();this.animation=null}}this.timer=e;this.drawFrame()}start(){this.update();const loop=e=>{window.ngxZone.runOutsideAngular((()=>{this.render(e);requestAnimationFrame(loop)}))};window.ngxZone.runOutsideAngular((()=>{requestAnimationFrame(loop)}))}startAnimation(e,t,r){this.finishAnimation();this.animation={frames:e,duration:t,durationFrame:t/e.length,onAnimateEnd:r,startedAt:this.timer}}finishAnimation(){if(null!==this.animation){this.animation.frames[this.animation.frames.length-1]();null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()}this.animation=null}update(){this.boundsRect=null;const e=this.calculateBoundsRect();if(this.orientation!==e){this.orientation=e;this.app.updateOrientation(e)}}calculateBoundsRect(){let e="landscape";const t=this.getBlockWidth(),r=t/2,i=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let o=this.setting.width,a=this.setting.height,s=r-o;if("stretch"===this.setting.size){t<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(e="portrait");o="portrait"===e?this.getBlockWidth():this.getBlockWidth()/2;o>this.setting.maxWidth&&(o=this.setting.maxWidth);a=o/n;if(a>this.getBlockHeight()){a=this.getBlockHeight();o=a*n}s="portrait"===e?r-o/2-o:r-o}else if(t<2*o&&this.app.getSettings().usePortrait){e="portrait";s=r-o/2-o}this.boundsRect={left:s,top:i-a/2,width:2*o,height:a,pageWidth:o};return e}setShadowData(e,t,r,i){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:e,angle:t,width:3*this.getRect().pageWidth/4*r/100,opacity:(100-r)*n/100/100,direction:i,progress:2*r}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){null===this.boundsRect&&this.calculateBoundsRect();return this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(e){this.pageRect=e}setDirection(e){this.direction=e}setRightPage(e){null!==e&&e.setOrientation(1);this.rightPage=e}setLeftPage(e){null!==e&&e.setOrientation(0);this.leftPage=e}setBottomPage(e){null!==e&&e.setOrientation(1===this.direction?0:1);this.bottomPage=e}setFlippingPage(e){null!==e&&e.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1);this.flippingPage=e}convertToBook(e){const t=this.getRect();return{x:e.x-t.left,y:e.y-t.top}}isSafari(){return this.safari}convertToPage(e,t){t||(t=this.direction);const r=this.getRect();return{x:0===t?e.x-r.left-r.width/2:r.width/2-e.x+r.left,y:e.y-r.top}}convertToGlobal(e,t){t||(t=this.direction);if(null==e)return null;const r=this.getRect();return{x:0===t?e.x+r.left+r.width/2:r.width/2-e.x+r.left,y:e.y+r.top}}convertRectToGlobal(e,t){t||(t=this.direction);return{topLeft:this.convertToGlobal(e.topLeft,t),topRight:this.convertToGlobal(e.topRight,t),bottomLeft:this.convertToGlobal(e.bottomLeft,t),bottomRight:this.convertToGlobal(e.bottomRight,t)}}}class CanvasRender extends Render{constructor(e,t,r){super(e,t);this.canvas=r;this.ctx=r.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear();"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0);null!=this.rightPage&&this.rightPage.simpleDraw(1);null!=this.bottomPage&&this.bottomPage.draw();this.drawBookShadow();null!=this.flippingPage&&this.flippingPage.draw();if(null!=this.shadow){this.drawOuterShadow();this.drawInnerShadow()}const e=this.getRect();if("portrait"===this.orientation){this.ctx.beginPath();this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height);this.ctx.clip()}}drawBookShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();const t=e.width/20;this.ctx.rect(e.left,e.top,e.width,e.height);const r={x:e.left+e.width/2-t/2,y:0};this.ctx.translate(r.x,r.y);const i=this.ctx.createLinearGradient(0,0,t,0);i.addColorStop(0,"rgba(0, 0, 0, 0)");i.addColorStop(.4,"rgba(0, 0, 0, 0.2)");i.addColorStop(.49,"rgba(0, 0, 0, 0.1)");i.addColorStop(.5,"rgba(0, 0, 0, 0.5)");i.addColorStop(.51,"rgba(0, 0, 0, 0.4)");i.addColorStop(1,"rgba(0, 0, 0, 0)");this.ctx.clip();this.ctx.fillStyle=i;this.ctx.fillRect(0,0,t,2*e.height);this.ctx.restore()}drawOuterShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();this.ctx.rect(e.left,e.top,e.width,e.height);const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(t.x,t.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const r=this.ctx.createLinearGradient(0,0,this.shadow.width,0);if(0===this.shadow.direction){this.ctx.translate(0,-100);r.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");r.addColorStop(1,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(-this.shadow.width,-100);r.addColorStop(0,"rgba(0, 0, 0, 0)");r.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")}this.ctx.clip();this.ctx.fillStyle=r;this.ctx.fillRect(0,0,this.shadow.width,2*e.height);this.ctx.restore()}drawInnerShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),r=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(r.topLeft.x,r.topLeft.y);this.ctx.lineTo(r.topRight.x,r.topRight.y);this.ctx.lineTo(r.bottomRight.x,r.bottomRight.y);this.ctx.lineTo(r.bottomLeft.x,r.bottomLeft.y);this.ctx.translate(t.x,t.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,i,0);if(0===this.shadow.direction){this.ctx.translate(-i,-100);n.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")");n.addColorStop(.9,"rgba(0, 0, 0, 0.05)");n.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")");n.addColorStop(0,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(0,-100);n.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");n.addColorStop(.1,"rgba(0, 0, 0, 0.05)");n.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")");n.addColorStop(1,"rgba(0, 0, 0, 0)")}this.ctx.clip();this.ctx.fillStyle=n;this.ctx.fillRect(0,0,i,2*e.height);this.ctx.restore()}clear(){this.ctx.fillStyle="white";this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class UI{constructor(e,t,r){this.touchPoint=null;this.swipeTimeout=250;this.onResize=()=>{this.update()};this.onMouseDown=e=>{if(this.checkTarget(e.target)){const t=this.getMousePos(e.clientX,e.clientY);this.app.startUserTouch(t);e.preventDefault()}};this.onTouchStart=e=>{if(this.checkTarget(e.target)&&e.changedTouches.length>0){const t=e.changedTouches[0],r=this.getMousePos(t.clientX,t.clientY);this.touchPoint={point:r,time:Date.now()};setTimeout((()=>{null!==this.touchPoint&&this.app.startUserTouch(r)}),this.swipeTimeout);this.app.getSettings().mobileScrollSupport||e.preventDefault()}};this.onMouseUp=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userStop(t)};this.onMouseMove=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userMove(t,!1)};this.onTouchMove=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],r=this.getMousePos(t.clientX,t.clientY);if(this.app.getSettings().mobileScrollSupport){null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-r.x)>10||"read"!==this.app.getState())&&e.cancelable&&this.app.userMove(r,!0);"read"!==this.app.getState()&&e.preventDefault()}else this.app.userMove(r,!0)}};this.onTouchEnd=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],r=this.getMousePos(t.clientX,t.clientY);let i=!1;if(null!==this.touchPoint){const e=r.x-this.touchPoint.point.x,t=Math.abs(r.y-this.touchPoint.point.y);if(Math.abs(e)>this.swipeDistance&&t<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout){e>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom");i=!0}this.touchPoint=null}this.app.userStop(r,i)}};this.parentElement=e;e.classList.add("stf__parent");e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>');this.wrapper=e.querySelector(".stf__wrapper");this.app=t;const i=this.app.getSettings().usePortrait?1:2;e.style.minWidth=r.minWidth*i+"px";e.style.minHeight=r.minHeight+"px";if("fixed"===r.size){e.style.minWidth=r.width*i+"px";e.style.minHeight=r.height+"px"}if(r.autoSize){e.style.width="100%";e.style.maxWidth=2*r.maxWidth+"px"}e.style.display="block";window.addEventListener("resize",this.onResize,!1);this.swipeDistance=r.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers();this.distElement.remove();this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(e){this.wrapper.classList.remove("--portrait","--landscape");if("portrait"===e){this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%");this.wrapper.classList.add("--portrait")}else{this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%");this.wrapper.classList.add("--landscape")}this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize);this.distElement.removeEventListener("mousedown",this.onMouseDown);this.distElement.removeEventListener("touchstart",this.onTouchStart);window.removeEventListener("mousemove",this.onMouseMove);window.removeEventListener("touchmove",this.onTouchMove);window.removeEventListener("mouseup",this.onMouseUp);window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1);if(this.app.getSettings().useMouseEvents){this.distElement.addEventListener("mousedown",this.onMouseDown);this.distElement.addEventListener("touchstart",this.onTouchStart);window.addEventListener("mousemove",this.onMouseMove);window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport});window.addEventListener("mouseup",this.onMouseUp);window.addEventListener("touchend",this.onTouchEnd)}}getMousePos(e,t){const r=this.distElement.getBoundingClientRect();return{x:e-r.left,y:t-r.top}}checkTarget(e){return!this.app.getSettings().clickEventForward||!["a","button"].includes(e.tagName.toLowerCase())}}class HTMLUI extends UI{constructor(e,t,r,i){super(e,t,r);this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>');this.distElement=e.querySelector(".stf__block");this.items=i;for(const e of i)this.distElement.appendChild(e);this.setHandlers()}clear(){for(const e of this.items)this.parentElement.appendChild(e)}updateItems(e){this.removeHandlers();this.distElement.innerHTML="";for(const t of e)this.distElement.appendChild(t);this.items=e;this.setHandlers()}update(){this.app.getRender().update()}}class CanvasUI extends UI{constructor(e,t,r){super(e,t,r);this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>';this.canvas=e.querySelectorAll("canvas")[0];this.distElement=this.canvas;this.resizeCanvas();this.setHandlers()}resizeCanvas(){const e=getComputedStyle(this.canvas),t=parseInt(e.getPropertyValue("width"),10),r=parseInt(e.getPropertyValue("height"),10);this.canvas.width=t;this.canvas.height=r}getCanvas(){return this.canvas}update(){this.resizeCanvas();this.app.getRender().update()}}class HTMLRender extends Render{constructor(e,t,r){super(e,t);this.outerShadow=null;this.innerShadow=null;this.hardShadow=null;this.hardInnerShadow=null;this.element=r;this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>');this.outerShadow=this.element.querySelector(".stf__outerShadow");this.innerShadow=this.element.querySelector(".stf__innerShadow");this.hardShadow=this.element.querySelector(".stf__hardShadow");this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow();this.outerShadow.style.cssText="display: none";this.innerShadow.style.cssText="display: none";this.hardShadow.style.cssText="display: none";this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const e=this.getRect(),t=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let r=(100-t)*(2.5*e.pageWidth)/100+20;r>e.pageWidth&&(r=e.pageWidth);let i="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(r,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*t/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);";this.hardInnerShadow.style.cssText=i}drawHardOuterShadow(){const e=this.getRect();let t=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*e.pageWidth)/100+20;t>e.pageWidth&&(t=e.pageWidth);let r="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(e.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(e.left+e.width/2,"px;\n            transform-origin: 0 0;\n        ");r+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);";this.hardShadow.style.cssText=r}drawInnerShadow(){const e=this.getRect(),t=3*this.shadow.width/4,r=0===this.getDirection()?t:0,i=0===this.getDirection()?"to left":"to right",n=this.convertToGlobal(this.shadow.pos),o=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let s="polygon( ";for(const e of a){let t=1===this.getDirection()?{x:-e.x+this.shadow.pos.x,y:e.y-this.shadow.pos.y}:{x:e.x-this.shadow.pos.x,y:e.y-this.shadow.pos.y};t=Helper.GetRotatedPoint(t,{x:r,y:100},o);s+=t.x+"px "+t.y+"px, "}s=s.slice(0,-2);s+=")";const l="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(t,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(i,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(r,"px 100px;\n            transform: translate3d(").concat(n.x-r,"px, ").concat(n.y-100,"px, 0) rotate(").concat(o,"rad);\n            clip-path: ").concat(s,";\n            -webkit-clip-path: ").concat(s,";\n        ");this.innerShadow.style.cssText=l}drawOuterShadow(){const e=this.getRect(),t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),r=this.shadow.angle+3*Math.PI/2,i=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?"to right":"to left",o=[{x:0,y:0},{x:e.pageWidth,y:0},{x:e.pageWidth,y:e.height},{x:0,y:e.height}];let a="polygon( ";for(const e of o)if(null!==e){let t=1===this.getDirection()?{x:-e.x+this.shadow.pos.x,y:e.y-this.shadow.pos.y}:{x:e.x-this.shadow.pos.x,y:e.y-this.shadow.pos.y};t=Helper.GetRotatedPoint(t,{x:i,y:100},r);a+=t.x+"px "+t.y+"px, "}a=a.slice(0,-2);a+=")";const s="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*e.height,"px;\n            background: linear-gradient(").concat(n,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(i,"px 100px;\n            transform: translate3d(").concat(t.x-i,"px, ").concat(t.y-100,"px, 0) rotate(").concat(r,"rad);\n            clip-path: ").concat(a,";\n            -webkit-clip-path: ").concat(a,";\n        ");this.outerShadow.style.cssText=s}drawLeftPage(){if("portrait"!==this.orientation&&null!==this.leftPage)if(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()<-90){this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.leftPage.draw(this.flippingPage.getDrawingDensity())}else this.leftPage.getElement().style.display="none"}else this.leftPage.simpleDraw(0)}drawRightPage(){if(null!==this.rightPage)if(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()>90){this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.rightPage.draw(this.flippingPage.getDrawingDensity())}else this.rightPage.getElement().style.display="none"}else this.rightPage.simpleDraw(1)}drawBottomPage(){if(null===this.bottomPage)return;const e=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;if("portrait"!==this.orientation||1!==this.direction){this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10);this.bottomPage.draw(e)}}drawFrame(){if(null!==this.flippingPage){if(this.flippingPage.getHardAngle()===this.lastAngle)return;this.lastAngle=this.flippingPage.getHardAngle()}else this.lastAngle=-1234;this.clear();this.drawLeftPage();this.drawRightPage();this.drawBottomPage();if(null!=this.flippingPage){if(this.flippingPage.state.hardDrawingAngle<=90){this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.flippingPage.draw()}else this.flippingPage.getElement().style.display="none"}if(null!=this.shadow&&null!==this.flippingPage)if("soft"===this.flippingPage.getDrawingDensity()){this.drawOuterShadow();this.drawInnerShadow()}else{this.drawHardOuterShadow();this.drawHardInnerShadow()}}clear(){for(const e of this.app.getPageCollection().getPages()){if(e!==this.leftPage&&e!==this.rightPage&&e!==this.flippingPage&&e!==this.bottomPage){const t=e.getElement().style;"none"!==t.display&&(t.cssText="display: none")}e.getTemporaryCopy()!==this.flippingPage&&e.hideTemporaryCopy()}}update(){super.update();null!==this.rightPage&&this.rightPage.setOrientation(1);null!==this.leftPage&&this.leftPage.setOrientation(0)}}class Settings{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(e){const t=this._default;Object.assign(t,e);if("stretch"!==t.size&&"fixed"!==t.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(t.width<=0||t.height<=0)throw new Error("Invalid width or height");if(t.flippingTime<=0)throw new Error("Invalid flipping time");if("stretch"===t.size){t.minWidth<=0&&(t.minWidth=100);t.maxWidth<t.minWidth&&(t.maxWidth=2e3);t.minHeight<=0&&(t.minHeight=100);t.maxHeight<t.minHeight&&(t.maxHeight=2e3)}else{t.minWidth=t.width;t.maxWidth=t.width;t.minHeight=t.height;t.maxHeight=t.height}return t}}!function styleInject(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css";"top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n);n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}");t.PageFlip=class PageFlip extends class EventObject{constructor(){this.events=new Map}on(e,t){this.events.has(e)?this.events.get(e).push(t):this.events.set(e,[t]);return this}off(e){this.events.delete(e)}trigger(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(e))for(const i of this.events.get(e))i({data:r,object:t})}}{constructor(e,t){super();this.isUserTouch=!1;this.isUserMove=!1;this.setting=null;this.pages=null;this.setting=(new Settings).getSettings(t);this.block=e}destroy(){this.ui.destroy();this.block.remove()}update(){this.render.update();this.pages.show()}loadFromImages(e){this.ui=new CanvasUI(this.block,this,this.setting);const t=this.ui.getCanvas();this.render=new CanvasRender(this,this.setting,t);this.flipController=new Flip(this.render,this);this.pages=new ImagePageCollection(this,this.render,e);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((()=>{this.ui.update();this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}loadFromHTML(e){this.ui=new HTMLUI(this.block,this,this.setting,e);this.render=new HTMLRender(this,this.setting,this.ui.getDistElement());this.flipController=new Flip(this.render,this);this.pages=new HTMLPageCollection(this,this.render,this.ui.getDistElement(),e);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((()=>{this.ui.update();this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}updateFromImages(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new ImagePageCollection(this,this.render,e);this.pages.load();this.pages.show(t);this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}updateFromHtml(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new HTMLPageCollection(this,this.render,this.ui.getDistElement(),e);this.pages.load();this.ui.updateItems(e);this.render.reload();this.pages.show(t);this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}clear(){this.pages.destroy();this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(e){this.pages.show(e)}flipNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(e)}flipPrev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(e)}flip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(e,t)}updateState(e){this.trigger("changeState",this,e)}updatePageIndex(e){this.trigger("flip",this,e)}updateOrientation(e){this.ui.setOrientationStyle(e);this.update();this.trigger("changeOrientation",this,e)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(e){return this.pages.getPage(e)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(e){this.mousePosition=e;this.isUserTouch=!0;this.isUserMove=!1}userMove(e,t){if(this.isUserTouch||t||!this.setting.showPageCorners){if(this.isUserTouch&&Helper.GetDistanceBetweenTwoPoint(this.mousePosition,e)>5){this.isUserMove=!0;this.flipController.fold(e)}}else this.flipController.showCorner(e)}userStop(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isUserTouch){this.isUserTouch=!1;t||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(e))}}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPageView=void 0;r(1);r(92);r(82);var i=r(165),n=r(162),o=r(81),a=r(195),s=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(198)),l=r(199);function _classPrivateFieldInitSpec(e,t,r){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,r)}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,r){!function _classApplyDescriptorSet(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}(e,_classExtractFieldDescriptor(e,t,"set"),r);return r}function _classExtractFieldDescriptor(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}const c=o.compatibilityParams.maxCanvasPixels||16777216;var d=new WeakMap;t.PDFPageView=class PDFPageView{constructor(e){var t,r,o,s;_classPrivateFieldInitSpec(this,d,{writable:!0,value:i.AnnotationMode.ENABLE_FORMS});const l=e.container,h=e.defaultViewport;this.id=e.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=e.scale||n.DEFAULT_SCALE;this.viewport=h;this.pdfPageRotate=h.rotation;this._optionalContentConfigPromise=e.optionalContentConfigPromise||null;this.hasRestrictedScaling=!1;this.textLayerMode=null!==(t=e.textLayerMode)&&void 0!==t?t:n.TextLayerMode.ENABLE;_classPrivateFieldSet(this,d,null!==(r=e.annotationMode)&&void 0!==r?r:i.AnnotationMode.ENABLE_FORMS);this.imageResourcesPath=e.imageResourcesPath||"";this.useOnlyCssZoom=e.useOnlyCssZoom||!1;this.maxCanvasPixels=e.maxCanvasPixels||c;this.eventBus=e.eventBus;this.renderingQueue=e.renderingQueue;this.textLayerFactory=e.textLayerFactory;this.annotationLayerFactory=e.annotationLayerFactory;this.xfaLayerFactory=e.xfaLayerFactory;this.textHighlighter=null===(o=e.textHighlighterFactory)||void 0===o?void 0:o.createTextHighlighter(this.id-1,this.eventBus);this.structTreeLayerFactory=e.structTreeLayerFactory;this.renderer=e.renderer||n.RendererType.CANVAS;this.l10n=e.l10n||a.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=n.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this._isStandalone=!(null!==(s=this.renderingQueue)&&void 0!==s&&s.hasViewer());this._annotationCanvasMap=null;this.annotationLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;const u=document.createElement("div");u.className="page";u.style.width=Math.floor(this.viewport.width)+"px";u.style.height=Math.floor(this.viewport.height)+"px";u.setAttribute("data-page-number",this.id);u.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then((e=>{u.setAttribute("aria-label",e)}));this.div=u;null==l||l.appendChild(u)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:t});this.reset()}destroy(){this.reset();this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let e=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(t){e=t}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:e})}}async _renderXfaLayer(){let e=null;try{const t=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(t.textDivs)}catch(t){e=t}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:e})}}async _buildXfaTextContentItems(e){const t=await this.pdfPage.getTextContent(),r=[];for(const e of t.items)r.push(e.str);this.textHighlighter.setTextMapping(e,r);this.textHighlighter.enable()}_resetZoomLayer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.paintedViewportMap.delete(t);t.width=0;t.height=0;e&&this.zoomLayer.remove();this.zoomLayer=null}reset(){var e,t;let{keepZoomLayer:r=!1,keepAnnotationLayer:i=!1,keepXfaLayer:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cancelRendering({keepAnnotationLayer:i,keepXfaLayer:o});this.renderingState=n.RenderingStates.INITIAL;const a=this.div;a.style.width=Math.floor(this.viewport.width)+"px";a.style.height=Math.floor(this.viewport.height)+"px";const s=a.childNodes,l=r&&this.zoomLayer||null,c=i&&(null===(e=this.annotationLayer)||void 0===e?void 0:e.div)||null,d=o&&(null===(t=this.xfaLayer)||void 0===t?void 0:t.div)||null;for(let e=s.length-1;e>=0;e--){const t=s[e];switch(t){case l:case c:case d:continue}t.remove()}a.removeAttribute("data-loaded");c&&this.annotationLayer.hide();d&&this.xfaLayer.hide();if(!l){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon notVisible";this._isStandalone&&this.toggleLoadingIconSpinner(!0);this.loadingIconDiv.setAttribute("role","img");this.l10n.get("loading").then((e=>{var t;null===(t=this.loadingIconDiv)||void 0===t||t.setAttribute("aria-label",e)}));a.appendChild(this.loadingIconDiv)}update(e){let{scale:t=0,rotation:r=null,optionalContentConfigPromise:n=null}=e;if("object"!=typeof arguments[0]){Window.ngxConsole.error("PDFPageView.update called with separate parameters, please use an object instead.");this.update({scale:arguments[0],rotation:arguments[1],optionalContentConfigPromise:arguments[2]});return}this.scale=t||this.scale;"number"==typeof r&&(this.rotation=r);n instanceof Promise&&(this._optionalContentConfigPromise=n);const o=(this.rotation+this.pdfPageRotate)%360,a=this.scale*i.PixelsPerInch.PDF_TO_CSS_UNITS;this.viewport=this.viewport.clone({scale:a,rotation:o});if(this._isStandalone){const{style:e}=document.documentElement;e.setProperty("--zoom-factor",this.scale);e.setProperty("--viewport-scale-factor",a)}if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let s=!1;if(this.canvas&&this.maxCanvasPixels>0){const e=this.outputScale;(Math.floor(this.viewport.width)*e.sx|0)*(Math.floor(this.viewport.height)*e.sy|0)>this.maxCanvasPixels&&(s=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&s){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild});this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering(){let{keepAnnotationLayer:e=!1,keepXfaLayer:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(this.annotationLayer&&(!e||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.xfaLayer&&(!t||!this.xfaLayer.div)){var r;this.xfaLayer.cancel();this.xfaLayer=null;null===(r=this.textHighlighter)||void 0===r||r.disable()}if(this._onTextLayerRendered){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null}}cssTransform(e){let{target:t,redrawAnnotationLayer:r=!1,redrawXfaLayer:i=!1}=e;const n=this.viewport.width,o=this.viewport.height,a=this.div;t.style.width=t.parentNode.style.width=a.style.width=Math.floor(n)+"px";t.style.height=t.parentNode.style.height=a.style.height=Math.floor(o)+"px";const s=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,l=Math.abs(s);let c=1,d=1;if(90===l||270===l){c=o/n;d=n/o}t.style.transform="rotate(".concat(s,"deg) scale(").concat(c,", ").concat(d,")");if(this.textLayer){const e=this.textLayer.viewport,t=this.viewport.rotation-e.rotation,r=Math.abs(t);let i=n/e.width;90!==r&&270!==r||(i=n/e.height);const o=this.textLayer.textLayerDiv;let a,s;switch(r){case 0:a=s=0;break;case 90:a=0;s="-"+o.style.height;break;case 180:a="-"+o.style.width;s="-"+o.style.height;break;case 270:a="-"+o.style.width;s=0;break;default:Window.ngxConsole.error("Bad rotation value.")}o.style.transform="rotate(".concat(r,"deg) ")+"scale(".concat(i,") ")+"translate(".concat(a,", ").concat(s,")");o.style.transformOrigin="0% 0%"}r&&this.annotationLayer&&this._renderAnnotationLayer();i&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}toggleLoadingIconSpinner(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this.loadingIconDiv)||void 0===e||e.classList.toggle("notVisible",!t)}draw(){var e,t,r=this;if(this.renderingState!==n.RenderingStates.INITIAL){Window.ngxConsole.error("Must be in new state before drawing");this.reset()}const{div:o,pdfPage:a}=this;if(!a){this.renderingState=n.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=n.RenderingStates.RUNNING;const s=document.createElement("div");s.style.width=o.style.width;s.style.height=o.style.height;s.classList.add("canvasWrapper");null!==(e=this.annotationLayer)&&void 0!==e&&e.div?o.insertBefore(s,this.annotationLayer.div):o.appendChild(s);let l=null;if(this.textLayerMode!==n.TextLayerMode.DISABLE&&this.textLayerFactory){var c;const e=document.createElement("div");e.className="textLayer";e.style.width=s.style.width;e.style.height=s.style.height;null!==(c=this.annotationLayer)&&void 0!==c&&c.div?o.insertBefore(e,this.annotationLayer.div):o.appendChild(e);l=this.textLayerFactory.createTextLayerBuilder(e,this.id-1,this.viewport,this.textLayerMode===n.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=l;if(_classPrivateFieldGet(this,d)!==i.AnnotationMode.DISABLE&&this.annotationLayerFactory){this._annotationCanvasMap||(this._annotationCanvasMap=new Map);this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(o,a,null,this.imageResourcesPath,_classPrivateFieldGet(this,d)===i.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))}null!==(t=this.xfaLayer)&&void 0!==t&&t.div&&o.appendChild(this.xfaLayer.div);let h=null;this.renderingQueue&&(h=e=>{if(this.renderingQueue.isHighestPriority(this))e();else{this.renderingState=n.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=n.RenderingStates.RUNNING;e()}}});const finishPaintTask=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u===r.paintTask&&(r.paintTask=null);if(e instanceof i.RenderingCancelledException)r._renderError=null;else{r._renderError=e;r.renderingState=n.RenderingStates.FINISHED;if(r.loadingIconDiv){r.loadingIconDiv.remove();delete r.loadingIconDiv}r._resetZoomLayer(!0);r.eventBus.dispatch("pagerendered",{source:r,pageNumber:r.id,cssTransform:!1,timestamp:performance.now(),error:r._renderError});if(e)throw e}},u=this.renderer===n.RendererType.SVG?this.paintOnSvg(s):this.paintOnCanvas(s);u.onRenderContinue=h;this.paintTask=u;const p=u.promise.then((()=>finishPaintTask(null).then((()=>{if(l){const e=a.streamTextContent({normalizeWhitespace:!0,includeMarkedContent:!0});l.setTextContentStream(e);l.render()}this.annotationLayer&&this._renderAnnotationLayer()}))),(function(e){return finishPaintTask(e)}));if(this.xfaLayerFactory){this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(o,a,null));this._renderXfaLayer()}if(this.structTreeLayerFactory&&this.textLayer&&this.canvas){this._onTextLayerRendered=e=>{if(e.pageNumber===this.id){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null;this.canvas&&this.pdfPage.getStructTree().then((e=>{if(!e)return;if(!this.canvas)return;const t=this.structTreeLayer.render(e);t.classList.add("structTree");this.canvas.appendChild(t)}))}};this.eventBus._on("textlayerrendered",this._onTextLayerRendered);this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(a)}o.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return p}paintOnCanvas(e){const t=(0,i.createPromiseCapability)(),r={promise:t.promise,onRenderContinue(e){e()},cancel(){_.cancel()}},o=this.viewport,a=document.createElement("canvas");a.hidden=!0;let c=!0;const showCanvas=function(){if(c){a.hidden=!1;c=!1}};e.appendChild(a);this.canvas=a;a.mozOpaque=!0;const h=a.getContext("2d",{alpha:!1}),u=(0,n.getOutputScale)(h);this.outputScale=u;if(this.useOnlyCssZoom){const e=o.clone({scale:i.PixelsPerInch.PDF_TO_CSS_UNITS});u.sx*=e.width/o.width;u.sy*=e.height/o.height;u.scaled=!0}if(this.maxCanvasPixels>0){const e=o.width*o.height,t=Math.sqrt(this.maxCanvasPixels/e);if(u.sx>t||u.sy>t){u.sx=t;u.sy=t;u.scaled=!0;this.hasRestrictedScaling=!0}else this.hasRestrictedScaling=!1}const p=(0,n.approximateFraction)(u.sx),g=(0,n.approximateFraction)(u.sy),f=(0,n.roundToDivide)(o.width*u.sx,p[0]),m=(0,n.roundToDivide)(o.height*u.sy,g[0]);if((f>=4096||m>=4096)&&(this.maxWidth||!s.default.test({width:f,height:m}))){const e=this.determineMaxDimensions();let t=Math.max(f/e,m/e);const r=Math.floor(100*this.scale/t)/100;t=this.scale/r;this.scale=r;window.PDFViewerApplicationOptions.set("maxZoom",r);PDFViewerApplication.pdfViewer.currentScaleValue=this.scale;o.width/=t;o.height/=t;(0,l.warn)("Page "+this.id+": Reduced the maximum zoom to "+r+" because the browser can't render larger canvases.")}a.width=(0,n.roundToDivide)(o.width*u.sx,p[0]);a.height=(0,n.roundToDivide)(o.height*u.sy,g[0]);a.style.width=(0,n.roundToDivide)(o.width,p[1])+"px";a.style.height=(0,n.roundToDivide)(o.height,g[1])+"px";this.paintedViewportMap.set(a,o);const v=u.scaled?[u.sx,0,0,u.sy,0,0]:null;let b=PDFViewerApplicationOptions.get("pdfBackgroundColor");if("function"==typeof b){const e=b({pageNumber:this.id,pageLabel:this.pageLabel});e&&(b=e)}let w=b?PDFViewerApplicationOptions.get("pdfBackgroundColorToReplace"):null;if("function"==typeof w){const e=w({pageNumber:this.id,pageLabel:this.pageLabel});e&&(w=e)}const y={canvasContext:h,transform:v,viewport:this.viewport,annotationMode:_classPrivateFieldGet(this,d),optionalContentConfigPromise:this._optionalContentConfigPromise,background:b,backgroundColorToReplace:w,annotationCanvasMap:this._annotationCanvasMap},_=this.pdfPage.render(y);_.onContinue=function(e){showCanvas();r.onRenderContinue?r.onRenderContinue(e):e()};_.promise.then((function(){showCanvas();t.resolve()}),(function(e){showCanvas();t.reject(e)}));return r}paintOnSvg(e){let t=!1;const ensureNotCancelled=()=>{if(t)throw new i.RenderingCancelledException("Rendering cancelled, page ".concat(this.id),"svg")},r=this.pdfPage,a=this.viewport.clone({scale:i.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:r.getOperatorList({annotationMode:_classPrivateFieldGet(this,d)}).then((t=>{ensureNotCancelled();return new i.SVGGraphics(r.commonObjs,r.objs,o.compatibilityParams.disableCreateObjectURL).getSVG(t,a).then((t=>{ensureNotCancelled();this.svg=t;this.paintedViewportMap.set(t,a);t.style.width=e.style.width;t.style.height=e.style.height;this.renderingState=n.RenderingStates.FINISHED;e.appendChild(t)}))})),onRenderContinue(e){e()},cancel(){t=!0}}}setPageLabel(e){this.pageLabel="string"==typeof e?e:null;null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}determineMaxDimensions(){if(this.maxWidth)return this.maxWidth;const e=[4096,8192,10836,11180,11402,14188,16384];for(let t of e)if(!s.default.test({width:t+1,height:t+1})){this.maxWidth=t;return this.maxWidth}return 16384}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;r(1);r(82);r(128);r(137);r(92);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));r.push.apply(r,i)}return r}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){_defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _defineProperty(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,i,n=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++){r=o[i];t.indexOf(r)>=0||(n[r]=e[r])}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++){r=o[i];t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}}return n}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var i,n,o=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(i=r.next()).done);a=!0){o.push(i.value);if(t&&o.length===t)break}}catch(e){s=!0;n=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw n}}return o}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);return"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function canvasTest(e){var t,r,i=e.sizes.shift(),n=Math.max(Math.ceil(i[0]),1),o=Math.max(Math.ceil(i[1]),1),a=[n-1,o-1,1,1],s=Date.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;if(l){t=new OffscreenCanvas(1,1);r=new OffscreenCanvas(n,o)}else{(t=document.createElement("canvas")).width=1;t.height=1;(r=document.createElement("canvas")).width=n;r.height=o}var c=t.getContext("2d"),d=r.getContext("2d");if(d){d.fillRect.apply(d,a);c.drawImage(r,n-1,o-1,1,1,0,0,1,1)}var h=c&&0!==c.getImageData(0,0,1,1).data[3],u=Date.now()-s;if(l){postMessage({width:n,height:o,benchmark:u,isTestPass:h});!h&&e.sizes.length&&canvasTest(e)}else if(h)e.onSuccess(n,o,u);else{e.onError(n,o,u);e.sizes.length&&canvasTest(e)}return h}var i=[16384,14188,11402,11180,10836,8192,4096,1],n=[8388607,65535,32767,16384,8192,4096,1],o=[4194303,65535,32767,16384,8192,4096,1],a=["onError","onSuccess"],s={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},l={};function createSizesArray(e){var t=e.width===e.height,r=1===e.height,i=1===e.width,n=[];if(e.width&&e.height)for(var o=e.min||s.min,a=e.step||s.step,l=Math.max(e.width,e.height);l>=o;){var c=t||r?l:1,d=t||i?l:1;n.push([c,d]);l-=a}else e.sizes.forEach((function(e){var o=t||r?e:1,a=t||i?e:1;n.push([o,a])}));return n}function handleMethod(e){var t=window&&"HTMLCanvasElement"in window,r=window&&"OffscreenCanvas"in window,i=Date.now(),n=e.onError,o=e.onSuccess,s=_objectWithoutProperties(e,a),c=null;if(!t)return!1;if(e.useWorker&&r){var d="\n            var canvasTest = ".concat(canvasTest.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),h=new Blob([d],{type:"application/javascript"}),u=URL.createObjectURL(h);c=new Worker(u);URL.revokeObjectURL(u);c.onmessage=function(e){var t=e.data,r=t.width,n=t.height,o=t.benchmark;if(t.isTestPass){l[i].onSuccess(r,n,o);delete l[i]}else l[i].onError(r,n,o)}}if(e.usePromise)return new Promise((function(t,r){var a=_objectSpread2(_objectSpread2({},e),{},{onError:function onError(t,i,o){var a;if(0===e.sizes.length)a=!0;else{var s=_slicedToArray(e.sizes.slice(-1),1),l=_slicedToArray(s[0],2),c=l[0],d=l[1];a=t===c&&i===d}n(t,i,o);a&&r({width:t,height:i,benchmark:o})},onSuccess:function onSuccess(e,r,i){o(e,r,i);t({width:e,height:r,benchmark:i})}});if(c){var d=a.onError,h=a.onSuccess;l[i]={onError:d,onSuccess:h};c.postMessage(s)}else canvasTest(a)}));if(!c)return canvasTest(e);l[i]={onError:n,onSuccess:o};c.postMessage(s)}var c={maxArea:function maxArea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:e.max,height:e.max,min:e.min,step:e.step,sizes:_toConsumableArray(i)}),r=_objectSpread2(_objectSpread2(_objectSpread2({},s),e),{},{sizes:t});return handleMethod(r)},maxHeight:function maxHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:1,height:e.max,min:e.min,step:e.step,sizes:_toConsumableArray(n)}),r=_objectSpread2(_objectSpread2(_objectSpread2({},s),e),{},{sizes:t});return handleMethod(r)},maxWidth:function maxWidth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:e.max,height:1,min:e.min,step:e.step,sizes:_toConsumableArray(o)}),r=_objectSpread2(_objectSpread2(_objectSpread2({},s),e),{},{sizes:t});return handleMethod(r)},test:function test(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_objectSpread2(_objectSpread2({},s),e);t.sizes=_toConsumableArray(t.sizes);t.width&&t.height&&(t.sizes=[[t.width,t.height]]);return handleMethod(t)}};t.default=c},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.IsLittleEndianCached=t.IsEvalSupportedCached=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0;t.arrayByteLength=arrayByteLength;t.arraysToBytes=function arraysToBytes(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let r=0;for(let i=0;i<t;i++)r+=arrayByteLength(e[i]);let i=0;const n=new Uint8Array(r);for(let r=0;r<t;r++){let t=e[r];t instanceof Uint8Array||(t="string"==typeof t?stringToBytes(t):new Uint8Array(t));const o=t.byteLength;n.set(t,i);i+=o}return n};t.assert=assert;t.bytesToString=function bytesToString(e){assert(null!==e&&"object"==typeof e&&void 0!==e.length,"Invalid argument for bytesToString");const t=e.length,r=8192;if(t<r)return String.fromCharCode.apply(null,e);const i=[];for(let n=0;n<t;n+=r){const o=Math.min(n+r,t),a=e.subarray(n,o);i.push(String.fromCharCode.apply(null,a))}return i.join("")};t.createObjectURL=function createObjectURL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!r)return URL.createObjectURL(new Blob([e],{type:t}));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="data:".concat(t,";base64,");for(let t=0,r=e.length;t<r;t+=3){const o=255&e[t],a=255&e[t+1],s=255&e[t+2],l=(3&o)<<4|a>>4,c=t+1<r?(15&a)<<2|s>>6:64,d=t+2<r?63&s:64;n+=i[o>>2]+i[l]+i[c]+i[d]}return n};t.createPromiseCapability=function createPromiseCapability(){const e=Object.create(null);let t=!1;Object.defineProperty(e,"settled",{get:()=>t});e.promise=new Promise((function(r,i){e.resolve=function(e){t=!0;r(e)};e.reject=function(e){t=!0;i(e)}}));return e};t.createValidAbsoluteUrl=function createValidAbsoluteUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(r&&"string"==typeof e){if(r.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e="http://".concat(e))}if(r.tryConvertEncoding)try{e=stringToUTF8String(e)}catch(e){}}const i=t?new URL(e,t):new URL(e);if(_isValidProtocol(i))return i}catch(e){}return null};t.escapeString=function escapeString(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":"\\".concat(e)))};t.getModificationDate=function getModificationDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")};t.getVerbosityLevel=function getVerbosityLevel(){return n};t.info=function info(e){n>=i.INFOS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Info: ".concat(e)):Window&&Window.ngxConsole?Window.ngxConsole.log("Info: ".concat(e)):console.log("Info: ".concat(e)))};t.isArrayBuffer=function isArrayBuffer(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength};t.isArrayEqual=function isArrayEqual(e,t){if(e.length!==t.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0};t.isAscii=function isAscii(e){return/^[\x00-\x7F]*$/.test(e)};t.isBool=function isBool(e){return"boolean"==typeof e};t.isNum=function isNum(e){return"number"==typeof e};t.isSameOrigin=function isSameOrigin(e,t){let r;try{r=new URL(e);if(!r.origin||"null"===r.origin)return!1}catch(e){return!1}const i=new URL(t,r);return r.origin===i.origin};t.isString=function isString(e){return"string"==typeof e};t.objectFromMap=function objectFromMap(e){const t=Object.create(null);for(const[r,i]of e)t[r]=i;return t};t.objectSize=function objectSize(e){return Object.keys(e).length};t.removeNullCharacters=function removeNullCharacters(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e){warn("The argument for removeNullCharacters must be a string.");return e}t&&(e=e.replace(s," "));return e.replace(a,"")};t.setVerbosityLevel=function setVerbosityLevel(e){Number.isInteger(e)&&(n=e)};t.shadow=shadow;t.string32=function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)};t.stringToBytes=stringToBytes;t.stringToPDFString=function stringToPDFString(e){const t=e.length,r=[];if("Ã¾"===e[0]&&"Ã¿"===e[1])for(let i=2;i<t;i+=2)r.push(String.fromCharCode(e.charCodeAt(i)<<8|e.charCodeAt(i+1)));else if("Ã¿"===e[0]&&"Ã¾"===e[1])for(let i=2;i<t;i+=2)r.push(String.fromCharCode(e.charCodeAt(i+1)<<8|e.charCodeAt(i)));else for(let i=0;i<t;++i){const t=h[e.charCodeAt(i)];r.push(t?String.fromCharCode(t):e.charAt(i))}return r.join("")};t.stringToUTF16BEString=function stringToUTF16BEString(e){const t=["Ã¾Ã¿"];for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);t.push(String.fromCharCode(i>>8&255),String.fromCharCode(255&i))}return t.join("")};t.stringToUTF8String=stringToUTF8String;t.unreachable=unreachable;t.utf8StringToString=function utf8StringToString(e){return unescape(encodeURIComponent(e))};t.warn=warn;r(1);r(128);r(137);r(82);r(122);r(139);r(157);r(158);r(200);r(92);r(201);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.PageActionEventType={O:"PageOpen",C:"PageClose"};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let n=i.WARNINGS;function warn(e){n>=i.WARNINGS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log("Warning: ".concat(e)):Window&&Window.ngxConsole?Window.ngxConsole.log("Warning: ".concat(e)):console.log("Warning: ".concat(e)))}function unreachable(e){throw new Error(e)}function assert(e,t){e||unreachable(t)}function _isValidProtocol(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return!0;default:return!1}}function shadow(e,t,r){Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1});return r}const o=function BaseExceptionClosure(){function BaseException(e,t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=e;this.name=t}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();t.BaseException=o;t.PasswordException=class PasswordException extends o{constructor(e,t){super(e,"PasswordException");this.code=t}};t.UnknownErrorException=class UnknownErrorException extends o{constructor(e,t){super(e,"UnknownErrorException");this.details=t}};t.InvalidPDFException=class InvalidPDFException extends o{constructor(e){super(e,"InvalidPDFException")}};t.MissingPDFException=class MissingPDFException extends o{constructor(e){super(e,"MissingPDFException")}};t.UnexpectedResponseException=class UnexpectedResponseException extends o{constructor(e,t){super(e,"UnexpectedResponseException");this.status=t}};t.FormatError=class FormatError extends o{constructor(e){super(e,"FormatError")}};t.AbortException=class AbortException extends o{constructor(e){super(e,"AbortException")}};const a=/\x00+/g,s=/[\x01-\x1F]/g;function stringToBytes(e){assert("string"==typeof e,"Invalid argument for stringToBytes");const t=e.length,r=new Uint8Array(t);for(let i=0;i<t;++i)r[i]=255&e.charCodeAt(i);return r}function arrayByteLength(e){if(void 0!==e.length)return e.length;assert(void 0!==e.byteLength,"arrayByteLength - invalid argument.");return e.byteLength}const l={get value(){return shadow(this,"value",function isLittleEndian(){const e=new Uint8Array(4);e[0]=1;return 1===new Uint32Array(e.buffer,0,1)[0]}())}};t.IsLittleEndianCached=l;const c={get value(){return shadow(this,"value",function isEvalSupported(){try{new Function("");return!0}catch(e){return!1}}())}};t.IsEvalSupportedCached=c;const d=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class Util{static makeHexColor(e,t,r){return"#".concat(d[e]).concat(d[t]).concat(d[r])}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r]}static getAxialAlignedBoundingBox(e,t){const r=Util.applyTransform(e,t),i=Util.applyTransform(e.slice(2,4),t),n=Util.applyTransform([e[0],e[3]],t),o=Util.applyTransform([e[2],e[1]],t);return[Math.min(r[0],i[0],n[0],o[0]),Math.min(r[1],i[1],n[1],o[1]),Math.max(r[0],i[0],n[0],o[0]),Math.max(r[1],i[1],n[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],i=e[0]*t[1]+e[1]*t[3],n=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(r+o)/2,s=Math.sqrt((r+o)**2-4*(r*o-n*i))/2,l=a+s||1,c=a-s||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);if(e[0]>e[2]){t[0]=e[2];t[2]=e[0]}if(e[1]>e[3]){t[1]=e[3];t[3]=e[1]}return t}static intersect(e,t){function compare(e,t){return e-t}const r=[e[0],e[2],t[0],t[2]].sort(compare),i=[e[1],e[3],t[1],t[3]].sort(compare),n=[];e=Util.normalizeRect(e);t=Util.normalizeRect(t);if(!(r[0]===e[0]&&r[1]===t[0]||r[0]===t[0]&&r[1]===e[0]))return null;n[0]=r[1];n[2]=r[2];if(!(i[0]===e[1]&&i[1]===t[1]||i[0]===t[1]&&i[1]===e[1]))return null;n[1]=i[1];n[3]=i[2];return n}static bezierBoundingBox(e,t,r,i,n,o,a,s){const l=[],c=[[],[]];let d,h,u,p,g,f,m,v;for(let c=0;c<2;++c){if(0===c){h=6*e-12*r+6*n;d=-3*e+9*r-9*n+3*a;u=3*r-3*e}else{h=6*t-12*i+6*o;d=-3*t+9*i-9*o+3*s;u=3*i-3*t}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;p=-u/h;0<p&&p<1&&l.push(p)}else{m=h*h-4*u*d;v=Math.sqrt(m);if(!(m<0)){g=(-h+v)/(2*d);0<g&&g<1&&l.push(g);f=(-h-v)/(2*d);0<f&&f<1&&l.push(f)}}}let b,w=l.length;const y=w;for(;w--;){p=l[w];b=1-p;c[0][w]=b*b*b*e+3*b*b*p*r+3*b*p*p*n+p*p*p*a;c[1][w]=b*b*b*t+3*b*b*p*i+3*b*p*p*o+p*p*p*s}c[0][y]=e;c[1][y]=t;c[0][y+1]=a;c[1][y+1]=s;c[0].length=c[1].length=y+2;return[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}t.Util=Util;const h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(e){return decodeURIComponent(escape(e))}},(e,t,r)=>{r(140)("Uint32",(function(e){return function Uint32Array(t,r,i){return e(this,t,r,i)}}))},(e,t,r)=>{"use strict";r(92);if("undefined"==typeof globalThis||!globalThis._pdfjsCompatibilityChecked){"undefined"!=typeof globalThis&&globalThis.Math===Math||(globalThis=r(202));globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){globalThis.btoa}();!function checkNodeAtob(){globalThis.atob}();!function checkDOMMatrix(){globalThis.DOMMatrix}();!function checkObjectFromEntries(){Object.fromEntries||r(208)}();!function checkPromise(){globalThis.Promise.allSettled||(globalThis.Promise=r(211))}();!function checkReadableStream(){globalThis.ReadableStream}()}},(e,t,r)=>{r(203);e.exports=r(2)},(e,t,r)=>{r(64)({global:!0},{globalThis:r(2)})},(e,t,r)=>{"use strict";r(82);r(122);r(205);r(157);r(158);r(206);r(92);r(207);e.exports=function(){function fromArray(t){var r=new e,i=Array.from(t);if(!i.every((function(e){return!Number.isNaN(e)})))throw TypeError('CSSMatrix: "'+t+'" must only have numbers.');if(16===i.length){var n=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],d=i[6],h=i[7],u=i[8],p=i[9],g=i[10],f=i[11],m=i[12],v=i[13],b=i[14],w=i[15];r.m11=n;r.a=n;r.m21=l;r.c=l;r.m31=u;r.m41=m;r.e=m;r.m12=o;r.b=o;r.m22=c;r.d=c;r.m32=p;r.m42=v;r.f=v;r.m13=a;r.m23=d;r.m33=g;r.m43=b;r.m14=s;r.m24=h;r.m34=f;r.m44=w}else{if(6!==i.length)throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");var y=i[0],_=i[1],S=i[2],P=i[3],C=i[4],R=i[5];r.m11=y;r.a=y;r.m12=_;r.b=_;r.m21=S;r.c=S;r.m22=P;r.d=P;r.m41=C;r.e=C;r.m42=R;r.f=R}return r}function fromMatrix(t){var r=Object.keys(new e);if("object"==typeof t&&r.every((function(e){return e in t})))return fromArray([t.m11,t.m12,t.m13,t.m14,t.m21,t.m22,t.m23,t.m24,t.m31,t.m32,t.m33,t.m34,t.m41,t.m42,t.m43,t.m44]);throw TypeError('CSSMatrix: "'+t+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function fromString(t){if("string"!=typeof t)throw TypeError('CSSMatrix: "'+t+'" is not a string.');var r=String(t).replace(/\s/g,""),i=new e,n='CSSMatrix: invalid transform string "'+t+'"';r.split(")").filter((function(e){return e})).forEach((function(e){var t=e.split("("),r=t[0],o=t[1];if(!o)throw TypeError(n);var a=o.split(",").map((function(e){return e.includes("rad")?parseFloat(e)*(180/Math.PI):parseFloat(e)})),s=a[0],l=a[1],c=a[2],d=a[3],h=[s,l,c],u=[s,l,c,d];if("perspective"===r&&s&&[l,c].every((function(e){return void 0===e})))i.m34=-1/s;else if(r.includes("matrix")&&[6,16].includes(a.length)&&a.every((function(e){return!Number.isNaN(+e)}))){var p=a.map((function(e){return Math.abs(e)<1e-6?0:e}));i=i.multiply(fromArray(p))}else if("translate3d"===r&&h.every((function(e){return!Number.isNaN(+e)})))i=i.translate(s,l,c);else if("translate"===r&&s&&void 0===c)i=i.translate(s,l||0,0);else if("rotate3d"===r&&u.every((function(e){return!Number.isNaN(+e)}))&&d)i=i.rotateAxisAngle(s,l,c,d);else if("rotate"===r&&s&&[l,c].every((function(e){return void 0===e})))i=i.rotate(0,0,s);else if("scale3d"===r&&h.every((function(e){return!Number.isNaN(+e)}))&&h.some((function(e){return 1!==e})))i=i.scale(s,l,c);else if("scale"!==r||Number.isNaN(s)||1===s||void 0!==c)if("skew"===r&&s&&void 0===c){i=i.skewX(s);i=l?i.skewY(l):i}else{if(!(/[XYZ]/.test(r)&&s&&[l,c].every((function(e){return void 0===e}))&&["translate","rotate","scale","skew"].some((function(e){return r.includes(e)}))))throw TypeError(n);if(["skewX","skewY"].includes(r))i=i[r](s);else{var g=r.replace(/[XYZ]/,""),f=r.replace(g,""),m=["X","Y","Z"].indexOf(f),v=[0===m?s:0,1===m?s:0,2===m?s:0];i=i[g].apply(i,v)}}else{var b=Number.isNaN(+l)?s:l;i=i.scale(s,b,1)}}));return i}function Translate(t,r,i){var n=new e;n.m41=t;n.e=t;n.m42=r;n.f=r;n.m43=i;return n}function Rotate(t,r,i){var n=new e,o=Math.PI/180,a=t*o,s=r*o,l=i*o,c=Math.cos(a),d=-Math.sin(a),h=Math.cos(s),u=-Math.sin(s),p=Math.cos(l),g=-Math.sin(l),f=h*p,m=-h*g;n.m11=f;n.a=f;n.m12=m;n.b=m;n.m13=u;var v=d*u*p+c*g;n.m21=v;n.c=v;var b=c*p-d*u*g;n.m22=b;n.d=b;n.m23=-d*h;n.m31=d*g-c*u*p;n.m32=d*p+c*u*g;n.m33=c*h;return n}function RotateAxisAngle(t,r,i,n){var o=new e,a=n*(Math.PI/360),s=Math.sin(a),l=Math.cos(a),c=s*s,d=Math.sqrt(t*t+r*r+i*i),h=t,u=r,p=i;if(0===d){h=0;u=0;p=1}else{h/=d;u/=d;p/=d}var g=h*h,f=u*u,m=p*p,v=1-2*(f+m)*c;o.m11=v;o.a=v;var b=2*(h*u*c+p*s*l);o.m12=b;o.b=b;o.m13=2*(h*p*c-u*s*l);var w=2*(u*h*c-p*s*l);o.m21=w;o.c=w;var y=1-2*(m+g)*c;o.m22=y;o.d=y;o.m23=2*(u*p*c+h*s*l);o.m31=2*(p*h*c+u*s*l);o.m32=2*(p*u*c-h*s*l);o.m33=1-2*(g+f)*c;return o}function Scale(t,r,i){var n=new e;n.m11=t;n.a=t;n.m22=r;n.d=r;n.m33=i;return n}function SkewX(t){var r=new e,i=t*Math.PI/180,n=Math.tan(i);r.m21=n;r.c=n;return r}function SkewY(t){var r=new e,i=t*Math.PI/180,n=Math.tan(i);r.m12=n;r.b=n;return r}function Multiply(e,t){return fromArray([t.m11*e.m11+t.m12*e.m21+t.m13*e.m31+t.m14*e.m41,t.m11*e.m12+t.m12*e.m22+t.m13*e.m32+t.m14*e.m42,t.m11*e.m13+t.m12*e.m23+t.m13*e.m33+t.m14*e.m43,t.m11*e.m14+t.m12*e.m24+t.m13*e.m34+t.m14*e.m44,t.m21*e.m11+t.m22*e.m21+t.m23*e.m31+t.m24*e.m41,t.m21*e.m12+t.m22*e.m22+t.m23*e.m32+t.m24*e.m42,t.m21*e.m13+t.m22*e.m23+t.m23*e.m33+t.m24*e.m43,t.m21*e.m14+t.m22*e.m24+t.m23*e.m34+t.m24*e.m44,t.m31*e.m11+t.m32*e.m21+t.m33*e.m31+t.m34*e.m41,t.m31*e.m12+t.m32*e.m22+t.m33*e.m32+t.m34*e.m42,t.m31*e.m13+t.m32*e.m23+t.m33*e.m33+t.m34*e.m43,t.m31*e.m14+t.m32*e.m24+t.m33*e.m34+t.m34*e.m44,t.m41*e.m11+t.m42*e.m21+t.m43*e.m31+t.m44*e.m41,t.m41*e.m12+t.m42*e.m22+t.m43*e.m32+t.m44*e.m42,t.m41*e.m13+t.m42*e.m23+t.m43*e.m33+t.m44*e.m43,t.m41*e.m14+t.m42*e.m24+t.m43*e.m34+t.m44*e.m44])}var e=function CSSMatrix(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this;r.a=1;r.b=0;r.c=0;r.d=1;r.e=0;r.f=0;r.m11=1;r.m12=0;r.m13=0;r.m14=0;r.m21=0;r.m22=1;r.m23=0;r.m24=0;r.m31=0;r.m32=0;r.m33=1;r.m34=0;r.m41=0;r.m42=0;r.m43=0;r.m44=1;if(e&&e.length){var i=[16,6].some((function(t){return t===e.length}))?e:e[0];return r.setMatrixValue(i)}return r},t={isIdentity:{configurable:!0},is2D:{configurable:!0}};t.isIdentity.set=function(e){this.isIdentity=e};t.isIdentity.get=function(){var e=this;return 1===e.m11&&0===e.m12&&0===e.m13&&0===e.m14&&0===e.m21&&1===e.m22&&0===e.m23&&0===e.m24&&0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m41&&0===e.m42&&0===e.m43&&1===e.m44};t.is2D.get=function(){var e=this;return 0===e.m31&&0===e.m32&&1===e.m33&&0===e.m34&&0===e.m43&&1===e.m44};t.is2D.set=function(e){this.is2D=e};e.prototype.setMatrixValue=function setMatrixValue(e){var t=this;return[Array,Float64Array,Float32Array].some((function(t){return e instanceof t}))?fromArray(e):"string"==typeof e&&e.length&&"none"!==e?fromString(e):"object"==typeof e?fromMatrix(e):t};e.prototype.toArray=function toArray(){var e=this,t=Math.pow(10,6);return(e.is2D?[e.a,e.b,e.c,e.d,e.e,e.f]:[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44]).map((function(e){return Math.abs(e)<1e-6?0:(e*t>>0)/t}))};e.prototype.toString=function toString(){var e=this,t=e.toArray();return(e.is2D?"matrix":"matrix3d")+"("+t+")"};e.prototype.toJSON=function toJSON(){var e=this,t=e.is2D,r=e.isIdentity;return Object.assign({},e,{is2D:t,isIdentity:r})};e.prototype.multiply=function multiply(e){return Multiply(this,e)};e.prototype.translate=function translate(e,t,r){var i=t,n=r;void 0===n&&(n=0);void 0===i&&(i=0);return Multiply(this,Translate(e,i,n))};e.prototype.scale=function scale(e,t,r){var i=t,n=r;void 0===i&&(i=e);void 0===n&&(n=1);return Multiply(this,Scale(e,i,n))};e.prototype.rotate=function rotate(e,t,r){var i=e,n=t,o=r;void 0===n&&(n=0);if(void 0===o){o=i;i=0}return Multiply(this,Rotate(i,n,o))};e.prototype.rotateAxisAngle=function rotateAxisAngle(e,t,r,i){if([e,t,r,i].some((function(e){return Number.isNaN(e)})))throw new TypeError("CSSMatrix: expecting 4 values");return Multiply(this,RotateAxisAngle(e,t,r,i))};e.prototype.skewX=function skewX(e){return Multiply(this,SkewX(e))};e.prototype.skewY=function skewY(e){return Multiply(this,SkewY(e))};e.prototype.transformPoint=function transformPoint(e){var t=this,r=Translate(e.x,e.y,e.z);r.m44=e.w||1;return{x:(r=t.multiply(r)).m41,y:r.m42,z:r.m43,w:r.m44}};e.prototype.transform=function transform(e){var t=this,r=t.m11*e.x+t.m12*e.y+t.m13*e.z+t.m14*e.w,i=t.m21*e.x+t.m22*e.y+t.m23*e.z+t.m24*e.w,n=t.m31*e.x+t.m32*e.y+t.m33*e.z+t.m34*e.w,o=t.m41*e.x+t.m42*e.y+t.m43*e.z+t.m44*e.w;return{x:r/o,y:i/o,z:n/o,w:o}};Object.defineProperties(e.prototype,t);Object.assign(e,{Translate:Translate,Rotate:Rotate,RotateAxisAngle:RotateAxisAngle,Scale:Scale,SkewX:SkewX,SkewY:SkewY,Multiply:Multiply,fromArray:fromArray,fromMatrix:fromMatrix,fromString:fromString});var r="0.0.24";Object.assign(e,{Version:r});return e}()},(e,t,r)=>{r(140)("Float64",(function(e){return function Float64Array(t,r,i){return e(this,t,r,i)}}))},(e,t,r)=>{r(140)("Float32",(function(e){return function Float32Array(t,r,i){return e(this,t,r,i)}}))},(e,t,r)=>{"use strict";var i=r(64),n=r(39);i({target:"URL",proto:!0,enumerable:!0},{toJSON:function toJSON(){return n(URL.prototype.toString,this)}})},(e,t,r)=>{r(8);r(209);var i=r(210);e.exports=i.Object.fromEntries},(e,t,r)=>{var i=r(64),n=r(97),o=r(134);i({target:"Object",stat:!0},{fromEntries:function fromEntries(e){var t={};n(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0});return t}})},(e,t,r)=>{var i=r(2);e.exports=i},(e,t,r)=>{r(212);r(8);r(217);r(92);r(219);r(220);r(186);r(129);var i=r(210);e.exports=i.Promise},(e,t,r)=>{"use strict";var i=r(64),n=r(2),o=r(41),a=r(76),s=r(79),l=r(69),c=r(30),d=r(61),h=r(62),u=r(213),p=r(214),g=r(97),f=r(215),m=r(17),v=r(216),b=m("toStringTag"),w=n.Error,y=[].push,_=function AggregateError(e,t){var r,i=arguments.length>2?arguments[2]:void 0,n=o(S,this);if(s)r=s(new w,n?a(this):S);else{r=n?this:c(S);d(r,b,"Error")}void 0!==t&&d(r,"message",f(t));v&&d(r,"stack",u(r.stack,1));p(r,i);var l=[];g(e,y,{that:l});d(r,"errors",l);return r};s?s(_,w):l(_,w,{name:!0});var S=_.prototype=c(w.prototype,{constructor:h(1,_),message:h(1,""),name:h(1,"AggregateError")});i({global:!0},{AggregateError:_})},(e,t,r)=>{var i=r(11)("".replace),n=String(Error("zxcasd").stack),o=/\n\s*at [^:]*:[^\n]*/,a=o.test(n);e.exports=function(e,t){if(a&&"string"==typeof e)for(;t--;)e=i(e,o,"");return e}},(e,t,r)=>{var i=r(6),n=r(61);e.exports=function(e,t){i(t)&&"cause"in t&&n(e,"cause",t.cause)}},(e,t,r)=>{var i=r(84);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:i(e)}},(e,t,r)=>{var i=r(13),n=r(62);e.exports=!i((function(){var e=Error("a");if(!("stack"in e))return!0;Object.defineProperty(e,"stack",n(1,7));return 7!==e.stack}))},(e,t,r)=>{var i=r(86),n=r(67),o=r(218);i||n(Object.prototype,"toString",o,{unsafe:!0})},(e,t,r)=>{"use strict";var i=r(86),n=r(85);e.exports=i?{}.toString:function toString(){return"[object "+n(this)+"]"}},(e,t,r)=>{"use strict";var i=r(64),n=r(39),o=r(43),a=r(117),s=r(119),l=r(97);i({target:"Promise",stat:!0},{allSettled:function allSettled(e){var t=this,r=a.f(t),i=r.resolve,c=r.reject,d=s((function(){var r=o(t.resolve),a=[],s=0,c=1;l(e,(function(e){var o=s++,l=!1;c++;n(r,t,e).then((function(e){if(!l){l=!0;a[o]={status:"fulfilled",value:e};--c||i(a)}}),(function(e){if(!l){l=!0;a[o]={status:"rejected",reason:e};--c||i(a)}}))}));--c||i(a)}));d.error&&c(d.value);return r.promise}})},(e,t,r)=>{"use strict";var i=r(64),n=r(43),o=r(28),a=r(39),s=r(117),l=r(119),c=r(97),d="No one promise resolved";i({target:"Promise",stat:!0},{any:function any(e){var t=this,r=o("AggregateError"),i=s.f(t),h=i.resolve,u=i.reject,p=l((function(){var i=n(t.resolve),o=[],s=0,l=1,p=!1;c(e,(function(e){var n=s++,c=!1;l++;a(i,t,e).then((function(e){if(!c&&!p){p=!0;h(e)}}),(function(e){if(!c&&!p){c=!0;o[n]=e;--l||u(new r(o,d))}}))}));--l||u(new r(o,d))}));p.error&&u(p.value);return i.promise}})},function(e,t){r=function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:function(e){return"Symbol("+e+")"};function noop(){}var r=function getGlobals(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}();function typeIsObject(e){return"object"==typeof e&&null!==e||"function"==typeof e}var i=noop,n=Promise,o=Promise.prototype.then,a=Promise.resolve.bind(n),s=Promise.reject.bind(n);function newPromise(e){return new n(e)}function promiseResolvedWith(e){return a(e)}function promiseRejectedWith(e){return s(e)}function PerformPromiseThen(e,t,r){return o.call(e,t,r)}function uponPromise(e,t,r){PerformPromiseThen(PerformPromiseThen(e,t,r),void 0,i)}function uponFulfillment(e,t){uponPromise(e,t)}function uponRejection(e,t){uponPromise(e,void 0,t)}function transformPromiseWith(e,t,r){return PerformPromiseThen(e,t,r)}function setPromiseIsHandledToTrue(e){PerformPromiseThen(e,void 0,i)}var l=function(){var e=r&&r.queueMicrotask;if("function"==typeof e)return e;var t=promiseResolvedWith(void 0);return function(e){return PerformPromiseThen(t,e)}}();function reflectCall(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function promiseCall(e,t,r){try{return promiseResolvedWith(reflectCall(e,t,r))}catch(e){return promiseRejectedWith(e)}}var c=function(){function SimpleQueue(){this._cursor=0;this._size=0;this._front={_elements:[],_next:void 0};this._back=this._front;this._cursor=0;this._size=0}Object.defineProperty(SimpleQueue.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0});SimpleQueue.prototype.push=function(e){var t=this._back,r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0});t._elements.push(e);if(r!==t){this._back=r;t._next=r}++this._size};SimpleQueue.prototype.shift=function(){var e=this._front,t=e,r=this._cursor,i=r+1,n=e._elements,o=n[r];if(16384===i){t=e._next;i=0}--this._size;this._cursor=i;e!==t&&(this._front=t);n[r]=void 0;return o};SimpleQueue.prototype.forEach=function(e){for(var t=this._cursor,r=this._front,i=r._elements;t!==i.length||void 0!==r._next;){if(t===i.length){t=0;if(0===(i=(r=r._next)._elements).length)break}e(i[t]);++t}};SimpleQueue.prototype.peek=function(){var e=this._front,t=this._cursor;return e._elements[t]};return SimpleQueue}();function ReadableStreamReaderGenericInitialize(e,t){e._ownerReadableStream=t;t._reader=e;"readable"===t._state?defaultReaderClosedPromiseInitialize(e):"closed"===t._state?function defaultReaderClosedPromiseInitializeAsResolved(e){defaultReaderClosedPromiseInitialize(e);defaultReaderClosedPromiseResolve(e)}(e):defaultReaderClosedPromiseInitializeAsRejected(e,t._storedError)}function ReadableStreamReaderGenericCancel(e,t){return ReadableStreamCancel(e._ownerReadableStream,t)}function ReadableStreamReaderGenericRelease(e){"readable"===e._ownerReadableStream._state?defaultReaderClosedPromiseReject(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function defaultReaderClosedPromiseResetToRejected(e,t){defaultReaderClosedPromiseInitializeAsRejected(e,t)}(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"));e._ownerReadableStream._reader=void 0;e._ownerReadableStream=void 0}function readerLockException(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(e){e._closedPromise=newPromise((function(t,r){e._closedPromise_resolve=t;e._closedPromise_reject=r}))}function defaultReaderClosedPromiseInitializeAsRejected(e,t){defaultReaderClosedPromiseInitialize(e);defaultReaderClosedPromiseReject(e,t)}function defaultReaderClosedPromiseReject(e,t){if(void 0!==e._closedPromise_reject){setPromiseIsHandledToTrue(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=void 0;e._closedPromise_reject=void 0}}function defaultReaderClosedPromiseResolve(e){if(void 0!==e._closedPromise_resolve){e._closedPromise_resolve(void 0);e._closedPromise_resolve=void 0;e._closedPromise_reject=void 0}}var d=t("[[AbortSteps]]"),h=t("[[ErrorSteps]]"),u=t("[[CancelSteps]]"),p=t("[[PullSteps]]"),g=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},f=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function assertDictionary(e,t){if(void 0!==e&&!function isDictionary(e){return"object"==typeof e||"function"==typeof e}(e))throw new TypeError(t+" is not an object.")}function assertFunction(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function.")}function assertObject(e,t){if(!function isObject(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(t+" is not an object.")}function assertRequiredArgument(e,t,r){if(void 0===e)throw new TypeError("Parameter "+t+" is required in '"+r+"'.")}function assertRequiredField(e,t,r){if(void 0===e)throw new TypeError(t+" is required in '"+r+"'.")}function convertUnrestrictedDouble(e){return Number(e)}function censorNegativeZero(e){return 0===e?0:e}function convertUnsignedLongLongWithEnforceRange(e,t){var r=Number.MAX_SAFE_INTEGER,i=Number(e);i=censorNegativeZero(i);if(!g(i))throw new TypeError(t+" is not a finite number");if((i=function integerPart(e){return censorNegativeZero(f(e))}(i))<0||i>r)throw new TypeError(t+" is outside the accepted range of 0 to "+r+", inclusive");return g(i)&&0!==i?i:0}function assertReadableStream(e,t){if(!IsReadableStream(e))throw new TypeError(t+" is not a ReadableStream.")}function AcquireReadableStreamDefaultReader(e){return new b(e)}function ReadableStreamAddReadRequest(e,t){e._reader._readRequests.push(t)}function ReadableStreamFulfillReadRequest(e,t,r){var i=e._reader._readRequests.shift();r?i._closeSteps():i._chunkSteps(t)}function ReadableStreamGetNumReadRequests(e){return e._reader._readRequests.length}function ReadableStreamHasDefaultReader(e){var t=e._reader;return void 0!==t&&!!IsReadableStreamDefaultReader(t)}var m,v,b=function(){function ReadableStreamDefaultReader(e){assertRequiredArgument(e,1,"ReadableStreamDefaultReader");assertReadableStream(e,"First parameter");if(IsReadableStreamLocked(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,e);this._readRequests=new c}Object.defineProperty(ReadableStreamDefaultReader.prototype,"closed",{get:function(){return IsReadableStreamDefaultReader(this)?this._closedPromise:promiseRejectedWith(defaultReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0});ReadableStreamDefaultReader.prototype.cancel=function(e){void 0===e&&(e=void 0);return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,e):promiseRejectedWith(defaultReaderBrandCheckException("cancel"))};ReadableStreamDefaultReader.prototype.read=function(){if(!IsReadableStreamDefaultReader(this))return promiseRejectedWith(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var e,t,r=newPromise((function(r,i){e=r;t=i}));ReadableStreamDefaultReaderRead(this,{_chunkSteps:function(t){return e({value:t,done:!1})},_closeSteps:function(){return e({value:void 0,done:!0})},_errorSteps:function(e){return t(e)}});return r};ReadableStreamDefaultReader.prototype.releaseLock=function(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}};return ReadableStreamDefaultReader}();Object.defineProperties(b.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(b.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function IsReadableStreamDefaultReader(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof b}function ReadableStreamDefaultReaderRead(e,t){var r=e._ownerReadableStream;r._disturbed=!0;"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[p](t)}function defaultReaderBrandCheckException(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}if("symbol"==typeof t.asyncIterator){v=((m={})[t.asyncIterator]=function(){return this},m);Object.defineProperty(v,t.asyncIterator,{enumerable:!1})}var w=function(){function ReadableStreamAsyncIteratorImpl(e,t){this._ongoingPromise=void 0;this._isFinished=!1;this._reader=e;this._preventCancel=t}ReadableStreamAsyncIteratorImpl.prototype.next=function(){var e=this,nextSteps=function(){return e._nextSteps()};this._ongoingPromise=this._ongoingPromise?transformPromiseWith(this._ongoingPromise,nextSteps,nextSteps):nextSteps();return this._ongoingPromise};ReadableStreamAsyncIteratorImpl.prototype.return=function(e){var t=this,returnSteps=function(){return t._returnSteps(e)};return this._ongoingPromise?transformPromiseWith(this._ongoingPromise,returnSteps,returnSteps):returnSteps()};ReadableStreamAsyncIteratorImpl.prototype._nextSteps=function(){var e=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t,r,i=this._reader;if(void 0===i._ownerReadableStream)return promiseRejectedWith(readerLockException("iterate"));var n=newPromise((function(e,i){t=e;r=i}));ReadableStreamDefaultReaderRead(i,{_chunkSteps:function(r){e._ongoingPromise=void 0;l((function(){return t({value:r,done:!1})}))},_closeSteps:function(){e._ongoingPromise=void 0;e._isFinished=!0;ReadableStreamReaderGenericRelease(i);t({value:void 0,done:!0})},_errorSteps:function(t){e._ongoingPromise=void 0;e._isFinished=!0;ReadableStreamReaderGenericRelease(i);r(t)}});return n};ReadableStreamAsyncIteratorImpl.prototype._returnSteps=function(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;var t=this._reader;if(void 0===t._ownerReadableStream)return promiseRejectedWith(readerLockException("finish iterating"));if(!this._preventCancel){var r=ReadableStreamReaderGenericCancel(t,e);ReadableStreamReaderGenericRelease(t);return transformPromiseWith(r,(function(){return{value:e,done:!0}}))}ReadableStreamReaderGenericRelease(t);return promiseResolvedWith({value:e,done:!0})};return ReadableStreamAsyncIteratorImpl}(),y={next:function(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():promiseRejectedWith(streamAsyncIteratorBrandCheckException("next"))},return:function(e){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(e):promiseRejectedWith(streamAsyncIteratorBrandCheckException("return"))}};void 0!==v&&Object.setPrototypeOf(y,v);function IsReadableStreamAsyncIterator(e){if(!typeIsObject(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof w}catch(e){return!1}}function streamAsyncIteratorBrandCheckException(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var _=Number.isNaN||function(e){return e!=e};function CreateArrayFromList(e){return e.slice()}function CopyDataBlockBytes(e,t,r,i,n){new Uint8Array(e).set(new Uint8Array(r,i,n),t)}function ArrayBufferSlice(e,t,r){if(e.slice)return e.slice(t,r);var i=r-t,n=new ArrayBuffer(i);CopyDataBlockBytes(n,0,e,t,i);return n}function CloneAsUint8Array(e){var t=ArrayBufferSlice(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function DequeueValue(e){var t=e._queue.shift();e._queueTotalSize-=t.size;e._queueTotalSize<0&&(e._queueTotalSize=0);return t.value}function EnqueueValueWithSize(e,t,r){if(!function IsNonNegativeNumber(e){return!("number"!=typeof e||_(e)||e<0)}(r)||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:r});e._queueTotalSize+=r}function ResetQueue(e){e._queue=new c;e._queueTotalSize=0}var S=function(){function ReadableStreamBYOBRequest(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamBYOBRequest.prototype,"view",{get:function(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view},enumerable:!1,configurable:!0});ReadableStreamBYOBRequest.prototype.respond=function(e){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");assertRequiredArgument(e,1,"respond");e=convertUnsignedLongLongWithEnforceRange(e,"First parameter");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");this._view.buffer;ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,e)};ReadableStreamBYOBRequest.prototype.respondWithNewView=function(e){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");assertRequiredArgument(e,1,"respondWithNewView");if(!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");e.buffer;ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,e)};return ReadableStreamBYOBRequest}();Object.defineProperties(S.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(S.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var P=function(){function ReadableByteStreamController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableByteStreamController.prototype,"byobRequest",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)},enumerable:!1,configurable:!0});Object.defineProperty(ReadableByteStreamController.prototype,"desiredSize",{get:function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)},enumerable:!1,configurable:!0});ReadableByteStreamController.prototype.close=function(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError("The stream (in "+e+" state) is not in the readable state and cannot be closed");ReadableByteStreamControllerClose(this)};ReadableByteStreamController.prototype.enqueue=function(e){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");assertRequiredArgument(e,1,"enqueue");if(!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");ReadableByteStreamControllerEnqueue(this,e)};ReadableByteStreamController.prototype.error=function(e){void 0===e&&(e=void 0);if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,e)};ReadableByteStreamController.prototype[u]=function(e){ReadableByteStreamControllerClearPendingPullIntos(this);ResetQueue(this);var t=this._cancelAlgorithm(e);ReadableByteStreamControllerClearAlgorithms(this);return t};ReadableByteStreamController.prototype[p]=function(e){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var r=this._queue.shift();this._queueTotalSize-=r.byteLength;ReadableByteStreamControllerHandleQueueDrain(this);var i=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);e._chunkSteps(i)}else{var n=this._autoAllocateChunkSize;if(void 0!==n){var o=void 0;try{o=new ArrayBuffer(n)}catch(t){e._errorSteps(t);return}var a={buffer:o,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}ReadableStreamAddReadRequest(t,e);ReadableByteStreamControllerCallPullIfNeeded(this)}};return ReadableByteStreamController}();Object.defineProperties(P.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(P.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function IsReadableByteStreamController(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof P}function IsReadableStreamBYOBRequest(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof S}function ReadableByteStreamControllerCallPullIfNeeded(e){var t=function ReadableByteStreamControllerShouldCallPull(e){var t=e._controlledReadableByteStream;return"readable"===t._state&&(!e._closeRequested&&(!!e._started&&(!!(ReadableStreamHasDefaultReader(t)&&ReadableStreamGetNumReadRequests(t)>0)||(!!(ReadableStreamHasBYOBReader(t)&&ReadableStreamGetNumReadIntoRequests(t)>0)||ReadableByteStreamControllerGetDesiredSize(e)>0))))}(e);if(t)if(e._pulling)e._pullAgain=!0;else{e._pulling=!0;uponPromise(e._pullAlgorithm(),(function(){e._pulling=!1;if(e._pullAgain){e._pullAgain=!1;ReadableByteStreamControllerCallPullIfNeeded(e)}}),(function(t){ReadableByteStreamControllerError(e,t)}))}}function ReadableByteStreamControllerClearPendingPullIntos(e){ReadableByteStreamControllerInvalidateBYOBRequest(e);e._pendingPullIntos=new c}function ReadableByteStreamControllerCommitPullIntoDescriptor(e,t){var r=!1;"closed"===e._state&&(r=!0);var i=ReadableByteStreamControllerConvertPullIntoDescriptor(t);"default"===t.readerType?ReadableStreamFulfillReadRequest(e,i,r):function ReadableStreamFulfillReadIntoRequest(e,t,r){var i=e._reader._readIntoRequests.shift();r?i._closeSteps(t):i._chunkSteps(t)}(e,i,r)}function ReadableByteStreamControllerConvertPullIntoDescriptor(e){var t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function ReadableByteStreamControllerEnqueueChunkToQueue(e,t,r,i){e._queue.push({buffer:t,byteOffset:r,byteLength:i});e._queueTotalSize+=i}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,t){var r=t.elementSize,i=t.bytesFilled-t.bytesFilled%r,n=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+n,a=o-o%r,s=n,l=!1;if(a>i){s=a-t.bytesFilled;l=!0}for(var c=e._queue;s>0;){var d=c.peek(),h=Math.min(s,d.byteLength),u=t.byteOffset+t.bytesFilled;CopyDataBlockBytes(t.buffer,u,d.buffer,d.byteOffset,h);if(d.byteLength===h)c.shift();else{d.byteOffset+=h;d.byteLength-=h}e._queueTotalSize-=h;ReadableByteStreamControllerFillHeadPullIntoDescriptor(0,h,t);s-=h}return l}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(e,t,r){r.bytesFilled+=t}function ReadableByteStreamControllerHandleQueueDrain(e){if(0===e._queueTotalSize&&e._closeRequested){ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamClose(e._controlledReadableByteStream)}else ReadableByteStreamControllerCallPullIfNeeded(e)}function ReadableByteStreamControllerInvalidateBYOBRequest(e){if(null!==e._byobRequest){e._byobRequest._associatedReadableByteStreamController=void 0;e._byobRequest._view=null;e._byobRequest=null}}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;var t=e._pendingPullIntos.peek();if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,t)){ReadableByteStreamControllerShiftPendingPullInto(e);ReadableByteStreamControllerCommitPullIntoDescriptor(e._controlledReadableByteStream,t)}}}function ReadableByteStreamControllerRespondInternal(e,t){var r=e._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(e);"closed"===e._controlledReadableByteStream._state?function ReadableByteStreamControllerRespondInClosedState(e,t){var r=e._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(r))for(;ReadableStreamGetNumReadIntoRequests(r)>0;)ReadableByteStreamControllerCommitPullIntoDescriptor(r,ReadableByteStreamControllerShiftPendingPullInto(e))}(e):function ReadableByteStreamControllerRespondInReadableState(e,t,r){ReadableByteStreamControllerFillHeadPullIntoDescriptor(0,t,r);if(!(r.bytesFilled<r.elementSize)){ReadableByteStreamControllerShiftPendingPullInto(e);var i=r.bytesFilled%r.elementSize;if(i>0){var n=r.byteOffset+r.bytesFilled,o=ArrayBufferSlice(r.buffer,n-i,n);ReadableByteStreamControllerEnqueueChunkToQueue(e,o,0,o.byteLength)}r.bytesFilled-=i;ReadableByteStreamControllerCommitPullIntoDescriptor(e._controlledReadableByteStream,r);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)}}(e,t,r);ReadableByteStreamControllerCallPullIfNeeded(e)}function ReadableByteStreamControllerShiftPendingPullInto(e){return e._pendingPullIntos.shift()}function ReadableByteStreamControllerClearAlgorithms(e){e._pullAlgorithm=void 0;e._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(e){var t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){var r=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(e,r);throw r}ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamClose(t)}}function ReadableByteStreamControllerEnqueue(e,t){var r=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===r._state){var i=t.buffer,n=t.byteOffset,o=t.byteLength,a=i;if(e._pendingPullIntos.length>0){var s=e._pendingPullIntos.peek();s.buffer;s.buffer=s.buffer}ReadableByteStreamControllerInvalidateBYOBRequest(e);if(ReadableStreamHasDefaultReader(r))if(0===ReadableStreamGetNumReadRequests(r))ReadableByteStreamControllerEnqueueChunkToQueue(e,a,n,o);else{e._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(e);ReadableStreamFulfillReadRequest(r,new Uint8Array(a,n,o),!1)}else if(ReadableStreamHasBYOBReader(r)){ReadableByteStreamControllerEnqueueChunkToQueue(e,a,n,o);ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)}else ReadableByteStreamControllerEnqueueChunkToQueue(e,a,n,o);ReadableByteStreamControllerCallPullIfNeeded(e)}}function ReadableByteStreamControllerError(e,t){var r=e._controlledReadableByteStream;if("readable"===r._state){ReadableByteStreamControllerClearPendingPullIntos(e);ResetQueue(e);ReadableByteStreamControllerClearAlgorithms(e);ReadableStreamError(r,t)}}function ReadableByteStreamControllerGetBYOBRequest(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),i=Object.create(S.prototype);!function SetUpReadableStreamBYOBRequest(e,t,r){e._associatedReadableByteStreamController=t;e._view=r}(i,e,r);e._byobRequest=i}return e._byobRequest}function ReadableByteStreamControllerGetDesiredSize(e){var t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function ReadableByteStreamControllerRespond(e,t){var r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=r.buffer;ReadableByteStreamControllerRespondInternal(e,t)}function ReadableByteStreamControllerRespondWithNewView(e,t){var r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var i=t.byteLength;r.buffer=t.buffer;ReadableByteStreamControllerRespondInternal(e,i)}function SetUpReadableByteStreamController(e,t,r,i,n,o,a){t._controlledReadableByteStream=e;t._pullAgain=!1;t._pulling=!1;t._byobRequest=null;t._queue=t._queueTotalSize=void 0;ResetQueue(t);t._closeRequested=!1;t._started=!1;t._strategyHWM=o;t._pullAlgorithm=i;t._cancelAlgorithm=n;t._autoAllocateChunkSize=a;t._pendingPullIntos=new c;e._readableStreamController=t;uponPromise(promiseResolvedWith(r()),(function(){t._started=!0;ReadableByteStreamControllerCallPullIfNeeded(t)}),(function(e){ReadableByteStreamControllerError(t,e)}))}function byobRequestBrandCheckException(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function byteStreamControllerBrandCheckException(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function AcquireReadableStreamBYOBReader(e){return new C(e)}function ReadableStreamAddReadIntoRequest(e,t){e._reader._readIntoRequests.push(t)}function ReadableStreamGetNumReadIntoRequests(e){return e._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(e){var t=e._reader;return void 0!==t&&!!IsReadableStreamBYOBReader(t)}var C=function(){function ReadableStreamBYOBReader(e){assertRequiredArgument(e,1,"ReadableStreamBYOBReader");assertReadableStream(e,"First parameter");if(IsReadableStreamLocked(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,e);this._readIntoRequests=new c}Object.defineProperty(ReadableStreamBYOBReader.prototype,"closed",{get:function(){return IsReadableStreamBYOBReader(this)?this._closedPromise:promiseRejectedWith(byobReaderBrandCheckException("closed"))},enumerable:!1,configurable:!0});ReadableStreamBYOBReader.prototype.cancel=function(e){void 0===e&&(e=void 0);return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?promiseRejectedWith(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,e):promiseRejectedWith(byobReaderBrandCheckException("cancel"))};ReadableStreamBYOBReader.prototype.read=function(e){if(!IsReadableStreamBYOBReader(this))return promiseRejectedWith(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(e))return promiseRejectedWith(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return promiseRejectedWith(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return promiseRejectedWith(new TypeError("view's buffer must have non-zero byteLength"));e.buffer;if(void 0===this._ownerReadableStream)return promiseRejectedWith(readerLockException("read from"));var t,r,i=newPromise((function(e,i){t=e;r=i}));ReadableStreamBYOBReaderRead(this,e,{_chunkSteps:function(e){return t({value:e,done:!1})},_closeSteps:function(e){return t({value:e,done:!0})},_errorSteps:function(e){return r(e)}});return i};ReadableStreamBYOBReader.prototype.releaseLock=function(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}};return ReadableStreamBYOBReader}();Object.defineProperties(C.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(C.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function IsReadableStreamBYOBReader(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof C}function ReadableStreamBYOBReaderRead(e,t,r){var i=e._ownerReadableStream;i._disturbed=!0;"errored"===i._state?r._errorSteps(i._storedError):function ReadableByteStreamControllerPullInto(e,t,r){var i=e._controlledReadableByteStream,n=1;t.constructor!==DataView&&(n=t.constructor.BYTES_PER_ELEMENT);var o=t.constructor,a=t.buffer,s={buffer:a,bufferByteLength:a.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:n,viewConstructor:o,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(s);ReadableStreamAddReadIntoRequest(i,r)}else if("closed"!==i._state){if(e._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(e,s)){var l=ReadableByteStreamControllerConvertPullIntoDescriptor(s);ReadableByteStreamControllerHandleQueueDrain(e);r._chunkSteps(l);return}if(e._closeRequested){var c=new TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(e,c);r._errorSteps(c);return}}e._pendingPullIntos.push(s);ReadableStreamAddReadIntoRequest(i,r);ReadableByteStreamControllerCallPullIfNeeded(e)}else{var d=new o(s.buffer,s.byteOffset,0);r._closeSteps(d)}}(i._readableStreamController,t,r)}function byobReaderBrandCheckException(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function ExtractHighWaterMark(e,t){var r=e.highWaterMark;if(void 0===r)return t;if(_(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function ExtractSizeAlgorithm(e){var t=e.size;return t||function(){return 1}}function convertQueuingStrategy(e,t){assertDictionary(e,t);var r=null==e?void 0:e.highWaterMark,i=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:convertUnrestrictedDouble(r),size:void 0===i?void 0:convertQueuingStrategySize(i,t+" has member 'size' that")}}function convertQueuingStrategySize(e,t){assertFunction(e,t);return function(t){return convertUnrestrictedDouble(e(t))}}function convertUnderlyingSinkAbortCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSinkCloseCallback(e,t,r){assertFunction(e,r);return function(){return promiseCall(e,t,[])}}function convertUnderlyingSinkStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertUnderlyingSinkWriteCallback(e,t,r){assertFunction(e,r);return function(r,i){return promiseCall(e,t,[r,i])}}function assertWritableStream(e,t){if(!IsWritableStream(e))throw new TypeError(t+" is not a WritableStream.")}var R="function"==typeof AbortController,E=function(){function WritableStream(e,t){void 0===e&&(e={});void 0===t&&(t={});void 0===e?e=null:assertObject(e,"First parameter");var r=convertQueuingStrategy(t,"Second parameter"),i=function convertUnderlyingSink(e,t){assertDictionary(e,t);var r=null==e?void 0:e.abort,i=null==e?void 0:e.close,n=null==e?void 0:e.start,o=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:convertUnderlyingSinkAbortCallback(r,e,t+" has member 'abort' that"),close:void 0===i?void 0:convertUnderlyingSinkCloseCallback(i,e,t+" has member 'close' that"),start:void 0===n?void 0:convertUnderlyingSinkStartCallback(n,e,t+" has member 'start' that"),write:void 0===a?void 0:convertUnderlyingSinkWriteCallback(a,e,t+" has member 'write' that"),type:o}}(e,"First parameter");InitializeWritableStream(this);if(void 0!==i.type)throw new RangeError("Invalid type is specified");var n=ExtractSizeAlgorithm(r);!function SetUpWritableStreamDefaultControllerFromUnderlyingSink(e,t,r,i){var n=Object.create(I.prototype),startAlgorithm=function(){},writeAlgorithm=function(){return promiseResolvedWith(void 0)},closeAlgorithm=function(){return promiseResolvedWith(void 0)},abortAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==t.start&&(startAlgorithm=function(){return t.start(n)});void 0!==t.write&&(writeAlgorithm=function(e){return t.write(e,n)});void 0!==t.close&&(closeAlgorithm=function(){return t.close()});void 0!==t.abort&&(abortAlgorithm=function(e){return t.abort(e)});SetUpWritableStreamDefaultController(e,n,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,r,i)}(this,i,ExtractHighWaterMark(r,1),n)}Object.defineProperty(WritableStream.prototype,"locked",{get:function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)},enumerable:!1,configurable:!0});WritableStream.prototype.abort=function(e){void 0===e&&(e=void 0);return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,e):promiseRejectedWith(streamBrandCheckException$2("abort"))};WritableStream.prototype.close=function(){return IsWritableStream(this)?IsWritableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):promiseRejectedWith(streamBrandCheckException$2("close"))};WritableStream.prototype.getWriter=function(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return AcquireWritableStreamDefaultWriter(this)};return WritableStream}();Object.defineProperties(E.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(E.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function AcquireWritableStreamDefaultWriter(e){return new x(e)}function InitializeWritableStream(e){e._state="writable";e._storedError=void 0;e._writer=void 0;e._writableStreamController=void 0;e._writeRequests=new c;e._inFlightWriteRequest=void 0;e._closeRequest=void 0;e._inFlightCloseRequest=void 0;e._pendingAbortRequest=void 0;e._backpressure=!1}function IsWritableStream(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof E}function IsWritableStreamLocked(e){return void 0!==e._writer}function WritableStreamAbort(e,t){var r;if("closed"===e._state||"errored"===e._state)return promiseResolvedWith(void 0);e._writableStreamController._abortReason=t;null===(r=e._writableStreamController._abortController)||void 0===r||r.abort();var i=e._state;if("closed"===i||"errored"===i)return promiseResolvedWith(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;var n=!1;if("erroring"===i){n=!0;t=void 0}var o=newPromise((function(r,i){e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:i,_reason:t,_wasAlreadyErroring:n}}));e._pendingAbortRequest._promise=o;n||WritableStreamStartErroring(e,t);return o}function WritableStreamClose(e){var t=e._state;if("closed"===t||"errored"===t)return promiseRejectedWith(new TypeError("The stream (in "+t+" state) is not in the writable state and cannot be closed"));var r=newPromise((function(t,r){var i={_resolve:t,_reject:r};e._closeRequest=i})),i=e._writer;void 0!==i&&e._backpressure&&"writable"===t&&defaultWriterReadyPromiseResolve(i);!function WritableStreamDefaultControllerClose(e){EnqueueValueWithSize(e,T,0);WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}(e._writableStreamController);return r}function WritableStreamDealWithRejection(e,t){"writable"!==e._state?WritableStreamFinishErroring(e):WritableStreamStartErroring(e,t)}function WritableStreamStartErroring(e,t){var r=e._writableStreamController;e._state="erroring";e._storedError=t;var i=e._writer;void 0!==i&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(i,t);!function WritableStreamHasOperationMarkedInFlight(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&WritableStreamFinishErroring(e)}function WritableStreamFinishErroring(e){e._state="errored";e._writableStreamController[h]();var t=e._storedError;e._writeRequests.forEach((function(e){e._reject(t)}));e._writeRequests=new c;if(void 0!==e._pendingAbortRequest){var r=e._pendingAbortRequest;e._pendingAbortRequest=void 0;if(r._wasAlreadyErroring){r._reject(t);WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}else uponPromise(e._writableStreamController[d](r._reason),(function(){r._resolve();WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}),(function(t){r._reject(t);WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}))}else WritableStreamRejectCloseAndClosedPromiseIfNeeded(e)}function WritableStreamCloseQueuedOrInFlight(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(e){if(void 0!==e._closeRequest){e._closeRequest._reject(e._storedError);e._closeRequest=void 0}var t=e._writer;void 0!==t&&defaultWriterClosedPromiseReject(t,e._storedError)}function WritableStreamUpdateBackpressure(e,t){var r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function defaultWriterReadyPromiseReset(e){defaultWriterReadyPromiseInitialize(e)}(r):defaultWriterReadyPromiseResolve(r));e._backpressure=t}var x=function(){function WritableStreamDefaultWriter(e){assertRequiredArgument(e,1,"WritableStreamDefaultWriter");assertWritableStream(e,"First parameter");if(IsWritableStreamLocked(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e;e._writer=this;var t=e._state;if("writable"===t){!WritableStreamCloseQueuedOrInFlight(e)&&e._backpressure?defaultWriterReadyPromiseInitialize(this):defaultWriterReadyPromiseInitializeAsResolved(this);defaultWriterClosedPromiseInitialize(this)}else if("erroring"===t){defaultWriterReadyPromiseInitializeAsRejected(this,e._storedError);defaultWriterClosedPromiseInitialize(this)}else if("closed"===t){defaultWriterReadyPromiseInitializeAsResolved(this);!function defaultWriterClosedPromiseInitializeAsResolved(e){defaultWriterClosedPromiseInitialize(e);defaultWriterClosedPromiseResolve(e)}(this)}else{var r=e._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,r);defaultWriterClosedPromiseInitializeAsRejected(this,r)}}Object.defineProperty(WritableStreamDefaultWriter.prototype,"closed",{get:function(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:promiseRejectedWith(defaultWriterBrandCheckException("closed"))},enumerable:!1,configurable:!0});Object.defineProperty(WritableStreamDefaultWriter.prototype,"desiredSize",{get:function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return function WritableStreamDefaultWriterGetDesiredSize(e){var t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:WritableStreamDefaultControllerGetDesiredSize(t._writableStreamController)}(this)},enumerable:!1,configurable:!0});Object.defineProperty(WritableStreamDefaultWriter.prototype,"ready",{get:function(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:promiseRejectedWith(defaultWriterBrandCheckException("ready"))},enumerable:!1,configurable:!0});WritableStreamDefaultWriter.prototype.abort=function(e){void 0===e&&(e=void 0);return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("abort")):function WritableStreamDefaultWriterAbort(e,t){return WritableStreamAbort(e._ownerWritableStream,t)}(this,e):promiseRejectedWith(defaultWriterBrandCheckException("abort"))};WritableStreamDefaultWriter.prototype.close=function(){if(!IsWritableStreamDefaultWriter(this))return promiseRejectedWith(defaultWriterBrandCheckException("close"));var e=this._ownerWritableStream;return void 0===e?promiseRejectedWith(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(e)?promiseRejectedWith(new TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)};WritableStreamDefaultWriter.prototype.releaseLock=function(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");void 0!==this._ownerWritableStream&&WritableStreamDefaultWriterRelease(this)};WritableStreamDefaultWriter.prototype.write=function(e){void 0===e&&(e=void 0);return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?promiseRejectedWith(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,e):promiseRejectedWith(defaultWriterBrandCheckException("write"))};return WritableStreamDefaultWriter}();Object.defineProperties(x.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(x.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function IsWritableStreamDefaultWriter(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof x}function WritableStreamDefaultWriterClose(e){return WritableStreamClose(e._ownerWritableStream)}function WritableStreamDefaultWriterEnsureClosedPromiseRejected(e,t){"pending"===e._closedPromiseState?defaultWriterClosedPromiseReject(e,t):function defaultWriterClosedPromiseResetToRejected(e,t){defaultWriterClosedPromiseInitializeAsRejected(e,t)}(e,t)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(e,t){"pending"===e._readyPromiseState?defaultWriterReadyPromiseReject(e,t):function defaultWriterReadyPromiseResetToRejected(e,t){defaultWriterReadyPromiseInitializeAsRejected(e,t)}(e,t)}function WritableStreamDefaultWriterRelease(e){var t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(e,r);WritableStreamDefaultWriterEnsureClosedPromiseRejected(e,r);t._writer=void 0;e._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(e,t){var r=e._ownerWritableStream,i=r._writableStreamController,n=function WritableStreamDefaultControllerGetChunkSize(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){WritableStreamDefaultControllerErrorIfNeeded(e,t);return 1}}(i,t);if(r!==e._ownerWritableStream)return promiseRejectedWith(defaultWriterLockException("write to"));var o=r._state;if("errored"===o)return promiseRejectedWith(r._storedError);if(WritableStreamCloseQueuedOrInFlight(r)||"closed"===o)return promiseRejectedWith(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===o)return promiseRejectedWith(r._storedError);var a=function WritableStreamAddWriteRequest(e){return newPromise((function(t,r){var i={_resolve:t,_reject:r};e._writeRequests.push(i)}))}(r);!function WritableStreamDefaultControllerWrite(e,t,r){try{EnqueueValueWithSize(e,t,r)}catch(t){WritableStreamDefaultControllerErrorIfNeeded(e,t);return}var i=e._controlledWritableStream;WritableStreamCloseQueuedOrInFlight(i)||"writable"!==i._state||WritableStreamUpdateBackpressure(i,WritableStreamDefaultControllerGetBackpressure(e));WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}(i,t,n);return a}var T={},I=function(){function WritableStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(WritableStreamDefaultController.prototype,"abortReason",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason},enumerable:!1,configurable:!0});Object.defineProperty(WritableStreamDefaultController.prototype,"signal",{get:function(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0});WritableStreamDefaultController.prototype.error=function(e){void 0===e&&(e=void 0);if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");"writable"===this._controlledWritableStream._state&&WritableStreamDefaultControllerError(this,e)};WritableStreamDefaultController.prototype[d]=function(e){var t=this._abortAlgorithm(e);WritableStreamDefaultControllerClearAlgorithms(this);return t};WritableStreamDefaultController.prototype[h]=function(){ResetQueue(this)};return WritableStreamDefaultController}();Object.defineProperties(I.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(I.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function IsWritableStreamDefaultController(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof I}function SetUpWritableStreamDefaultController(e,t,r,i,n,o,a,s){t._controlledWritableStream=e;e._writableStreamController=t;t._queue=void 0;t._queueTotalSize=void 0;ResetQueue(t);t._abortReason=void 0;t._abortController=function createAbortController(){if(R)return new AbortController}();t._started=!1;t._strategySizeAlgorithm=s;t._strategyHWM=a;t._writeAlgorithm=i;t._closeAlgorithm=n;t._abortAlgorithm=o;var l=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(e,l);uponPromise(promiseResolvedWith(r()),(function(){t._started=!0;WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}),(function(r){t._started=!0;WritableStreamDealWithRejection(e,r)}))}function WritableStreamDefaultControllerClearAlgorithms(e){e._writeAlgorithm=void 0;e._closeAlgorithm=void 0;e._abortAlgorithm=void 0;e._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerGetDesiredSize(e){return e._strategyHWM-e._queueTotalSize}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(e){var t=e._controlledWritableStream;if(e._started&&void 0===t._inFlightWriteRequest)if("erroring"!==t._state){if(0!==e._queue.length){var r=function PeekQueueValue(e){return e._queue.peek().value}(e);r===T?function WritableStreamDefaultControllerProcessClose(e){var t=e._controlledWritableStream;!function WritableStreamMarkCloseRequestInFlight(e){e._inFlightCloseRequest=e._closeRequest;e._closeRequest=void 0}(t);DequeueValue(e);var r=e._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(e);uponPromise(r,(function(){!function WritableStreamFinishInFlightClose(e){e._inFlightCloseRequest._resolve(void 0);e._inFlightCloseRequest=void 0;if("erroring"===e._state){e._storedError=void 0;if(void 0!==e._pendingAbortRequest){e._pendingAbortRequest._resolve();e._pendingAbortRequest=void 0}}e._state="closed";var t=e._writer;void 0!==t&&defaultWriterClosedPromiseResolve(t)}(t)}),(function(e){!function WritableStreamFinishInFlightCloseWithError(e,t){e._inFlightCloseRequest._reject(t);e._inFlightCloseRequest=void 0;if(void 0!==e._pendingAbortRequest){e._pendingAbortRequest._reject(t);e._pendingAbortRequest=void 0}WritableStreamDealWithRejection(e,t)}(t,e)}))}(e):function WritableStreamDefaultControllerProcessWrite(e,t){var r=e._controlledWritableStream;!function WritableStreamMarkFirstWriteRequestInFlight(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);uponPromise(e._writeAlgorithm(t),(function(){!function WritableStreamFinishInFlightWrite(e){e._inFlightWriteRequest._resolve(void 0);e._inFlightWriteRequest=void 0}(r);var t=r._state;DequeueValue(e);if(!WritableStreamCloseQueuedOrInFlight(r)&&"writable"===t){var i=WritableStreamDefaultControllerGetBackpressure(e);WritableStreamUpdateBackpressure(r,i)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(e)}),(function(t){"writable"===r._state&&WritableStreamDefaultControllerClearAlgorithms(e);!function WritableStreamFinishInFlightWriteWithError(e,t){e._inFlightWriteRequest._reject(t);e._inFlightWriteRequest=void 0;WritableStreamDealWithRejection(e,t)}(r,t)}))}(e,r)}}else WritableStreamFinishErroring(t)}function WritableStreamDefaultControllerErrorIfNeeded(e,t){"writable"===e._controlledWritableStream._state&&WritableStreamDefaultControllerError(e,t)}function WritableStreamDefaultControllerGetBackpressure(e){return WritableStreamDefaultControllerGetDesiredSize(e)<=0}function WritableStreamDefaultControllerError(e,t){var r=e._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(e);WritableStreamStartErroring(r,t)}function streamBrandCheckException$2(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function defaultControllerBrandCheckException$2(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function defaultWriterBrandCheckException(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function defaultWriterLockException(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(e){e._closedPromise=newPromise((function(t,r){e._closedPromise_resolve=t;e._closedPromise_reject=r;e._closedPromiseState="pending"}))}function defaultWriterClosedPromiseInitializeAsRejected(e,t){defaultWriterClosedPromiseInitialize(e);defaultWriterClosedPromiseReject(e,t)}function defaultWriterClosedPromiseReject(e,t){if(void 0!==e._closedPromise_reject){setPromiseIsHandledToTrue(e._closedPromise);e._closedPromise_reject(t);e._closedPromise_resolve=void 0;e._closedPromise_reject=void 0;e._closedPromiseState="rejected"}}function defaultWriterClosedPromiseResolve(e){if(void 0!==e._closedPromise_resolve){e._closedPromise_resolve(void 0);e._closedPromise_resolve=void 0;e._closedPromise_reject=void 0;e._closedPromiseState="resolved"}}function defaultWriterReadyPromiseInitialize(e){e._readyPromise=newPromise((function(t,r){e._readyPromise_resolve=t;e._readyPromise_reject=r}));e._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(e,t){defaultWriterReadyPromiseInitialize(e);defaultWriterReadyPromiseReject(e,t)}function defaultWriterReadyPromiseInitializeAsResolved(e){defaultWriterReadyPromiseInitialize(e);defaultWriterReadyPromiseResolve(e)}function defaultWriterReadyPromiseReject(e,t){if(void 0!==e._readyPromise_reject){setPromiseIsHandledToTrue(e._readyPromise);e._readyPromise_reject(t);e._readyPromise_resolve=void 0;e._readyPromise_reject=void 0;e._readyPromiseState="rejected"}}function defaultWriterReadyPromiseResolve(e){if(void 0!==e._readyPromise_resolve){e._readyPromise_resolve(void 0);e._readyPromise_resolve=void 0;e._readyPromise_reject=void 0;e._readyPromiseState="fulfilled"}}var L="undefined"!=typeof DOMException?DOMException:void 0,A=function isDOMExceptionConstructor(e){if("function"!=typeof e&&"object"!=typeof e)return!1;try{new e;return!0}catch(e){return!1}}(L)?L:function createDOMExceptionPolyfill(){var e=function DOMException(e,t){this.message=e||"";this.name=t||"Error";Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};e.prototype=Object.create(Error.prototype);Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0});return e}();function ReadableStreamPipeTo(e,t,r,i,n,o){var a=AcquireReadableStreamDefaultReader(e),s=AcquireWritableStreamDefaultWriter(t);e._disturbed=!0;var l=!1,c=promiseResolvedWith(void 0);return newPromise((function(d,h){var u;if(void 0!==o){u=function(){var r=new A("Aborted","AbortError"),o=[];i||o.push((function(){return"writable"===t._state?WritableStreamAbort(t,r):promiseResolvedWith(void 0)}));n||o.push((function(){return"readable"===e._state?ReadableStreamCancel(e,r):promiseResolvedWith(void 0)}));shutdownWithAction((function(){return Promise.all(o.map((function(e){return e()})))}),!0,r)};if(o.aborted){u();return}o.addEventListener("abort",u)}isOrBecomesErrored(e,a._closedPromise,(function(e){i?shutdown(!0,e):shutdownWithAction((function(){return WritableStreamAbort(t,e)}),!0,e)}));isOrBecomesErrored(t,s._closedPromise,(function(t){n?shutdown(!0,t):shutdownWithAction((function(){return ReadableStreamCancel(e,t)}),!0,t)}));!function isOrBecomesClosed(e,t,r){"closed"===e._state?r():uponFulfillment(t,r)}(e,a._closedPromise,(function(){r?shutdown():shutdownWithAction((function(){return function WritableStreamDefaultWriterCloseWithErrorPropagation(e){var t=e._ownerWritableStream,r=t._state;return WritableStreamCloseQueuedOrInFlight(t)||"closed"===r?promiseResolvedWith(void 0):"errored"===r?promiseRejectedWith(t._storedError):WritableStreamDefaultWriterClose(e)}(s)}))}));if(WritableStreamCloseQueuedOrInFlight(t)||"closed"===t._state){var p=new TypeError("the destination writable stream closed before all data could be piped to it");n?shutdown(!0,p):shutdownWithAction((function(){return ReadableStreamCancel(e,p)}),!0,p)}setPromiseIsHandledToTrue(function pipeLoop(){return newPromise((function(e,t){!function next(r){r?e():PerformPromiseThen(function pipeStep(){return l?promiseResolvedWith(!0):PerformPromiseThen(s._readyPromise,(function(){return newPromise((function(e,t){ReadableStreamDefaultReaderRead(a,{_chunkSteps:function(t){c=PerformPromiseThen(WritableStreamDefaultWriterWrite(s,t),void 0,noop);e(!1)},_closeSteps:function(){return e(!0)},_errorSteps:t})}))}))}(),next,t)}(!1)}))}());function waitForWritesToFinish(){var e=c;return PerformPromiseThen(c,(function(){return e!==c?waitForWritesToFinish():void 0}))}function isOrBecomesErrored(e,t,r){"errored"===e._state?r(e._storedError):uponRejection(t,r)}function shutdownWithAction(e,r,i){if(!l){l=!0;"writable"!==t._state||WritableStreamCloseQueuedOrInFlight(t)?doTheRest():uponFulfillment(waitForWritesToFinish(),doTheRest)}function doTheRest(){uponPromise(e(),(function(){return finalize(r,i)}),(function(e){return finalize(!0,e)}))}}function shutdown(e,r){if(!l){l=!0;"writable"!==t._state||WritableStreamCloseQueuedOrInFlight(t)?finalize(e,r):uponFulfillment(waitForWritesToFinish(),(function(){return finalize(e,r)}))}}function finalize(e,t){WritableStreamDefaultWriterRelease(s);ReadableStreamReaderGenericRelease(a);void 0!==o&&o.removeEventListener("abort",u);e?h(t):d(void 0)}}))}var D=function(){function ReadableStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(ReadableStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)},enumerable:!1,configurable:!0});ReadableStreamDefaultController.prototype.close=function(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)};ReadableStreamDefaultController.prototype.enqueue=function(e){void 0===e&&(e=void 0);if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw new TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,e)};ReadableStreamDefaultController.prototype.error=function(e){void 0===e&&(e=void 0);if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,e)};ReadableStreamDefaultController.prototype[u]=function(e){ResetQueue(this);var t=this._cancelAlgorithm(e);ReadableStreamDefaultControllerClearAlgorithms(this);return t};ReadableStreamDefaultController.prototype[p]=function(e){var t=this._controlledReadableStream;if(this._queue.length>0){var r=DequeueValue(this);if(this._closeRequested&&0===this._queue.length){ReadableStreamDefaultControllerClearAlgorithms(this);ReadableStreamClose(t)}else ReadableStreamDefaultControllerCallPullIfNeeded(this);e._chunkSteps(r)}else{ReadableStreamAddReadRequest(t,e);ReadableStreamDefaultControllerCallPullIfNeeded(this)}};return ReadableStreamDefaultController}();Object.defineProperties(D.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(D.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function IsReadableStreamDefaultController(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof D}function ReadableStreamDefaultControllerCallPullIfNeeded(e){if(ReadableStreamDefaultControllerShouldCallPull(e))if(e._pulling)e._pullAgain=!0;else{e._pulling=!0;uponPromise(e._pullAlgorithm(),(function(){e._pulling=!1;if(e._pullAgain){e._pullAgain=!1;ReadableStreamDefaultControllerCallPullIfNeeded(e)}}),(function(t){ReadableStreamDefaultControllerError(e,t)}))}}function ReadableStreamDefaultControllerShouldCallPull(e){var t=e._controlledReadableStream;return!!ReadableStreamDefaultControllerCanCloseOrEnqueue(e)&&!!e._started&&(!!(IsReadableStreamLocked(t)&&ReadableStreamGetNumReadRequests(t)>0)||ReadableStreamDefaultControllerGetDesiredSize(e)>0)}function ReadableStreamDefaultControllerClearAlgorithms(e){e._pullAlgorithm=void 0;e._cancelAlgorithm=void 0;e._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(e){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(e)){var t=e._controlledReadableStream;e._closeRequested=!0;if(0===e._queue.length){ReadableStreamDefaultControllerClearAlgorithms(e);ReadableStreamClose(t)}}}function ReadableStreamDefaultControllerEnqueue(e,t){if(ReadableStreamDefaultControllerCanCloseOrEnqueue(e)){var r=e._controlledReadableStream;if(IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0)ReadableStreamFulfillReadRequest(r,t,!1);else{var i=void 0;try{i=e._strategySizeAlgorithm(t)}catch(t){ReadableStreamDefaultControllerError(e,t);throw t}try{EnqueueValueWithSize(e,t,i)}catch(t){ReadableStreamDefaultControllerError(e,t);throw t}}ReadableStreamDefaultControllerCallPullIfNeeded(e)}}function ReadableStreamDefaultControllerError(e,t){var r=e._controlledReadableStream;if("readable"===r._state){ResetQueue(e);ReadableStreamDefaultControllerClearAlgorithms(e);ReadableStreamError(r,t)}}function ReadableStreamDefaultControllerGetDesiredSize(e){var t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function ReadableStreamDefaultControllerCanCloseOrEnqueue(e){var t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function SetUpReadableStreamDefaultController(e,t,r,i,n,o,a){t._controlledReadableStream=e;t._queue=void 0;t._queueTotalSize=void 0;ResetQueue(t);t._started=!1;t._closeRequested=!1;t._pullAgain=!1;t._pulling=!1;t._strategySizeAlgorithm=a;t._strategyHWM=o;t._pullAlgorithm=i;t._cancelAlgorithm=n;e._readableStreamController=t;uponPromise(promiseResolvedWith(r()),(function(){t._started=!0;ReadableStreamDefaultControllerCallPullIfNeeded(t)}),(function(e){ReadableStreamDefaultControllerError(t,e)}))}function defaultControllerBrandCheckException$1(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function ReadableStreamTee(e,t){return IsReadableByteStreamController(e._readableStreamController)?function ReadableByteStreamTee(e){var t,r,i,n,o,a=AcquireReadableStreamDefaultReader(e),s=!1,c=!1,d=!1,h=!1,u=!1,p=newPromise((function(e){o=e}));function forwardReaderError(e){uponRejection(e._closedPromise,(function(t){if(e===a){ReadableByteStreamControllerError(i._readableStreamController,t);ReadableByteStreamControllerError(n._readableStreamController,t);h&&u||o(void 0)}}))}function pullWithDefaultReader(){if(IsReadableStreamBYOBReader(a)){ReadableStreamReaderGenericRelease(a);forwardReaderError(a=AcquireReadableStreamDefaultReader(e))}ReadableStreamDefaultReaderRead(a,{_chunkSteps:function(t){l((function(){c=!1;d=!1;var r=t,a=t;if(!h&&!u)try{a=CloneAsUint8Array(t)}catch(t){ReadableByteStreamControllerError(i._readableStreamController,t);ReadableByteStreamControllerError(n._readableStreamController,t);o(ReadableStreamCancel(e,t));return}h||ReadableByteStreamControllerEnqueue(i._readableStreamController,r);u||ReadableByteStreamControllerEnqueue(n._readableStreamController,a);s=!1;c?pull1Algorithm():d&&pull2Algorithm()}))},_closeSteps:function(){s=!1;h||ReadableByteStreamControllerClose(i._readableStreamController);u||ReadableByteStreamControllerClose(n._readableStreamController);i._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(i._readableStreamController,0);n._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(n._readableStreamController,0);h&&u||o(void 0)},_errorSteps:function(){s=!1}})}function pullWithBYOBReader(t,r){if(IsReadableStreamDefaultReader(a)){ReadableStreamReaderGenericRelease(a);forwardReaderError(a=AcquireReadableStreamBYOBReader(e))}var p=r?n:i,g=r?i:n;ReadableStreamBYOBReaderRead(a,t,{_chunkSteps:function(t){l((function(){c=!1;d=!1;var i=r?u:h;if(r?h:u)i||ReadableByteStreamControllerRespondWithNewView(p._readableStreamController,t);else{var n=void 0;try{n=CloneAsUint8Array(t)}catch(t){ReadableByteStreamControllerError(p._readableStreamController,t);ReadableByteStreamControllerError(g._readableStreamController,t);o(ReadableStreamCancel(e,t));return}i||ReadableByteStreamControllerRespondWithNewView(p._readableStreamController,t);ReadableByteStreamControllerEnqueue(g._readableStreamController,n)}s=!1;c?pull1Algorithm():d&&pull2Algorithm()}))},_closeSteps:function(e){s=!1;var t=r?u:h,i=r?h:u;t||ReadableByteStreamControllerClose(p._readableStreamController);i||ReadableByteStreamControllerClose(g._readableStreamController);if(void 0!==e){t||ReadableByteStreamControllerRespondWithNewView(p._readableStreamController,e);!i&&g._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(g._readableStreamController,0)}t&&i||o(void 0)},_errorSteps:function(){s=!1}})}function pull1Algorithm(){if(s){c=!0;return promiseResolvedWith(void 0)}s=!0;var e=ReadableByteStreamControllerGetBYOBRequest(i._readableStreamController);null===e?pullWithDefaultReader():pullWithBYOBReader(e._view,!1);return promiseResolvedWith(void 0)}function pull2Algorithm(){if(s){d=!0;return promiseResolvedWith(void 0)}s=!0;var e=ReadableByteStreamControllerGetBYOBRequest(n._readableStreamController);null===e?pullWithDefaultReader():pullWithBYOBReader(e._view,!0);return promiseResolvedWith(void 0)}function cancel1Algorithm(i){h=!0;t=i;if(u){var n=CreateArrayFromList([t,r]),a=ReadableStreamCancel(e,n);o(a)}return p}function cancel2Algorithm(i){u=!0;r=i;if(h){var n=CreateArrayFromList([t,r]),a=ReadableStreamCancel(e,n);o(a)}return p}function startAlgorithm(){}i=CreateReadableByteStream(startAlgorithm,pull1Algorithm,cancel1Algorithm);n=CreateReadableByteStream(startAlgorithm,pull2Algorithm,cancel2Algorithm);forwardReaderError(a);return[i,n]}(e):function ReadableStreamDefaultTee(e,t){var r,i,n,o,a,s=AcquireReadableStreamDefaultReader(e),c=!1,d=!1,h=!1,u=!1,p=newPromise((function(e){a=e}));function pullAlgorithm(){if(c){d=!0;return promiseResolvedWith(void 0)}c=!0;ReadableStreamDefaultReaderRead(s,{_chunkSteps:function(e){l((function(){d=!1;var t=e,r=e;h||ReadableStreamDefaultControllerEnqueue(n._readableStreamController,t);u||ReadableStreamDefaultControllerEnqueue(o._readableStreamController,r);c=!1;d&&pullAlgorithm()}))},_closeSteps:function(){c=!1;h||ReadableStreamDefaultControllerClose(n._readableStreamController);u||ReadableStreamDefaultControllerClose(o._readableStreamController);h&&u||a(void 0)},_errorSteps:function(){c=!1}});return promiseResolvedWith(void 0)}function cancel1Algorithm(t){h=!0;r=t;if(u){var n=CreateArrayFromList([r,i]),o=ReadableStreamCancel(e,n);a(o)}return p}function cancel2Algorithm(t){u=!0;i=t;if(h){var n=CreateArrayFromList([r,i]),o=ReadableStreamCancel(e,n);a(o)}return p}function startAlgorithm(){}n=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel1Algorithm);o=CreateReadableStream(startAlgorithm,pullAlgorithm,cancel2Algorithm);uponRejection(s._closedPromise,(function(e){ReadableStreamDefaultControllerError(n._readableStreamController,e);ReadableStreamDefaultControllerError(o._readableStreamController,e);h&&u||a(void 0)}));return[n,o]}(e)}function convertUnderlyingSourceCancelCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSourcePullCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertUnderlyingSourceStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertReadableStreamType(e,t){if("bytes"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function convertReadableStreamReaderMode(e,t){if("byob"!=(e=""+e))throw new TypeError(t+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function convertPipeOptions(e,t){assertDictionary(e,t);var r=null==e?void 0:e.preventAbort,i=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,o=null==e?void 0:e.signal;void 0!==o&&function assertAbortSignal(e,t){if(!function isAbortSignal(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(t+" is not an AbortSignal.")}(o,t+" has member 'signal' that");return{preventAbort:Boolean(r),preventCancel:Boolean(i),preventClose:Boolean(n),signal:o}}var B=function(){function ReadableStream(e,t){void 0===e&&(e={});void 0===t&&(t={});void 0===e?e=null:assertObject(e,"First parameter");var r=convertQueuingStrategy(t,"Second parameter"),i=function convertUnderlyingDefaultOrByteSource(e,t){assertDictionary(e,t);var r=e,i=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,o=null==r?void 0:r.pull,a=null==r?void 0:r.start,s=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===i?void 0:convertUnsignedLongLongWithEnforceRange(i,t+" has member 'autoAllocateChunkSize' that"),cancel:void 0===n?void 0:convertUnderlyingSourceCancelCallback(n,r,t+" has member 'cancel' that"),pull:void 0===o?void 0:convertUnderlyingSourcePullCallback(o,r,t+" has member 'pull' that"),start:void 0===a?void 0:convertUnderlyingSourceStartCallback(a,r,t+" has member 'start' that"),type:void 0===s?void 0:convertReadableStreamType(s,t+" has member 'type' that")}}(e,"First parameter");InitializeReadableStream(this);if("bytes"===i.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function SetUpReadableByteStreamControllerFromUnderlyingSource(e,t,r){var i=Object.create(P.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==t.start&&(startAlgorithm=function(){return t.start(i)});void 0!==t.pull&&(pullAlgorithm=function(){return t.pull(i)});void 0!==t.cancel&&(cancelAlgorithm=function(e){return t.cancel(e)});var n=t.autoAllocateChunkSize;if(0===n)throw new TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(e,i,startAlgorithm,pullAlgorithm,cancelAlgorithm,r,n)}(this,i,ExtractHighWaterMark(r,0))}else{var n=ExtractSizeAlgorithm(r);!function SetUpReadableStreamDefaultControllerFromUnderlyingSource(e,t,r,i){var n=Object.create(D.prototype),startAlgorithm=function(){},pullAlgorithm=function(){return promiseResolvedWith(void 0)},cancelAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==t.start&&(startAlgorithm=function(){return t.start(n)});void 0!==t.pull&&(pullAlgorithm=function(){return t.pull(n)});void 0!==t.cancel&&(cancelAlgorithm=function(e){return t.cancel(e)});SetUpReadableStreamDefaultController(e,n,startAlgorithm,pullAlgorithm,cancelAlgorithm,r,i)}(this,i,ExtractHighWaterMark(r,1),n)}}Object.defineProperty(ReadableStream.prototype,"locked",{get:function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)},enumerable:!1,configurable:!0});ReadableStream.prototype.cancel=function(e){void 0===e&&(e=void 0);return IsReadableStream(this)?IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,e):promiseRejectedWith(streamBrandCheckException$1("cancel"))};ReadableStream.prototype.getReader=function(e){void 0===e&&(e=void 0);if(!IsReadableStream(this))throw streamBrandCheckException$1("getReader");return void 0===function convertReaderOptions(e,t){assertDictionary(e,t);var r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:convertReadableStreamReaderMode(r,t+" has member 'mode' that")}}(e,"First parameter").mode?AcquireReadableStreamDefaultReader(this):AcquireReadableStreamBYOBReader(this)};ReadableStream.prototype.pipeThrough=function(e,t){void 0===t&&(t={});if(!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(e,1,"pipeThrough");var r=function convertReadableWritablePair(e,t){assertDictionary(e,t);var r=null==e?void 0:e.readable;assertRequiredField(r,"readable","ReadableWritablePair");assertReadableStream(r,t+" has member 'readable' that");var i=null==e?void 0:e.writable;assertRequiredField(i,"writable","ReadableWritablePair");assertWritableStream(i,t+" has member 'writable' that");return{readable:r,writable:i}}(e,"First parameter"),i=convertPipeOptions(t,"Second parameter");if(IsReadableStreamLocked(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");setPromiseIsHandledToTrue(ReadableStreamPipeTo(this,r.writable,i.preventClose,i.preventAbort,i.preventCancel,i.signal));return r.readable};ReadableStream.prototype.pipeTo=function(e,t){void 0===t&&(t={});if(!IsReadableStream(this))return promiseRejectedWith(streamBrandCheckException$1("pipeTo"));if(void 0===e)return promiseRejectedWith("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(e))return promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var r;try{r=convertPipeOptions(t,"Second parameter")}catch(e){return promiseRejectedWith(e)}return IsReadableStreamLocked(this)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(e)?promiseRejectedWith(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)};ReadableStream.prototype.tee=function(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");return CreateArrayFromList(ReadableStreamTee(this))};ReadableStream.prototype.values=function(e){void 0===e&&(e=void 0);if(!IsReadableStream(this))throw streamBrandCheckException$1("values");return function AcquireReadableStreamAsyncIterator(e,t){var r=AcquireReadableStreamDefaultReader(e),i=new w(r,t),n=Object.create(y);n._asyncIteratorImpl=i;return n}(this,function convertIteratorOptions(e,t){assertDictionary(e,t);var r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e,"First parameter").preventCancel)};return ReadableStream}();Object.defineProperties(B.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(B.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0});"symbol"==typeof t.asyncIterator&&Object.defineProperty(B.prototype,t.asyncIterator,{value:B.prototype.values,writable:!0,configurable:!0});function CreateReadableStream(e,t,r,i,n){void 0===i&&(i=1);void 0===n&&(n=function(){return 1});var o=Object.create(B.prototype);InitializeReadableStream(o);SetUpReadableStreamDefaultController(o,Object.create(D.prototype),e,t,r,i,n);return o}function CreateReadableByteStream(e,t,r){var i=Object.create(B.prototype);InitializeReadableStream(i);SetUpReadableByteStreamController(i,Object.create(P.prototype),e,t,r,0,void 0);return i}function InitializeReadableStream(e){e._state="readable";e._reader=void 0;e._storedError=void 0;e._disturbed=!1}function IsReadableStream(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof B}function IsReadableStreamLocked(e){return void 0!==e._reader}function ReadableStreamCancel(e,t){e._disturbed=!0;if("closed"===e._state)return promiseResolvedWith(void 0);if("errored"===e._state)return promiseRejectedWith(e._storedError);ReadableStreamClose(e);var r=e._reader;if(void 0!==r&&IsReadableStreamBYOBReader(r)){r._readIntoRequests.forEach((function(e){e._closeSteps(void 0)}));r._readIntoRequests=new c}return transformPromiseWith(e._readableStreamController[u](t),noop)}function ReadableStreamClose(e){e._state="closed";var t=e._reader;if(void 0!==t){defaultReaderClosedPromiseResolve(t);if(IsReadableStreamDefaultReader(t)){t._readRequests.forEach((function(e){e._closeSteps()}));t._readRequests=new c}}}function ReadableStreamError(e,t){e._state="errored";e._storedError=t;var r=e._reader;if(void 0!==r){defaultReaderClosedPromiseReject(r,t);if(IsReadableStreamDefaultReader(r)){r._readRequests.forEach((function(e){e._errorSteps(t)}));r._readRequests=new c}else{r._readIntoRequests.forEach((function(e){e._errorSteps(t)}));r._readIntoRequests=new c}}}function streamBrandCheckException$1(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function convertQueuingStrategyInit(e,t){assertDictionary(e,t);var r=null==e?void 0:e.highWaterMark;assertRequiredField(r,"highWaterMark","QueuingStrategyInit");return{highWaterMark:convertUnrestrictedDouble(r)}}var byteLengthSizeFunction=function(e){return e.byteLength};Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0});var M=function(){function ByteLengthQueuingStrategy(e){assertRequiredArgument(e,1,"ByteLengthQueuingStrategy");e=convertQueuingStrategyInit(e,"First parameter");this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}Object.defineProperty(ByteLengthQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0});Object.defineProperty(ByteLengthQueuingStrategy.prototype,"size",{get:function(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction},enumerable:!1,configurable:!0});return ByteLengthQueuingStrategy}();Object.defineProperties(M.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(M.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function byteLengthBrandCheckException(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function IsByteLengthQueuingStrategy(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof M}var countSizeFunction=function(){return 1};Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0});var O=function(){function CountQueuingStrategy(e){assertRequiredArgument(e,1,"CountQueuingStrategy");e=convertQueuingStrategyInit(e,"First parameter");this._countQueuingStrategyHighWaterMark=e.highWaterMark}Object.defineProperty(CountQueuingStrategy.prototype,"highWaterMark",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0});Object.defineProperty(CountQueuingStrategy.prototype,"size",{get:function(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction},enumerable:!1,configurable:!0});return CountQueuingStrategy}();Object.defineProperties(O.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(O.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function countBrandCheckException(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function IsCountQueuingStrategy(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof O}function convertTransformerFlushCallback(e,t,r){assertFunction(e,r);return function(r){return promiseCall(e,t,[r])}}function convertTransformerStartCallback(e,t,r){assertFunction(e,r);return function(r){return reflectCall(e,t,[r])}}function convertTransformerTransformCallback(e,t,r){assertFunction(e,r);return function(r,i){return promiseCall(e,t,[r,i])}}var k=function(){function TransformStream(e,t,r){void 0===e&&(e={});void 0===t&&(t={});void 0===r&&(r={});void 0===e&&(e=null);var i=convertQueuingStrategy(t,"Second parameter"),n=convertQueuingStrategy(r,"Third parameter"),o=function convertTransformer(e,t){assertDictionary(e,t);var r=null==e?void 0:e.flush,i=null==e?void 0:e.readableType,n=null==e?void 0:e.start,o=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{flush:void 0===r?void 0:convertTransformerFlushCallback(r,e,t+" has member 'flush' that"),readableType:i,start:void 0===n?void 0:convertTransformerStartCallback(n,e,t+" has member 'start' that"),transform:void 0===o?void 0:convertTransformerTransformCallback(o,e,t+" has member 'transform' that"),writableType:a}}(e,"First parameter");if(void 0!==o.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==o.writableType)throw new RangeError("Invalid writableType specified");var a,s=ExtractHighWaterMark(n,0),l=ExtractSizeAlgorithm(n),c=ExtractHighWaterMark(i,1),d=ExtractSizeAlgorithm(i);!function InitializeTransformStream(e,t,r,i,n,o){function startAlgorithm(){return t}function writeAlgorithm(t){return function TransformStreamDefaultSinkWriteAlgorithm(e,t){var r=e._transformStreamController;return e._backpressure?transformPromiseWith(e._backpressureChangePromise,(function(){var i=e._writable;if("erroring"===i._state)throw i._storedError;return TransformStreamDefaultControllerPerformTransform(r,t)})):TransformStreamDefaultControllerPerformTransform(r,t)}(e,t)}function abortAlgorithm(t){return function TransformStreamDefaultSinkAbortAlgorithm(e,t){TransformStreamError(e,t);return promiseResolvedWith(void 0)}(e,t)}function closeAlgorithm(){return function TransformStreamDefaultSinkCloseAlgorithm(e){var t=e._readable,r=e._transformStreamController,i=r._flushAlgorithm();TransformStreamDefaultControllerClearAlgorithms(r);return transformPromiseWith(i,(function(){if("errored"===t._state)throw t._storedError;ReadableStreamDefaultControllerClose(t._readableStreamController)}),(function(r){TransformStreamError(e,r);throw t._storedError}))}(e)}e._writable=function CreateWritableStream(e,t,r,i,n,o){void 0===n&&(n=1);void 0===o&&(o=function(){return 1});var a=Object.create(E.prototype);InitializeWritableStream(a);SetUpWritableStreamDefaultController(a,Object.create(I.prototype),e,t,r,i,n,o);return a}(startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,r,i);function pullAlgorithm(){return function TransformStreamDefaultSourcePullAlgorithm(e){TransformStreamSetBackpressure(e,!1);return e._backpressureChangePromise}(e)}function cancelAlgorithm(t){TransformStreamErrorWritableAndUnblockWrite(e,t);return promiseResolvedWith(void 0)}e._readable=CreateReadableStream(startAlgorithm,pullAlgorithm,cancelAlgorithm,n,o);e._backpressure=void 0;e._backpressureChangePromise=void 0;e._backpressureChangePromise_resolve=void 0;TransformStreamSetBackpressure(e,!0);e._transformStreamController=void 0}(this,newPromise((function(e){a=e})),c,d,s,l);!function SetUpTransformStreamDefaultControllerFromTransformer(e,t){var r=Object.create(N.prototype),transformAlgorithm=function(e){try{TransformStreamDefaultControllerEnqueue(r,e);return promiseResolvedWith(void 0)}catch(e){return promiseRejectedWith(e)}},flushAlgorithm=function(){return promiseResolvedWith(void 0)};void 0!==t.transform&&(transformAlgorithm=function(e){return t.transform(e,r)});void 0!==t.flush&&(flushAlgorithm=function(){return t.flush(r)});!function SetUpTransformStreamDefaultController(e,t,r,i){t._controlledTransformStream=e;e._transformStreamController=t;t._transformAlgorithm=r;t._flushAlgorithm=i}(e,r,transformAlgorithm,flushAlgorithm)}(this,o);void 0!==o.start?a(o.start(this._transformStreamController)):a(void 0)}Object.defineProperty(TransformStream.prototype,"readable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable},enumerable:!1,configurable:!0});Object.defineProperty(TransformStream.prototype,"writable",{get:function(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable},enumerable:!1,configurable:!0});return TransformStream}();Object.defineProperties(k.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(k.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function IsTransformStream(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof k}function TransformStreamError(e,t){ReadableStreamDefaultControllerError(e._readable._readableStreamController,t);TransformStreamErrorWritableAndUnblockWrite(e,t)}function TransformStreamErrorWritableAndUnblockWrite(e,t){TransformStreamDefaultControllerClearAlgorithms(e._transformStreamController);WritableStreamDefaultControllerErrorIfNeeded(e._writable._writableStreamController,t);e._backpressure&&TransformStreamSetBackpressure(e,!1)}function TransformStreamSetBackpressure(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve();e._backpressureChangePromise=newPromise((function(t){e._backpressureChangePromise_resolve=t}));e._backpressure=t}var N=function(){function TransformStreamDefaultController(){throw new TypeError("Illegal constructor")}Object.defineProperty(TransformStreamDefaultController.prototype,"desiredSize",{get:function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this._controlledTransformStream._readable._readableStreamController)},enumerable:!1,configurable:!0});TransformStreamDefaultController.prototype.enqueue=function(e){void 0===e&&(e=void 0);if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,e)};TransformStreamDefaultController.prototype.error=function(e){void 0===e&&(e=void 0);if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");!function TransformStreamDefaultControllerError(e,t){TransformStreamError(e._controlledTransformStream,t)}(this,e)};TransformStreamDefaultController.prototype.terminate=function(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");!function TransformStreamDefaultControllerTerminate(e){var t=e._controlledTransformStream;ReadableStreamDefaultControllerClose(t._readable._readableStreamController);var r=new TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(t,r)}(this)};return TransformStreamDefaultController}();Object.defineProperties(N.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}});"symbol"==typeof t.toStringTag&&Object.defineProperty(N.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function IsTransformStreamDefaultController(e){return!!typeIsObject(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof N}function TransformStreamDefaultControllerClearAlgorithms(e){e._transformAlgorithm=void 0;e._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(e,t){var r=e._controlledTransformStream,i=r._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(i))throw new TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(i,t)}catch(e){TransformStreamErrorWritableAndUnblockWrite(r,e);throw r._readable._storedError}var n=function ReadableStreamDefaultControllerHasBackpressure(e){return!ReadableStreamDefaultControllerShouldCallPull(e)}(i);n!==r._backpressure&&TransformStreamSetBackpressure(r,!0)}function TransformStreamDefaultControllerPerformTransform(e,t){return transformPromiseWith(e._transformAlgorithm(t),void 0,(function(t){TransformStreamError(e._controlledTransformStream,t);throw t}))}function defaultControllerBrandCheckException(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function streamBrandCheckException(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}e.ByteLengthQueuingStrategy=M;e.CountQueuingStrategy=O;e.ReadableByteStreamController=P;e.ReadableStream=B;e.ReadableStreamBYOBReader=C;e.ReadableStreamBYOBRequest=S;e.ReadableStreamDefaultController=D;e.ReadableStreamDefaultReader=b;e.TransformStream=k;e.TransformStreamDefaultController=N;e.WritableStream=E;e.WritableStreamDefaultController=I;e.WritableStreamDefaultWriter=x;Object.defineProperty(e,"__esModule",{value:!0})},r(t);var r},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StructTreeLayerBuilder=void 0;r(82);r(1);const i={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},n=/^H(\d+)$/;t.StructTreeLayerBuilder=class StructTreeLayerBuilder{constructor(e){let{pdfPage:t}=e;this.pdfPage=t}render(e){return this._walk(e)}_setAttributes(e,t){void 0!==e.alt&&t.setAttribute("aria-label",e.alt);void 0!==e.id&&t.setAttribute("aria-owns",e.id);void 0!==e.lang&&t.setAttribute("lang",e.lang)}_walk(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:r}=e,o=r.match(n);if(o){t.setAttribute("role","heading");t.setAttribute("aria-level",o[1])}else i[r]&&t.setAttribute("role",i[r])}this._setAttributes(e,t);if(e.children)if(1===e.children.length&&"id"in e.children[0])this._setAttributes(e.children[0],t);else for(const r of e.children)t.appendChild(this._walk(r));return t}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextHighlighter=void 0;t.TextHighlighter=class TextHighlighter{constructor(e){let{findController:t,eventBus:r,pageIndex:i}=e;this.findController=t;this.matches=[];this.eventBus=r;this.pageIdx=i;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=!1}setTextMapping(e,t){this.textDivs=e;this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=e=>{e.pageIndex!==this.pageIdx&&-1!==e.pageIndex||this._updateMatches()};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}disable(){if(this.enabled){this.enabled=!1;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}}_convertMatches(e,t,r){if(!e)return[];const{textContentItemsStr:i}=this;let n=0,o=0;const a=i.length-1,s=[];for(let l=0,c=e.length;l<c;l++){let c=e[l];for(;n!==a&&c>=o+i[n].length;){o+=i[n].length;n++}n===i.length&&Window.ngxConsole.error("Could not find a matching mapping");const d={color:r?r[l]:0,begin:{divIdx:n,offset:c-o}};c+=t[l];for(;n!==a&&c>o+i[n].length;){o+=i[n].length;n++}d.end={divIdx:n,offset:c-o};s.push(d)}return s}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:r}=this,{textContentItemsStr:i,textDivs:n}=this,o=r===t.selected.pageIdx,a=t.selected.matchIdx;let s=null;const l={divIdx:-1,offset:void 0};function beginText(e,t){const r=e.divIdx;n[r].textContent="";return appendTextToDiv(r,0,e.offset,t)}function appendTextToDiv(e,t,r,o){let a=n[e];if(a.nodeType===Node.TEXT_NODE){const t=document.createElement("span");a.parentNode.insertBefore(t,a);t.appendChild(a);n[e]=t;a=t}const s=i[e].substring(t,r),l=document.createTextNode(s);if(o){const e=document.createElement("span");e.className="".concat(o," appended");e.appendChild(l);a.appendChild(e);return o.includes("selected")?e.offsetLeft:0}a.appendChild(l);return 0}let c=a,d=c+1;if(t.state.highlightAll){c=0;d=e.length}else if(!o)return;for(let i=c;i<d;i++){const c=e[i],d=c.begin,h=c.end,u=o&&i===a,p=(u?" selected":"")+" color"+c.color;let g=0;if(s&&d.divIdx===s.divIdx)appendTextToDiv(s.divIdx,s.offset,d.offset);else{null!==s&&appendTextToDiv(s.divIdx,s.offset,l.offset);beginText(d)}if(d.divIdx===h.divIdx)g=appendTextToDiv(d.divIdx,d.offset,h.offset,"highlight"+p);else{g=appendTextToDiv(d.divIdx,d.offset,l.offset,"highlight begin"+p);for(let e=d.divIdx+1,t=h.divIdx;e<t;e++)n[e].className="highlight middle"+p;beginText(h,"highlight end"+p)}s=h;u&&t.scrollMatchIntoView({element:n[d.divIdx],selectedLeft:g,pageIndex:r,matchIndex:a})}s&&appendTextToDiv(s.divIdx,s.offset,l.offset)}_updateMatches(){if(!this.enabled)return;const{findController:e,matches:t,pageIdx:r}=this,{textContentItemsStr:i,textDivs:n}=this;let o=-1;for(let e=0,r=t.length;e<r;e++){const r=t[e];for(let e=Math.max(o,r.begin.divIdx),t=r.end.divIdx;e<=t;e++){const t=n[e];t.textContent=i[e];t.className=""}o=r.end.divIdx+1}if(null==e||!e.highlightMatches)return;const a=e.pageMatches[r]||null,s=e.pageMatchesLength[r]||null,l=e.pageMatchesColor[r]||null;this.matches=this._convertMatches(a,s,l);this._renderMatches(this.matches)}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextLayerBuilder=void 0;var i=r(165);t.TextLayerBuilder=class TextLayerBuilder{constructor(e){let{textLayerDiv:t,eventBus:r,pageIndex:i,viewport:n,highlighter:o=null,enhanceTextSelection:a=!1}=e;this.textLayerDiv=t;this.eventBus=r;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=!1;this.pageNumber=i+1;this.viewport=n;this.textDivs=[];this.textLayerRenderTask=null;this.highlighter=o;this.enhanceTextSelection=a;this._bindMouse()}_finishRendering(){this.renderingDone=!0;if(!this.enhanceTextSelection){const e=document.createElement("div");e.className="endOfContent";this.textLayerDiv.appendChild(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel();this.textDivs.length=0;null===(e=this.highlighter)||void 0===e||e.setTextMapping(this.textDivs,this.textContentItemsStr);const r=document.createDocumentFragment();this.textLayerRenderTask=(0,i.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:r,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:t,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then((()=>{var e;this.textLayerDiv.appendChild(r);this._finishRendering();null===(e=this.highlighter)||void 0===e||e.enable()}),(function(e){}))}cancel(){var e;if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}null===(e=this.highlighter)||void 0===e||e.disable()}setTextContentStream(e){this.cancel();this.textContentStream=e}setTextContent(e){this.cancel();this.textContent=e}_bindMouse(){const e=this.textLayerDiv;let t=null;e.addEventListener("mousedown",(r=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(!0);if(t){clearTimeout(t);t=null}return}const i=e.querySelector(".endOfContent");if(!i)return;let n=r.target!==e;n=n&&"none"!==window.getComputedStyle(i).getPropertyValue("-moz-user-select");if(n){const t=e.getBoundingClientRect(),n=Math.max(0,(r.pageY-t.top)/t.height);i.style.top=(100*n).toFixed(2)+"%"}i.classList.add("active")}));e.addEventListener("mouseup",(()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){t=setTimeout((()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1);t=null}),300);return}const r=e.querySelector(".endOfContent");if(r){r.style.top="";r.classList.remove("active")}}))}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.XfaLayerBuilder=void 0;r(92);var i=r(165);t.XfaLayerBuilder=class XfaLayerBuilder{constructor(e){let{pageDiv:t,pdfPage:r,annotationStorage:i=null,linkService:n,xfaHtml:o=null}=e;this.pageDiv=t;this.pdfPage=r;this.annotationStorage=i;this.linkService=n;this.xfaHtml=o;this.div=null;this._cancelled=!1}render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===t){const r={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},n=document.createElement("div");this.pageDiv.appendChild(n);r.div=n;const o=i.XfaLayer.render(r);return Promise.resolve(o)}return this.pdfPage.getXfa().then((r=>{if(this._cancelled||!r)return{textDivs:[]};const n={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};if(this.div)return i.XfaLayer.update(n);this.div=document.createElement("div");this.pageDiv.appendChild(this.div);n.div=this.div;return i.XfaLayer.render(n)})).catch((e=>{Window.ngxConsole.error(e)}))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SecondaryToolbar=void 0;r(1);var i=r(162),n=r(166),o=r(193);t.SecondaryToolbar=class SecondaryToolbar{constructor(e,t,r){this.toolbar=e.toolbar;this.toggleButton=e.toggleButton;this.toolbarButtonContainer=e.toolbarButtonContainer;this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:!0},{element:e.openFileButton,eventName:"openfile",close:!0},{element:e.printButton,eventName:"print",close:!0},{element:e.downloadButton,eventName:"download",close:!0},{element:e.viewBookmarkButton,eventName:null,close:!0},{element:e.firstPageButton,eventName:"firstpage",close:!0},{element:e.lastPageButton,eventName:"lastpage",close:!0},{element:e.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.SELECT},close:!0},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:n.CursorTool.HAND},close:!0},{element:e.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.PAGE},close:!0},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.VERTICAL},close:!0},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.HORIZONTAL},close:!0},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:i.ScrollMode.WRAPPED},close:!0},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.NONE},close:!0},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.ODD},close:!0},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:i.SpreadMode.EVEN},close:!0},{element:e.documentPropertiesButton,eventName:"documentproperties",close:!0}];this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton};this.mainContainer=t;this.eventBus=r;this.opened=!1;this.containerHeight=null;this.previousContainerHeight=null;this.reset();this._bindClickListeners();this._bindCursorToolsListener(e);this._bindScrollModeListener(e);this._bindSpreadModeListener(e);this.eventBus._on("resize",this._setMaxHeight.bind(this))}get isOpen(){return this.opened}setPageNumber(e){this.pageNumber=e;this._updateUIState()}setPagesCount(e){this.pagesCount=e;this._updateUIState()}reset(){this.pageNumber=0;this.pagesCount=0;this._updateUIState();this.eventBus.dispatch("secondarytoolbarreset",{source:this})}_updateUIState(){this.items.firstPage.disabled=this.pageNumber<=1;document.getElementById("previousPage")&&(document.getElementById("previousPage").disabled=this.pageNumber<=1);this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;document.getElementById("nextPage")&&(document.getElementById("nextPage").disabled=this.pageNumber>=this.pagesCount);this.items.pageRotateCw.disabled=0===this.pagesCount;this.items.pageRotateCcw.disabled=0===this.pagesCount;this.eventBus.dispatch("updateuistate",{source:this,widget:"SecondaryToolbar",pageNumber:this.pageNumber,pagesCount:this.pagesCount})}_bindClickListeners(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:e,eventName:t,close:r,eventDetails:i}of this.buttons)e.addEventListener("click",(e=>{if(null!==t){const e={source:this};for(const t in i)e[t]=i[t];this.eventBus.dispatch(t,e)}r&&this.close()}))}_bindCursorToolsListener(e){this.eventBus._on("cursortoolchanged",(function(t){let{tool:r}=t;e.cursorSelectToolButton.classList.toggle("toggled",r===n.CursorTool.SELECT);e.cursorHandToolButton.classList.toggle("toggled",r===n.CursorTool.HAND)}))}_bindScrollModeListener(e){const scrollModeChanged=t=>{let{mode:r}=t;e.scrollPageButton.classList.toggle("toggled",r===i.ScrollMode.PAGE);e.scrollVerticalButton.classList.toggle("toggled",r===i.ScrollMode.VERTICAL);e.scrollHorizontalButton.classList.toggle("toggled",r===i.ScrollMode.HORIZONTAL);e.scrollWrappedButton.classList.toggle("toggled",r===i.ScrollMode.WRAPPED);const n=this.pagesCount>o.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;e.scrollPageButton.disabled=n;e.scrollVerticalButton.disabled=n;e.scrollHorizontalButton.disabled=n;e.scrollWrappedButton.disabled=n;const a=r===i.ScrollMode.HORIZONTAL;e.spreadNoneButton.disabled=a;e.spreadOddButton.disabled=a;e.spreadEvenButton.disabled=a};this.eventBus._on("scrollmodechanged",scrollModeChanged);this.eventBus._on("secondarytoolbarreset",(e=>{e.source===this&&scrollModeChanged({mode:i.ScrollMode.VERTICAL})}))}_bindSpreadModeListener(e){function spreadModeChanged(t){let{mode:r}=t;e.spreadNoneButton.classList.toggle("toggled",r===i.SpreadMode.NONE);e.spreadOddButton.classList.toggle("toggled",r===i.SpreadMode.ODD);e.spreadEvenButton.classList.toggle("toggled",r===i.SpreadMode.EVEN)}this.eventBus._on("spreadmodechanged",spreadModeChanged);this.eventBus._on("secondarytoolbarreset",(e=>{e.source===this&&spreadModeChanged({mode:i.SpreadMode.NONE})}))}open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}}close(){if(this.opened){this.opened=!1;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}}toggle(){this.opened?this.close():this.open()}_setMaxHeight(){if(this.opened){this.containerHeight=this.mainContainer.clientHeight;if(this.containerHeight!==this.previousContainerHeight){this.toolbarButtonContainer.style.maxHeight="".concat(this.containerHeight-i.SCROLLBAR_PADDING,"px");this.previousContainerHeight=this.containerHeight}}}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Toolbar=void 0;r(1);r(92);var i=r(162);t.Toolbar=class Toolbar{constructor(e,t,r){this.toolbar=e.container;this.eventBus=t;this.l10n=r;this.buttons=[{element:e.previous,eventName:"previouspage"},{element:e.next,eventName:"nextpage"},{element:e.zoomIn,eventName:"zoomin"},{element:e.zoomOut,eventName:"zoomout"},{element:e.openFile,eventName:"openfile"},{element:e.print,eventName:"print"},{element:e.presentationModeButton,eventName:"presentationmode"},{element:e.download,eventName:"download"},{element:e.viewBookmark,eventName:null}];this.items={numPages:e.numPages,pageNumber:e.pageNumber,scaleSelect:e.scaleSelect,customScaleOption:e.customScaleOption,previous:e.previous,next:e.next,zoomIn:e.zoomIn,zoomOut:e.zoomOut};this._wasLocalized=!1;this.reset();this._bindListeners()}setPageNumber(e,t){this.pageNumber=e;this.pageLabel=t;this._updateUIState(!1)}setPagesCount(e,t){this.pagesCount=e;this.hasPageLabels=t;this._updateUIState(!0)}setPageScale(e,t){this.pageScaleValue=(e||t).toString();this.pageScale=t;this._updateUIState(!1)}reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=!1;this.pagesCount=0;const e=PDFViewerApplicationOptions.get("defaultZoomValue");if(e){this.pageScaleValue=e;Number(e)&&(this.pageScale=Number(e))}else{this.pageScaleValue=i.DEFAULT_SCALE_VALUE;this.pageScale=i.DEFAULT_SCALE}this._updateUIState(!0);this.updateLoadingIndicatorState()}_bindListeners(){const{pageNumber:e,scaleSelect:t}=this.items,r=this;for(const{element:e,eventName:t}of this.buttons)e.addEventListener("click",(e=>{null!==t&&this.eventBus.dispatch(t,{source:this})}));e.addEventListener("click",(function(){this.select()}));e.addEventListener("change",(function(){r.eventBus.dispatch("pagenumberchanged",{source:r,value:this.value})}));t.addEventListener("change",(function(){"custom"!==this.value&&r.eventBus.dispatch("scalechanged",{source:r,value:this.value})}));t.addEventListener("click",(function(e){const t=e.target;this.value===r.pageScaleValue&&"OPTION"===t.tagName.toUpperCase()&&this.blur()}));t.oncontextmenu=i.noContextMenuHandler;this.eventBus._on("localized",(()=>{this._wasLocalized=!0;this._updateUIState(!0)}))}_updateUIState(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._wasLocalized)return;const{pageNumber:t,pagesCount:r,pageScaleValue:n,pageScale:o,items:a}=this;if(e){if(this.hasPageLabels)a.pageNumber.type="text";else{a.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:r}).then((e=>{a.numPages.textContent=e}))}a.pageNumber.max=r}if(this.hasPageLabels){a.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:t,pagesCount:r}).then((e=>{a.numPages.textContent=e}))}else a.pageNumber.value=t;a.previous.disabled=t<=1;a.next.disabled=t>=r;a.zoomOut.disabled=o<=i.MIN_SCALE;a.zoomIn.disabled=o>=i.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(1e4*o)/100}).then((e=>{let t=!1;for(const e of a.scaleSelect.options)if(e.value===n){e.selected=!0;t=!0}else e.selected=!1;if(!t){a.customScaleOption.textContent=e;a.customScaleOption.selected=!0}}));this.eventBus.dispatch("updateuistate",{source:this,widget:"Toolbar",pageNumber:t,pagesCount:r,pageScaleValue:n,pageScale:o})}updateLoadingIndicatorState(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.items.pageNumber.classList.toggle("visiblePageIsLoading",e)}async _adjustScaleWidth(){const{items:e,l10n:t}=this,r=Promise.all([t.get("page_scale_auto"),t.get("page_scale_actual"),t.get("page_scale_fit"),t.get("page_scale_width")]),n=getComputedStyle(e.scaleSelect),o=parseInt(n.getPropertyValue("--scale-select-container-width"),10),a=parseInt(n.getPropertyValue("--scale-select-overflow"),10);let s=document.createElement("canvas");s.mozOpaque=!0;let l=s.getContext("2d",{alpha:!1});await i.animationStarted;l.font="".concat(n.fontSize," ").concat(n.fontFamily);let c=0;for(const e of await r)try{const{width:t}=l.measureText(e);t>c&&(c=t)}catch(e){}c+=2*a;if(c>o){document.documentElement.style.setProperty("--scale-select-container-width","".concat(c,"px"))}s.width=0;s.height=0;s=l=null}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewHistory=void 0;r(92);var i=r(81);t.ViewHistory=class ViewHistory{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.fingerprint=e;this.cacheSize=t;this._initializedPromise=this._readFromStorage().then((e=>{const t=JSON.parse(e||"{}");let r=-1;if(Array.isArray(t.files)){for(;t.files.length>=this.cacheSize;)t.files.shift();for(let e=0,i=t.files.length;e<i;e++){if(t.files[e].fingerprint===this.fingerprint){r=e;break}}}else t.files=[];-1===r&&(r=t.files.push({fingerprint:this.fingerprint})-1);this.file=t.files[r];this.database=t}))}async _writeToStorage(){if(i.AppOptions.get("disableHistory"))return;const e=JSON.stringify(this.database);localStorage.setItem("pdfjs.history",e)}async _readFromStorage(){if(!i.AppOptions.get("disableHistory"))return localStorage.getItem("pdfjs.history")}async set(e,t){await this._initializedPromise;this.file[e]=t;return this._writeToStorage()}async setMultiple(e){await this._initializedPromise;for(const t in e)this.file[t]=e[t];return this._writeToStorage()}async get(e,t){await this._initializedPromise;const r=this.file[e];return void 0!==r?r:t}async getMultiple(e){await this._initializedPromise;const t=Object.create(null);for(const r in e){const i=this.file[r];t[r]=void 0!==i?i:e[r]}return t}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericCom=void 0;r(92);var i=r(91),n=r(230),o=r(231),a=r(232),s=r(234);t.GenericCom={};class GenericPreferences extends n.BasePreferences{async _writeToStorage(e){localStorage.setItem("pdfjs.preferences",JSON.stringify(e))}async _readFromStorage(e){return JSON.parse(localStorage.getItem("pdfjs.preferences"))}}class GenericExternalServices extends i.DefaultExternalServices{static createDownloadManager(e){return new o.DownloadManager}static createPreferences(){return new GenericPreferences}static createL10n(e){let{locale:t="en-US"}=e;return new a.GenericL10n(t)}static createScripting(e){let{sandboxBundleSrc:t}=e;return new s.GenericScripting(t)}}i.PDFViewerApplication.externalServices=GenericExternalServices},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BasePreferences=void 0;r(92);r(81);class BasePreferences{constructor(){if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");Object.defineProperty(this,"defaults",{value:Object.freeze({annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,pdfBugEnabled:!1,removePageBorders:!1,renderer:"canvas",sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0}),writable:!1,enumerable:!0,configurable:!1});this.prefs=Object.create(null);this._initializedPromise=this._readFromStorage(this.defaults).then((e=>{for(const t in this.defaults){const r=null==e?void 0:e[t];typeof r==typeof this.defaults[t]&&(this.prefs[t]=r)}}))}async _writeToStorage(e){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(e){throw new Error("Not implemented: _readFromStorage")}async reset(){await this._initializedPromise;this.prefs=Object.create(null);return this._writeToStorage(this.defaults)}async set(e,t){await this._initializedPromise;const r=this.defaults[e];if(void 0===r)throw new Error('Set preference: "'.concat(e,'" is undefined.'));if(void 0===t)throw new Error("Set preference: no value is specified.");const i=typeof t,n=typeof r;if(i!==n){if("number"!==i||"string"!==n)throw new Error('Set preference: "'.concat(t,'" is a ').concat(i,", expected a ").concat(n,"."));t=t.toString()}else if("number"===i&&!Number.isInteger(t))throw new Error('Set preference: "'.concat(t,'" must be an integer.'));this.prefs[e]=t;return this._writeToStorage(this.prefs)}async get(e){await this._initializedPromise;const t=this.defaults[e],r=this.prefs[e];if(void 0===t)throw new Error('Get preference: "'.concat(e,'" is undefined.'));return void 0!==r?r:t}async getAll(){await this._initializedPromise;const e=Object.create(null);for(const t in this.defaults){const r=this.prefs[t];e[t]=void 0!==r?r:this.defaults[t]}return e}}t.BasePreferences=BasePreferences},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DownloadManager=void 0;r(1);r(128);r(137);var i=r(165),n=r(81);function download(e,t){const r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=e;r.target="_parent";"download"in r&&(r.download=t);(document.body||document.documentElement).appendChild(r);r.click();r.remove()}t.DownloadManager=class DownloadManager{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(e,t){(0,i.createValidAbsoluteUrl)(e,"http://example.com")?download(e+"#pdfjs.action=download",t):Window.ngxConsole.error("downloadUrl - not a valid URL: ".concat(e))}downloadData(e,t,r){download((0,i.createObjectURL)(e,r,n.compatibilityParams.disableCreateObjectURL),t)}openOrDownloadData(e,t,r){const o=(0,i.isPdfFile)(r),a=o?"application/pdf":"";if(o&&!n.compatibilityParams.disableCreateObjectURL){let i,n=this._openBlobUrls.get(e);if(!n){n=URL.createObjectURL(new Blob([t],{type:a}));this._openBlobUrls.set(e,n)}i="?file="+encodeURIComponent(n+"#"+r);try{window.open(i);return!0}catch(t){Window.ngxConsole.error("openOrDownloadData: ".concat(t));URL.revokeObjectURL(n);this._openBlobUrls.delete(e)}}this.downloadData(t,r,a);return!1}download(e,t,r){if(n.compatibilityParams.disableCreateObjectURL&&t){this.downloadUrl(t,r);return}download(URL.createObjectURL(e),r)}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericL10n=void 0;r(92);r(233);var i=r(195);const n=document.webL10n;t.GenericL10n=class GenericL10n{constructor(e){this._lang=e;this._ready=new Promise(((t,r)=>{n.setLanguage((0,i.fixupLangCode)(e),(()=>{t(n)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.getL10nFallback)(e,t);return(await this._ready).get(e,t,r)}async translate(e){return(await this._ready).translate(e)}}},(e,t,r)=>{"use strict";r(82);r(122);document.webL10n=function(e,t,r){var i={},n="",o="textContent",a="",s={},l="loading";function fireL10nReadyEvent(e){var r=t.createEvent("Event");r.initEvent("localized",!0,!1);r.language=e;t.dispatchEvent(r)}function xhrLoadText(e,t,r){t=t||function _onSuccess(e){};r=r||function _onFailure(){};var i=new XMLHttpRequest;i.open("GET",e,true);i.overrideMimeType&&i.overrideMimeType("text/plain; charset=utf-8");i.onreadystatechange=function(){4==i.readyState&&(200==i.status||0===i.status?t(i.responseText):r())};i.onerror=r;i.ontimeout=r;try{i.send(null)}catch(e){r()}}function parseResource(t,r,a,s){var l=t.replace(/[^\/]*$/,"")||"./";function evalString(e){return e.lastIndexOf("\\")<0?e:e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){n+=t;!function parseProperties(t,i){var n={},o=/^\s*|\s*$/,a=/^\s*#|^\s*$/,s=/^\s*\[(.*)\]\s*$/,c=/^\s*@import\s+url\((.*)\)\s*$/i,d=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(e,t,i){var h=e.replace(o,"").split(/[\r\n]+/),u="*",p=r.split("-",1)[0],g=!1,f="",m=!1;!function nextEntry(){for(var e=void 0;;){if(!h.length&&e){m?nextEntry():loadImport(e,nextEntry);return}if(!h.length){i();return}var o=h.shift();if(!a.test(o)){if(t){if(f=s.exec(o)){u=f[1].toLowerCase();g="*"!==u&&u!==r&&u!==p;continue}if(g)continue;if(f=c.exec(o)){if("*"===u||u===r){loadImport(l+f[1],nextEntry);m=!0;return}e=l+f[1]}}var v=o.match(d);v&&3==v.length&&(n[v[1]]=evalString(v[2]))}}}()}function loadImport(t,r){xhrLoadText(t,(function(e){parseRawLines(e,!1,r)}),(function(){const i=e.PDFViewerApplicationOptions;(!i||i.get("verbosity")>0)&&Window.ngxConsole.warn(t+" not found.");r()}))}parseRawLines(t,!0,(function(){i(n)}))}(t,(function(e){for(var t in e){var r,n,s=t.lastIndexOf(".");if(s>0){r=t.substring(0,s);n=t.substring(s+1)}else{r=t;n=o}i[r]||(i[r]={});i[r][n]=e[t]}a&&a()}))}),s)}function loadLocale(r,o){let s=r;r&&(r=r.toLowerCase());o=o||function _callback(){};!function clear(){i={};n="";a=""}();a=r;var c=function getL10nResourceLinks(){return t.querySelectorAll('link[type="application/l10n"]')}(),d=c.length;if(0!==d){var h,u=0;h=function(){if(++u>=d){o();fireL10nReadyEvent(r);l="complete"}};for(var p=0;p<d;p++){new L10nResourceLink(c[p]).load(r,h)}}else{var g=function getL10nDictionary(){var e=t.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}();if(g&&g.locales&&g.default_locale){Window.ngxConsole.log("The PDF viewer uses the pre-compiled language bundle stored in the HTML page.");if(!(i=g.locales[s])){var f=g.default_locale.toLowerCase();for(var m in g.locales){s=m;if((m=m.toLowerCase())===r){i=g.locales[s];break}m===f&&(i=g.locales[s])}}o()}else Window.ngxConsole.log("Could not load the translation files for the PDF viewer. Check the flag useBrowserLocale, check the locales subfolder of the assets folder, or add the locale definition to the index.html");fireL10nReadyEvent(r);l="complete"}function L10nResourceLink(t){var r=t.href;this.load=function(t,i){parseResource(r,t,i,(function(){const n=e.PDFViewerApplicationOptions;if(!n||n.get("verbosity")>0){Window.ngxConsole.warn(r+" not found.");Window.ngxConsole.warn('"'+t+'" resource not found')}a="";i()}))}}}s.plural=function(t,r,n,l){var c=parseFloat(r);if(isNaN(c))return t;if(l!=o)return t;s._pluralRules||(s._pluralRules=function getPluralRules(t){function isIn(e,t){return-1!==t.indexOf(e)}function isBetween(e,t,r){return t<=e&&e<=r}var r={0:function(e){return"other"},1:function(e){return isBetween(e%100,3,10)?"few":0===e?"zero":isBetween(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return isBetween(e,0,1)?"one":"other"},5:function(e){return isBetween(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return isBetween(e,3,6)?"few":isBetween(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&isBetween(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return isBetween(e%10,2,9)&&!isBetween(e%100,11,19)?"few":e%10!=1||isBetween(e%100,11,19)?"other":"one"},11:function(e){return isBetween(e%10,2,4)&&!isBetween(e%100,12,14)?"few":e%10==0||isBetween(e%10,5,9)||isBetween(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return isBetween(e,2,4)?"few":1==e?"one":"other"},13:function(e){return isBetween(e%10,2,4)&&!isBetween(e%100,12,14)?"few":1!=e&&isBetween(e%10,0,1)||isBetween(e%10,5,9)||isBetween(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return isBetween(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||isBetween(e%100,2,10)?"few":isBetween(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":isBetween(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return isBetween(e,2,10)?"few":isBetween(e,0,1)?"one":"other"},20:function(e){return!isBetween(e%10,3,4)&&e%10!=9||isBetween(e%100,10,19)||isBetween(e%100,70,79)||isBetween(e%100,90,99)?e%1e6==0&&0!==e?"many":e%10!=2||isIn(e%100,[12,72,92])?e%10!=1||isIn(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return isBetween(e,0,1)||isBetween(e,11,99)?"one":"other"},23:function(e){return isBetween(e%10,1,2)||e%20==0?"one":"other"},24:function(e){return isBetween(e,3,10)||isBetween(e,13,19)?"few":isIn(e,[2,12])?"two":isIn(e,[1,11])?"one":"other"}},i={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];if(!(i in r)){const r=e.PDFViewerApplicationOptions;(!r||r.get("verbosity")>0)&&Window.ngxConsole.warn("plural form unknown for ["+t+"]");return function(){return"other"}}return r[i]}(a));var d="["+s._pluralRules(c)+"]";0===c&&n+"[zero]"in i?t=i[n+"[zero]"][l]:1==c&&n+"[one]"in i?t=i[n+"[one]"][l]:2==c&&n+"[two]"in i?t=i[n+"[two]"][l]:n+d in i?t=i[n+d][l]:n+"[other]"in i&&(t=i[n+"[other]"][l]);return t};function getL10nData(t,r,n){var o=i[t];if(!o){const r=e.PDFViewerApplicationOptions;(!r||r.get("verbosity")>0)&&Window.ngxConsole.warn("Translation for the key #"+t+" is missing.");if(!n)return null;o=n}var a={};for(var s in o){var l=o[s];l=substArguments(l=substIndexes(l,r,t,s),r,t);a[s]=l}return a}function substIndexes(e,t,r,n){var o=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(e);if(!o||!o.length)return e;var a,l=o[1],c=o[2];t&&c in t?a=t[c]:c in i&&(a=i[c]);if(l in s){e=(0,s[l])(e,a,r,n)}return e}function substArguments(e,t,r){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(e,n){if(t&&n in t)return t[n];if(n in i)return i[n];Window.ngxConsole.log("argument {{"+n+"}} for #"+r+" is undefined.");return e}))}function translateElement(r){var i=function getL10nAttributes(t){if(!t)return{};var r=t.getAttribute("data-l10n-id"),i=t.getAttribute("data-l10n-args"),n={};if(i)try{n=JSON.parse(i)}catch(t){const i=e.PDFViewerApplicationOptions;(!i||i.get("verbosity")>0)&&Window.ngxConsole.warn("could not parse arguments for #"+r)}return{id:r,args:n}}(r);if(i.id){var n=getL10nData(i.id,i.args);if(n){if(n[o]){if(0===function getChildElementCount(e){if(e.children)return e.children.length;if(void 0!==e.childElementCount)return e.childElementCount;for(var t=0,r=0;r<e.childNodes.length;r++)t+=1===e.nodeType?1:0;return t}(r))r[o]=n[o];else{for(var a=r.childNodes,s=!1,l=0,c=a.length;l<c;l++)if(3===a[l].nodeType&&/\S/.test(a[l].nodeValue))if(s)a[l].nodeValue="";else{a[l].nodeValue=n[o];s=!0}if(!s){var d=t.createTextNode(n[o]);r.insertBefore(d,r.firstChild)}}delete n[o]}for(var h in n)r[h]=n[h]}else{const t=e.PDFViewerApplicationOptions;(!t||t.get("verbosity")>0)&&Window.ngxConsole.warn("#"+i.id+" is undefined.")}}}return{get:function(e,t,r){var i,n=e.lastIndexOf("."),a=o;if(n>0){a=e.substring(n+1);e=e.substring(0,n)}r&&((i={})[a]=r);var s=getL10nData(e,t,i);return s&&a in s?s[a]:"{{"+e+"}}"},getData:function(){return i},getText:function(){return n},getLanguage:function(){return a},setLanguage:function(e,t){loadLocale(e,(function(){t&&t()}))},getDirection:function(){var e=a.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function translateFragment(e){for(var r=function getTranslatableChildren(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}(e=e||t.documentElement),i=r.length,n=0;n<i;n++)translateElement(r[n]);translateElement(e)},getReadyState:function(){return l},ready:function(r){r&&("complete"==l||"interactive"==l?e.setTimeout((function(){r()})):t.addEventListener&&t.addEventListener("localized",(function once(){t.removeEventListener("localized",once);r()})))}}}(window,document)},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericScripting=void 0;t.docPropertiesLookup=async function docPropertiesLookup(e){const t="".split("#")[0];let{info:r,metadata:n,contentDispositionFilename:o,contentLength:a}=await e.getMetadata();if(!a){const{length:t}=await e.getDownloadInfo();a=t}return{...r,baseURL:t,filesize:a,filename:o||(0,i.getPdfFilenameFromUrl)(""),metadata:null==n?void 0:n.getRaw(),authors:null==n?void 0:n.get("dc:creator"),numPages:e.numPages,URL:""}};r(92);r(82);var i=r(165);t.GenericScripting=class GenericScripting{constructor(e){this._ready=(0,i.loadScript)(e,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}async createSandbox(e){(await this._ready).create(e)}async dispatchEventInSandbox(e){(await this._ready).dispatchEvent(e)}async destroySandbox(){(await this._ready).nukeSandbox()}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPrintService=PDFPrintService;r(82);r(1);r(92);r(128);r(137);var i=r(165),n=r(91),o=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(r(198)),a=r(81),s=r(236);let l=null,c=null;function renderPage(e,t,r,n,a,s){const c=l.scratchCanvas;let d=a/i.PixelsPerInch.PDF,h=1;const u=Math.floor(n.width*d),p=Math.floor(n.height*d);if(u>=4096||p>=4096){if(!o.default.test({width:u,height:p})){const e=function determineMaxDimensions(){const e=[4096,8192,10836,11180,11402,14188,16384];for(let t of e)if(!o.default.test({width:t+1,height:t+1}))return t;return 16384}();h=.95*Math.min(e/u,e/p)}warn("Page "+r+": Reduced the [printResolution] to "+Math.floor(a*h)+" because the browser can't render larger canvases. If you see blank page in the print preview, reduce [printResolution] manually to a lower value.")}d*=h;c.width=Math.floor(n.width*d);c.height=Math.floor(n.height*d);const g=c.getContext("2d");g.save();g.fillStyle="rgb(255, 255, 255)";g.fillRect(0,0,c.width,c.height);g.restore();return t.getPage(r).then((function(e){const t={canvasContext:g,transform:[d,0,0,d,0,0],viewport:e.getViewport({scale:1,rotation:n.rotation}),intent:"print",annotationMode:i.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:s,background:PDFViewerApplicationOptions.get("pdfBackgroundColor")};return e.render(t).promise}))}function PDFPrintService(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;this.pdfDocument=e;this.pagesOverview=t;this.printContainer=r;this._printResolution=i||150;this._optionalContentConfigPromise=n||e.getOptionalContentConfig();this.l10n=o;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas");this.eventBus=a}PDFPrintService.prototype={layout(){this.throwIfInactive();const e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every((function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height}),this)||Window.ngxConsole.warn("Not all pages have the same size. The printed result may be incorrect!");this.pageStyleSheet=document.createElement("style");const t=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+t.width+"pt "+t.height+"pt;}";e.appendChild(this.pageStyleSheet)},destroy(){if(l!==this)return;this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;l=null;ensureOverlay().then((function(){if("printServiceOverlay"===c.active){c.close("printServiceOverlay");c.unregister("printServiceOverlay")}}));h=void 0},renderPages(){if(this.pdfDocument.isPureXfa){(0,s.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}const e=this.pagesOverview.length,renderNextPage=(t,r)=>{this.throwIfInactive();for(;;){++this.currentPage;if(this.currentPage>=e)break;if(!window.isInPDFPrintRange||window.isInPDFPrintRange(this.currentPage))break}if(this.currentPage>=e){renderProgress(window.filteredPageCount|e,window.filteredPageCount|e,this.l10n,this.eventBus);t();return}const i=this.currentPage;renderProgress(i,window.filteredPageCount|e,this.l10n,this.eventBus);renderPage(0,this.pdfDocument,i+1,this.pagesOverview[i],this._printResolution,this._optionalContentConfigPromise).then(this.useRenderedPage.bind(this)).then((function(){renderNextPage(t,r)}),r)};return new Promise(renderNextPage)},useRenderedPage(){this.throwIfInactive();const e=document.createElement("img"),t=this.scratchCanvas;"toBlob"in t&&!a.compatibilityParams.disableCreateObjectURL?t.toBlob((function(t){e.src=URL.createObjectURL(t)})):e.src=t.toDataURL();const r=document.createElement("div");r.className="printedPage";r.appendChild(e);this.printContainer.appendChild(r);return new Promise((function(t,r){e.onload=t;e.onerror=r}))},performPrint(){this.throwIfInactive();return new Promise((e=>{setTimeout((()=>{if(this.active){d.call(window);setTimeout(e,20)}else e()}),0)}))},get active(){return this===l},throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};const d=window.print;window.printPDF=function(){if(n.PDFViewerApplication.enablePrint)if(l)Window.ngxConsole.warn("Ignored window.printPDF() because of a pending print job.");else{ensureOverlay().then((function(){l&&c.open("printServiceOverlay")}));try{dispatchEvent("beforeprint")}finally{if(!l){Window.ngxConsole.error("Expected print service to be initialized.");ensureOverlay().then((function(){"printServiceOverlay"===c.active&&c.close("printServiceOverlay")}));return}const e=l;l.renderPages().then((function(){const t=document.getElementById("printServiceOverlay");t&&t.classList.add("hidden");return e.performPrint()})).catch((function(){})).then((function(){e.active&&abort()}))}}};function dispatchEvent(e){const t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom");window.dispatchEvent(t)}function abort(){if(l){l.destroy();dispatchEvent("afterprint")}}function renderProgress(e,t,r,i){const n=document.getElementById("printServiceOverlay"),o=Math.round(100*e/t),a=n.querySelector("progress"),s=n.querySelector(".relative-progress");a.value=o;r.get("print_progress_percent",{progress:o}).then((e=>{s.textContent=e}));i.dispatch("progress",{source:this,type:"print",total:t,page:e,percent:100*e/t})}n.PDFViewerApplication.printKeyDownListener=function(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||window.chrome||window.opera)){window.printPDF();e.preventDefault();e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation()}};if("onbeforeprint"in window){const stopPropagationIfNeeded=function(e){"custom"!==e.detail&&e.stopImmediatePropagation&&e.stopImmediatePropagation()};window.addEventListener("beforeprint",stopPropagationIfNeeded);window.addEventListener("afterprint",stopPropagationIfNeeded)}let h;function ensureOverlay(){if(!h){c=n.PDFViewerApplication.overlayManager;if(!c)throw new Error("The overlay manager has not yet been initialized.");h=c.register("printServiceOverlay",document.getElementById("printServiceOverlay"),abort,!0);document.getElementById("printCancel").onclick=abort}return h}n.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService(e,t,r,i,n,o,a){if(l)throw new Error("The print service is created and active.");l=new PDFPrintService(e,t,r,i,n,o,a);return l}}},(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getXfaHtmlForPrinting=function getXfaHtmlForPrinting(e,t){const r=t.allXfaHtml,a=new n.SimpleLinkService,s=Math.round(100*i.PixelsPerInch.PDF_TO_CSS_UNITS)/100;for(const n of r.children){const r=document.createElement("div");r.className="xfaPrintedPage";e.appendChild(r);const l=new o.XfaLayerBuilder({pageDiv:r,pdfPage:null,annotationStorage:t.annotationStorage,linkService:a,xfaHtml:n}),c=(0,i.getXfaPageViewport)(n,{scale:s});l.render(c,"print")}};r(1);var i=r(165),n=r(182),o=r(225)}],t={};function __webpack_require__(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};e[r].call(n.exports,n,n.exports,__webpack_require__);return n.exports}var r={};(()=>{"use strict";var e=r;Object.defineProperty(e,"__esModule",{value:!0});Object.defineProperty(e,"PDFViewerApplication",{enumerable:!0,get:function(){return i.PDFViewerApplication}});Object.defineProperty(e,"PDFViewerApplicationOptions",{enumerable:!0,get:function(){return t.AppOptions}});__webpack_require__(1);var t=__webpack_require__(81),i=__webpack_require__(91);window.PDFViewerApplication=i.PDFViewerApplication;window.PDFViewerApplicationOptions=t.AppOptions;HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);"function"!=typeof window.CustomEvent&&(window.CustomEvent=function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const r=document.createEvent("CustomEvent");r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return r});__webpack_require__(229);__webpack_require__(235);document.blockUnblockOnload&&document.blockUnblockOnload(!0);window.webViewerLoad=function webViewerLoad(){const e=function getViewerConfiguration(){let e=null;e={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),eventBus:null,toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),toolbarButtonContainer:document.getElementById("secondaryToolbarButtonContainer"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),viewerContainer:document.getElementById("viewerContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),findFieldMultiline:document.getElementById("findInputMultiline"),highlightAllCheckbox:document.getElementById("findHighlightAll"),findCurrentPageCheckbox:document.getElementById("findCurrentPage"),findPageRangeField:document.getElementById("findRange"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),entireWordCheckbox:document.getElementById("findEntireWord"),findMultipleSearchTextsCheckbox:document.getElementById("findMultipleSearchTexts"),ignoreAccentsCheckbox:document.getElementById("findIgnoreAccents"),fuzzyCheckbox:document.getElementById("findFuzzy"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{overlayName:"passwordOverlay",container:document.getElementById("passwordOverlay"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{overlayName:"documentPropertiesOverlay",container:document.getElementById("documentPropertiesOverlay"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},errorWrapper:e,printContainer:document.getElementById("printContainer"),openFileInputName:"fileInput",debuggerScriptPath:"./debugger.js"}}(),t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.eventListeners&&parent.document.eventListeners("webviewerloaded").length?parent.document.dispatchEvent(t):document.dispatchEvent(t)}catch(e){Window.ngxConsole.error("webviewerloaded: ".concat(e));document.dispatchEvent(t)}i.PDFViewerApplication.run(e)}})()})();
});
