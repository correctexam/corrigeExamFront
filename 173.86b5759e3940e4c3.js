(self.webpackChunkgrade_scope_istic=self.webpackChunkgrade_scope_istic||[]).push([[173],{82384:(X,_e,R)=>{"use strict";R.d(_e,{z:()=>Zn});var N=R(15861),W=R(7331),z=R(64687),V=function(){return V=Object.assign||function(a){for(var s,l=1,v=arguments.length;l<v;l++)for(var _ in s=arguments[l])Object.prototype.hasOwnProperty.call(s,_)&&(a[_]=s[_]);return a},V.apply(this,arguments)};function se($,a,s,l){return new(s||(s=Promise))(function(_,O){function fe(ae){try{k(l.next(ae))}catch(me){O(me)}}function ge(ae){try{k(l.throw(ae))}catch(me){O(me)}}function k(ae){ae.done?_(ae.value):function v(_){return _ instanceof s?_:new s(function(O){O(_)})}(ae.value).then(fe,ge)}k((l=l.apply($,a||[])).next())})}function be($,a){var l,v,_,O,s={label:0,sent:function(){if(1&_[0])throw _[1];return _[1]},trys:[],ops:[]};return O={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(O[Symbol.iterator]=function(){return this}),O;function fe(k){return function(ae){return function ge(k){if(l)throw new TypeError("Generator is already executing.");for(;s;)try{if(l=1,v&&(_=2&k[0]?v.return:k[0]?v.throw||((_=v.return)&&_.call(v),0):v.next)&&!(_=_.call(v,k[1])).done)return _;switch(v=0,_&&(k=[2&k[0],_.value]),k[0]){case 0:case 1:_=k;break;case 4:return s.label++,{value:k[1],done:!1};case 5:s.label++,v=k[1],k=[0];continue;case 7:k=s.ops.pop(),s.trys.pop();continue;default:if(!(_=(_=s.trys).length>0&&_[_.length-1])&&(6===k[0]||2===k[0])){s=0;continue}if(3===k[0]&&(!_||k[1]>_[0]&&k[1]<_[3])){s.label=k[1];break}if(6===k[0]&&s.label<_[1]){s.label=_[1],_=k;break}if(_&&s.label<_[2]){s.label=_[2],s.ops.push(k);break}_[2]&&s.ops.pop(),s.trys.pop();continue}k=a.call($,s)}catch(ae){k=[6,ae],v=0}finally{l=_=0}if(5&k[0])throw k[1];return{value:k[0]?k[1]:void 0,done:!0}}([k,ae])}}}function nt($){return[$.schema.primKey].concat($.schema.indexes).map(function(s){return s.src}).join(",")}function Me($,a){return new Promise(function(s,l){var v=new FileReader;v.onabort=function(_){return l(new Error("file read aborted"))},v.onerror=function(_){return l(_.target.error)},v.onload=function(_){return s(_.target.result)},"binary"===a?v.readAsArrayBuffer($):v.readAsText($)})}function ut($,a){if(typeof FileReaderSync>"u")throw new Error("FileReaderSync missing. Reading blobs synchronously requires code to run from within a web worker. Use TSON.encapsulateAsync() to do it from the main thread.");var s=new FileReaderSync;return"binary"===a?s.readAsArrayBuffer($):s.readAsText($)}var De=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xe($,a){return $(a={exports:{}},a.exports),a.exports}for(var St=xe(function($,a){$.exports=function(){function s(j){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L})(j)}function l(j,L,q,Z,ee,We,Fe){try{var Ge=j[We](Fe),de=Ge.value}catch(Ft){return void q(Ft)}Ge.done?L(de):Promise.resolve(de).then(Z,ee)}function v(j){return function(){var L=this,q=arguments;return new Promise(function(Z,ee){var We=j.apply(L,q);function Fe(de){l(We,Z,ee,Fe,Ge,"next",de)}function Ge(de){l(We,Z,ee,Fe,Ge,"throw",de)}Fe(void 0)})}}function _(j,L){if(!(j instanceof L))throw new TypeError("Cannot call a class as a function")}function O(j,L){for(var q=0;q<L.length;q++){var Z=L[q];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(j,Z.key,Z)}}function ge(j,L,q){return L in j?Object.defineProperty(j,L,{value:q,enumerable:!0,configurable:!0,writable:!0}):j[L]=q,j}function k(j,L){var q=Object.keys(j);if(Object.getOwnPropertySymbols){var Z=Object.getOwnPropertySymbols(j);L&&(Z=Z.filter(function(ee){return Object.getOwnPropertyDescriptor(j,ee).enumerable})),q.push.apply(q,Z)}return q}function ae(j){for(var L=1;L<arguments.length;L++){var q=null!=arguments[L]?arguments[L]:{};L%2?k(Object(q),!0).forEach(function(Z){ge(j,Z,q[Z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(q)):k(Object(q)).forEach(function(Z){Object.defineProperty(j,Z,Object.getOwnPropertyDescriptor(q,Z))})}return j}function me(j,L){return function $e(j){if(Array.isArray(j))return j}(j)||function Xe(j,L){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j)){var q=[],Z=!0,ee=!1,We=void 0;try{for(var Ge,Fe=j[Symbol.iterator]();!(Z=(Ge=Fe.next()).done)&&(q.push(Ge.value),!L||q.length!==L);Z=!0);}catch(de){ee=!0,We=de}finally{try{!Z&&null!=Fe.return&&Fe.return()}finally{if(ee)throw We}}return q}}(j,L)||function kt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ot(j){return function _t(j){if(Array.isArray(j)){for(var L=0,q=new Array(j.length);L<j.length;L++)q[L]=j[L];return q}}(j)||function Ce(j){if(Symbol.iterator in Object(j)||"[object Arguments]"===Object.prototype.toString.call(j))return Array.from(j)}(j)||function jt(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var le=function j(L){_(this,j),this.p=new Promise(L)};le.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(le.prototype[Symbol.toStringTag]="TypesonPromise"),le.prototype.then=function(j,L){var q=this;return new le(function(Z,ee){q.p.then(function(We){Z(j?j(We):We)}).catch(function(We){return L?L(We):Promise.reject(We)}).then(Z,ee)})},le.prototype.catch=function(j){return this.then(null,j)},le.resolve=function(j){return new le(function(L){L(j)})},le.reject=function(j){return new le(function(L,q){q(j)})},["all","race"].forEach(function(j){le[j]=function(L){return new le(function(q,Z){Promise[j](L.map(function(ee){return ee&&ee.constructor&&"TypesonPromise"===ee.constructor.__typeson__type__?ee.p:ee})).then(q,Z)})}});var Se={}.toString,et={}.hasOwnProperty,lt=Object.getPrototypeOf,Jt=et.toString;function C(j,L){return M(j)&&"function"==typeof j.then&&(!L||"function"==typeof j.catch)}function c(j){return Se.call(j).slice(8,-1)}function Y(j,L){if(!j||"object"!==s(j))return!1;var q=lt(j);if(!q)return null===L;var Z=et.call(q,"constructor")&&q.constructor;return"function"!=typeof Z?null===L:L===Z||null!==L&&Jt.call(Z)===Jt.call(L)||"function"==typeof L&&"string"==typeof Z.__typeson__type__&&Z.__typeson__type__===L.__typeson__type__}function F(j){return!(!j||"Object"!==c(j))&&(!lt(j)||Y(j,Object))}function M(j){return j&&"object"===s(j)}function ht(j){return j.replace(/~/g,"~0").replace(/\./g,"~1")}function It(j){return j.replace(/~1/g,".").replace(/~0/g,"~")}function Bt(j,L){if(""===L)return j;var q=L.indexOf(".");if(q>-1){var Z=j[It(L.slice(0,q))];return void 0===Z?void 0:Bt(Z,L.slice(q+1))}return j[It(L)]}function rn(j,L,q){if(""===L)return q;var Z=L.indexOf(".");return Z>-1?rn(j[It(L.slice(0,Z))],L.slice(Z+1),q):(j[It(L)]=q,j)}var xt=Object.keys,Ct=Array.isArray,Zt={}.hasOwnProperty,tn=["type","replaced","iterateIn","iterateUnsetNumeric"];function Ne(j,L){if(""===j.keypath)return-1;var q=j.keypath.match(/\./g)||0,Z=L.keypath.match(/\./g)||0;return q&&(q=q.length),Z&&(Z=Z.length),q>Z?-1:q<Z?1:j.keypath<L.keypath?-1:j.keypath>L.keypath}var bt=function(){function j(L){_(this,j),this.options=L,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return function fe(j,L,q){return L&&O(j.prototype,L),q&&O(j,q),j}(j,[{key:"stringify",value:function(q,Z,ee,We){We=ae({},this.options,{},We,{stringification:!0});var Fe=this.encapsulate(q,null,We);return Ct(Fe)?JSON.stringify(Fe[0],Z,ee):Fe.then(function(Ge){return JSON.stringify(Ge,Z,ee)})}},{key:"stringifySync",value:function(q,Z,ee,We){return this.stringify(q,Z,ee,ae({throwOnBadSyncType:!0},We,{sync:!0}))}},{key:"stringifyAsync",value:function(q,Z,ee,We){return this.stringify(q,Z,ee,ae({throwOnBadSyncType:!0},We,{sync:!1}))}},{key:"parse",value:function(q,Z,ee){return ee=ae({},this.options,{},ee,{parse:!0}),this.revive(JSON.parse(q,Z),ee)}},{key:"parseSync",value:function(q,Z,ee){return this.parse(q,Z,ae({throwOnBadSyncType:!0},ee,{sync:!0}))}},{key:"parseAsync",value:function(q,Z,ee){return this.parse(q,Z,ae({throwOnBadSyncType:!0},ee,{sync:!1}))}},{key:"specialTypeNames",value:function(q,Z){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ee.returnTypeNames=!0,this.encapsulate(q,Z,ee)}},{key:"rootTypeName",value:function(q,Z){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ee.iterateNone=!0,this.encapsulate(q,Z,ee)}},{key:"encapsulate",value:function(q,Z,ee){var Fe=(ee=ae({sync:!0},this.options,{},ee)).sync,Ge=this,de={},Ft=[],sn=[],Dt=[],gn=!("cyclic"in ee)||ee.cyclic,wn=ee.encapsulateObserver,on=ot("",q,gn,Z||{},Dt);function yt(ye){var d=Object.values(de);if(ee.iterateNone)return d.length?d[0]:j.getJSONType(ye);if(d.length){if(ee.returnTypeNames)return Ot(new Set(d));ye&&F(ye)&&!Zt.call(ye,"$types")?ye.$types=de:ye={$:ye,$types:{$:de}}}else M(ye)&&Zt.call(ye,"$types")&&(ye={$:ye,$types:!0});return!ee.returnTypeNames&&ye}function At(ye,d){return Qe.apply(this,arguments)}function Qe(){return Qe=v(z.mark(function ye(d,o){var f;return z.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,Promise.all(o.map(function(U){return U[1].p}));case 2:return f=S.sent,S.next=5,Promise.all(f.map(function(){var U=v(z.mark(function re(ve){var ue,Pe,pe,at,ze,gt,Be,he,Q;return z.wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:if(ue=[],Pe=o.splice(0,1),pe=me(Pe,1),at=me(pe[0],7),gt=at[4],Be=at[5],he=ot(ze=at[0],ve,at[2],at[3],ue,!0,at[6]),Q=Y(he,le),!ze||!Q){ne.next=11;break}return ne.next=8,he.p;case 8:return gt[Be]=ne.sent,ne.abrupt("return",At(d,ue));case 11:return ze?gt[Be]=he:d=Q?he.p:he,ne.abrupt("return",At(d,ue));case 13:case"end":return ne.stop()}},re)}));return function(re){return U.apply(this,arguments)}}()));case 5:return S.abrupt("return",d);case 6:case"end":return S.stop()}},ye)})),Qe.apply(this,arguments)}function mt(ye,d,o){Object.assign(ye,d);var f=tn.map(function(m){var S=ye[m];return delete ye[m],S});o(),tn.forEach(function(m,S){ye[m]=f[S]})}function ot(ye,d,o,f,m,S,U){var re,ve={},ue=s(d),Pe=wn?function(Q){var Ee=U||f.type||j.getJSONType(d);wn(Object.assign(Q||ve,{keypath:ye,value:d,cyclic:o,stateObj:f,promisesData:m,resolvingTypesonPromise:S,awaitingTypesonPromise:Y(d,le)},{type:Ee}))}:null;if(["string","boolean","number","undefined"].includes(ue))return void 0===d||"number"===ue&&(isNaN(d)||d===-1/0||d===1/0)?(re=f.replaced?d:Tt(ye,d,f,m,!1,S,Pe))!==d&&(ve={replaced:re}):re=d,Pe&&Pe(),re;if(null===d)return Pe&&Pe(),d;if(o&&!f.iterateIn&&!f.iterateUnsetNumeric&&d&&"object"===s(d)){var pe=Ft.indexOf(d);if(!(pe<0))return de[ye]="#",Pe&&Pe({cyclicKeypath:sn[pe]}),"#"+sn[pe];!0===o&&(Ft.push(d),sn.push(ye))}var tt,Ue=F(d),at=Ct(d),ze=(Ue||at)&&(!Ge.plainObjectReplacers.length||f.replaced)||f.iterateIn?d:Tt(ye,d,f,m,Ue||at,null,Pe);if(ze!==d?(re=ze,ve={replaced:ze}):""===ye&&Y(d,le)?(m.push([ye,d,o,f,void 0,void 0,f.type]),re=d):at&&"object"!==f.iterateIn||"array"===f.iterateIn?(tt=new Array(d.length),ve={clone:tt}):(["function","symbol"].includes(s(d))||"toJSON"in d||Y(d,le)||Y(d,Promise)||Y(d,ArrayBuffer))&&!Ue&&"object"!==f.iterateIn?re=d:(tt={},f.addLength&&(tt.length=d.length),ve={clone:tt}),Pe&&Pe(),ee.iterateNone)return tt||re;if(!tt)return re;if(f.iterateIn){var wt=function(Ee){var Oe={ownKeys:Zt.call(d,Ee)};mt(f,Oe,function(){var ne=ye+(ye?".":"")+ht(Ee),Je=ot(ne,d[Ee],!!o,f,m,S);Y(Je,le)?m.push([ne,Je,!!o,f,tt,Ee,f.type]):void 0!==Je&&(tt[Ee]=Je)})};for(var gt in d)wt(gt);Pe&&Pe({endIterateIn:!0,end:!0})}else xt(d).forEach(function(Q){var Ee=ye+(ye?".":"")+ht(Q);mt(f,{ownKeys:!0},function(){var ne=ot(Ee,d[Q],!!o,f,m,S);Y(ne,le)?m.push([Ee,ne,!!o,f,tt,Q,f.type]):void 0!==ne&&(tt[Q]=ne)})}),Pe&&Pe({endIterateOwn:!0,end:!0});if(f.iterateUnsetNumeric){for(var Be=d.length,Ut=function(Ee){if(!(Ee in d)){var Oe=ye+(ye?".":"")+Ee;mt(f,{ownKeys:!1},function(){var Je=ot(Oe,void 0,!!o,f,m,S);Y(Je,le)?m.push([Oe,Je,!!o,f,tt,Ee,f.type]):void 0!==Je&&(tt[Ee]=Je)})}},he=0;he<Be;he++)Ut(he);Pe&&Pe({endIterateUnsetNumeric:!0,end:!0})}return tt}function Tt(ye,d,o,f,m,S,U){for(var re=m?Ge.plainObjectReplacers:Ge.nonplainObjectReplacers,ve=re.length;ve--;){var ue=re[ve];if(ue.test(d,o)){var Pe=ue.type;if(Ge.revivers[Pe]){var pe=de[ye];de[ye]=pe?[Pe].concat(pe):Pe}return Object.assign(o,{type:Pe,replaced:!0}),!Fe&&ue.replaceAsync||ue.replace?(U&&U({replacing:!0}),ot(ye,ue[Fe||!ue.replaceAsync?"replace":"replaceAsync"](d,o),gn&&"readonly",o,f,S,Pe)):(U&&U({typeDetected:!0}),ot(ye,d,gn&&"readonly",o,f,S,Pe))}}return d}return Dt.length?Fe&&ee.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(At(on,Dt)).then(yt):!Fe&&ee.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():ee.stringification&&Fe?[yt(on)]:Fe?yt(on):Promise.resolve(yt(on))}},{key:"encapsulateSync",value:function(q,Z,ee){return this.encapsulate(q,Z,ae({throwOnBadSyncType:!0},ee,{sync:!0}))}},{key:"encapsulateAsync",value:function(q,Z,ee){return this.encapsulate(q,Z,ae({throwOnBadSyncType:!0},ee,{sync:!1}))}},{key:"revive",value:function(q,Z){var ee=q&&q.$types;if(!ee)return q;if(!0===ee)return q.$;var Fe=(Z=ae({sync:!0},this.options,{},Z)).sync,Ge=[],de={},Ft=!0;ee.$&&F(ee.$)&&(q=q.$,ee=ee.$,Ft=!1);var sn=this;function Dt(Qe,mt){var ye=me(sn.revivers[Qe]||[],1)[0];if(!ye)throw new Error("Unregistered type: "+Qe);return Fe&&!("revive"in ye)?mt:ye[Fe&&ye.revive?"revive":!Fe&&ye.reviveAsync?"reviveAsync":"revive"](mt,de)}var Ht=[];function on(Qe){return Y(Qe,Ye)?void 0:Qe}var At,yt=function gn(){var Qe=[];if(Object.entries(ee).forEach(function(mt){var ot=me(mt,2),Tt=ot[0],ye=ot[1];"#"!==ye&&[].concat(ye).forEach(function(d){me(sn.revivers[d]||[null,{}],2)[1].plain&&(Qe.push({keypath:Tt,type:d}),delete ee[Tt])})}),Qe.length)return Qe.sort(Ne).reduce(function mt(ot,Tt){var ye=Tt.keypath,d=Tt.type;if(C(ot))return ot.then(function(m){return mt(m,{keypath:ye,type:d})});var o=Bt(q,ye);if(Y(o=Dt(d,o),le))return o.then(function(m){var S=rn(q,ye,m);S===m&&(q=S)});var f=rn(q,ye,o);f===o&&(q=f)},void 0)}();return Y(yt,le)?At=yt.then(function(){return q}):(At=function wn(Qe,mt,ot,Tt,ye){if(!Ft||"$types"!==Qe){var d=ee[Qe],o=Ct(mt);if(o||F(mt)){var f=o?new Array(mt.length):{};for(xt(mt).forEach(function(pe){var Ue=wn(Qe+(Qe?".":"")+ht(pe),mt[pe],ot||f,f,pe),at=function(tt){return Y(tt,Ye)?f[pe]=void 0:void 0!==tt&&(f[pe]=tt),tt};Y(Ue,le)?Ht.push(Ue.then(function(ze){return at(ze)})):at(Ue)}),mt=f;Ge.length;){var m=me(Ge[0],4),re=m[2],ve=m[3],ue=Bt(m[0],m[1]);if(void 0===ue)break;re[ve]=ue,Ge.splice(0,1)}}if(!d)return mt;if("#"===d){var Pe=Bt(ot,mt.slice(1));return void 0===Pe&&Ge.push([ot,mt.slice(1),Tt,ye]),Pe}return[].concat(d).reduce(function pe(Ue,at){return Y(Ue,le)?Ue.then(function(ze){return pe(ze,at)}):Dt(at,Ue)},mt)}}("",q,null),Ht.length&&(At=le.resolve(At).then(function(Qe){return le.all([Qe].concat(Ht))}).then(function(Qe){return me(Qe,1)[0]}))),C(At)?Fe&&Z.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Y(At,le)?At.p.then(on):At:!Fe&&Z.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():Fe?on(At):Promise.resolve(on(At))}},{key:"reviveSync",value:function(q,Z){return this.revive(q,ae({throwOnBadSyncType:!0},Z,{sync:!0}))}},{key:"reviveAsync",value:function(q,Z){return this.revive(q,ae({throwOnBadSyncType:!0},Z,{sync:!1}))}},{key:"register",value:function(q,Z){return Z=Z||{},[].concat(q).forEach(function ee(We){var Fe=this;if(Ct(We))return We.map(function(Ge){return ee.call(Fe,Ge)});We&&xt(We).forEach(function(Ge){if("#"===Ge)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(j.JSON_TYPES.includes(Ge))throw new TypeError("Plain JSON object types are reserved as type names");var de=We[Ge],Ft=de&&de.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,sn=Ft.filter(function(ot){return ot.type===Ge});if(sn.length&&(Ft.splice(Ft.indexOf(sn[0]),1),delete this.revivers[Ge],delete this.types[Ge]),"function"==typeof de){var Dt=de;de={test:function(Tt){return Tt&&Tt.constructor===Dt},replace:function(Tt){return ae({},Tt)},revive:function(Tt){return Object.assign(Object.create(Dt.prototype),Tt)}}}else if(Ct(de)){var Ht=me(de,3);de={test:Ht[0],replace:Ht[1],revive:Ht[2]}}if(de&&de.test){var At={type:Ge,test:de.test.bind(de)};de.replace&&(At.replace=de.replace.bind(de)),de.replaceAsync&&(At.replaceAsync=de.replaceAsync.bind(de));var Qe="number"==typeof Z.fallback?Z.fallback:Z.fallback?0:1/0;if(de.testPlainObjects?this.plainObjectReplacers.splice(Qe,0,At):this.nonplainObjectReplacers.splice(Qe,0,At),de.revive||de.reviveAsync){var mt={};de.revive&&(mt.revive=de.revive.bind(de)),de.reviveAsync&&(mt.reviveAsync=de.reviveAsync.bind(de)),this.revivers[Ge]=[mt,{plain:de.testPlainObjects}]}this.types[Ge]=de}},this)},this),this}}]),j}(),Ye=function j(){_(this,j)};return Ye.__typeson__type__="TypesonUndefined",bt.Undefined=Ye,bt.Promise=le,bt.isThenable=C,bt.toStringTag=c,bt.hasConstructorOf=Y,bt.isObject=M,bt.isPlainObject=F,bt.isUserObject=function it(j){if(!j||"Object"!==c(j))return!1;var L=lt(j);return!L||Y(j,Object)||it(L)},bt.escapeKeyPathComponent=ht,bt.unescapeKeyPathComponent=It,bt.getByKeyPath=Bt,bt.getJSONType=function Wt(j){return null===j?"null":Array.isArray(j)?"array":s(j)},bt.JSON_TYPES=["null","boolean","number","string","array","object"],bt}()}),Ie=xe(function($,a){$.exports=function(){function s(d){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(d)}function v(d,o){for(var f=0;f<o.length;f++){var m=o[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function _(d,o,f){return o in d?Object.defineProperty(d,o,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[o]=f,d}function O(d,o){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);o&&(m=m.filter(function(S){return Object.getOwnPropertyDescriptor(d,S).enumerable})),f.push.apply(f,m)}return f}function fe(d){return function(f){if(Array.isArray(f))return ge(f)}(d)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(d)||function(f,m){if(f){if("string"==typeof f)return ge(f,m);var S=Object.prototype.toString.call(f).slice(8,-1);if("Object"===S&&f.constructor&&(S=f.constructor.name),"Map"===S||"Set"===S)return Array.from(f);if("Arguments"===S||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return ge(f,m)}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(d,o){(null==o||o>d.length)&&(o=d.length);for(var f=0,m=new Array(o);f<o;f++)m[f]=d[f];return m}function k(d){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(d)}function ae(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")}function me(d,o){for(var f=0;f<o.length;f++){var m=o[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(d,m.key,m)}}function Ot(d,o,f){return o in d?Object.defineProperty(d,o,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[o]=f,d}function _t(d,o){var f=Object.keys(d);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(d);o&&(m=m.filter(function(S){return Object.getOwnPropertyDescriptor(d,S).enumerable})),f.push.apply(f,m)}return f}function $e(d){for(var o=1;o<arguments.length;o++){var f=null!=arguments[o]?arguments[o]:{};o%2?_t(Object(f),!0).forEach(function(m){Ot(d,m,f[m])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):_t(Object(f)).forEach(function(m){Object.defineProperty(d,m,Object.getOwnPropertyDescriptor(f,m))})}return d}function Ce(d,o){return function(m){if(Array.isArray(m))return m}(d)||function(m,S){if(!(typeof Symbol>"u")&&Symbol.iterator in Object(m)){var U=[],re=!0,ve=!1,ue=void 0;try{for(var Pe,pe=m[Symbol.iterator]();!(re=(Pe=pe.next()).done)&&(U.push(Pe.value),!S||U.length!==S);re=!0);}catch(Ue){ve=!0,ue=Ue}finally{try{re||null==pe.return||pe.return()}finally{if(ve)throw ue}}return U}}(d,o)||jt(d,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(d,o){if(d){if("string"==typeof d)return kt(d,o);var f=Object.prototype.toString.call(d).slice(8,-1);return"Object"===f&&d.constructor&&(f=d.constructor.name),"Map"===f||"Set"===f?Array.from(d):"Arguments"===f||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f)?kt(d,o):void 0}}function kt(d,o){(null==o||o>d.length)&&(o=d.length);for(var f=0,m=new Array(o);f<o;f++)m[f]=d[f];return m}var le=function d(o){ae(this,d),this.p=new Promise(o)};le.__typeson__type__="TypesonPromise",typeof Symbol<"u"&&(le.prototype[Symbol.toStringTag]="TypesonPromise"),le.prototype.then=function(d,o){var f=this;return new le(function(m,S){f.p.then(function(U){m(d?d(U):U)}).catch(function(U){return o?o(U):Promise.reject(U)}).then(m,S)})},le.prototype.catch=function(d){return this.then(null,d)},le.resolve=function(d){return new le(function(o){o(d)})},le.reject=function(d){return new le(function(o,f){f(d)})},["all","race"].forEach(function(d){le[d]=function(o){return new le(function(f,m){Promise[d](o.map(function(S){return S&&S.constructor&&"TypesonPromise"===S.constructor.__typeson__type__?S.p:S})).then(f,m)})}});var zt={}.toString,Se={}.hasOwnProperty,et=Object.getPrototypeOf,lt=Se.toString;function Jt(d,o){return F(d)&&"function"==typeof d.then&&(!o||"function"==typeof d.catch)}function C(d){return zt.call(d).slice(8,-1)}function c(d,o){if(!d||"object"!==k(d))return!1;var f=et(d);if(!f)return null===o;var m=Se.call(f,"constructor")&&f.constructor;return"function"!=typeof m?null===o:o===m||null!==o&&lt.call(m)===lt.call(o)||"function"==typeof o&&"string"==typeof m.__typeson__type__&&m.__typeson__type__===o.__typeson__type__}function Y(d){return!(!d||"Object"!==C(d))&&(!et(d)||c(d,Object))}function F(d){return d&&"object"===k(d)}function it(d){return d.replace(/~/g,"~0").replace(/\./g,"~1")}function M(d){return d.replace(/~1/g,".").replace(/~0/g,"~")}function ht(d,o){if(""===o)return d;var f=o.indexOf(".");if(f>-1){var m=d[M(o.slice(0,f))];return void 0===m?void 0:ht(m,o.slice(f+1))}return d[M(o)]}function It(d,o,f){if(""===o)return f;var m=o.indexOf(".");return m>-1?It(d[M(o.slice(0,m))],o.slice(m+1),f):(d[M(o)]=f,d)}function Bt(d,o,f){return f?o?o(d):d:(d&&d.then||(d=Promise.resolve(d)),o?d.then(o):d)}var rn=Object.keys,Wt=Array.isArray,xt={}.hasOwnProperty,Ct=["type","replaced","iterateIn","iterateUnsetNumeric"];function Zt(d){return function(){for(var o=[],f=0;f<arguments.length;f++)o[f]=arguments[f];try{return Promise.resolve(d.apply(this,o))}catch(m){return Promise.reject(m)}}}function tn(d,o){if(""===d.keypath)return-1;var f=d.keypath.match(/\./g)||0,m=o.keypath.match(/\./g)||0;return f&&(f=f.length),m&&(m=m.length),f>m?-1:f<m?1:d.keypath<o.keypath?-1:d.keypath>o.keypath}var Ne=function(){function d(o){ae(this,d),this.options=o,this.plainObjectReplacers=[],this.nonplainObjectReplacers=[],this.revivers={},this.types={}}return f=d,m=[{key:"stringify",value:function(f,m,S,U){U=$e($e($e({},this.options),U),{},{stringification:!0});var re=this.encapsulate(f,null,U);return Wt(re)?JSON.stringify(re[0],m,S):re.then(function(ve){return JSON.stringify(ve,m,S)})}},{key:"stringifySync",value:function(f,m,S,U){return this.stringify(f,m,S,$e($e({throwOnBadSyncType:!0},U),{},{sync:!0}))}},{key:"stringifyAsync",value:function(f,m,S,U){return this.stringify(f,m,S,$e($e({throwOnBadSyncType:!0},U),{},{sync:!1}))}},{key:"parse",value:function(f,m,S){return S=$e($e($e({},this.options),S),{},{parse:!0}),this.revive(JSON.parse(f,m),S)}},{key:"parseSync",value:function(f,m,S){return this.parse(f,m,$e($e({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"parseAsync",value:function(f,m,S){return this.parse(f,m,$e($e({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"specialTypeNames",value:function(f,m){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.returnTypeNames=!0,this.encapsulate(f,m,S)}},{key:"rootTypeName",value:function(f,m){var S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S.iterateNone=!0,this.encapsulate(f,m,S)}},{key:"encapsulate",value:function(f,m,S){var U=Zt(function(he,Q){return Bt(Promise.all(Q.map(function(Ee){return Ee[1].p})),function(Ee){return Bt(Promise.all(Ee.map(Zt(function(Oe){var kn,hn,ne=!1,Je=[],pn=Ce(Q.splice(0,1),1),Rt=Ce(pn[0],7),Et=Rt[0],Vt=Rt[4],Pt=Rt[5],ft=Be(Et,Oe,Rt[2],Rt[3],Je,!0,Rt[6]),Lt=c(ft,le);return kn=function(an){return ne?an:(Et?Vt[Pt]=ft:he=Lt?ft.p:ft,U(he,Je))},(hn=function(){if(Et&&Lt)return Bt(ft.p,function(an){return Vt[Pt]=an,ne=!0,U(he,Je)})}())&&hn.then?hn.then(kn):kn(hn)}))),function(){return he})})}),re=(S=$e($e({sync:!0},this.options),S)).sync,ve=this,ue={},Pe=[],pe=[],Ue=[],at=!("cyclic"in S)||S.cyclic,ze=S.encapsulateObserver,tt=Be("",f,at,m||{},Ue);function wt(he){var Q=Object.values(ue);if(S.iterateNone)return Q.length?Q[0]:d.getJSONType(he);if(Q.length){if(S.returnTypeNames)return function Xe(d){return function(f){if(Array.isArray(f))return kt(f)}(d)||function(f){if(typeof Symbol<"u"&&Symbol.iterator in Object(f))return Array.from(f)}(d)||jt(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(Q));he&&Y(he)&&!xt.call(he,"$types")?he.$types=ue:he={$:he,$types:{$:ue}}}else F(he)&&xt.call(he,"$types")&&(he={$:he,$types:!0});return!S.returnTypeNames&&he}function gt(he,Q,Ee){Object.assign(he,Q);var Oe=Ct.map(function(ne){var Je=he[ne];return delete he[ne],Je});Ee(),Ct.forEach(function(ne,Je){he[ne]=Oe[Je]})}function Be(he,Q,Ee,Oe,ne,Je,pn){var Rt,Et={},Xt=k(Q),vt=ze?function(Qt){var en=pn||Oe.type||d.getJSONType(Q);ze(Object.assign(Qt||Et,{keypath:he,value:Q,cyclic:Ee,stateObj:Oe,promisesData:ne,resolvingTypesonPromise:Je,awaitingTypesonPromise:c(Q,le)},{type:en}))}:null;if(["string","boolean","number","undefined"].includes(Xt))return void 0===Q||Number.isNaN(Q)||Q===Number.NEGATIVE_INFINITY||Q===Number.POSITIVE_INFINITY?(Rt=Oe.replaced?Q:Ut(he,Q,Oe,ne,!1,Je,vt))!==Q&&(Et={replaced:Rt}):Rt=Q,vt&&vt(),Rt;if(null===Q)return vt&&vt(),Q;if(Ee&&!Oe.iterateIn&&!Oe.iterateUnsetNumeric&&Q&&"object"===k(Q)){var Vt=Pe.indexOf(Q);if(!(Vt<0))return ue[he]="#",vt&&vt({cyclicKeypath:pe[Vt]}),"#"+pe[Vt];!0===Ee&&(Pe.push(Q),pe.push(he))}var Pt,cn=Y(Q),ft=Wt(Q),Lt=(cn||ft)&&(!ve.plainObjectReplacers.length||Oe.replaced)||Oe.iterateIn?Q:Ut(he,Q,Oe,ne,cn||ft,null,vt);if(Lt!==Q?(Rt=Lt,Et={replaced:Lt}):""===he&&c(Q,le)?(ne.push([he,Q,Ee,Oe,void 0,void 0,Oe.type]),Rt=Q):ft&&"object"!==Oe.iterateIn||"array"===Oe.iterateIn?(Pt=new Array(Q.length),Et={clone:Pt}):(["function","symbol"].includes(k(Q))||"toJSON"in Q||c(Q,le)||c(Q,Promise)||c(Q,ArrayBuffer))&&!cn&&"object"!==Oe.iterateIn?Rt=Q:(Pt={},Oe.addLength&&(Pt.length=Q.length),Et={clone:Pt}),vt&&vt(),S.iterateNone)return Pt||Rt;if(!Pt)return Rt;if(Oe.iterateIn){var an=function(en){var _n={ownKeys:xt.call(Q,en)};gt(Oe,_n,function(){var An=he+(he?".":"")+it(en),Pn=Be(An,Q[en],!!Ee,Oe,ne,Je);c(Pn,le)?ne.push([An,Pn,!!Ee,Oe,Pt,en,Oe.type]):void 0!==Pn&&(Pt[en]=Pn)})};for(var In in Q)an(In);vt&&vt({endIterateIn:!0,end:!0})}else rn(Q).forEach(function(Qt){var en=he+(he?".":"")+it(Qt);gt(Oe,{ownKeys:!0},function(){var _n=Be(en,Q[Qt],!!Ee,Oe,ne,Je);c(_n,le)?ne.push([en,_n,!!Ee,Oe,Pt,Qt,Oe.type]):void 0!==_n&&(Pt[Qt]=_n)})}),vt&&vt({endIterateOwn:!0,end:!0});if(Oe.iterateUnsetNumeric){for(var kn=Q.length,hn=function(en){if(!(en in Q)){var _n=he+(he?".":"")+en;gt(Oe,{ownKeys:!1},function(){var An=Be(_n,void 0,!!Ee,Oe,ne,Je);c(An,le)?ne.push([_n,An,!!Ee,Oe,Pt,en,Oe.type]):void 0!==An&&(Pt[en]=An)})}},Un=0;Un<kn;Un++)hn(Un);vt&&vt({endIterateUnsetNumeric:!0,end:!0})}return Pt}function Ut(he,Q,Ee,Oe,ne,Je,pn){for(var Rt=ne?ve.plainObjectReplacers:ve.nonplainObjectReplacers,Et=Rt.length;Et--;){var Xt=Rt[Et];if(Xt.test(Q,Ee)){var vt=Xt.type;if(ve.revivers[vt]){var Vt=ue[he];ue[he]=Vt?[vt].concat(Vt):vt}return Object.assign(Ee,{type:vt,replaced:!0}),!re&&Xt.replaceAsync||Xt.replace?(pn&&pn({replacing:!0}),Be(he,Xt[re||!Xt.replaceAsync?"replace":"replaceAsync"](Q,Ee),at&&"readonly",Ee,Oe,Je,vt)):(pn&&pn({typeDetected:!0}),Be(he,Q,at&&"readonly",Ee,Oe,Je,vt))}}return Q}return Ue.length?re&&S.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():Promise.resolve(U(tt,Ue)).then(wt):!re&&S.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():S.stringification&&re?[wt(tt)]:re?wt(tt):Promise.resolve(wt(tt))}},{key:"encapsulateSync",value:function(f,m,S){return this.encapsulate(f,m,$e($e({throwOnBadSyncType:!0},S),{},{sync:!0}))}},{key:"encapsulateAsync",value:function(f,m,S){return this.encapsulate(f,m,$e($e({throwOnBadSyncType:!0},S),{},{sync:!1}))}},{key:"revive",value:function(f,m){var S=f&&f.$types;if(!S)return f;if(!0===S)return f.$;var U=(m=$e($e({sync:!0},this.options),m)).sync,re=[],ve={},ue=!0;S.$&&Y(S.$)&&(f=f.$,S=S.$,ue=!1);var Pe=this;function pe(wt,gt){var Be=Ce(Pe.revivers[wt]||[],1)[0];if(!Be)throw new Error("Unregistered type: "+wt);return U&&!("revive"in Be)?gt:Be[U&&Be.revive?"revive":!U&&Be.reviveAsync?"reviveAsync":"revive"](gt,ve)}var Ue=[];function at(wt){return c(wt,bt)?void 0:wt}var ze,tt=function(){var gt=[];if(Object.entries(S).forEach(function(Be){var Ut=Ce(Be,2),he=Ut[0],Q=Ut[1];"#"!==Q&&[].concat(Q).forEach(function(Ee){Ce(Pe.revivers[Ee]||[null,{}],2)[1].plain&&(gt.push({keypath:he,type:Ee}),delete S[he])})}),gt.length)return gt.sort(tn).reduce(function Be(Ut,he){var Q=he.keypath,Ee=he.type;if(Jt(Ut))return Ut.then(function(Je){return Be(Je,{keypath:Q,type:Ee})});var Oe=ht(f,Q);if(c(Oe=pe(Ee,Oe),le))return Oe.then(function(Je){var pn=It(f,Q,Je);pn===Je&&(f=pn)});var ne=It(f,Q,Oe);ne===Oe&&(f=ne)},void 0)}();return c(tt,le)?ze=tt.then(function(){return f}):(ze=function wt(gt,Be,Ut,he,Q){if(!ue||"$types"!==gt){var Ee=S[gt],Oe=Wt(Be);if(Oe||Y(Be)){var ne=Oe?new Array(Be.length):{};for(rn(Be).forEach(function(Pt){var cn=wt(gt+(gt?".":"")+it(Pt),Be[Pt],Ut||ne,ne,Pt),ft=function(an){return c(an,bt)?ne[Pt]=void 0:void 0!==an&&(ne[Pt]=an),an};c(cn,le)?Ue.push(cn.then(function(Lt){return ft(Lt)})):ft(cn)}),Be=ne;re.length;){var Je=Ce(re[0],4),Et=Je[2],Xt=Je[3],vt=ht(Je[0],Je[1]);if(void 0===vt)break;Et[Xt]=vt,re.splice(0,1)}}if(!Ee)return Be;if("#"===Ee){var Vt=ht(Ut,Be.slice(1));return void 0===Vt&&re.push([Ut,Be.slice(1),he,Q]),Vt}return[].concat(Ee).reduce(function Pt(cn,ft){return c(cn,le)?cn.then(function(Lt){return Pt(Lt,ft)}):pe(ft,cn)},Be)}}("",f,null),Ue.length&&(ze=le.resolve(ze).then(function(wt){return le.all([wt].concat(Ue))}).then(function(wt){return Ce(wt,1)[0]}))),Jt(ze)?U&&m.throwOnBadSyncType?function(){throw new TypeError("Sync method requested but async result obtained")}():c(ze,le)?ze.p.then(at):ze:!U&&m.throwOnBadSyncType?function(){throw new TypeError("Async method requested but sync result obtained")}():U?at(ze):Promise.resolve(at(ze))}},{key:"reviveSync",value:function(f,m){return this.revive(f,$e($e({throwOnBadSyncType:!0},m),{},{sync:!0}))}},{key:"reviveAsync",value:function(f,m){return this.revive(f,$e($e({throwOnBadSyncType:!0},m),{},{sync:!1}))}},{key:"register",value:function(f,m){return m=m||{},[].concat(f).forEach(function S(U){var re=this;if(Wt(U))return U.map(function(ve){return S.call(re,ve)});U&&rn(U).forEach(function(ve){if("#"===ve)throw new TypeError("# cannot be used as a type name as it is reserved for cyclic objects");if(d.JSON_TYPES.includes(ve))throw new TypeError("Plain JSON object types are reserved as type names");var ue=U[ve],Pe=ue&&ue.testPlainObjects?this.plainObjectReplacers:this.nonplainObjectReplacers,pe=Pe.filter(function(gt){return gt.type===ve});if(pe.length&&(Pe.splice(Pe.indexOf(pe[0]),1),delete this.revivers[ve],delete this.types[ve]),"function"==typeof ue){var Ue=ue;ue={test:function(Be){return Be&&Be.constructor===Ue},replace:function(Be){return $e({},Be)},revive:function(Be){return Object.assign(Object.create(Ue.prototype),Be)}}}else if(Wt(ue)){var at=Ce(ue,3);ue={test:at[0],replace:at[1],revive:at[2]}}if(ue&&ue.test){var ze={type:ve,test:ue.test.bind(ue)};ue.replace&&(ze.replace=ue.replace.bind(ue)),ue.replaceAsync&&(ze.replaceAsync=ue.replaceAsync.bind(ue));var tt="number"==typeof m.fallback?m.fallback:m.fallback?0:Number.POSITIVE_INFINITY;if(ue.testPlainObjects?this.plainObjectReplacers.splice(tt,0,ze):this.nonplainObjectReplacers.splice(tt,0,ze),ue.revive||ue.reviveAsync){var wt={};ue.revive&&(wt.revive=ue.revive.bind(ue)),ue.reviveAsync&&(wt.reviveAsync=ue.reviveAsync.bind(ue)),this.revivers[ve]=[wt,{plain:ue.testPlainObjects}]}this.types[ve]=ue}},this)},this),this}}],m&&me(f.prototype,m),d;var f,m}(),bt=function d(){ae(this,d)};bt.__typeson__type__="TypesonUndefined",Ne.Undefined=bt,Ne.Promise=le,Ne.isThenable=Jt,Ne.toStringTag=C,Ne.hasConstructorOf=c,Ne.isObject=F,Ne.isPlainObject=Y,Ne.isUserObject=function d(o){if(!o||"Object"!==C(o))return!1;var f=et(o);return!f||c(o,Object)||d(f)},Ne.escapeKeyPathComponent=it,Ne.unescapeKeyPathComponent=M,Ne.getByKeyPath=ht,Ne.getJSONType=function(o){return null===o?"null":Array.isArray(o)?"array":k(o)},Ne.JSON_TYPES=["null","boolean","number","string","array","object"];for(var Ye={userObject:{test:function(o,f){return Ne.isUserObject(o)},replace:function(o){return function(m){for(var S=1;S<arguments.length;S++){var U=null!=arguments[S]?arguments[S]:{};S%2?O(Object(U),!0).forEach(function(re){_(m,re,U[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(U)):O(Object(U)).forEach(function(re){Object.defineProperty(m,re,Object.getOwnPropertyDescriptor(U,re))})}return m}({},o)},revive:function(o){return o}}},j=[{arrayNonindexKeys:{testPlainObjects:!0,test:function(o,f){return!!Array.isArray(o)&&(Object.keys(o).some(function(m){return String(Number.parseInt(m))!==m})&&(f.iterateIn="object",f.addLength=!0),!0)},replace:function(o,f){return f.iterateUnsetNumeric=!0,o},revive:function(o){if(Array.isArray(o))return o;var f=[];return Object.keys(o).forEach(function(m){f[m]=o[m]}),f}}},{sparseUndefined:{test:function(o,f){return void 0===o&&!1===f.ownKeys},replace:function(o){return 0},revive:function(o){}}}],L={undef:{test:function(o,f){return void 0===o&&(f.ownKeys||!("ownKeys"in f))},replace:function(o){return 0},revive:function(o){return new Ne.Undefined}}},q={StringObject:{test:function(o){return"String"===Ne.toStringTag(o)&&"object"===s(o)},replace:function(o){return String(o)},revive:function(o){return new String(o)}},BooleanObject:{test:function(o){return"Boolean"===Ne.toStringTag(o)&&"object"===s(o)},replace:function(o){return!!o},revive:function(o){return new Boolean(o)}},NumberObject:{test:function(o){return"Number"===Ne.toStringTag(o)&&"object"===s(o)},replace:function(o){return Number(o)},revive:function(o){return new Number(o)}}},Z=[{nan:{test:function(o){return Number.isNaN(o)},replace:function(o){return"NaN"},revive:function(o){return Number.NaN}}},{infinity:{test:function(o){return o===Number.POSITIVE_INFINITY},replace:function(o){return"Infinity"},revive:function(o){return Number.POSITIVE_INFINITY}}},{negativeInfinity:{test:function(o){return o===Number.NEGATIVE_INFINITY},replace:function(o){return"-Infinity"},revive:function(o){return Number.NEGATIVE_INFINITY}}}],ee={date:{test:function(o){return"Date"===Ne.toStringTag(o)},replace:function(o){var f=o.getTime();return Number.isNaN(f)?"NaN":f},revive:function(o){return"NaN"===o?new Date(Number.NaN):new Date(o)}}},We={regexp:{test:function(o){return"RegExp"===Ne.toStringTag(o)},replace:function(o){return{source:o.source,flags:(o.global?"g":"")+(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.sticky?"y":"")+(o.unicode?"u":"")}},revive:function(o){return new RegExp(o.source,o.flags)}}},Fe={map:{test:function(o){return"Map"===Ne.toStringTag(o)},replace:function(o){return fe(o.entries())},revive:function(o){return new Map(o)}}},Ge={set:{test:function(o){return"Set"===Ne.toStringTag(o)},replace:function(o){return fe(o.values())},revive:function(o){return new Set(o)}}},de="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ft=new Uint8Array(256),sn=0;sn<64;sn++)Ft[de.charCodeAt(sn)]=sn;var Dt=function(o,f,m){null==m&&(m=o.byteLength);for(var S=new Uint8Array(o,f||0,m),U=S.length,re="",ve=0;ve<U;ve+=3)re+=de[S[ve]>>2],re+=de[(3&S[ve])<<4|S[ve+1]>>4],re+=de[(15&S[ve+1])<<2|S[ve+2]>>6],re+=de[63&S[ve+2]];return U%3==2?re=re.slice(0,-1)+"=":U%3==1&&(re=re.slice(0,-2)+"=="),re},gn=function(o){var f,m,S,U,re=o.length,ve=.75*o.length,ue=0;"="===o[o.length-1]&&(ve--,"="===o[o.length-2]&&ve--);for(var Pe=new ArrayBuffer(ve),pe=new Uint8Array(Pe),Ue=0;Ue<re;Ue+=4)f=Ft[o.charCodeAt(Ue)],m=Ft[o.charCodeAt(Ue+1)],S=Ft[o.charCodeAt(Ue+2)],U=Ft[o.charCodeAt(Ue+3)],pe[ue++]=f<<2|m>>4,pe[ue++]=(15&m)<<4|S>>2,pe[ue++]=(3&S)<<6|63&U;return Pe},Ht={arraybuffer:{test:function(o){return"ArrayBuffer"===Ne.toStringTag(o)},replace:function(o,f){f.buffers||(f.buffers=[]);var m=f.buffers.indexOf(o);return m>-1?{index:m}:(f.buffers.push(o),Dt(o))},revive:function(o,f){if(f.buffers||(f.buffers=[]),"object"===s(o))return f.buffers[o.index];var m=gn(o);return f.buffers.push(m),m}}},wn=typeof self>"u"?De:self,on={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function(d){var o=d,f=wn[o];f&&(on[d.toLowerCase()]={test:function(S){return Ne.toStringTag(S)===o},replace:function(S,U){var re=S.buffer,ve=S.byteOffset,ue=S.length;U.buffers||(U.buffers=[]);var Pe=U.buffers.indexOf(re);return Pe>-1?{index:Pe,byteOffset:ve,length:ue}:(U.buffers.push(re),{encoded:Dt(re),byteOffset:ve,length:ue})},revive:function(S,U){U.buffers||(U.buffers=[]);var re,ve=S.byteOffset,ue=S.length;return"index"in S?re=U.buffers[S.index]:(re=gn(S.encoded),U.buffers.push(re)),new f(re,ve,ue)}})});var yt={dataview:{test:function(o){return"DataView"===Ne.toStringTag(o)},replace:function(o,f){var m=o.buffer,S=o.byteOffset,U=o.byteLength;f.buffers||(f.buffers=[]);var re=f.buffers.indexOf(m);return re>-1?{index:re,byteOffset:S,byteLength:U}:(f.buffers.push(m),{encoded:Dt(m),byteOffset:S,byteLength:U})},revive:function(o,f){f.buffers||(f.buffers=[]);var m,S=o.byteOffset,U=o.byteLength;return"index"in o?m=f.buffers[o.index]:(m=gn(o.encoded),f.buffers.push(m)),new DataView(m,S,U)}}},At={IntlCollator:{test:function(o){return Ne.hasConstructorOf(o,Intl.Collator)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.Collator(o.locale,o)}},IntlDateTimeFormat:{test:function(o){return Ne.hasConstructorOf(o,Intl.DateTimeFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.DateTimeFormat(o.locale,o)}},IntlNumberFormat:{test:function(o){return Ne.hasConstructorOf(o,Intl.NumberFormat)},replace:function(o){return o.resolvedOptions()},revive:function(o){return new Intl.NumberFormat(o.locale,o)}}};function Qe(d){for(var o=new Uint8Array(d.length),f=0;f<d.length;f++)o[f]=d.charCodeAt(f);return o.buffer}var mt={file:{test:function(o){return"File"===Ne.toStringTag(o)},replace:function(o){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(o),!1),f.send(),200!==f.status&&0!==f.status)throw new Error("Bad File access: "+f.status);return{type:o.type,stringContents:f.responseText,name:o.name,lastModified:o.lastModified}},revive:function(o){var f=o.name,m=o.type,U=o.lastModified;return new File([Qe(o.stringContents)],f,{type:m,lastModified:U})},replaceAsync:function(o){return new Ne.Promise(function(f,m){var S=new FileReader;S.addEventListener("load",function(){f({type:o.type,stringContents:S.result,name:o.name,lastModified:o.lastModified})}),S.addEventListener("error",function(){m(S.error)}),S.readAsBinaryString(o)})}}},ot={bigint:{test:function(o){return"bigint"==typeof o},replace:function(o){return String(o)},revive:function(o){return BigInt(o)}}},Tt={bigintObject:{test:function(o){return"object"===s(o)&&Ne.hasConstructorOf(o,BigInt)},replace:function(o){return String(o)},revive:function(o){return new Object(BigInt(o))}}},ye={cryptokey:{test:function(o){return"CryptoKey"===Ne.toStringTag(o)&&o.extractable},replaceAsync:function(o){return new Ne.Promise(function(f,m){crypto.subtle.exportKey("jwk",o).catch(function(S){m(S)}).then(function(S){f({jwk:S,algorithm:o.algorithm,usages:o.usages})})})},revive:function(o){return crypto.subtle.importKey("jwk",o.jwk,o.algorithm,!0,o.usages)}}};return[Ye,L,j,q,Z,ee,We,{imagedata:{test:function(o){return"ImageData"===Ne.toStringTag(o)},replace:function(o){return{array:fe(o.data),width:o.width,height:o.height}},revive:function(o){return new ImageData(new Uint8ClampedArray(o.array),o.width,o.height)}}},{imagebitmap:{test:function(o){return"ImageBitmap"===Ne.toStringTag(o)||o&&o.dataset&&"ImageBitmap"===o.dataset.toStringTag},replace:function(o){var f=document.createElement("canvas");return f.getContext("2d").drawImage(o,0,0),f.toDataURL()},revive:function(o){var f=document.createElement("canvas"),m=f.getContext("2d"),S=document.createElement("img");return S.addEventListener("load",function(){m.drawImage(S,0,0)}),S.src=o,f},reviveAsync:function(o){var f=document.createElement("canvas"),m=f.getContext("2d"),S=document.createElement("img");return S.addEventListener("load",function(){m.drawImage(S,0,0)}),S.src=o,createImageBitmap(f)}}},mt,{file:mt.file,filelist:{test:function(o){return"FileList"===Ne.toStringTag(o)},replace:function(o){for(var f=[],m=0;m<o.length;m++)f[m]=o.item(m);return f},revive:function(o){return new(function(){function f(){(function l(d,o){if(!(d instanceof o))throw new TypeError("Cannot call a class as a function")})(this,f),this._files=arguments[0],this.length=this._files.length}return S=f,U=[{key:"item",value:function(S){return this._files[S]}},{key:Symbol.toStringTag,get:function(){return"FileList"}}],U&&v(S.prototype,U),f;var S,U}())(o)}}},{blob:{test:function(o){return"Blob"===Ne.toStringTag(o)},replace:function(o){var f=new XMLHttpRequest;if(f.overrideMimeType("text/plain; charset=x-user-defined"),f.open("GET",URL.createObjectURL(o),!1),f.send(),200!==f.status&&0!==f.status)throw new Error("Bad Blob access: "+f.status);return{type:o.type,stringContents:f.responseText}},revive:function(o){var f=o.type;return new Blob([Qe(o.stringContents)],{type:f})},replaceAsync:function(o){return new Ne.Promise(function(f,m){var S=new FileReader;S.addEventListener("load",function(){f({type:o.type,stringContents:S.result})}),S.addEventListener("error",function(){m(S.error)}),S.readAsBinaryString(o)})}}}].concat("function"==typeof Map?Fe:[],"function"==typeof Set?Ge:[],"function"==typeof ArrayBuffer?Ht:[],"function"==typeof Uint8Array?on:[],"function"==typeof DataView?yt:[],typeof Intl<"u"?At:[],typeof crypto<"u"?ye:[],typeof BigInt<"u"?[ot,Tt]:[])}()}),qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Te=new Uint8Array(256),Re=0;Re<64;Re++)Te[qe.codePointAt(Re)]=Re;var Ze=function(a,s,l){null==l&&(l=a.byteLength);for(var v=new Uint8Array(a,s||0,l),_=v.length,O="",fe=0;fe<_;fe+=3)O+=qe[v[fe]>>2],O+=qe[(3&v[fe])<<4|v[fe+1]>>4],O+=qe[(15&v[fe+1])<<2|v[fe+2]>>6],O+=qe[63&v[fe+2]];return _%3==2?O=O.slice(0,-1)+"=":_%3==1&&(O=O.slice(0,-2)+"=="),O},pt=function(a){var _,O,fe,ge,s=a.length,l=.75*a.length,v=0;"="===a[a.length-1]&&(l--,"="===a[a.length-2]&&l--);for(var k=new ArrayBuffer(l),ae=new Uint8Array(k),me=0;me<s;me+=4)_=Te[a.codePointAt(me)],O=Te[a.codePointAt(me+1)],fe=Te[a.codePointAt(me+2)],ge=Te[a.codePointAt(me+3)],ae[v++]=_<<2|O>>4,ae[v++]=(15&O)<<4|fe>>2,ae[v++]=(3&fe)<<6|63&ge;return k},st=typeof self>"u"?global:self,ct={};["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach(function($){var a=$,s=st[a];s&&(ct[$.toLowerCase()+"2"]={test:function(l){return St.toStringTag(l)===a},replace:function(l){return{buffer:l.buffer,byteOffset:l.byteOffset,length:l.length}},revive:function(l){return new s(l.buffer,l.byteOffset,l.length)}})});var we={arraybuffer:{test:function($){return"ArrayBuffer"===St.toStringTag($)},replace:function($){return Ze($,0,$.byteLength)},revive:function($){return pt($)}}},rt=(new St).register(Ie),un="FileReaderSync"in self,Nt=[],He=0;rt.register([we,ct,{blob2:{test:function($){return"Blob"===St.toStringTag($)},replace:function($){if($.isClosed)throw new Error("The Blob is closed");if(un){var a=ut($,"binary"),s=Ze(a,0,a.byteLength);return{type:$.type,data:s}}Nt.push($);var l={type:$.type,data:{start:He,end:He+$.size}};return He+=$.size,l},finalize:function($,a){$.data=Ze(a,0,a.byteLength)},revive:function($){var a=$.type;return new Blob([pt($.data)],{type:a})}}}]),rt.mustFinalize=function(){return Nt.length>0},rt.finalize=function($){return se(void 0,void 0,void 0,function(){var a,s,l,v,_,O,fe,k,ae,me,Ot;return be(this,function(_t){switch(_t.label){case 0:return[4,Me(new Blob(Nt),"binary")];case 1:if(a=_t.sent(),$)for(s=0,l=$;s<l.length;s++)if((v=l[s]).$types)for(fe in(O=(_=v.$types).$)&&(_=_.$),_)(k=rt.types[_[fe]])&&k.finalize&&(ae=W.ZP.getByKeyPath(v,O?"$."+fe:fe),k.finalize(ae,a.slice(null===(me=ae.data)||void 0===me?void 0:me.start,null===(Ot=ae.data)||void 0===Ot?void 0:Ot.end)));return Nt=[],He=0,[2]}})})};var En_Stream=function(){},Gt=xe(function($,a){!function(s){var l="object"==typeof process&&process.env?process.env:self;s.parser=function(C){return new _t(C)},s.CParser=_t,s.CStream=Ce,s.createStream=function $e(C){return new Ce(C)},s.MAX_BUFFER_LENGTH=10485760,s.DEBUG="debug"===l.CDEBUG,s.INFO="debug"===l.CDEBUG||"info"===l.CDEBUG,s.EVENTS=["value","string","key","openobject","closeobject","openarray","closearray","error","end","ready"];var fe,v={textNode:void 0,numberNode:""},_=s.EVENTS.filter(function(C){return"error"!==C&&"end"!==C}),O=0;for(var ge in s.STATE={BEGIN:O++,VALUE:O++,OPEN_OBJECT:O++,CLOSE_OBJECT:O++,OPEN_ARRAY:O++,CLOSE_ARRAY:O++,TEXT_ESCAPE:O++,STRING:O++,BACKSLASH:O++,END:O++,OPEN_KEY:O++,CLOSE_KEY:O++,TRUE:O++,TRUE2:O++,TRUE3:O++,FALSE:O++,FALSE2:O++,FALSE3:O++,FALSE4:O++,NULL:O++,NULL2:O++,NULL3:O++,NUMBER_DECIMAL_POINT:O++,NUMBER_DIGIT:O++},s.STATE)s.STATE[s.STATE[ge]]=ge;O=s.STATE;function me(C){for(var c in v)C[c]=v[c]}Object.create||(Object.create=function(C){function c(){this.__proto__=C}return c.prototype=C,new c}),Object.getPrototypeOf||(Object.getPrototypeOf=function(C){return C.__proto__}),Object.keys||(Object.keys=function(C){var c=[];for(var Y in C)C.hasOwnProperty(Y)&&c.push(Y);return c});var Ot=/[\\"\n]/g;function _t(C){if(!(this instanceof _t))return new _t(C);var c=this;me(c),c.bufferCheckPosition=s.MAX_BUFFER_LENGTH,c.q=c.c=c.p="",c.opt=C||{},c.closed=c.closedRoot=c.sawRoot=!1,c.tag=c.error=null,c.state=O.BEGIN,c.stack=new Array,c.position=c.column=0,c.line=1,c.slashed=!1,c.unicodeI=0,c.unicodeS=null,c.depth=0,Xe(c,"onready")}_t.prototype={end:function(){et(this)},write:function Jt(C){var c=this;if(this.error)throw this.error;if(c.closed)return Se(c,"Cannot write after close. Assign an onready handler.");if(null===C)return et(c);var Y=0,F=C.charCodeAt(0),it=c.p;for(s.DEBUG&&console.log("write -> ["+C+"]");F&&(it=F,c.c=F=C.charCodeAt(Y++),it!==F?c.p=it:it=c.p,F);)switch(s.DEBUG&&console.log(Y,F,s.STATE[c.state]),c.position++,10===F?(c.line++,c.column=0):c.column++,c.state){case O.BEGIN:123===F?c.state=O.OPEN_OBJECT:91===F?c.state=O.OPEN_ARRAY:lt(F)||Se(c,"Non-whitespace before {[.");continue;case O.OPEN_KEY:case O.OPEN_OBJECT:if(lt(F))continue;if(c.state===O.OPEN_KEY)c.stack.push(O.CLOSE_KEY);else{if(125===F){Xe(c,"onopenobject"),this.depth++,Xe(c,"oncloseobject"),this.depth--,c.state=c.stack.pop()||O.VALUE;continue}c.stack.push(O.CLOSE_OBJECT)}34===F?c.state=O.STRING:Se(c,'Malformed object key should start with "');continue;case O.CLOSE_KEY:case O.CLOSE_OBJECT:if(lt(F))continue;58===F?(c.state===O.CLOSE_OBJECT?(c.stack.push(O.CLOSE_OBJECT),kt(c,"onopenobject"),this.depth++):kt(c,"onkey"),c.state=O.VALUE):125===F?(jt(c,"oncloseobject"),this.depth--,c.state=c.stack.pop()||O.VALUE):44===F?(c.state===O.CLOSE_OBJECT&&c.stack.push(O.CLOSE_OBJECT),kt(c),c.state=O.OPEN_KEY):Se(c,"Bad object");continue;case O.OPEN_ARRAY:case O.VALUE:if(lt(F))continue;if(c.state===O.OPEN_ARRAY){if(Xe(c,"onopenarray"),this.depth++,c.state=O.VALUE,93===F){Xe(c,"onclosearray"),this.depth--,c.state=c.stack.pop()||O.VALUE;continue}c.stack.push(O.CLOSE_ARRAY)}34===F?c.state=O.STRING:123===F?c.state=O.OPEN_OBJECT:91===F?c.state=O.OPEN_ARRAY:116===F?c.state=O.TRUE:102===F?c.state=O.FALSE:110===F?c.state=O.NULL:45===F?c.numberNode+="-":48<=F&&F<=57?(c.numberNode+=String.fromCharCode(F),c.state=O.NUMBER_DIGIT):Se(c,"Bad value");continue;case O.CLOSE_ARRAY:if(44===F)c.stack.push(O.CLOSE_ARRAY),kt(c,"onvalue"),c.state=O.VALUE;else if(93===F)jt(c,"onclosearray"),this.depth--,c.state=c.stack.pop()||O.VALUE;else{if(lt(F))continue;Se(c,"Bad array")}continue;case O.STRING:void 0===c.textNode&&(c.textNode="");var M=Y-1,ht=c.slashed,It=c.unicodeI;e:for(;;){for(s.DEBUG&&console.log(Y,F,s.STATE[c.state],ht);It>0;)if(c.unicodeS+=String.fromCharCode(F),F=C.charCodeAt(Y++),c.position++,4===It?(c.textNode+=String.fromCharCode(parseInt(c.unicodeS,16)),It=0,M=Y-1):It++,!F)break e;if(34===F&&!ht){c.state=c.stack.pop()||O.VALUE,c.textNode+=C.substring(M,Y-1),c.position+=Y-1-M;break}if(92===F&&!ht&&(ht=!0,c.textNode+=C.substring(M,Y-1),c.position+=Y-1-M,F=C.charCodeAt(Y++),c.position++,!F))break;if(ht){if(ht=!1,110===F?c.textNode+="\n":114===F?c.textNode+="\r":116===F?c.textNode+="\t":102===F?c.textNode+="\f":98===F?c.textNode+="\b":117===F?(It=1,c.unicodeS=""):c.textNode+=String.fromCharCode(F),F=C.charCodeAt(Y++),c.position++,M=Y-1,F)continue;break}Ot.lastIndex=Y;var Bt=Ot.exec(C);if(null===Bt){c.textNode+=C.substring(M,(Y=C.length+1)-1),c.position+=Y-1-M;break}if(Y=Bt.index+1,!(F=C.charCodeAt(Bt.index))){c.textNode+=C.substring(M,Y-1),c.position+=Y-1-M;break}}c.slashed=ht,c.unicodeI=It;continue;case O.TRUE:114===F?c.state=O.TRUE2:Se(c,"Invalid true started with t"+F);continue;case O.TRUE2:117===F?c.state=O.TRUE3:Se(c,"Invalid true started with tr"+F);continue;case O.TRUE3:101===F?(Xe(c,"onvalue",!0),c.state=c.stack.pop()||O.VALUE):Se(c,"Invalid true started with tru"+F);continue;case O.FALSE:97===F?c.state=O.FALSE2:Se(c,"Invalid false started with f"+F);continue;case O.FALSE2:108===F?c.state=O.FALSE3:Se(c,"Invalid false started with fa"+F);continue;case O.FALSE3:115===F?c.state=O.FALSE4:Se(c,"Invalid false started with fal"+F);continue;case O.FALSE4:101===F?(Xe(c,"onvalue",!1),c.state=c.stack.pop()||O.VALUE):Se(c,"Invalid false started with fals"+F);continue;case O.NULL:117===F?c.state=O.NULL2:Se(c,"Invalid null started with n"+F);continue;case O.NULL2:108===F?c.state=O.NULL3:Se(c,"Invalid null started with nu"+F);continue;case O.NULL3:108===F?(Xe(c,"onvalue",null),c.state=c.stack.pop()||O.VALUE):Se(c,"Invalid null started with nul"+F);continue;case O.NUMBER_DECIMAL_POINT:46===F?(c.numberNode+=".",c.state=O.NUMBER_DIGIT):Se(c,"Leading zero not followed by .");continue;case O.NUMBER_DIGIT:48<=F&&F<=57?c.numberNode+=String.fromCharCode(F):46===F?(-1!==c.numberNode.indexOf(".")&&Se(c,"Invalid number has two dots"),c.numberNode+="."):101===F||69===F?((-1!==c.numberNode.indexOf("e")||-1!==c.numberNode.indexOf("E"))&&Se(c,"Invalid number has two exponential"),c.numberNode+="e"):43===F||45===F?(101===it||69===it||Se(c,"Invalid symbol in number"),c.numberNode+=String.fromCharCode(F)):(le(c),Y--,c.state=c.stack.pop()||O.VALUE);continue;default:Se(c,"Unknown state: "+c.state)}return c.position>=c.bufferCheckPosition&&function ae(C){var c=Math.max(s.MAX_BUFFER_LENGTH,10),Y=0;for(var F in v){var it=void 0===C[F]?0:C[F].length;it>c&&("text"===F?closeText(C):Se(C,"Max buffer length exceeded: "+F)),Y=Math.max(Y,it)}C.bufferCheckPosition=s.MAX_BUFFER_LENGTH-Y+C.position}(c),c},resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{fe=En_Stream}catch{fe=function(){}}function Ce(C){if(!(this instanceof Ce))return new Ce(C);this._parser=new _t(C),this.writable=!0,this.readable=!0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new Buffer(2),3:new Buffer(3),4:new Buffer(4)},this.string="";var c=this;fe.apply(c),this._parser.onend=function(){c.emit("end")},this._parser.onerror=function(Y){c.emit("error",Y),c._parser.error=null},_.forEach(function(Y){Object.defineProperty(c,"on"+Y,{get:function(){return c._parser["on"+Y]},set:function(F){if(!F)return c.removeAllListeners(Y),c._parser["on"+Y]=F,F;c.on(Y,F)},enumerable:!0,configurable:!1})})}function Xe(C,c,Y){s.INFO&&console.log("-- emit",c,Y),C[c]&&C[c](Y)}function jt(C,c,Y){kt(C),Xe(C,c,Y)}function kt(C,c){C.textNode=function zt(C,c){return void 0===c||(C.trim&&(c=c.trim()),C.normalize&&(c=c.replace(/\s+/g," "))),c}(C.opt,C.textNode),void 0!==C.textNode&&Xe(C,c||"onvalue",C.textNode),C.textNode=void 0}function le(C){C.numberNode&&Xe(C,"onvalue",parseFloat(C.numberNode)),C.numberNode=""}function Se(C,c){return kt(C),c+="\nLine: "+C.line+"\nColumn: "+C.column+"\nChar: "+C.c,c=new Error(c),C.error=c,Xe(C,"onerror",c),C}function et(C){return(C.state!==O.VALUE||0!==C.depth)&&Se(C,"Unexpected end"),kt(C),C.c="",C.closed=!0,Xe(C,"onend"),_t.call(C,C.opt),C}function lt(C){return 13===C||10===C||32===C||9===C}(Ce.prototype=Object.create(fe.prototype,{constructor:{value:Ce}})).write=function(C){C=new Buffer(C);for(var c=0;c<C.length;c++){var Y=C[c];if(this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=C[F];this.string=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,c=c+F-1,this._parser.write(this.string),this.emit("data",this.string)}else if(0===this.bytes_remaining&&Y>=128){if(Y>=194&&Y<=223&&(this.bytes_in_sequence=2),Y>=224&&Y<=239&&(this.bytes_in_sequence=3),Y>=240&&Y<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+c>C.length){for(var it=0;it<=C.length-1-c;it++)this.temp_buffs[this.bytes_in_sequence][it]=C[c+it];return this.bytes_remaining=c+this.bytes_in_sequence-C.length,!0}this.string=C.slice(c,c+this.bytes_in_sequence).toString(),c=c+this.bytes_in_sequence-1,this._parser.write(this.string),this.emit("data",this.string)}else{for(var M=c;M<C.length&&!(C[M]>=128);M++);this.string=C.slice(c,M).toString(),this._parser.write(this.string),this.emit("data",this.string),c=M-1}}},Ce.prototype.end=function(C){return C&&C.length&&this._parser.write(C.toString()),this._parser.end(),!0},Ce.prototype.on=function(C,c){var Y=this;return!Y._parser["on"+C]&&-1!==_.indexOf(C)&&(Y._parser["on"+C]=function(){var F=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);F.splice(0,0,C),Y.emit.apply(Y,F)}),fe.prototype.on.call(Y,C,c)},Ce.prototype.destroy=function(){me(this._parser),this.emit("close")}}(a)});function Sn($,a,s){return se(this,void 0,void 0,function(){function l(){return se(this,void 0,void 0,function(){var Ce,Xe,jt;return be(this,function(zt){switch(zt.label){case 0:Ce=function(Se){var et,lt,Jt,C,c,Y,F,it,M,ht,It,Bt,rn;return be(this,function(Wt){switch(Wt.label){case 0:if(k.includes(Se.tableName))return[2,"continue"];if(!Se.rows)return[2,"break"];if(!Se.rows.incomplete&&0===Se.rows.length)return[2,"continue"];if(ae&&W.ZP.ignoreTransaction(function(){return ae(me)}),lt=$.table(et=Se.tableName),Jt=ge.tables.filter(function(xt){return xt.name===et})[0].schema,!lt){if(s.acceptMissingTables)return[2,"continue"];throw new Error("Exported table ".concat(Se.tableName," is missing in installed database"))}if(!s.acceptChangedPrimaryKey&&Jt.split(",")[0]!=lt.schema.primKey.src)throw new Error("Primary key differs for table ".concat(Se.tableName,". "));for(C=Se.rows,c=[],Y=0;Y<C.length&&!(F=C[Y]).incomplete;Y++)c.push(rt.revive(F));return M=s.transform,ht=(it=s.filter)?c.filter(Se.inbound?function(xt){return it(et,xt)}:function(xt){return it(et,xt[1],xt[0])}):c,M&&(ht=ht.map(Se.inbound?function(xt){return M(et,xt).value}:function(xt){var tn=M(et,xt[1],xt[0]);return[tn.key,tn.value]})),It=Se.inbound?[void 0,ht]:[ht.map(function(xt){return xt[0]}),c.map(function(xt){return xt[1]})],Bt=It[0],rn=It[1],s.overwriteValues?[4,lt.bulkPut(rn,Bt)]:[3,2];case 1:return Wt.sent(),[3,4];case 2:return[4,lt.bulkAdd(rn,Bt)];case 3:Wt.sent(),Wt.label=4;case 4:return me.completedRows+=c.length,c.incomplete||(me.completedTables+=1),C.splice(0,c.length),[2]}})},Xe=0,jt=ge.data,zt.label=1;case 1:return Xe<jt.length?[5,Ce(jt[Xe])]:[3,4];case 2:if("break"===zt.sent())return[3,4];zt.label=3;case 3:return Xe++,[3,1];case 4:for(;ge.data.length>0&&ge.data[0].rows&&!ge.data[0].rows.incomplete;)ge.data.splice(0,1);return _.done()||_.eof()?[3,8]:fe?(_.pullSync(v),[3,7]):[3,5];case 5:return[4,W.ZP.waitFor(_.pullAsync(v))];case 6:zt.sent(),zt.label=7;case 7:return[3,9];case 8:return[3,10];case 9:return[3,0];case 10:return[2]}})})}var v,_,fe,ge,k,ae,me,Ot,_t,$e;return be(this,function(Ce){switch(Ce.label){case 0:return[4,bn(a,v=(s=s||{}).chunkSizeBytes||1048576)];case 1:if(_=Ce.sent(),fe="FileReaderSync"in self,ge=_.result.data,k=s.skipTables?s.skipTables:[],!s.acceptNameDiff&&$.name!==ge.databaseName)throw new Error("Name differs. Current database name is ".concat($.name," but export is ").concat(ge.databaseName));if(!s.acceptVersionDiff&&$.verno!==ge.databaseVersion)throw new Error("Database version differs. Current database is in version ".concat($.verno," but export is ").concat(ge.databaseVersion));if(ae=s.progressCallback,me={done:!1,completedRows:0,completedTables:0,totalRows:ge.tables.reduce(function(Xe,jt){return Xe+jt.rowCount},0),totalTables:ge.tables.length},ae&&W.ZP.ignoreTransaction(function(){return ae(me)}),!s.clearTablesBeforeImport)return[3,5];Ot=0,_t=$.tables,Ce.label=2;case 2:return Ot<_t.length?k.includes(($e=_t[Ot]).name)?[3,4]:[4,$e.clear()]:[3,5];case 3:Ce.sent(),Ce.label=4;case 4:return Ot++,[3,2];case 5:return s.noTransaction?[4,l()]:[3,7];case 6:return Ce.sent(),[3,9];case 7:return[4,$.transaction("rw",$.tables,l)];case 8:Ce.sent(),Ce.label=9;case 9:return me.done=!0,ae&&W.ZP.ignoreTransaction(function(){return ae(me)}),[2]}})})}function bn($,a){return se(this,void 0,void 0,function(){var s,l;return be(this,function(v){switch(v.label){case 0:s="slice"in $?function mn($){var a=0,s=function Kt($){var l,_,O,a=Gt.parser(),s=0,v=[],fe=!1,ge=!1;return a.onopenobject=function(k){var ae={incomplete:!0};l||(l=ae),_&&(v.push([O,_,ge]),$&&(ge?_.push(ae):_[O]=ae)),_=ae,O=k,ge=!1,++s},a.onkey=function(k){return O=k},a.onvalue=function(k){return ge?_.push(k):_[O]=k},a.oncloseobject=function(){var k;if(delete _.incomplete,O=null,0===--s)fe=!0;else{var ae=_;k=v.pop(),O=k[0],_=k[1],ge=k[2],$||(ge?_.push(ae):_[O]=ae)}},a.onopenarray=function(){var k=[];k.incomplete=!0,l||(l=k),_&&(v.push([O,_,ge]),$&&(ge?_.push(k):_[O]=k)),_=k,ge=!0,O=null,++s},a.onclosearray=function(){var k;if(delete _.incomplete,O=null,0===--s)fe=!0;else{var ae=_;k=v.pop(),O=k[0],_=k[1],ge=k[2],$||(ge?_.push(ae):_[O]=ae)}},{write:function(k){return a.write(k),l},done:function(){return fe}}}(!0),l={pullAsync:function(v){return se(this,void 0,void 0,function(){var _,O,fe;return be(this,function(ge){switch(ge.label){case 0:return _=$.slice(a,a+v),a+=v,[4,Me(_,"text")];case 1:return O=ge.sent(),fe=s.write(O),l.result=fe||{},[2,fe]}})})},pullSync:function(v){var _=$.slice(a,a+v);a+=v;var O=ut(_,"text"),fe=s.write(O);return l.result=fe||{},fe},done:function(){return s.done()},eof:function(){return a>=$.size},result:{}};return l}($):$,v.label=1;case 1:return s.eof()?[3,3]:[4,s.pullAsync(a)];case 2:return v.sent(),s.result.data&&s.result.data.data?[3,3]:[3,1];case 3:if(!(l=s.result)||"dexie"!=l.formatName)throw new Error("Given file is not a dexie export");if(l.formatVersion>1)throw new Error("Format version ".concat(l.formatVersion," not supported"));if(!l.data)throw new Error("No data in export file");if(!l.data.databaseName)throw new Error("Missing databaseName in export file");if(!l.data.databaseVersion)throw new Error("Missing databaseVersion in export file");if(!l.data.tables)throw new Error("Missing tables in export file");return[2,s]}})})}W.ZP.prototype.export=function($){return function On($,a){return se(this,void 0,void 0,function(){function s(){return se(this,void 0,void 0,function(){var me,Ot,_t,$e,Ce,Xe,jt,kt,le;return be(this,function(Se){switch(Se.label){case 0:return[4,Promise.all(v.map(function(et){return et.count()}))];case 1:(me=Se.sent()).forEach(function(et,lt){return O[lt].rowCount=et}),ae.totalRows=me.reduce(function(et,lt){return et+lt}),Ot=JSON.stringify(ge,void 0,fe?2:void 0),_t=Ot.lastIndexOf("]"),$e=Ot.substring(0,_t),_.push($e),Ce=a.filter,Xe=a.transform,jt=function(et){var lt,Jt,C,c,F,it,M,ht,It,Bt;return be(this,function(Wt){switch(Wt.label){case 0:lt=$.table(et),C=!!(Jt=lt.schema.primKey).keyPath,c=a.numRowsPerChunk||2e3,F=JSON.stringify(C?{tableName:lt.name,inbound:!0,rows:[]}:{tableName:lt.name,inbound:!1,rows:[]},void 0,fe?2:void 0),fe&&(F=F.split("\n").join("\n    ")),it=F.lastIndexOf("]"),_.push(F.substring(0,it)),M=null,ht=0,It=!0,Bt=function(){var xt,Ct,Zt,tn,Ne,bt,Ye,j,L;return be(this,function(q){switch(q.label){case 0:return k&&W.ZP.ignoreTransaction(function(){return k(ae)}),[4,(xt=null==M?lt.limit(c):lt.where(":id").above(M).limit(c)).toArray()];case 1:return 0===(Ct=q.sent()).length?[2,"break"]:(null!=M&&ht>0&&(_.push(","),fe&&_.push("\n      ")),It=Ct.length===c,C?(Zt=Ce?Ct.filter(function(Z){return Ce(et,Z)}):Ct,tn=Xe?Zt.map(function(Z){return Xe(et,Z).value}):Zt,Ne=tn.map(function(Z){return rt.encapsulate(Z)}),rt.mustFinalize()?[4,W.ZP.waitFor(rt.finalize(Ne))]:[3,3]):[3,4]);case 2:q.sent(),q.label=3;case 3:return L=JSON.stringify(Ne,void 0,fe?2:void 0),fe&&(L=L.split("\n").join("\n      ")),_.push(new Blob([L.substring(1,L.length-1)])),ht=tn.length,M=Ct.length>0?W.ZP.getByKeyPath(Ct[Ct.length-1],Jt.keyPath):null,[3,8];case 4:return[4,xt.primaryKeys()];case 5:return bt=q.sent(),Ye=bt.map(function(Z,ee){return[Z,Ct[ee]]}),Ce&&(Ye=Ye.filter(function(Z){return Ce(et,Z[1],Z[0])})),Xe&&(Ye=Ye.map(function(Z){var Fe=Xe(et,Z[1],Z[0]);return[Fe.key,Fe.value]})),j=Ye.map(function(Z){return rt.encapsulate(Z)}),rt.mustFinalize()?[4,W.ZP.waitFor(rt.finalize(j))]:[3,7];case 6:q.sent(),q.label=7;case 7:L=JSON.stringify(j,void 0,fe?2:void 0),fe&&(L=L.split("\n").join("\n      ")),_.push(new Blob([L.substring(1,L.length-1)])),ht=Ye.length,M=bt.length>0?bt[bt.length-1]:null,q.label=8;case 8:return ae.completedRows+=Ct.length,[2]}})},Wt.label=1;case 1:return It?[5,Bt()]:[3,3];case 2:return"break"===Wt.sent()?[3,3]:[3,1];case 3:return _.push(F.substr(it)),ae.completedTables+=1,ae.completedTables<ae.totalTables&&_.push(","),[2]}})},kt=0,le=O,Se.label=2;case 2:return kt<le.length?[5,jt(le[kt].name)]:[3,5];case 3:Se.sent(),Se.label=4;case 4:return kt++,[3,2];case 5:return _.push(Ot.substr(_t)),ae.done=!0,k&&W.ZP.ignoreTransaction(function(){return k(ae)}),[2]}})})}var l,v,_,O,fe,ge,k,ae;return be(this,function(me){switch(me.label){case 0:l=(a=a||{}).skipTables?a.skipTables:[],v=$.tables.filter(function(Ot){return!l.includes(Ot.name)}),_=[],O=v.map(function(Ot){return{name:Ot.name,schema:nt(Ot),rowCount:0}}),fe=a.prettyJson,ge={formatName:"dexie",formatVersion:1,data:{databaseName:$.name,databaseVersion:$.verno,tables:O,data:[]}},k=a.progressCallback,ae={done:!1,completedRows:0,completedTables:0,totalRows:NaN,totalTables:O.length},me.label=1;case 1:return me.trys.push([1,,6,7]),a.noTransaction?[4,s()]:[3,3];case 2:return me.sent(),[3,5];case 3:return[4,$.transaction("r",$.tables,s)];case 4:me.sent(),me.label=5;case 5:return[3,7];case 6:return rt.finalize(),[7];case 7:return[2,new Blob(_,{type:"text/json"})]}})})}(this,$)},W.ZP.prototype.import=function($,a){return Sn(this,$,a)},W.ZP.import=function($,a){return function vn($,a){return se(this,void 0,void 0,function(){var l,v,_;return be(this,function(O){switch(O.label){case 0:return[4,bn($,(a=a||{}).chunkSizeBytes||1048576)];case 1:return l=O.sent(),v=l.result.data,(_=new W.ZP(void 0!==a.name?a.name:v.databaseName)).version(v.databaseVersion).stores(function ke($){for(var a={},s=0,l=$.tables;s<l.length;s++){var v=l[s];a[v.name]=v.schema}return a}(v)),[4,Sn(_,l,void 0!==a.name?V(V({},a),{acceptNameDiff:!0}):a)];case 2:return O.sent(),[2,_]}})})}($,a)};class Ve extends W.ZP{examId;exams;templates;alignImages;nonAlignImages;constructor(a){super("correctExam"+a),this.examId=a,this.version(3).stores({exams:"++id",templates:"++id, examId, [examId+pageNumber]",alignImages:"++id, examId,[examId+pageNumber]",nonAlignImages:"++id, examId,[examId+pageNumber]"})}resetDatabase(){var a=this;return(0,N.Z)(function*(){yield a.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{a.exams.clear(),a.templates.clear(),a.alignImages.clear(),a.nonAlignImages.clear()})})()}removeElementForExam(){var a=this;return(0,N.Z)(function*(){return a.delete()})()}removePageAlignForExam(){var a=this;return(0,N.Z)(function*(){yield a.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{a.exams.delete(a.examId),a.alignImages.where("examId").equals(a.examId).toArray().then(s=>a.alignImages.bulkDelete(s.map(l=>l.id)))})})()}removeElementForExamForPages(a,s){var l=this;return(0,N.Z)(function*(){yield l.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{l.alignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).toArray().then(v=>l.alignImages.bulkDelete(v.map(_=>_.id))),l.nonAlignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).toArray().then(v=>l.nonAlignImages.bulkDelete(v.map(_=>_.id)))})})()}removePageAlignForExamForPage(a){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.alignImages.where({examId:s.examId,pageNumber:a}).delete()})})()}removePageNonAlignForExamForPage(a){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.nonAlignImages.where({examId:s.examId,pageNumber:a}).delete()})})()}removePageAlignForExamForPages(a,s){var l=this;return(0,N.Z)(function*(){yield l.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{l.alignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).toArray().then(v=>l.alignImages.bulkDelete(v.map(_=>_.id)))})})()}removePageNonAlignForExamForPages(a,s){var l=this;return(0,N.Z)(function*(){yield l.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{l.nonAlignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).toArray().then(v=>l.nonAlignImages.bulkDelete(v.map(_=>_.id)))})})()}removeExam(){var a=this;return(0,N.Z)(function*(){yield a.transaction("rw","exams",()=>{a.exams.delete(a.examId)})})()}addAligneImage(a){var s=this;return(0,N.Z)(function*(){yield s.alignImages.put(a)})()}addNonAligneImage(a){var s=this;return(0,N.Z)(function*(){yield s.nonAlignImages.put(a)})()}addNonAligneImages(a){var s=this;return(0,N.Z)(function*(){yield s.nonAlignImages.bulkAdd(a)})()}export(a){return super.export(a)}import(a,s){return super.import(a,s)}countPageTemplate(){var a=this;return(0,N.Z)(function*(){return yield a.templates.where("examId").equals(a.examId).count()})()}countAlignImage(){var a=this;return(0,N.Z)(function*(){return yield a.alignImages.where("examId").equals(a.examId).count()})()}countNonAlignImage(){var a=this;return(0,N.Z)(function*(){return yield a.nonAlignImages.where("examId").equals(a.examId).count()})()}getFirstNonAlignImage(a){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId,pageNumber:a}).first()})()}getFirstAlignImage(a){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where({examId:s.examId,pageNumber:a}).first()})()}getFirstTemplate(a){var s=this;return(0,N.Z)(function*(){return yield s.templates.where({examId:s.examId,pageNumber:a}).first()})()}getAllTemplate(){var a=this;return(0,N.Z)(function*(){return yield a.templates.where({examId:a.examId}).sortBy("pageNumber")})()}getNonAlignImageBetweenAndSortByPageNumber(a,s){var l=this;return(0,N.Z)(function*(){return yield l.nonAlignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).sortBy("pageNumber")})()}getAlignImageBetweenAndSortByPageNumber(a,s){var l=this;return(0,N.Z)(function*(){return yield l.alignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!0,!0).sortBy("pageNumber")})()}getNonAlignImagesForPageNumbers(a){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where(["examId","pageNumber"]).anyOf(a.map(l=>[s.examId,l])).sortBy("pageNumber")})()}getAlignImagesForPageNumbers(a){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where(["examId","pageNumber"]).anyOf(a.map(l=>[s.examId,l])).sortBy("pageNumber")})()}getNonAlignSortByPageNumber(){var a=this;return(0,N.Z)(function*(){return yield a.nonAlignImages.where({examId:a.examId}).sortBy("pageNumber")})()}moveNonAlignPages(a,s){var l=this;return(0,N.Z)(function*(){a!==s&&(yield l.nonAlignImages.where({examId:l.examId,pageNumber:a}).modify(v=>{v.pageNumber=-1e3}),a<s?yield l.nonAlignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!1,!0).modify(v=>{v.pageNumber=v.pageNumber-1}):yield l.nonAlignImages.where(["examId","pageNumber"]).between([l.examId,s],[l.examId,a],!0,!1).modify(v=>{v.pageNumber=v.pageNumber+1}),yield l.nonAlignImages.where({examId:l.examId,pageNumber:-1e3}).modify(v=>{v.pageNumber=s}))})()}moveAlignPages(a,s){var l=this;return(0,N.Z)(function*(){a!==s&&(yield l.alignImages.where({examId:l.examId,pageNumber:a}).modify(v=>{v.pageNumber=-1e3}),a<s?yield l.alignImages.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!1,!0).modify(v=>{v.pageNumber=v.pageNumber-1}):yield l.alignImages.where(["examId","pageNumber"]).between([l.examId,s],[l.examId,a],!0,!1).modify(v=>{v.pageNumber=v.pageNumber+1}),yield l.alignImages.where({examId:l.examId,pageNumber:-1e3}).modify(v=>{v.pageNumber=s}))})()}compareNumbers(a,s){return a-s}removePageAlignForExamForPagesAndReorder(a){var s=this;return(0,N.Z)(function*(){const l=yield s.alignImages.where("examId").equals(s.examId).count();yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",(0,N.Z)(function*(){const _=yield s.alignImages.where(["examId","pageNumber"]).anyOf(a.map(O=>[s.examId,O])).toArray();yield s.alignImages.bulkDelete(_.map(O=>O.id)),console.error("delete all image")})),console.error("start of moving");const v=a.sort(s.compareNumbers);for(let _=0;_<a.length;_++){let O=l,fe=!0;_<v.length-1&&(O=v[_+1],fe=!1);const ge=v[_];ge!==O&&(yield s.alignImages.where(["examId","pageNumber"]).between([s.examId,ge],[s.examId,O],!1,fe).modify(k=>{k.pageNumber=k.pageNumber-(_+1)}))}})()}removePageNonAlignForExamForPagesAndReorder(a){var s=this;return(0,N.Z)(function*(){const l=yield s.nonAlignImages.where("examId").equals(s.examId).count();yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",(0,N.Z)(function*(){const _=yield s.nonAlignImages.where(["examId","pageNumber"]).anyOf(a.map(O=>[s.examId,O])).toArray();yield s.nonAlignImages.bulkDelete(_.map(O=>O.id))}));const v=a.sort(s.compareNumbers);for(let _=0;_<a.length;_++){let O=l,fe=!0;_<v.length-1&&(O=v[_+1],fe=!1);const ge=v[_];ge!==O&&(yield s.nonAlignImages.where(["examId","pageNumber"]).between([s.examId,ge],[s.examId,O],!1,fe).modify(k=>{k.pageNumber=k.pageNumber-(_+1)}))}})()}moveTemplatePages(a,s){var l=this;return(0,N.Z)(function*(){a!==s&&(yield l.templates.where({examId:l.examId,pageNumber:a}).modify(v=>{v.pageNumber=-1e3}),a<s?yield l.templates.where(["examId","pageNumber"]).between([l.examId,a],[l.examId,s],!1,!0).modify(v=>{v.pageNumber=v.pageNumber-1}):yield l.templates.where(["examId","pageNumber"]).between([l.examId,s],[l.examId,a],!0,!1).modify(v=>{v.pageNumber=v.pageNumber+1}),yield l.templates.where({examId:l.examId,pageNumber:-1e3}).modify(v=>{v.pageNumber=s}))})()}removePageTemplateForExamForPage(a){var s=this;return(0,N.Z)(function*(){yield s.transaction("rw","exams","templates","alignImages","nonAlignImages",()=>{s.templates.where({examId:s.examId,pageNumber:a}).delete()})})()}getAlignSortByPageNumber(){var a=this;return(0,N.Z)(function*(){return yield a.alignImages.where({examId:a.examId}).sortBy("pageNumber")})()}addExam(){var a=this;return(0,N.Z)(function*(){return yield a.exams.add({id:a.examId})})()}addTemplate(a){var s=this;return(0,N.Z)(function*(){return yield s.templates.add({examId:s.examId,pageNumber:a.pageNumber,value:a.value})})()}countNonAlignWithPageNumber(a){var s=this;return(0,N.Z)(function*(){return yield s.nonAlignImages.where({examId:s.examId,pageNumber:a}).count()})()}countAlignWithPageNumber(a){var s=this;return(0,N.Z)(function*(){return yield s.alignImages.where({examId:s.examId,pageNumber:a}).count()})()}}class Zn{dbs=new Map;resetDatabase(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.resetDatabase()})()}removeExam(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.removeExam()})()}removeElementForExam(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),s.dbs.delete(a),l.removeElementForExam()})()}removeElementForExamForPages(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.removeElementForExamForPages(s,l)})()}removePageAlignForExam(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.removePageAlignForExam()})()}removePageAlignForExamForPage(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.removePageAlignForExamForPage(s)})()}removePageNonAlignForExamForPage(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.removePageNonAlignForExamForPage(s)})()}removePageAlignForExamForPages(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.removePageAlignForExamForPages(s,l)})()}removePageNonAlignForExamForPages(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.removePageNonAlignForExamForPages(s,l)})()}addAligneImage(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a.examId);return void 0===l&&(l=new Ve(a.examId),s.dbs.set(a.examId,l)),l.addAligneImage(a)})()}addNonAligneImage(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a.examId);return void 0===l&&(l=new Ve(a.examId),s.dbs.set(a.examId,l)),l.addNonAligneImage(a)})()}addNonAligneImages(a){var s=this;return(0,N.Z)(function*(){if(a.length>0){let l=s.dbs.get(a[0].examId);return void 0===l&&(l=new Ve(a[0].examId),s.dbs.set(a[0].examId,l)),l.addNonAligneImages(a)}})()}export(a,s){let l=this.dbs.get(a);return void 0===l&&(l=new Ve(a),this.dbs.set(a,l)),l.export(s)}import(a,s,l){let v=this.dbs.get(a);return void 0===v&&(v=new Ve(a),this.dbs.set(a,v)),v.import(s,l)}countPageTemplate(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.countPageTemplate()})()}countAlignImage(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.countAlignImage()})()}countNonAlignImage(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.countNonAlignImage()})()}getFirstNonAlignImage(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.getFirstNonAlignImage(s)})()}getFirstAlignImage(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.getFirstAlignImage(s)})()}getFirstTemplate(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.getFirstTemplate(s)})()}getAllTemplate(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.getAllTemplate()})()}getNonAlignImageBetweenAndSortByPageNumber(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.getNonAlignImageBetweenAndSortByPageNumber(s,l)})()}getAlignImageBetweenAndSortByPageNumber(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.getAlignImageBetweenAndSortByPageNumber(s,l)})()}getNonAlignImagesForPageNumbers(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.getNonAlignImagesForPageNumbers(s)})()}getAlignImagesForPageNumbers(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.getAlignImagesForPageNumbers(s)})()}getNonAlignSortByPageNumber(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.getNonAlignSortByPageNumber()})()}getAlignSortByPageNumber(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.getAlignSortByPageNumber()})()}addExam(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a);return void 0===l&&(l=new Ve(a),s.dbs.set(a,l)),l.addExam()})()}addTemplate(a){var s=this;return(0,N.Z)(function*(){let l=s.dbs.get(a.examId);return void 0===l&&(l=new Ve(a.examId),s.dbs.set(a.examId,l)),l.addTemplate(a)})()}countNonAlignWithPageNumber(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.countNonAlignWithPageNumber(s)})()}countAlignWithPageNumber(a,s){var l=this;return(0,N.Z)(function*(){let v=l.dbs.get(a);return void 0===v&&(v=new Ve(a),l.dbs.set(a,v)),v.countAlignWithPageNumber(s)})()}moveNonAlignPages(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.moveNonAlignPages(s,l)})()}moveAlignPages(a,s,l){var v=this;return(0,N.Z)(function*(){let _=v.dbs.get(a);return void 0===_&&(_=new Ve(a),v.dbs.set(a,_)),_.moveAlignPages(s,l)})()}removePageAlignForExamForPagesAndReorder(a,s){let l=this.dbs.get(a);return void 0===l&&(l=new Ve(a),this.dbs.set(a,l)),l.removePageAlignForExamForPagesAndReorder(s)}removePageNonAlignForExamForPagesAndReorder(a,s){let l=this.dbs.get(a);return void 0===l&&(l=new Ve(a),this.dbs.set(a,l)),l.removePageNonAlignForExamForPagesAndReorder(s)}moveTemplatePages(a,s,l){let v=this.dbs.get(a);return void 0===v&&(v=new Ve(a),this.dbs.set(a,v)),v.moveTemplatePages(s,l)}removePageTemplateForExamForPage(a,s){let l=this.dbs.get(a);return void 0===l&&(l=new Ve(a),this.dbs.set(a,l)),l.removePageTemplateForExamForPage(s)}}new Zn},93667:function(X){X.exports=function(){"use strict";var _e=function(e,t){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])})(e,t)},R=function(){return(R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function N(e,t,n){if(n||2===arguments.length)for(var r,i=0,u=t.length;i<u;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var W=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,z=Object.keys,V=Array.isArray;function se(e,t){return"object"!=typeof t||z(t).forEach(function(n){e[n]=t[n]}),e}typeof Promise>"u"||W.Promise||(W.Promise=Promise);var be=Object.getPrototypeOf,nt={}.hasOwnProperty;function ke(e,t){return nt.call(e,t)}function Me(e,t){"function"==typeof t&&(t=t(be(e))),(typeof Reflect>"u"?z:Reflect.ownKeys)(t).forEach(function(n){De(e,n,t[n])})}var ut=Object.defineProperty;function De(e,t,n,r){ut(e,t,se(n&&ke(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function xe(e){return{from:function(t){return e.prototype=Object.create(t.prototype),De(e.prototype,"constructor",e),{extend:Me.bind(null,e.prototype)}}}}var St=Object.getOwnPropertyDescriptor,Ie=[].slice;function qe(e,t,n){return Ie.call(e,t,n)}function Te(e,t){return t(e)}function Re(e){if(!e)throw new Error("Assertion Failed")}function Ze(e){W.setImmediate?setImmediate(e):setTimeout(e,0)}function pt(e,t){if("string"==typeof t&&ke(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var u=pt(e,t[r]);n.push(u)}return n}var p=t.indexOf(".");if(-1!==p){var h=e[t.substr(0,p)];return null==h?void 0:pt(h,t.substr(p+1))}}function st(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){Re("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)st(e,t[r],n[r])}else{var u,p,h=t.indexOf(".");-1!==h?(u=t.substr(0,h),""===(p=t.substr(h+1))?void 0===n?V(e)&&!isNaN(parseInt(u))?e.splice(u,1):delete e[u]:e[u]=n:st(h=(h=e[u])&&ke(e,u)?h:e[u]={},p,n)):void 0===n?V(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function ct(e){var t,n={};for(t in e)ke(e,t)&&(n[t]=e[t]);return n}var we=[].concat;function rt(e){return we.apply([],e)}var Xe="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(rt([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return W[e]}),un=new Set(Xe.map(function(e){return W[e]})),Nt=null;function He(e){return Nt=new WeakMap,e=function t(n){if(!n||"object"!=typeof n)return n;var r=Nt.get(n);if(r)return r;if(V(n)){Nt.set(n,r=[]);for(var i=0,u=n.length;i<u;++i)r.push(t(n[i]))}else if(un.has(n.constructor))r=n;else{var p,h=be(n);for(p in r=h===Object.prototype?{}:Object.create(h),Nt.set(n,r),n)ke(n,p)&&(r[p]=t(n[p]))}return r}(e),Nt=null,e}var nn={}.toString;function On(e){return nn.call(e).slice(8,-1)}var Nn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",En="symbol"==typeof Nn?function(e){var t;return null!=e&&(t=e[Nn])&&t.apply(e)}:function(){return null};function Gt(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var mn={};function Kt(e){var t,n,r,i;if(1===arguments.length){if(V(e))return e.slice();if(this===mn&&"string"==typeof e)return[e];if(i=En(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var Yt=typeof Symbol<"u"?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},xn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),vn={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function qt(e,t){this.name=e,this.message=t}function Sn(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,i){return i.indexOf(n)===r}).join("\n")}function bn(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Sn(e,t)}function jn(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(n){return t[n]}),this.failuresByPos=t,this.message=Sn(e,this.failures)}xe(qt).from(Error).extend({toString:function(){return this.name+": "+this.message}}),xe(bn).from(qt),xe(jn).from(qt);var Ve=xn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Zn=qt,Ae=xn.reduce(function(e,t){var n=t+"Error";function r(i,u){this.name=n,i?"string"==typeof i?(this.message="".concat(i).concat(u?"\n "+u:""),this.inner=u||null):"object"==typeof i&&(this.message="".concat(i.name," ").concat(i.message),this.inner=i):(this.message=vn[t]||n,this.inner=null)}return xe(r).from(Zn),e[t]=r,e},{});Ae.Syntax=SyntaxError,Ae.Type=TypeError,Ae.Range=RangeError;var $=Ce.reduce(function(e,t){return e[t+"Error"]=Ae[t],e},{}),a=xn.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=Ae[t]),e},{});function s(){}function l(e){return e}function v(e,t){return null==e||e===l?t:function(n){return t(e(n))}}function _(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function O(e,t){return e===s?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var u=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?_(r,this.onsuccess):r),i&&(this.onerror=this.onerror?_(i,this.onerror):i),void 0!==u?u:n}}function fe(e,t){return e===s?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?_(n,this.onsuccess):n),r&&(this.onerror=this.onerror?_(r,this.onerror):r)}}function ge(e,t){return e===s?t:function(n){var r=e.apply(this,arguments);se(n,r);var i=this.onsuccess,u=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?_(i,this.onsuccess):i),u&&(this.onerror=this.onerror?_(u,this.onerror):u),void 0===r?void 0===n?void 0:n:se(r,n)}}function k(e,t){return e===s?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ae(e,t){return e===s?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,u=new Array(i);i--;)u[i]=arguments[i];return n.then(function(){return t.apply(r,u)})}return t.apply(this,arguments)}}a.ModifyError=bn,a.DexieError=qt,a.BulkError=jn;var me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ot(e){me=e}var Ce,_t={},jt=(xn=(xn=(Xe=typeof Promise>"u"?[]:function(){var e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,be(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,be(t),e]}())[1])&&xn.then,(Ce=Xe[0])&&Ce.constructor),kt=!!(Xe=Xe[2]),le=function(e,t){Y.push([e,t]),Se&&(queueMicrotask(Ct),Se=!1)},zt=!0,Se=!0,et=[],lt=[],Jt=l,C={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:s,pgp:!1,env:{},finalize:s},c=C,Y=[],F=0,it=[];function M(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=c;if("function"!=typeof e){if(e!==_t)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Bt(this,this._value))}this._state=null,this._value=null,++t.ref,function n(r,i){try{i(function(u){if(null===r._state){if(u===r)throw new TypeError("A promise cannot be resolved with itself.");var p=r._lib&&Zt();u&&"function"==typeof u.then?n(r,function(h,g){u instanceof M?u._then(h,g):u.then(h,g)}):(r._state=!0,r._value=u,rn(r)),p&&tn()}},Bt.bind(null,r))}catch(u){Bt(r,u)}}(this,e)}var ht={get:function(){var e=c,t=ee;function n(r,i){var u=this,p=!e.global&&(e!==c||t!==ee),h=p&&!de(),g=new M(function(w,A){Wt(u,new It(wn(r,e,p,h),wn(i,e,p,h),w,A,e))});return this._consoleTask&&(g._consoleTask=this._consoleTask),g}return n.prototype=_t,n},set:function(e){De(this,"then",e&&e.prototype===_t?ht:{get:function(){return e},set:ht.set})}};function It(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Bt(e,t){var n,r;lt.push(t),null===e._state&&(n=e._lib&&Zt(),t=Jt(t),e._state=!1,e._value=t,r=e,et.some(function(i){return i._value===r._value})||et.push(r),rn(e),n&&tn())}function rn(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Wt(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===F&&(++F,le(function(){0==--F&&Ne()},[]))}function Wt(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++F,le(xt,[n,e,t])}else e._listeners.push(t)}function xt(e,t,n){try{var r,i=t._value;!t._state&&lt.length&&(lt=[]),r=me&&t._consoleTask?t._consoleTask.run(function(){return e(i)}):e(i),t._state||-1!==lt.indexOf(i)||function(u){for(var p=et.length;p;)if(et[--p]._value===u._value)return et.splice(p,1)}(t),n.resolve(r)}catch(u){n.reject(u)}finally{0==--F&&Ne(),--n.psd.ref||n.psd.finalize()}}function Ct(){Ht(C,function(){Zt()&&tn()})}function Zt(){var e=zt;return Se=zt=!1,e}function tn(){var e,t,n;do{for(;0<Y.length;)for(e=Y,Y=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<Y.length);Se=zt=!0}function Ne(){var e=et;et=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=it.slice(0),n=t.length;n;)t[--n]()}function bt(e){return new M(_t,!1,e)}function Ye(e,t){var n=c;return function(){var r=Zt(),i=c;try{return Dt(n,!0),e.apply(this,arguments)}catch(u){t&&t(u)}finally{Dt(i,!1),r&&tn()}}}Me(M.prototype,{then:ht,_then:function(e,t){Wt(this,new It(null,null,e,t,c))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return this.then(null,"function"==typeof t?function(r){return(r instanceof t?n:bt)(r)}:function(r){return(r&&r.name===t?n:bt)(r)})},finally:function(e){return this.then(function(t){return M.resolve(e()).then(function(){return t})},function(t){return M.resolve(e()).then(function(){return bt(t)})})},timeout:function(e,t){var n=this;return e<1/0?new M(function(r,i){var u=setTimeout(function(){return i(new Ae.Timeout(t))},e);n.then(r,i).finally(clearTimeout.bind(null,u))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&De(M.prototype,Symbol.toStringTag,"Dexie.Promise"),C.env=gn(),Me(M,{all:function(){var e=Kt.apply(null,arguments).map(Ft);return new M(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(i,u){return M.resolve(i).then(function(p){e[u]=p,--r||t(e)},n)})})},resolve:function(e){return e instanceof M?e:e&&"function"==typeof e.then?new M(function(t,n){e.then(t,n)}):new M(_t,!0,e)},reject:bt,race:function(){var e=Kt.apply(null,arguments).map(Ft);return new M(function(t,n){e.map(function(r){return M.resolve(r).then(t,n)})})},PSD:{get:function(){return c},set:function(e){return c=e}},totalEchoes:{get:function(){return ee}},newPSD:Fe,usePSD:Ht,scheduler:{get:function(){return le},set:function(e){le=e}},rejectionMapper:{get:function(){return Jt},set:function(e){Jt=e}},follow:function(e,t){return new M(function(n,r){return Fe(function(i,u){var p=c;p.unhandleds=[],p.onunhandled=u,p.finalize=_(function(){var h,g=this;h=function(){0===g.unhandleds.length?i():u(g.unhandleds[0])},it.push(function w(){h(),it.splice(it.indexOf(w),1)}),++F,le(function(){0==--F&&Ne()},[])},p.finalize),e()},t,n,r)})}}),jt&&(jt.allSettled&&De(M,"allSettled",function(){var e=Kt.apply(null,arguments).map(Ft);return new M(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(i,u){return M.resolve(i).then(function(p){return r[u]={status:"fulfilled",value:p}},function(p){return r[u]={status:"rejected",reason:p}}).then(function(){return--n||t(r)})})})}),jt.any&&typeof AggregateError<"u"&&De(M,"any",function(){var e=Kt.apply(null,arguments).map(Ft);return new M(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach(function(u,p){return M.resolve(u).then(function(h){return t(h)},function(h){i[p]=h,--r||n(new AggregateError(i))})})})}),jt.withResolvers&&(M.withResolvers=jt.withResolvers));var j={awaits:0,echoes:0,id:0},L=0,q=[],Z=0,ee=0,We=0;function Fe(e,t,n,r){var i=c,u=Object.create(i);return u.parent=i,u.ref=0,u.global=!1,u.id=++We,u.env=kt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},t&&se(u,t),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ht(u,e,n,r),0===u.ref&&u.finalize(),r}function Ge(){return j.id||(j.id=++L),++j.awaits,j.echoes+=100,j.id}function de(){return!!j.awaits&&(0==--j.awaits&&(j.id=0),j.echoes=100*j.awaits,!0)}function Ft(e){return j.echoes&&e&&e.constructor===jt?(Ge(),e.then(function(t){return de(),t},function(t){return de(),yt(t)})):e}function sn(){var e=q[q.length-1];q.pop(),Dt(e,!1)}function Dt(e,t){var n,r=c;(t?!j.echoes||Z++&&e===c:!Z||--Z&&e===c)||queueMicrotask(t?function(i){++ee,j.echoes&&0!=--j.echoes||(j.echoes=j.awaits=j.id=0),q.push(c),Dt(i,!0)}.bind(null,e):sn),e!==c&&(c=e,r===C&&(C.env=gn()),kt&&(n=C.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(W,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function gn(){var e=W.Promise;return kt?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(W,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ht(e,t,n,r,i){var u=c;try{return Dt(e,!0),t(n,r,i)}finally{Dt(u,!1)}}function wn(e,t,n,r){return"function"!=typeof e?e:function(){var i=c;n&&Ge(),Dt(t,!0);try{return e.apply(this,arguments)}finally{Dt(i,!1),r&&queueMicrotask(de)}}}function on(e){Promise===jt&&0===j.echoes?0===Z?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+xn).indexOf("[native code]")&&(Ge=de=s);var yt=M.reject,Qe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mt="String expected.",ot=[],Tt="__dbnames",ye="readonly",d="readwrite";function o(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var f={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function m(e){return"string"!=typeof e||/\./.test(e)?function(t){return t}:function(t){return void 0===t[e]&&e in t&&delete(t=He(t))[e],t}}function S(){throw Ae.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function U(e,t){try{var n=re(e),r=re(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(i,u){for(var p=i.length,h=u.length,g=p<h?p:h,w=0;w<g;++w)if(i[w]!==u[w])return i[w]<u[w]?-1:1;return p===h?0:p<h?-1:1}(ve(e),ve(t));case"Array":return function(i,u){for(var p=i.length,h=u.length,g=p<h?p:h,w=0;w<g;++w){var A=U(i[w],u[w]);if(0!==A)return A}return p===h?0:p<h?-1:1}(e,t)}}catch{}return NaN}function re(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=On(e))?"binary":e}function ve(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ue(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(i,u){return!n.failures[u]})),Promise.all(r.map(function(i){return i=i.updatesTable,t?e.db.table(i).where("k").anyOf(t).delete():e.db.table(i).clear()})).then(function(){return n})):n}var Pe=(pe.prototype._trans=function(e,t,n){var r=this._tx||c.trans,i=this.name,u=me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===e?"read":"write"," ").concat(this.name));function p(w,A,y){if(!y.schema[i])throw new Ae.NotFound("Table "+i+" not part of transaction");return t(y.idbtrans,y)}var h=Zt();try{var g=r&&r.db._novip===this.db._novip?r===c.trans?r._promise(e,p,n):Fe(function(){return r._promise(e,p,n)},{trans:r,transless:c.transless||c}):function w(A,y,I,b){if(A.idbdb&&(A._state.openComplete||c.letThrough||A._vip)){var x=A._createTransaction(y,I,A._dbSchema);try{x.create(),A._state.PR1398_maxLoop=3}catch(P){return P.name===Ve.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return w(A,y,I,b)})):yt(P)}return x._promise(y,function(P,E){return Fe(function(){return c.trans=x,b(P,E,x)})}).then(function(P){if("readwrite"===y)try{x.idbtrans.commit()}catch{}return"readonly"===y?P:x._completion.then(function(){return P})})}if(A._state.openComplete)return yt(new Ae.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return yt(new Ae.DatabaseClosed);A.open().catch(s)}return A._state.dbReadyPromise.then(function(){return w(A,y,I,b)})}(this.db,e,[this.name],p);return u&&(g._consoleTask=u,g=g.catch(function(w){return console.trace(w),yt(w)})),g}finally{h&&tn()}},pe.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?yt(new Ae.Type("Invalid argument to Table.get()")):this._trans("readonly",function(r){return n.core.get({trans:r,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(t)},pe.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(V(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=z(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(h){if(h.compound&&t.every(function(w){return 0<=h.keyPath.indexOf(w)})){for(var g=0;g<t.length;++g)if(-1===t.indexOf(h.keyPath[g]))return!1;return!0}return!1}).sort(function(h,g){return h.keyPath.length-g.keyPath.length})[0];if(n&&"\uffff"!==this.db._maxKey){var u=n.keyPath.slice(0,t.length);return this.where(u).equals(u.map(function(g){return e[g]}))}!n&&me&&console.warn("The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]"));var r=this.schema.idxByName;function i(h,g){return 0===U(h,g)}u=(p=t.reduce(function(y,g){var w=y[0],A=y[1],I=(y=r[g],e[g]);return[w||y,w||!y?o(A,y&&y.multi?function(b){return b=pt(b,g),V(b)&&b.some(function(x){return i(I,x)})}:function(b){return i(I,pt(b,g))}):A]},[null,null]))[0];var p=p[1];return u?this.where(u.name).equals(e[u.keyPath]).filter(p):n?this.filter(p):this.where(t).equals("")},pe.prototype.filter=function(e){return this.toCollection().and(e)},pe.prototype.count=function(e){return this.toCollection().count(e)},pe.prototype.offset=function(e){return this.toCollection().offset(e)},pe.prototype.limit=function(e){return this.toCollection().limit(e)},pe.prototype.each=function(e){return this.toCollection().each(e)},pe.prototype.toArray=function(e){return this.toCollection().toArray(e)},pe.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},pe.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,V(e)?"[".concat(e.join("+"),"]"):e))},pe.prototype.reverse=function(){return this.toCollection().reverse()},pe.prototype.mapToClass=function(e){var t,n=this.db,r=this.name;function i(){return null!==t&&t.apply(this,arguments)||this}(this.schema.mappedClass=e).prototype instanceof S&&(function(g,w){if("function"!=typeof w&&null!==w)throw new TypeError("Class extends value "+String(w)+" is not a constructor or null");function A(){this.constructor=g}_e(g,w),g.prototype=null===w?Object.create(w):(A.prototype=w.prototype,new A)}(i,t=e),Object.defineProperty(i.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),i.prototype.table=function(){return r},e=i);for(var u=new Set,p=e.prototype;p;p=be(p))Object.getOwnPropertyNames(p).forEach(function(g){return u.add(g)});function h(g){if(!g)return g;var w,A=Object.create(e.prototype);for(w in g)if(!u.has(w))try{A[w]=g[w]}catch{}return A}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=h,this.hook("reading",h),e},pe.prototype.defineClass=function(){return this.mapToClass(function(e){se(this,e)})},pe.prototype.add=function(e,t){var n=this,r=this.schema.primKey,u=r.keyPath,p=e;return u&&r.auto&&(p=m(u)(e)),this._trans("readwrite",function(h){return n.core.mutate({trans:h,type:"add",keys:null!=t?[t]:null,values:[p]})}).then(function(h){return h.numFailures?M.reject(h.failures[0]):h.lastResult}).then(function(h){if(u)try{st(e,u,h)}catch{}return h})},pe.prototype.update=function(e,t){return"object"!=typeof e||V(e)?this.where(":id").equals(e).modify(t):void 0===(e=pt(e,this.schema.primKey.keyPath))?yt(new Ae.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},pe.prototype.put=function(e,t){var n=this,r=this.schema.primKey,u=r.keyPath,p=e;return u&&r.auto&&(p=m(u)(e)),this._trans("readwrite",function(h){return n.core.mutate({trans:h,type:"put",values:[p],keys:null!=t?[t]:null})}).then(function(h){return h.numFailures?M.reject(h.failures[0]):h.lastResult}).then(function(h){if(u)try{st(e,u,h)}catch{}return h})},pe.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(r){return ue(t,[e],r)}).then(function(r){return r.numFailures?M.reject(r.failures[0]):void 0})})},pe.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:f}).then(function(n){return ue(e,null,n)})}).then(function(t){return t.numFailures?M.reject(t.failures[0]):void 0})},pe.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(r){return r.map(function(i){return t.hook.reading.fire(i)})})})},pe.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,u=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(p){var h=(w=r.schema.primKey).auto;if((w=w.keyPath)&&i)throw new Ae.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,w=w&&h?e.map(m(w)):e;return r.core.mutate({trans:p,type:"add",keys:i,values:w,wantResults:u}).then(function(x){var y=x.numFailures,I=x.results,b=x.lastResult;if(x=x.failures,0===y)return u?I:b;throw new jn("".concat(r.name,".bulkAdd(): ").concat(y," of ").concat(g," operations failed"),x)})})},pe.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,u=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(p){var h=(w=r.schema.primKey).auto;if((w=w.keyPath)&&i)throw new Ae.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Ae.InvalidArgument("Arguments objects and keys must have the same length");var g=e.length,w=w&&h?e.map(m(w)):e;return r.core.mutate({trans:p,type:"put",keys:i,values:w,wantResults:u}).then(function(x){var y=x.numFailures,I=x.results,b=x.lastResult;if(x=x.failures,0===y)return u?I:b;throw new jn("".concat(r.name,".bulkPut(): ").concat(y," of ").concat(g," operations failed"),x)})})},pe.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(p){return p.key}),i=e.map(function(p){return p.changes}),u=[];return this._trans("readwrite",function(p){return n.getMany({trans:p,keys:r,cache:"clone"}).then(function(h){var g=[],w=[];e.forEach(function(y,I){var b=y.key,x=y.changes,P=h[I];if(P){for(var E=0,T=Object.keys(x);E<T.length;E++){var B=T[E],K=x[B];if(B===t.schema.primKey.keyPath){if(0!==U(K,b))throw new Ae.Constraint("Cannot update primary key in bulkUpdate()")}else st(P,B,K)}u.push(I),g.push(b),w.push(P)}});var A=g.length;return n.mutate({trans:p,type:"put",keys:g,values:w,updates:{keys:r,changeSpecs:i}}).then(function(y){var I=y.numFailures,b=y.failures;if(0===I)return A;for(var x=0,P=Object.keys(b);x<P.length;x++){var E,T=P[x],B=u[Number(T)];null!=B&&(E=b[T],delete b[T],b[B]=E)}throw new jn("".concat(t.name,".bulkUpdate(): ").concat(I," of ").concat(A," operations failed"),b)})})})},pe.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(i){return ue(t,e,i)})}).then(function(p){var i=p.numFailures,u=p.lastResult;if(p=p.failures,0===i)return u;throw new jn("".concat(t.name,".bulkDelete(): ").concat(i," of ").concat(n," operations failed"),p)})},pe);function pe(){}function Ue(e){function t(p,h){if(h){for(var g=arguments.length,w=new Array(g-1);--g;)w[g-1]=arguments[g];return n[p].subscribe.apply(null,w),e}if("string"==typeof p)return n[p]}var n={};t.addEventType=u;for(var r=1,i=arguments.length;r<i;++r)u(arguments[r]);return t;function u(p,h,g){if("object"!=typeof p){var w;h=h||k;var A={subscribers:[],fire:g=g||s,subscribe:function(y){-1===A.subscribers.indexOf(y)&&(A.subscribers.push(y),A.fire=h(A.fire,y))},unsubscribe:function(y){A.subscribers=A.subscribers.filter(function(I){return I!==y}),A.fire=A.subscribers.reduce(h,g)}};return n[p]=t[p]=A}z(w=p).forEach(function(y){var I=w[y];if(V(I))u(y,w[y][0],w[y][1]);else{if("asap"!==I)throw new Ae.InvalidArgument("Invalid event config");var b=u(y,l,function(){for(var x=arguments.length,P=new Array(x);x--;)P[x]=arguments[x];b.subscribers.forEach(function(E){Ze(function(){E.apply(null,P)})})})}})}}function at(e,t){return xe(t).from({prototype:e}),t}function ze(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function tt(e,t){e.filter=o(e.filter,t)}function wt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return o(r(),t())}:t,e.justLimit=n&&!r}function gt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new Ae.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Be(e,t,n){var r=gt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Ut(e,t,n,r){var i=e.replayFilter?o(e.filter,e.replayFilter()):e.filter;if(e.or){var u={},p=function(h,g,w){var A,y;i&&!i(g,w,function(I){return g.stop(I)},function(I){return g.fail(I)})||("[object ArrayBuffer]"==(y=""+(A=g.primaryKey))&&(y=""+new Uint8Array(A)),ke(u,y)||(u[y]=!0,t(h,g,w)))};return Promise.all([e.or._iterate(p,n),he(Be(e,r,n),e.algorithm,p,!e.keysOnly&&e.valueMapper)])}return he(Be(e,r,n),o(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function he(e,t,n,r){var i=Ye(r?function(u,p,h){return n(r(u),p,h)}:n);return e.then(function(u){if(u)return u.start(function(){var p=function(){return u.continue()};t&&!t(u,function(h){return p=h},function(h){u.stop(h),p=s},function(h){u.fail(h),p=s})||i(u.value,u,function(h){return p=h}),p()})})}var Q=(Ee.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(V(n))return N(N([],V(e)?e:[],!0),n,!0).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch{return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var r=t.remove;if(V(r))return V(e)?e.filter(function(i){return!r.includes(i)}).sort():[];if("number"==typeof r)return Number(e)-r;if("bigint"==typeof r)try{return BigInt(e)-r}catch{return BigInt(0)-r}throw new TypeError("Invalid subtrahend ".concat(r))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},Ee);function Ee(e){this["@@propmod"]=e}var Oe=(ne.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,yt.bind(null,n.error)):n.table._trans("readonly",e).then(t)},ne.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,yt.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},ne.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=o(t.algorithm,e)},ne.prototype._iterate=function(e,t){return Ut(this._ctx,e,t,this._ctx.table.core)},ne.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&se(n,e),t._ctx=n,t},ne.prototype.raw=function(){return this._ctx.valueMapper=null,this},ne.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Ut(t,e,n,t.table.core)})},ne.prototype.count=function(e){var t=this;return this._read(function(n){var r=t._ctx,i=r.table.core;if(ze(r,!0))return i.count({trans:n,query:{index:gt(r,i.schema),range:r.range}}).then(function(p){return Math.min(p,r.limit)});var u=0;return Ut(r,function(){return++u,!1},n,i).then(function(){return u})}).then(e)},ne.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function u(g,w){return w?u(g[n[w]],w-1):g[r]}var p="next"===this._ctx.dir?1:-1;function h(g,w){return U(u(g,i),u(w,i))*p}return this.toArray(function(g){return g.sort(h)}).then(t)},ne.prototype.toArray=function(e){var t=this;return this._read(function(n){var r=t._ctx;if("next"===r.dir&&ze(r,!0)&&0<r.limit){var i=r.valueMapper,u=gt(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:u,range:r.range}}).then(function(h){return h=h.result,i?h.map(i):h})}var p=[];return Ut(r,function(h){return p.push(h)},n,r.table.core).then(function(){return p})},e)},ne.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,ze(t)?wt(t,function(){var n=e;return function(r,i){return 0===n||(1===n?--n:i(function(){r.advance(n),n=0}),!1)}}):wt(t,function(){var n=e;return function(){return--n<0}})),this},ne.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),wt(this._ctx,function(){var t=e;return function(n,r,i){return--t<=0&&r(i),0<=t}},!0),this},ne.prototype.until=function(e,t){return tt(this._ctx,function(n,r,i){return!e(n.value)||(r(i),t)}),this},ne.prototype.first=function(e){return this.limit(1).toArray(function(t){return t[0]}).then(e)},ne.prototype.last=function(e){return this.reverse().first(e)},ne.prototype.filter=function(e){var t;return tt(this._ctx,function(n){return e(n.value)}),(t=this._ctx).isMatch=o(t.isMatch,e),this},ne.prototype.and=function(e){return this.filter(e)},ne.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},ne.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ne.prototype.desc=function(){return this.reverse()},ne.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.key,r)})},ne.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},ne.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(n,r){e(r.primaryKey,r)})},ne.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.key)}).then(function(){return n}).then(e)},ne.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&ze(t,!0)&&0<t.limit)return this._read(function(r){var i=gt(t,t.table.core.schema);return t.table.core.query({trans:r,values:!1,limit:t.limit,query:{index:i,range:t.range}})}).then(function(r){return r.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(r,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},ne.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},ne.prototype.firstKey=function(e){return this.limit(1).keys(function(t){return t[0]}).then(e)},ne.prototype.lastKey=function(e){return this.reverse().firstKey(e)},ne.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return tt(this._ctx,function(i){var r=i.primaryKey.toString();return i=ke(t,r),t[r]=!0,!i}),this},ne.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var i,u,p;p="function"==typeof e?e:(i=z(e),u=i.length,function(T){for(var B=!1,K=0;K<u;++K){var D=i[K],G=e[D],te=pt(T,D);G instanceof Q?(st(T,D,G.execute(te)),B=!0):te!==G&&(st(T,D,G),B=!0)}return B});var y,h=n.table.core,g=(y=h.schema.primaryKey).outbound,w=y.extractKey,A=200;function I(T,D){var K=D.failures;x+=T-(D=D.numFailures);for(var G=0,te=z(K);G<te.length;G++)b.push(K[te[G]])}(y=t.db._options.modifyChunkSize)&&(A="object"==typeof y?y[h.name]||y["*"]||200:y);var b=[],x=0,P=[],E=e===Je;return t.clone().primaryKeys().then(function(T){var K=ze(n)&&n.limit===1/0&&("function"!=typeof e||E)&&{index:n.index,range:n.range};return function B(D){var G=Math.min(A,T.length-D),te=T.slice(D,D+G);return(E?Promise.resolve([]):h.getMany({trans:r,keys:te,cache:"immutable"})).then(function(J){var H=[],oe=[],ie=g?[]:null,ce=E?te:[];if(!E)for(var Le=0;Le<G;++Le){var dt=J[Le],Ke={value:He(dt),primKey:T[D+Le]};!1!==p.call(Ke,Ke.value,Ke)&&(null==Ke.value?ce.push(T[D+Le]):g||0===U(w(dt),w(Ke.value))?(oe.push(Ke.value),g&&ie.push(T[D+Le])):(ce.push(T[D+Le]),H.push(Ke.value)))}return Promise.resolve(0<H.length&&h.mutate({trans:r,type:"add",values:H}).then(function(Mt){for(var je in Mt.failures)ce.splice(parseInt(je),1);I(H.length,Mt)})).then(function(){return(0<oe.length||K&&"object"==typeof e)&&h.mutate({trans:r,type:"put",keys:ie,values:oe,criteria:K,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<D}).then(function(Mt){return I(oe.length,Mt)})}).then(function(){return(0<ce.length||K&&E)&&h.mutate({trans:r,type:"delete",keys:ce,criteria:K,isAdditionalChunk:0<D}).then(function(Mt){return ue(n.table,ce,Mt)}).then(function(Mt){return I(ce.length,Mt)})}).then(function(){return T.length>D+G&&B(D+A)})})}(0).then(function(){if(0<b.length)throw new bn("Error modifying one or more objects",b,x,P);return T.length})})})},ne.prototype.delete=function(){var e=this._ctx,t=e.range;return!ze(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Je):this._write(function(n){var i=t;return e.table.core.count({trans:n,query:{index:e.table.core.schema.primaryKey,range:i}}).then(function(u){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(g){var h=g.failures;if(g=g.numFailures)throw new bn("Could not delete some values",Object.keys(h).map(function(w){return h[w]}),u-g);return u-g})})})},ne);function ne(){}var Je=function(e,t){return t.value=null};function pn(e,t){return e<t?-1:e===t?0:1}function Rt(e,t){return t<e?-1:e===t?0:1}function Et(e,t,n){return(e=e instanceof cn?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Xt(e){return new e.Collection(e,function(){return Pt("")}).limit(0)}function vt(e,t,n,r){var i,u,p,h,g,w,A,y=n.length;if(!n.every(function(x){return"string"==typeof x}))return Et(e,mt);function I(x){i="next"===x?function(E){return E.toUpperCase()}:function(E){return E.toLowerCase()},u="next"===x?function(E){return E.toLowerCase()}:function(E){return E.toUpperCase()},p="next"===x?pn:Rt;var P=n.map(function(E){return{lower:u(E),upper:i(E)}}).sort(function(E,T){return p(E.lower,T.lower)});h=P.map(function(E){return E.upper}),g=P.map(function(E){return E.lower}),A="next"===(w=x)?"":r}I("next"),(e=new e.Collection(e,function(){return Vt(h[0],g[y-1]+r)}))._ondirectionchange=function(x){I(x)};var b=0;return e._addAlgorithm(function(x,P,E){var T=x.key;if("string"!=typeof T)return!1;var B=u(T);if(t(B,g,b))return!0;for(var K=null,D=b;D<y;++D){var G=function(te,J,H,oe,ie,ce){for(var Le=Math.min(te.length,oe.length),dt=-1,Ke=0;Ke<Le;++Ke){var Mt=J[Ke];if(Mt!==oe[Ke])return ie(te[Ke],H[Ke])<0?te.substr(0,Ke)+H[Ke]+H.substr(Ke+1):ie(te[Ke],oe[Ke])<0?te.substr(0,Ke)+oe[Ke]+H.substr(Ke+1):0<=dt?te.substr(0,dt)+J[dt]+H.substr(dt+1):null;ie(te[Ke],Mt)<0&&(dt=Ke)}return Le<oe.length&&"next"===ce?te+H.substr(te.length):Le<te.length&&"prev"===ce?te.substr(0,H.length):dt<0?null:te.substr(0,dt)+oe[dt]+H.substr(dt+1)}(T,B,h[D],g[D],p,w);null===G&&null===K?b=D+1:(null===K||0<p(K,G))&&(K=G)}return P(null!==K?function(){x.continue(K+A)}:E),!1}),e}function Vt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Pt(e){return{type:1,lower:e,upper:e}}var cn=(Object.defineProperty(ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ft.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Xt(this):new this.Collection(this,function(){return Vt(e,t,!n,!r)})}catch{return Et(this,Qe)}},ft.prototype.equals=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Pt(e)})},ft.prototype.above=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Vt(e,void 0,!0)})},ft.prototype.aboveOrEqual=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Vt(e,void 0,!1)})},ft.prototype.below=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Vt(void 0,e,!1,!0)})},ft.prototype.belowOrEqual=function(e){return null==e?Et(this,Qe):new this.Collection(this,function(){return Vt(void 0,e)})},ft.prototype.startsWith=function(e){return"string"!=typeof e?Et(this,mt):this.between(e,e+"\uffff",!0,!0)},ft.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):vt(this,function(t,n){return 0===t.indexOf(n[0])},[e],"\uffff")},ft.prototype.equalsIgnoreCase=function(e){return vt(this,function(t,n){return t===n[0]},[e],"")},ft.prototype.anyOfIgnoreCase=function(){var e=Kt.apply(mn,arguments);return 0===e.length?Xt(this):vt(this,function(t,n){return-1!==n.indexOf(t)},e,"")},ft.prototype.startsWithAnyOfIgnoreCase=function(){var e=Kt.apply(mn,arguments);return 0===e.length?Xt(this):vt(this,function(t,n){return n.some(function(r){return 0===t.indexOf(r)})},e,"\uffff")},ft.prototype.anyOf=function(){var e=this,t=Kt.apply(mn,arguments),n=this._cmp;try{t.sort(n)}catch{return Et(this,Qe)}if(0===t.length)return Xt(this);var r=new this.Collection(this,function(){return Vt(t[0],t[t.length-1])});r._ondirectionchange=function(u){t.sort(n="next"===u?e._ascending:e._descending)};var i=0;return r._addAlgorithm(function(u,p,h){for(var g=u.key;0<n(g,t[i]);)if(++i===t.length)return p(h),!1;return 0===n(g,t[i])||(p(function(){u.continue(t[i])}),!1)}),r},ft.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ft.prototype.noneOf=function(){var e=Kt.apply(mn,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch{return Et(this,Qe)}var t=e.reduce(function(n,r){return n?n.concat([[n[n.length-1][1],r]]):[[-1/0,r]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},ft.prototype.inAnyRange=function(T,t){var n=this,r=this._cmp,i=this._ascending,u=this._descending,p=this._min,h=this._max;if(0===T.length)return Xt(this);if(!T.every(function(B){return void 0!==B[0]&&void 0!==B[1]&&i(B[0],B[1])<=0}))return Et(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ae.InvalidArgument);var A,g=!t||!1!==t.includeLowers,w=t&&!0===t.includeUppers,y=i;function I(B,K){return y(B[0],K[0])}try{(A=T.reduce(function(B,K){for(var D=0,G=B.length;D<G;++D){var te=B[D];if(r(K[0],te[1])<0&&0<r(K[1],te[0])){te[0]=p(te[0],K[0]),te[1]=h(te[1],K[1]);break}}return D===G&&B.push(K),B},[])).sort(I)}catch{return Et(this,Qe)}var b=0,x=w?function(B){return 0<i(B,A[b][1])}:function(B){return 0<=i(B,A[b][1])},P=g?function(B){return 0<u(B,A[b][0])}:function(B){return 0<=u(B,A[b][0])},E=x;return(T=new this.Collection(this,function(){return Vt(A[0][0],A[A.length-1][1],!g,!w)}))._ondirectionchange=function(B){y="next"===B?(E=x,i):(E=P,u),A.sort(I)},T._addAlgorithm(function(B,K,D){for(var G,te=B.key;E(te);)if(++b===A.length)return K(D),!1;return!x(G=te)&&!P(G)||(0===n._cmp(te,A[b][1])||0===n._cmp(te,A[b][0])||K(function(){B.continue(y===i?A[b][0]:A[b][1])}),!1)}),T},ft.prototype.startsWithAnyOf=function(){var e=Kt.apply(mn,arguments);return e.every(function(t){return"string"==typeof t})?0===e.length?Xt(this):this.inAnyRange(e.map(function(t){return[t,t+"\uffff"]})):Et(this,"startsWithAnyOf() only works with strings")},ft);function ft(){}function Lt(e){return Ye(function(t){return an(t),e(t.target.error),!1})}function an(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var In="storagemutated",kn="x-storagemutated-1",hn=Ue(null,In),Un=(Qt.prototype._lock=function(){return Re(!c.global),++this._reculock,1!==this._reculock||c.global||(c.lockOwnerFor=this),this},Qt.prototype._unlock=function(){if(Re(!c.global),0==--this._reculock)for(c.global||(c.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ht(e[1],e[0])}catch{}}return this},Qt.prototype._locked=function(){return this._reculock&&c.lockOwnerFor!==this},Qt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(Re(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Ae.DatabaseClosed(r);case"MissingAPIError":throw new Ae.MissingAPI(r.message,r);default:throw new Ae.OpenFailed(r)}if(!this.active)throw new Ae.TransactionInactive;return Re(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ye(function(i){an(i),t._reject(e.error)}),e.onabort=Ye(function(i){an(i),t.active&&t._reject(new Ae.Abort(e.error)),t.active=!1,t.on("abort").fire(i)}),e.oncomplete=Ye(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hn.storagemutated.fire(e.mutatedParts)}),this},Qt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return yt(new Ae.ReadOnly("Transaction is readonly"));if(!this.active)return yt(new Ae.TransactionInactive);if(this._locked())return new M(function(u,p){r._blockedFuncs.push([function(){r._promise(e,t,n).then(u,p)},c])});if(n)return Fe(function(){var u=new M(function(p,h){r._lock();var g=t(p,h,r);g&&g.then&&g.then(p,h)});return u.finally(function(){return r._unlock()}),u._lib=!0,u});var i=new M(function(u,p){var h=t(u,p,r);h&&h.then&&h.then(u,p)});return i._lib=!0,i},Qt.prototype._root=function(){return this.parent?this.parent._root():this},Qt.prototype.waitFor=function(e){var t,n=this._root(),r=M.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function u(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=u)}());var i=n._waitingFor;return new M(function(u,p){r.then(function(h){return n._waitingQueue.push(Ye(u.bind(null,h)))},function(h){return n._waitingQueue.push(Ye(p.bind(null,h)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},Qt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ae.Abort))},Qt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(ke(t,e))return t[e];var n=this.schema[e];if(!n)throw new Ae.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Qt);function Qt(){}function en(e,t,n,r,i,u,p,h){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:u,src:(n&&!p?"&":"")+(r?"*":"")+(i?"++":"")+_n(t),type:h}}function _n(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function An(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(i){return[i.name,i]},n.reduce(function(i,u,p){return(p=r(u))&&(i[p[0]]=p[1]),i},{}))};var r}var Pn=function(e){try{return e.only([[]]),Pn=function(){return[[]]},[[]]}catch{return Pn=function(){return"\uffff"},"\uffff"}};function nr(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(n){return n[t]}:function(n){return pt(n,t)}:function(n){return pt(n,e)};var t}function _r(e){return[].slice.call(e)}var Rr=0;function Ln(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Fr(e,t,g){function r(E){if(3===E.type)return null;if(4===E.type)throw new Error("Cannot convert never type to IDBKeyRange");var b=E.lower,x=E.upper,P=E.lowerOpen;return E=E.upperOpen,void 0===b?void 0===x?null:t.upperBound(x,!!E):void 0===x?t.lowerBound(b,!!P):t.bound(b,x,!!P,!!E)}var u,p,h,w=(p=g,h=_r((u=e).objectStoreNames),A={schema:{name:u.name,tables:h.map(function(I){return p.objectStore(I)}).map(function(I){var b=I.keyPath,E=I.autoIncrement,x=V(b),P={};return E={name:I.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==b,compound:x,keyPath:b,autoIncrement:E,unique:!0,extractKey:nr(b)},indexes:_r(I.indexNames).map(function(T){return I.index(T)}).map(function(D){var K=D.unique,G=D.multiEntry;return G={name:D.name,compound:V(D=D.keyPath),keyPath:D,unique:K,multiEntry:G,extractKey:nr(D)},P[Ln(D)]=G}),getIndexByKeyPath:function(T){return P[Ln(T)]}},P[":id"]=E.primaryKey,null!=b&&(P[Ln(b)]=E.primaryKey),E})},hasGetAll:0<h.length&&"getAll"in p.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).hasGetAll,A=(g=A.schema).tables.map(function i(I){var b,x=I.name;return{name:x,schema:I,mutate:function(P){var E=P.trans,T=P.type,B=P.keys,K=P.values,D=P.range;return new Promise(function(G,te){G=Ye(G);var J=E.objectStore(x),H=null==J.keyPath,oe="put"===T||"add"===T;if(!oe&&"delete"!==T&&"deleteRange"!==T)throw new Error("Invalid operation type: "+T);var ie,ce=(B||K||{length:1}).length;if(B&&K&&B.length!==K.length)throw new Error("Given keys array must have same length as given values array.");if(0===ce)return G({numFailures:0,failures:{},results:[],lastResult:void 0});function Le(yn){++Mt,an(yn)}var dt=[],Ke=[],Mt=0;if("deleteRange"===T){if(4===D.type)return G({numFailures:Mt,failures:Ke,results:[],lastResult:void 0});dt.push(ie=3===D.type?J.clear():J.delete(r(D)))}else{var je=(H=oe?H?[K,B]:[K,null]:[B,null])[0],fn=H[1];if(oe)for(var dn=0;dn<ce;++dn)dt.push(ie=fn&&void 0!==fn[dn]?J[T](je[dn],fn[dn]):J[T](je[dn])),ie.onerror=Le;else for(dn=0;dn<ce;++dn)dt.push(ie=J[T](je[dn])),ie.onerror=Le}function tr(yn){yn=yn.target.result,dt.forEach(function(Rn,wr){return null!=Rn.error&&(Ke[wr]=Rn.error)}),G({numFailures:Mt,failures:Ke,results:"delete"===T?B:dt.map(function(Rn){return Rn.result}),lastResult:yn})}ie.onerror=function(yn){Le(yn),tr(yn)},ie.onsuccess=tr})},getMany:function(P){var E=P.trans,T=P.keys;return new Promise(function(B,K){B=Ye(B);for(var D,G=E.objectStore(x),te=T.length,J=new Array(te),H=0,oe=0,ie=function(dt){J[(dt=dt.target)._pos]=dt.result,++oe===H&&B(J)},ce=Lt(K),Le=0;Le<te;++Le)null!=T[Le]&&((D=G.get(T[Le]))._pos=Le,D.onsuccess=ie,D.onerror=ce,++H);0===H&&B(J)})},get:function(P){var E=P.trans,T=P.key;return new Promise(function(B,K){B=Ye(B);var D=E.objectStore(x).get(T);D.onsuccess=function(G){return B(G.target.result)},D.onerror=Lt(K)})},query:(b=w,function(P){return new Promise(function(E,T){E=Ye(E);var B,K,D,G=P.values,te=P.limit,J=te===1/0?void 0:te,oe=(ie=P.query).index,ie=ie.range,H=(H=P.trans).objectStore(x);if(oe=oe.isPrimaryKey?H:H.index(oe.name),ie=r(ie),0===te)return E({result:[]});b?((J=G?oe.getAll(ie,J):oe.getAllKeys(ie,J)).onsuccess=function(ce){return E({result:ce.target.result})},J.onerror=Lt(T)):(B=0,K=!G&&"openKeyCursor"in oe?oe.openKeyCursor(ie):oe.openCursor(ie),D=[],K.onsuccess=function(ce){var Le=K.result;return Le?(D.push(G?Le.value:Le.primaryKey),++B===te?E({result:D}):void Le.continue()):E({result:D})},K.onerror=Lt(T))})}),openCursor:function(P){var E=P.trans,T=P.values,B=P.query,K=P.reverse,D=P.unique;return new Promise(function(G,te){G=Ye(G);var oe=B.index,J=B.range,H=E.objectStore(x),ie=(H=oe.isPrimaryKey?H:H.index(oe.name),oe=K?D?"prevunique":"prev":D?"nextunique":"next",!T&&"openKeyCursor"in H?H.openKeyCursor(r(J),oe):H.openCursor(r(J),oe));ie.onerror=Lt(te),ie.onsuccess=Ye(function(ce){var Le,dt,Ke,Mt,je=ie.result;je?(je.___id=++Rr,je.done=!1,Le=je.continue.bind(je),dt=(dt=je.continuePrimaryKey)&&dt.bind(je),Ke=je.advance.bind(je),Mt=function(){throw new Error("Cursor not stopped")},je.trans=E,je.stop=je.continue=je.continuePrimaryKey=je.advance=function(){throw new Error("Cursor not started")},je.fail=Ye(te),je.next=function(){var fn=this,dn=1;return this.start(function(){return dn--?fn.continue():fn.stop()}).then(function(){return fn})},je.start=function(fn){function dn(){if(ie.result)try{fn()}catch(yn){je.fail(yn)}else je.done=!0,je.start=function(){throw new Error("Cursor behind last entry")},je.stop()}var tr=new Promise(function(yn,Rn){yn=Ye(yn),ie.onerror=Lt(Rn),je.fail=Rn,je.stop=function(wr){je.stop=je.continue=je.continuePrimaryKey=je.advance=Mt,yn(wr)}});return ie.onsuccess=Ye(function(yn){ie.onsuccess=dn,dn()}),je.continue=Le,je.continuePrimaryKey=dt,je.advance=Ke,dn(),tr},G(je)):G(null)},te)})},count:function(P){var E=P.query,T=P.trans,B=E.index,K=E.range;return new Promise(function(D,G){var te=T.objectStore(x),J=B.isPrimaryKey?te:te.index(B.name);(J=(te=r(K))?J.count(te):J.count()).onsuccess=Ye(function(H){return D(H.target.result)}),J.onerror=Lt(G)})}}}),y={};return A.forEach(function(I){return y[I.name]=I}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(I){if(!y[I])throw new Error("Table '".concat(I,"' not found"));return y[I]},MIN_KEY:-1/0,MAX_KEY:Pn(t),schema:g}}function Vn(e,r){r=function Dr(e,t,n,r){return{dbcore:(r=Fr(t,n.IDBKeyRange,r),e.dbcore.reduce(function(u,p){return p=p.create,R(R({},u),p(u))},r))}}(e._middlewares,r.db,e._deps,r),e.core=r.dbcore,e.tables.forEach(function(i){var u=i.name;e.core.schema.tables.some(function(p){return p.name===u})&&(i.core=e.core.table(u),e[u]instanceof e.Table&&(e[u].core=i.core))})}function $n(e,t,n,r){n.forEach(function(i){var u=r[i];t.forEach(function(p){var h=function g(w,A){return St(w,A)||(w=be(w))&&g(w,A)}(p,i);(!h||"value"in h&&void 0===h.value)&&(p===e.Transaction.prototype||p instanceof e.Transaction?De(p,i,{get:function(){return this.table(i)},set:function(g){ut(this,i,{value:g,writable:!0,configurable:!0,enumerable:!0})}}):p[i]=new e.Table(i,u))})})}function rr(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Ur(e,t){return e._cfg.version-t._cfg.version}function ir(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],u=t[n];if(i){var p={name:n,def:u,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(u.primKey.keyPath||"")||i.primKey.auto!==u.primKey.auto)p.recreate=!0,r.change.push(p);else{var h=i.idxByName,g=u.idxByName,w=void 0;for(w in h)g[w]||p.del.push(w);for(w in g){var A=h[w],y=g[w];A?A.src!==y.src&&p.change.push(y):p.add.push(y)}(0<p.del.length||0<p.add.length||0<p.change.length)&&r.change.push(p)}}else r.add.push([n,u])}return r}function or(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(u){return Gn(i,u)}),i}function xr(e,t){z(e).forEach(function(n){t.db.objectStoreNames.contains(n)||(me&&console.debug("Dexie: Creating missing table",n),or(t,n,e[n].primKey,e[n].indexes))})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Yn(e,t,n){var r={};return qe(t.objectStoreNames,0).forEach(function(i){for(var u=n.objectStore(i),p=en(_n(w=u.keyPath),w||"",!0,!1,!!u.autoIncrement,w&&"string"!=typeof w,!0),h=[],g=0;g<u.indexNames.length;++g){var w=(A=u.index(u.indexNames[g])).keyPath,A=en(A.name,w,!!A.unique,!!A.multiEntry,!1,w&&"string"!=typeof w,!1);h.push(A)}r[i]=An(i,p,h)}),r}function Wn(e,t,n){for(var r=n.db.objectStoreNames,i=0;i<r.length;++i){var u=r[i],p=n.objectStore(u);e._hasGetAll="getAll"in p;for(var h=0;h<p.indexNames.length;++h){var g=p.indexNames[h],w=p.index(g).keyPath,A="string"==typeof w?w:"["+qe(w).join("+")+"]";!t[u]||(w=t[u].idxByName[A])&&(w.name=g,delete t[u].idxByName[A],t[u].idxByName[g]=w)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&W.WorkerGlobalScope&&W instanceof W.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Ar(e){return e.split(",").map(function(t,n){var r=null===(i=(u=t.split(":"))[1])||void 0===i?void 0:i.trim(),i=(t=u[0].trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(i)?i.match(/^\[(.*)\]$/)[1].split("+"):i;return en(i,u||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),V(u),0===n,r)})}var qr=(Fn.prototype._createTableSchema=An,Fn.prototype._parseIndexSyntax=Ar,Fn.prototype._parseStoresSpec=function(e,t){var n=this;z(e).forEach(function(r){if(null!==e[r]){var i=n._parseIndexSyntax(e[r]),u=i.shift();if(!u)throw new Ae.Schema("Invalid schema for table "+r+": "+e[r]);if(u.unique=!0,u.multi)throw new Ae.Schema("Primary key cannot be multiEntry*");i.forEach(function(p){if(p.auto)throw new Ae.Schema("Only primary key can be marked as autoIncrement (++)");if(!p.keyPath)throw new Ae.Schema("Index must have a name and cannot be an empty string")}),i=n._createTableSchema(r,u,i),t[r]=i}})},Fn.prototype.stores=function(n){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?se(this._cfg.storesSource,n):n;var r={},i={};return(n=t._versions).forEach(function(u){se(r,u._cfg.storesSource),i=u._cfg.dbschema={},u._parseStoresSpec(r,i)}),t._dbSchema=i,rr(t,[t._allTables,t,t.Transaction.prototype]),$n(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],z(i),i),t._storeNames=z(i),this},Fn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ae(this._cfg.contentUpgrade||s,e),this},Fn);function Fn(){}function ar(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new Tn(Tt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function ur(e){return e&&"function"==typeof e.databases}function sr(e){return Fe(function(){return c.letThrough=!0,e()})}function cr(e){return!("from"in e)}var ln=function(e,t){if(!this){var n=new ln;return e&&"d"in e&&se(n,e),n}se(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function Mn(e,t,n){var r=U(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(cr(e))return se(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,U(n,e.from)<0)return i?Mn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Er(e);if(0<U(t,e.to))return r?Mn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Er(e);U(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<U(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&qn(e,i),r&&n&&qn(e,r)}}function qn(e,t){cr(t)||function n(r,g){var u=g.from,p=g.to,h=g.l;g=g.r,Mn(r,u,p),h&&n(r,h),g&&n(r,g)}(e,t)}function Or(e,t){var n=zn(t),r=n.next();if(r.done)return!1;for(var i=r.value,u=zn(e),p=u.next(i.from),h=p.value;!r.done&&!p.done;){if(U(h.from,i.to)<=0&&0<=U(h.to,i.from))return!0;U(i.from,h.from)<0?i=(r=n.next(h.from)).value:h=(p=u.next(i.from)).value}return!1}function zn(e){var t=cr(e)?null:{s:0,n:e};return{next:function(n){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&U(n,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||U(n,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var t,n,r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),i=1<r?"r":r<-1?"l":"";i&&(t="r"==i?"l":"r",n=R({},e),e.from=(r=e[i]).from,e.to=r.to,e[i]=r[i],n[i]=r[t],(e[t]=n).d=Pr(n)),e.d=Pr(e)}function Pr(n){var t=n.r;return n=n.l,(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function Jn(e,t){return z(t).forEach(function(n){e[n]?qn(e[n],t[n]):e[n]=function r(i){var u,p,h={};for(u in i)ke(i,u)&&(h[u]=!(p=i[u])||"object"!=typeof p||un.has(p.constructor)?p:r(p));return h}(t[n])}),e}function lr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&Or(t[n],e[n])})}Me(ln.prototype,((xn={add:function(e){return qn(this,e),this},addKey:function(e){return Mn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(n){return Mn(t,n,n)}),this},hasKey:function(e){var t=zn(this).next(e).value;return t&&U(t.from,e)<=0&&0<=U(t.to,e)}})[Nn]=function(){return zn(this)},xn));var Bn={},fr={},dr=!1;function Hn(e){Jn(fr,e),dr||(dr=!0,setTimeout(function(){dr=!1,pr(fr,!(fr={}))},0))}function pr(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(Bn);r<i.length;r++)Sr(p=i[r],e,n,t);else for(var u in e){var p,h=/^idb\:\/\/(.*)\/(.*)\//.exec(u);h&&(u=h[1],h=h[2],(p=Bn["idb://".concat(u,"/").concat(h)])&&Sr(p,e,n,t))}n.forEach(function(g){return g()})}function Sr(e,t,n,r){for(var i=[],u=0,p=Object.entries(e.queries.query);u<p.length;u++){for(var h=p[u],g=h[0],w=[],A=0,y=h[1];A<y.length;A++){var I=y[A];lr(t,I.obsSet)?I.subscribers.forEach(function(E){return n.add(E)}):r&&w.push(I)}r&&i.push([g,w])}if(r)for(var b=0,x=i;b<x.length;b++){var P=x[b];e.queries.query[g=P[0]]=w=P[1]}}function Zr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?yt(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),u=!1;function p(){if(t.openCanceller!==r)throw new Ae.DatabaseClosed("db.open() was cancelled")}var g,w=t.dbReadyResolve,A=null,y=!1;return M.race([r,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(I){function b(){return indexedDB.databases().finally(I)}g=setInterval(b,100),b()}).finally(function(){return clearInterval(g)}):Promise.resolve()).then(function h(){return new M(function(I,b){if(p(),!n)throw new Ae.MissingAPI;var x=e.name,P=t.autoSchema||!i?n.open(x):n.open(x,i);if(!P)throw new Ae.MissingAPI;P.onerror=Lt(b),P.onblocked=Ye(e._fireOnBlocked),P.onupgradeneeded=Ye(function(E){var T;A=P.transaction,t.autoSchema&&!e._options.allowEmptyDB?(P.onerror=an,A.abort(),P.result.close(),(T=n.deleteDatabase(x)).onsuccess=T.onerror=Ye(function(){b(new Ae.NoSuchDatabase("Database ".concat(x," doesnt exist")))})):(A.onerror=Lt(b),E=E.oldVersion>Math.pow(2,62)?0:E.oldVersion,y=E<1,e.idbdb=P.result,u&&function Mr(e,t){xr(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=Yn(0,e.idbdb,t);Wn(e,e._dbSchema,t);for(var r=0,i=ir(n,e._dbSchema).change;r<i.length;r++){var u=function(p){if(p.change.length||p.recreate)return console.warn("Unable to patch indexes of table ".concat(p.name," because it has changes on the type of index or primary key.")),{value:void 0};var h=t.objectStore(p.name);p.add.forEach(function(g){me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(p.name,".").concat(g.src)),Gn(h,g)})}(i[r]);if("object"==typeof u)return u.value}}(e,A),function Lr(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=An("$meta",Ar("")[0],[]),e._storeNames.push("$meta"));var u=e._createTransaction("readwrite",e._storeNames,i);u.create(n),u._completion.catch(r);var p=u._reject.bind(u),h=c.transless||c;Fe(function(){return c.trans=u,c.transless=h,0!==t?(Vn(e,n),w=t,((g=u).storeNames.includes("$meta")?g.table("$meta").get("version").then(function(A){return A??w}):M.resolve(w)).then(function(A){return I=A,b=u,P=[],A=(y=e)._versions,E=y._dbSchema=Yn(0,y.idbdb,x=n),0!==(A=A.filter(function(T){return T._cfg.version>=I})).length?(A.forEach(function(T){P.push(function(){var B=E,K=T._cfg.dbschema;Wn(y,B,x),Wn(y,K,x),E=y._dbSchema=K;var D=ir(B,K);D.add.forEach(function(oe){or(x,oe[0],oe[1].primKey,oe[1].indexes)}),D.change.forEach(function(oe){if(oe.recreate)throw new Ae.Upgrade("Not yet support for changing primary key");var ie=x.objectStore(oe.name);oe.add.forEach(function(ce){return Gn(ie,ce)}),oe.change.forEach(function(ce){ie.deleteIndex(ce.name),Gn(ie,ce)}),oe.del.forEach(function(ce){return ie.deleteIndex(ce)})});var G=T._cfg.contentUpgrade;if(G&&T._cfg.version>I){Vn(y,x),b._memoizedTables={};var te=ct(K);D.del.forEach(function(oe){te[oe]=B[oe]}),rr(y,[y.Transaction.prototype]),$n(y,[y.Transaction.prototype],z(te),te),b.schema=te;var J,H=Yt(G);return H&&Ge(),D=M.follow(function(){var oe;(J=G(b))&&H&&(oe=de.bind(null,null),J.then(oe,oe))}),J&&"function"==typeof J.then?M.resolve(J):D.then(function(){return J})}}),P.push(function(B){var K,D;K=T._cfg.dbschema,[].slice.call((D=B).db.objectStoreNames).forEach(function(te){return null==K[te]&&D.db.deleteObjectStore(te)}),rr(y,[y.Transaction.prototype]),$n(y,[y.Transaction.prototype],y._storeNames,y._dbSchema),b.schema=y._dbSchema}),P.push(function(B){y.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(y.idbdb.version/10)===T._cfg.version?(y.idbdb.deleteObjectStore("$meta"),delete y._dbSchema.$meta,y._storeNames=y._storeNames.filter(function(K){return"$meta"!==K})):B.objectStore("$meta").put(T._cfg.version,"version"))})}),function T(){return P.length?M.resolve(P.shift()(b.idbtrans)).then(T):M.resolve()}().then(function(){xr(E,x)})):M.resolve();var y,I,b,x,P,E}).catch(p)):(z(i).forEach(function(A){or(n,A,i[A].primKey,i[A].indexes)}),Vn(e,n),void M.follow(function(){return e.on.populate.fire(u)}).catch(p));var g,w})}(e,E/10,A,b))},b),P.onsuccess=Ye(function(){A=null;var E,T,B,K,D,G=e.idbdb=P.result,te=qe(G.objectStoreNames);if(0<te.length)try{var J=G.transaction(1===(K=te).length?K[0]:K,"readonly");if(t.autoSchema)B=J,(E=e).verno=(T=G).version/10,B=E._dbSchema=Yn(0,T,B),E._storeNames=qe(T.objectStoreNames,0),$n(E,[E._allTables],z(B),B);else if(Wn(e,e._dbSchema,J),((D=ir(Yn(0,(D=e).idbdb,J),D._dbSchema)).add.length||D.change.some(function(H){return H.add.length||H.change.length}))&&!u)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),G.close(),i=G.version+1,u=!0,I(h());Vn(e,J)}catch{}ot.push(e),G.onversionchange=Ye(function(H){t.vcFired=!0,e.on("versionchange").fire(H)}),G.onclose=Ye(function(H){e.on("close").fire(H)}),y&&(J=x,G=(D=e._deps).indexedDB,D=D.IDBKeyRange,ur(G)||J===Tt||ar(G,D).put({name:J}).catch(s)),I()},b)}).catch(function(I){switch(I?.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),h();break;case"VersionError":if(0<i)return i=0,h()}return M.reject(I)})})]).then(function(){return p(),t.onReadyBeingFired=[],M.resolve(sr(function(){return e.on.ready.fire(e.vip)})).then(function I(){if(0<t.onReadyBeingFired.length){var b=t.onReadyBeingFired.reduce(ae,s);return t.onReadyBeingFired=[],M.resolve(sr(function(){return b(e.vip)})).then(I)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(I){t.dbOpenError=I;try{A&&A.abort()}catch{}return r===t.openCanceller&&e._close(),yt(I)}).finally(function(){t.openComplete=!0,w()}).then(function(){var I;return y&&(I={},e.tables.forEach(function(b){b.schema.indexes.forEach(function(x){x.name&&(I["idb://".concat(e.name,"/").concat(b.name,"/").concat(x.name)]=new ln(-1/0,[[[]]]))}),I["idb://".concat(e.name,"/").concat(b.name,"/")]=I["idb://".concat(e.name,"/").concat(b.name,"/:dels")]=new ln(-1/0,[[[]]])}),hn(In).fire(I),pr(I,!0)),e})}function hr(e){function t(u){return e.next(u)}var n=i(t),r=i(function(u){return e.throw(u)});function i(u){return function(g){var h=u(g);return g=h.value,h.done?g:g&&"function"==typeof g.then?g.then(n,r):V(g)?Promise.all(g).then(n,r):n(g)}}return i(t)()}function Xn(e,t,n){for(var r=V(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Vr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return R(R({},e),{table:function(t){var n=e.table(t),r=n.schema,i={},u=[];function p(y,I,b){var x=Ln(y),P=i[x]=i[x]||[],E=null==y?0:"string"==typeof y?1:y.length,T=0<I;return T=R(R({},b),{name:T?"".concat(x,"(virtual-from:").concat(b.name,")"):b.name,lowLevelIndex:b,isVirtual:T,keyTail:I,keyLength:E,extractKey:nr(y),unique:!T&&b.unique}),P.push(T),T.isPrimaryKey||u.push(T),1<E&&p(2===E?y[0]:y.slice(0,E-1),I+1,b),P.sort(function(B,K){return B.keyTail-K.keyTail}),T}t=p(r.primaryKey.keyPath,0,r.primaryKey),i[":id"]=[t];for(var h=0,g=r.indexes;h<g.length;h++){var w=g[h];p(w.keyPath,0,w)}function A(y){var I,b=y.query.index;return b.isVirtual?R(R({},y),{query:{index:b.lowLevelIndex,range:(I=y.query.range,b=b.keyTail,{type:1===I.type?2:I.type,lower:Xn(I.lower,I.lowerOpen?e.MAX_KEY:e.MIN_KEY,b),lowerOpen:!0,upper:Xn(I.upper,I.upperOpen?e.MIN_KEY:e.MAX_KEY,b),upperOpen:!0})}}):y}return R(R({},n),{schema:R(R({},r),{primaryKey:t,indexes:u,getIndexByKeyPath:function(y){return(y=i[Ln(y)])&&y[0]}}),count:function(y){return n.count(A(y))},query:function(y){return n.query(A(y))},openCursor:function(y){var I=y.query.index,b=I.keyTail,P=I.keyLength;return I.isVirtual?n.openCursor(A(y)).then(function(T){return T&&function E(T){return Object.create(T,{continue:{value:function(B){null!=B?T.continue(Xn(B,y.reverse?e.MAX_KEY:e.MIN_KEY,b)):y.unique?T.continue(T.key.slice(0,P).concat(y.reverse?e.MIN_KEY:e.MAX_KEY,b)):T.continue()}},continuePrimaryKey:{value:function(B,K){T.continuePrimaryKey(Xn(B,e.MAX_KEY,b),K)}},primaryKey:{get:function(){return T.primaryKey}},key:{get:function(){var B=T.key;return 1===P?B[0]:B.slice(0,P)}},value:{get:function(){return T.value}}})}(T)}):n.openCursor(y)}})}})}};function yr(e,t,n,r){return n=n||{},r=r||"",z(e).forEach(function(i){var u,p,h;ke(t,i)?(p=t[i],"object"==typeof(u=e[i])&&"object"==typeof p&&u&&p?(h=On(u))!==On(p)?n[r+i]=t[i]:"Object"===h?yr(u,p,n,r+i+"."):u!==p&&(n[r+i]=t[i]):u!==p&&(n[r+i]=t[i])):n[r+i]=void 0}),z(t).forEach(function(i){ke(e,i)||(n[r+i]=t[i])}),n}function mr(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var $r={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return R(R({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey;return R(R({},n),{mutate:function(i){var u=c.trans,p=u.table(t).hook,h=p.deleting,g=p.creating,w=p.updating;switch(i.type){case"add":if(g.fire===s)break;return u._promise("readwrite",function(){return A(i)},!0);case"put":if(g.fire===s&&w.fire===s)break;return u._promise("readwrite",function(){return A(i)},!0);case"delete":if(h.fire===s)break;return u._promise("readwrite",function(){return A(i)},!0);case"deleteRange":if(h.fire===s)break;return u._promise("readwrite",function(){return function y(I,b,x){return n.query({trans:I,values:!1,query:{index:r,range:b},limit:x}).then(function(P){var E=P.result;return A({type:"delete",keys:E,trans:I}).then(function(T){return 0<T.numFailures?Promise.reject(T.failures[0]):E.length<x?{failures:[],numFailures:0,lastResult:void 0}:y(I,R(R({},b),{lower:E[E.length-1],lowerOpen:!0}),x)})})}(i.trans,i.range,1e4)},!0)}return n.mutate(i);function A(y){var I,b,x,P=c.trans,E=y.keys||mr(r,y);if(!E)throw new Error("Keys missing");return"delete"!==(y="add"===y.type||"put"===y.type?R(R({},y),{keys:E}):R({},y)).type&&(y.values=N([],y.values,!0)),y.keys&&(y.keys=N([],y.keys,!0)),I=n,x=E,("add"===(b=y).type?Promise.resolve([]):I.getMany({trans:b.trans,keys:x,cache:"immutable"})).then(function(T){var B=E.map(function(K,D){var G,te,J,H=T[D],oe={onerror:null,onsuccess:null};return"delete"===y.type?h.fire.call(oe,K,H,P):"add"===y.type||void 0===H?(G=g.fire.call(oe,K,y.values[D],P),null==K&&null!=G&&(y.keys[D]=K=G,r.outbound||st(y.values[D],r.keyPath,K))):(G=yr(H,y.values[D]),(te=w.fire.call(oe,G,K,H,P))&&(J=y.values[D],Object.keys(te).forEach(function(ie){ke(J,ie)?J[ie]=te[ie]:st(J,ie,te[ie])}))),oe});return n.mutate(y).then(function(K){for(var D=K.failures,G=K.results,te=K.numFailures,J=(K=K.lastResult,0);J<E.length;++J){var H=(G||E)[J],oe=B[J];null==H?oe.onerror&&oe.onerror(D[J]):oe.onsuccess&&oe.onsuccess("put"===y.type&&T[J]?y.values[J]:H)}return{failures:D,results:G,numFailures:te,lastResult:K}}).catch(function(K){return B.forEach(function(D){return D.onerror&&D.onerror(K)}),Promise.reject(K)})})}}})}})}};function Ir(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],i=0,u=0;i<t.keys.length&&u<e.length;++i)0===U(t.keys[i],e[u])&&(r.push(n?He(t.values[i]):t.values[i]),++u);return r.length===e.length?r:null}catch{return null}}var Gr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return R(R({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var i=Ir(r.keys,r.trans._cache,"clone"===r.cache);return i?M.resolve(i):n.getMany(r).then(function(u){return r.trans._cache={keys:r.keys,values:"clone"===r.cache?He(u):u},u})},mutate:function(r){return"add"!==r.type&&(r.trans._cache=null),n.mutate(r)}})}}}};function Tr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Nr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Yr={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new ln(e.MIN_KEY,e.MAX_KEY);return R(R({},e),{transaction:function(r,i,u){if(c.subscr&&"readonly"!==i)throw new Ae.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(c.querier));return e.transaction(r,i,u)},table:function(r){var i=e.table(r),u=i.schema,p=u.primaryKey,y=u.indexes,h=p.extractKey,g=p.outbound,w=p.autoIncrement&&y.filter(function(b){return b.compound&&b.keyPath.includes(p.keyPath)}),A=R(R({},i),{mutate:function(b){function x(ie){return ie="idb://".concat(t,"/").concat(r,"/").concat(ie),K[ie]||(K[ie]=new ln)}var P,E,T,B=b.trans,K=b.mutatedParts||(b.mutatedParts={}),D=x(""),G=x(":dels"),te=b.type,J=(oe="deleteRange"===b.type?[b.range]:"delete"===b.type?[b.keys]:b.values.length<50?[mr(p,b).filter(function(ie){return ie}),b.values]:[])[0],H=oe[1],oe=b.trans._cache;return V(J)?(D.addKeys(J),(oe="delete"===te||J.length===H.length?Ir(J,oe):null)||G.addKeys(J),(oe||H)&&(P=x,E=oe,T=H,u.indexes.forEach(function(ie){var ce=P(ie.name||"");function Le(Ke){return null!=Ke?ie.extractKey(Ke):null}function dt(Ke){return ie.multiEntry&&V(Ke)?Ke.forEach(function(Mt){return ce.addKey(Mt)}):ce.addKey(Ke)}(E||T).forEach(function(Ke,fn){var je=E&&Le(E[fn]);0!==U(je,fn=T&&Le(T[fn]))&&(null!=je&&dt(je),null!=fn&&dt(fn))})}))):J?(H={from:null!==(H=J.lower)&&void 0!==H?H:e.MIN_KEY,to:null!==(H=J.upper)&&void 0!==H?H:e.MAX_KEY},G.add(H),D.add(H)):(D.add(n),G.add(n),u.indexes.forEach(function(ie){return x(ie.name).add(n)})),i.mutate(b).then(function(ie){return!J||"add"!==b.type&&"put"!==b.type||(D.addKeys(ie.results),w&&w.forEach(function(ce){for(var Le=b.values.map(function(je){return ce.extractKey(je)}),dt=ce.keyPath.findIndex(function(je){return je===p.keyPath}),Ke=0,Mt=ie.results.length;Ke<Mt;++Ke)Le[Ke][dt]=ie.results[Ke];x(ce.name).addKeys(Le)})),B.mutatedParts=Jn(B.mutatedParts||{},K),ie})}}),I={get:function(b){return[p,new ln(b.key)]},getMany:function(b){return[p,(new ln).addKeys(b.keys)]},count:y=function(x){var P;return[x=(P=x.query).index,new ln(null!==(x=(P=P.range).lower)&&void 0!==x?x:e.MIN_KEY,null!==(P=P.upper)&&void 0!==P?P:e.MAX_KEY)]},query:y,openCursor:y};return z(I).forEach(function(b){A[b]=function(x){var E=!!(P=c.subscr),T=Tr(c,i)&&Nr(b,x)?x.obsSet={}:P;if(E){var B=function(H){return H="idb://".concat(t,"/").concat(r,"/").concat(H),T[H]||(T[H]=new ln)},K=B(""),D=B(":dels"),P=(E=(P=I[b](x))[0],P[1]);if(("query"===b&&E.isPrimaryKey&&!x.values?D:B(E.name||"")).add(P),!E.isPrimaryKey){if("count"!==b){var G="query"===b&&g&&x.values&&i.query(R(R({},x),{values:!1}));return i[b].apply(this,arguments).then(function(H){if("query"===b){if(g&&x.values)return G.then(function(Le){return K.addKeys(Le=Le.result),H});var oe=x.values?H.result.map(h):H.result;(x.values?K:D).addKeys(oe)}else if("openCursor"===b){var ie=H,ce=x.values;return ie&&Object.create(ie,{key:{get:function(){return D.addKey(ie.primaryKey),ie.key}},primaryKey:{get:function(){var Le=ie.primaryKey;return D.addKey(Le),Le}},value:{get:function(){return ce&&K.addKey(ie.primaryKey),ie.value}}})}return H})}D.add(n)}}return i[b].apply(this,arguments)}}),A}})}};function kr(e,t,n){return 0===n.numFailures?t:"deleteRange"===t.type||n.numFailures===(t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1)?null:(t=R({},t),V(t.keys)&&(t.keys=t.keys.filter(function(i,u){return!(u in n.failures)})),"values"in t&&V(t.values)&&(t.values=t.values.filter(function(i,u){return!(u in n.failures)})),t)}function vr(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<U(n,r.lower):0<=U(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?U(e,t.upper)<0:U(e,t.upper)<=0));var n,r}function Cr(e,t,I,r,i,u){if(!I||0===I.length)return e;var p=t.query.index,h=p.multiEntry,g=t.query.range,w=r.schema.primaryKey.extractKey,A=p.extractKey,y=(p.lowLevelIndex||p).extractKey;return(I=I.reduce(function(b,x){var P=b,E=[];if("add"===x.type||"put"===x.type)for(var T=new ln,B=x.values.length-1;0<=B;--B){var K,D=x.values[B],G=w(D);T.hasKey(G)||(K=A(D),(h&&V(K)?K.some(function(ie){return vr(ie,g)}):vr(K,g))&&(T.addKey(G),E.push(D)))}switch(x.type){case"add":var te=(new ln).addKeys(t.values?b.map(function(ce){return w(ce)}):b);P=b.concat(t.values?E.filter(function(ce){return ce=w(ce),!te.hasKey(ce)&&(te.addKey(ce),!0)}):E.map(function(ce){return w(ce)}).filter(function(ce){return!te.hasKey(ce)&&(te.addKey(ce),!0)}));break;case"put":var J=(new ln).addKeys(x.values.map(function(ce){return w(ce)}));P=b.filter(function(ce){return!J.hasKey(t.values?w(ce):ce)}).concat(t.values?E:E.map(function(ce){return w(ce)}));break;case"delete":var H=(new ln).addKeys(x.keys);P=b.filter(function(ce){return!H.hasKey(t.values?w(ce):ce)});break;case"deleteRange":var oe=x.range;P=b.filter(function(ce){return!vr(w(ce),oe)})}return P},e))===e?e:(I.sort(function(b,x){return U(y(b),y(x))||U(w(b),w(x))}),t.limit&&t.limit<1/0&&(I.length>t.limit?I.length=t.limit:e.length===t.limit&&I.length<t.limit&&(i.dirty=!0)),u?Object.freeze(I):I)}function jr(e,t){return 0===U(e.lower,t.lower)&&0===U(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name;return R(R({},e),{transaction:function(n,r,i){var u,p,h=e.transaction(n,r,i);return"readwrite"===r&&(p=(u=new AbortController).signal,h.addEventListener("abort",(i=function(g){return function(){if(u.abort(),"readwrite"===r){for(var w=new Set,A=0,y=n;A<y.length;A++){var I=y[A],b=Bn["idb://".concat(t,"/").concat(I)];if(b){var x=e.table(I),P=b.optimisticOps.filter(function(ce){return ce.trans===h});if(h._explicit&&g&&h.mutatedParts)for(var E=0,T=Object.values(b.queries.query);E<T.length;E++)for(var B=0,K=(te=T[E]).slice();B<K.length;B++)lr((J=K[B]).obsSet,h.mutatedParts)&&(Gt(te,J),J.subscribers.forEach(function(ce){return w.add(ce)}));else if(0<P.length){b.optimisticOps=b.optimisticOps.filter(function(ce){return ce.trans!==h});for(var D=0,G=Object.values(b.queries.query);D<G.length;D++)for(var te,J,H,oe=0,ie=(te=G[D]).slice();oe<ie.length;oe++)null!=(J=ie[oe]).res&&h.mutatedParts&&(g&&!J.dirty?(H=Object.isFrozen(J.res),H=Cr(J.res,J.req,P,x,J,H),J.dirty?(Gt(te,J),J.subscribers.forEach(function(ce){return w.add(ce)})):H!==J.res&&(J.res=H,J.promise=M.resolve({result:H}))):(J.dirty&&Gt(te,J),J.subscribers.forEach(function(ce){return w.add(ce)})))}}}w.forEach(function(ce){return ce()})}}})(!1),{signal:p}),h.addEventListener("error",i(!1),{signal:p}),h.addEventListener("complete",i(!0),{signal:p})),h},table:function(n){var r=e.table(n),i=r.schema.primaryKey;return R(R({},r),{mutate:function(u){var p=c.trans;if(i.outbound||"disabled"===p.db._options.cache||p.explicit||"readwrite"!==p.idbtrans.mode)return r.mutate(u);var h=Bn["idb://".concat(t,"/").concat(n)];return h?(p=r.mutate(u),"add"!==u.type&&"put"!==u.type||!(50<=u.values.length||mr(i,u).some(function(g){return null==g}))?(h.optimisticOps.push(u),u.mutatedParts&&Hn(u.mutatedParts),p.then(function(g){0<g.numFailures&&(Gt(h.optimisticOps,u),(g=kr(0,u,g))&&h.optimisticOps.push(g),u.mutatedParts&&Hn(u.mutatedParts))}),p.catch(function(){Gt(h.optimisticOps,u),u.mutatedParts&&Hn(u.mutatedParts)})):p.then(function(g){var w=kr(0,R(R({},u),{values:u.values.map(function(A,y){var I;return g.failures[y]||st(A=null!==(I=i.keyPath)&&void 0!==I&&I.includes(".")?He(A):R({},A),i.keyPath,g.results[y]),A})}),g);h.optimisticOps.push(w),queueMicrotask(function(){return u.mutatedParts&&Hn(u.mutatedParts)})}),p):r.mutate(u)},query:function(u){if(!Tr(c,r)||!Nr("query",u))return r.query(u);var p="immutable"===(null===(w=c.trans)||void 0===w?void 0:w.db._options.cache),h=(y=c).requery,g=y.signal,w=function(x,P,E,T){var B=Bn["idb://".concat(x,"/").concat(P)];if(!B)return[];if(!(P=B.queries[E]))return[null,!1,B,null];var K=P[(T.query?T.query.index.name:null)||""];if(!K)return[null,!1,B,null];switch(E){case"query":var D=K.find(function(G){return G.req.limit===T.limit&&G.req.values===T.values&&jr(G.req.query.range,T.query.range)});return D?[D,!0,B,K]:[K.find(function(G){return("limit"in G.req?G.req.limit:1/0)>=T.limit&&(!T.values||G.req.values)&&function Wr(e,t){return function(n,r,i,u){if(void 0===n)return void 0!==r?-1:0;if(void 0===r)return 1;if(0===(r=U(n,r))){if(i&&u)return 0;if(i)return 1;if(u)return-1}return r}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(n,r,i,u){if(void 0===n)return void 0!==r?1:0;if(void 0===r)return-1;if(0===(r=U(n,r))){if(i&&u)return 0;if(i)return-1;if(u)return 1}return r}(e.upper,t.upper,e.upperOpen,t.upperOpen)}(G.req.query.range,T.query.range)}),!1,B,K];case"count":return[D=K.find(function(G){return jr(G.req.query.range,T.query.range)}),!!D,B,K]}}(t,n,"query",u),A=w[0],y=w[1],I=w[2],b=w[3];return A&&y?A.obsSet=u.obsSet:(y=r.query(u).then(function(x){var P=x.result;if(A&&(A.res=P),p){for(var E=0,T=P.length;E<T;++E)Object.freeze(P[E]);Object.freeze(P)}else x.result=He(P);return x}).catch(function(x){return b&&A&&Gt(b,A),Promise.reject(x)}),A={obsSet:u.obsSet,promise:y,subscribers:new Set,type:"query",req:u,dirty:!1},b?b.push(A):(b=[A],(I=I||(Bn["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[u.query.index.name||""]=b)),function zr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var i,u;e.subscribers.delete(n),0===e.subscribers.size&&(i=e,u=t,setTimeout(function(){0===i.subscribers.size&&Gt(u,i)},3e3))})}(A,b,h,g),A.promise.then(function(x){return{result:Cr(x.result,u,I?.optimisticOps,r,A,p)}})}})}})}};function Qn(e,t){return new Proxy(e,{get:function(n,r,i){return"db"===r?t:Reflect.get(n,r,i)}})}var Tn=($t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new Ae.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Ae.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(r){return r._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(Ur),n.stores({}),this._state.autoSchema=!1,n)},$t.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||c.letThrough||this._vip)?e():new M(function(n,r){if(t._state.openComplete)return r(new Ae.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new Ae.DatabaseClosed);t.open().catch(s)}t._state.dbReadyPromise.then(n,r)}).then(e)},$t.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:r??10,name:i}),e.sort(function(u,p){return u.level-p.level}),this},$t.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(i){return r?i.create!==r:!!n&&i.name!==n})),this},$t.prototype.open=function(){var e=this;return Ht(C,function(){return Zr(e)})},$t.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=ot.indexOf(this);if(0<=t&&ot.splice(t,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new M(function(n){e.dbReadyResolve=n}),e.openCanceller=new M(function(n,r){e.cancelOpen=r}))},$t.prototype.close=function(n){var t=(void 0===n?{disableAutoOpen:!0}:n).disableAutoOpen;n=this._state,t?(n.isBeingOpened&&n.cancelOpen(new Ae.DatabaseClosed),this._close(),n.autoOpen=!1,n.dbOpenError=new Ae.DatabaseClosed):(this._close(),n.autoOpen=this._options.autoOpen||n.isBeingOpened,n.openComplete=!1,n.dbOpenError=null)},$t.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new M(function(i,u){function p(){t.close(e);var h=t._deps.indexedDB.deleteDatabase(t.name);h.onsuccess=Ye(function(){var g,w,A;w=t.name,A=(g=t._deps).indexedDB,g=g.IDBKeyRange,ur(A)||w===Tt||ar(A,g).delete(w).catch(s),i()}),h.onerror=Lt(u),h.onblocked=t._fireOnBlocked}if(n)throw new Ae.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(p):p()})},$t.prototype.backendDB=function(){return this.idbdb},$t.prototype.isOpen=function(){return null!==this.idbdb},$t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},$t.prototype.hasFailed=function(){return null!==this._state.dbOpenError},$t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty($t.prototype,"tables",{get:function(){var e=this;return z(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),$t.prototype.transaction=function(){var e=function(t,n,r){var i=arguments.length;if(i<2)throw new Ae.InvalidArgument("Too few arguments");for(var u=new Array(i-1);--i;)u[i-1]=arguments[i];return r=u.pop(),[t,rt(u),r]}.apply(this,arguments);return this._transaction.apply(this,e)},$t.prototype._transaction=function(e,t,n){var r=this,i=c.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var u,p,h=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(p=t.map(function(w){if("string"!=typeof(w=w instanceof r.Table?w.name:w))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return w}),"r"==e||e===ye)u=ye;else{if("rw"!=e&&e!=d)throw new Ae.InvalidArgument("Invalid transaction mode: "+e);u=d}if(i){if(i.mode===ye&&u===d){if(!h)throw new Ae.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&p.forEach(function(w){if(i&&-1===i.storeNames.indexOf(w)){if(!h)throw new Ae.SubTransaction("Table "+w+" not included in parent transaction.");i=null}}),h&&i&&!i.active&&(i=null)}}catch(w){return i?i._promise(null,function(A,y){y(w)}):yt(w)}var g=function w(A,y,I,b,x){return M.resolve().then(function(){var P=c.transless||c,E=A._createTransaction(y,I,A._dbSchema,b);if(E.explicit=!0,P={trans:E,transless:P},b)E.idbtrans=b.idbtrans;else try{E.create(),E.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(K){return K.name===Ve.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return w(A,y,I,null,x)})):yt(K)}var T,B=Yt(x);return B&&Ge(),P=M.follow(function(){var K;(T=x.call(E,E))&&(B?(K=de.bind(null,null),T.then(K,K)):"function"==typeof T.next&&"function"==typeof T.throw&&(T=hr(T)))},P),(T&&"function"==typeof T.then?M.resolve(T).then(function(K){return E.active?K:yt(new Ae.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return T})).then(function(K){return b&&E._resolve(),E._completion.then(function(){return K})}).catch(function(K){return E._reject(K),yt(K)})})}.bind(null,this,u,p,i,n);return i?i._promise(u,g,"lock"):c.trans?Ht(c.transless,function(){return r._whenReady(g)}):this._whenReady(g)},$t.prototype.table=function(e){if(!ke(this._allTables,e))throw new Ae.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},$t);function $t(e,t){var n=this;this._middlewares={},this.verno=0;var r=$t.dependencies;this._options=t=R({addons:$t.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,cache:"cloned"},t),this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange},r=t.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var i,u,p,h,g,w={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:s,dbReadyPromise:null,cancelOpen:s,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:t.autoOpen};w.dbReadyPromise=new M(function(y){w.dbReadyResolve=y}),w.openCanceller=new M(function(y,I){w.cancelOpen=I}),this._state=w,this.name=e,this.on=Ue(this,"populate","blocked","versionchange","close",{ready:[ae,s]}),this.once=function(y,I){var b=function(){for(var x=[],P=0;P<arguments.length;P++)x[P]=arguments[P];n.on(y).unsubscribe(b),I.apply(n,x)};return n.on(y,b)},this.on.ready.subscribe=Te(this.on.ready.subscribe,function(y){return function(I,b){$t.vip(function(){var x,P=n._state;P.openComplete?(P.dbOpenError||M.resolve().then(I),b&&y(I)):P.onReadyBeingFired?(P.onReadyBeingFired.push(I),b&&y(I)):(y(I),x=n,b||y(function E(){x.on.ready.unsubscribe(I),x.on.ready.unsubscribe(E)}))})}}),this.Collection=(i=this,at(Oe.prototype,function(T,E){this.db=i;var b=f,x=null;if(E)try{b=E()}catch(B){x=B}var P=T._ctx;this._ctx={table:E=P.table,index:P.index,isPrimKey:!P.index||E.schema.primKey.keyPath&&P.index===E.schema.primKey.name,range:b,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:x,or:P.or,valueMapper:(T=E.hook.reading.fire)!==l?T:null}})),this.Table=(u=this,at(Pe.prototype,function(y,I,b){this.db=u,this._tx=b,this.name=y,this.schema=I,this.hook=u._allTables[y]?u._allTables[y].hook:Ue(null,{creating:[O,s],reading:[v,l],updating:[ge,s],deleting:[fe,s]})})),this.Transaction=(p=this,at(Un.prototype,function(y,I,b,x,P){var E=this;"readonly"!==y&&I.forEach(function(T){(T=null===(T=b[T])||void 0===T?void 0:T.yProps)&&(I=I.concat(T.map(function(B){return B.updatesTable})))}),this.db=p,this.mode=y,this.storeNames=I,this.schema=b,this.chromeTransactionDurability=x,this.idbtrans=null,this.on=Ue(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(T,B){E._resolve=T,E._reject=B}),this._completion.then(function(){E.active=!1,E.on.complete.fire()},function(T){var B=E.active;return E.active=!1,E.on.error.fire(T),E.parent?E.parent._reject(T):B&&E.idbtrans&&E.idbtrans.abort(),yt(T)})})),this.Version=(h=this,at(qr.prototype,function(y){this.db=h,this._cfg={version:y,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(g=this,at(cn.prototype,function(y,I,b){if(this.db=g,this._ctx={table:y,index:":id"===I?null:I,or:b},this._cmp=this._ascending=U,this._descending=function(x,P){return U(P,x)},this._max=function(x,P){return 0<U(x,P)?x:P},this._min=function(x,P){return U(x,P)<0?x:P},this._IDBKeyRange=g._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ae.MissingAPI})),this.on("versionchange",function(y){0<y.newVersion?console.warn("Another connection wants to upgrade database '".concat(n.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(n.name,"'. Closing db now to resume the delete request.")),n.close({disableAutoOpen:!1})}),this.on("blocked",function(y){!y.newVersion||y.newVersion<y.oldVersion?console.warn("Dexie.delete('".concat(n.name,"') was blocked")):console.warn("Upgrade '".concat(n.name,"' blocked by other connection holding version ").concat(y.oldVersion/10))}),this._maxKey=Pn(t.IDBKeyRange),this._createTransaction=function(y,I,b,x){return new n.Transaction(y,I,b,n._options.chromeTransactionDurability,x)},this._fireOnBlocked=function(y){n.on("blocked").fire(y),ot.filter(function(I){return I.name===n.name&&I!==n&&!I._state.vcFired}).map(function(I){return I.on("versionchange").fire(y)})},this.use(Gr),this.use(Jr),this.use(Yr),this.use(Vr),this.use($r);var A=new Proxy(this,{get:function(y,I,b){if("_vip"===I)return!0;if("table"===I)return function(P){return Qn(n.table(P),A)};var x=Reflect.get(y,I,b);return x instanceof Pe?Qn(x,A):"tables"===I?x.map(function(P){return Qn(P,A)}):"_createTransaction"===I?function(){return Qn(x.apply(this,arguments),A)}:x}});this.vip=A,r.forEach(function(y){return y(n)})}xn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";var er,Hr=(gr.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},gr.prototype[xn]=function(){return this},gr);function gr(e){this._subscribe=e}try{er={indexedDB:W.indexedDB||W.mozIndexedDB||W.webkitIndexedDB||W.msIndexedDB,IDBKeyRange:W.IDBKeyRange||W.webkitIDBKeyRange}}catch{er={indexedDB:null,IDBKeyRange:null}}function Br(e){var t,n=!1,r=new Hr(function(i){var p,u=Yt(e),h=!1,g={},w={},A={get closed(){return h},unsubscribe:function(){h||(h=!0,p&&p.abort(),y&&hn.storagemutated.unsubscribe(b))}};i.start&&i.start(A);var y=!1,I=function(){return on(x)},b=function(P){Jn(g,P),lr(w,g)&&I()},x=function(){var P,E,T;!h&&er.indexedDB&&(g={},P={},p&&p.abort(),p=new AbortController,T=function(B){var K=Zt();try{u&&Ge();var D=Fe(e,B);return D=u?D.finally(de):D}finally{K&&tn()}}(E={subscr:P,signal:p.signal,requery:I,querier:e,trans:null}),Promise.resolve(T).then(function(B){n=!0,t=B,h||E.signal.aborted||(g={},function(K){for(var D in K)if(ke(K,D))return;return 1}(w=P)||y||(hn(In,b),y=!0),on(function(){return!h&&i.next&&i.next(B)}))},function(B){n=!1,["DatabaseClosedError","AbortError"].includes(B?.name)||h||on(function(){h||i.error&&i.error(B)})}))};return setTimeout(I,0),A});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var Kn=Tn;function br(e){var t=Cn;try{Cn=!0,hn.storagemutated.fire(e),pr(e,!0)}finally{Cn=t}}Me(Kn,R(R({},a),{delete:function(e){return new Kn(e,{addons:[]}).delete()},exists:function(e){return new Kn(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=Kn.dependencies).indexedDB,t=t.IDBKeyRange,(ur(n)?Promise.resolve(n.databases()).then(function(r){return r.map(function(i){return i.name}).filter(function(i){return i!==Tt})}):ar(n,t).toCollection().primaryKeys()).then(e)}catch{return yt(new Ae.MissingAPI)}var t,n},defineClass:function(){return function(e){se(this,e)}},ignoreTransaction:function(e){return c.trans?Ht(c.transless,e):e()},vip:sr,async:function(e){return function(){try{var t=hr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:M.resolve(t)}catch(n){return yt(n)}}},spawn:function(e,t,n){try{var r=hr(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:M.resolve(r)}catch(i){return yt(i)}},currentTransaction:{get:function(){return c.trans||null}},waitFor:function(e,t){return t=M.resolve("function"==typeof e?Kn.ignoreTransaction(e):e).timeout(t||6e4),c.trans?c.trans.waitFor(t):t},Promise:M,debug:{get:function(){return me},set:function(e){Ot(e)}},derive:xe,extend:se,props:Me,override:Te,Events:Ue,on:hn,liveQuery:Br,extendObservabilitySet:Jn,getByKeyPath:pt,setByKeyPath:st,delByKeyPath:function(e,t){"string"==typeof t?st(e,t,void 0):"length"in t&&[].map.call(t,function(n){st(e,n,void 0)})},shallowClone:ct,deepClone:He,getObjectDiff:yr,cmp:U,asap:Ze,minKey:-1/0,addons:[],connections:ot,errnames:Ve,dependencies:er,cache:Bn,semVer:"4.2.0",version:"4.2.0".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),Kn.maxKey=Pn(Kn.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(hn(In,function(e){Cn||(e=new CustomEvent(kn,{detail:e}),Cn=!0,dispatchEvent(e),Cn=!1)}),addEventListener(kn,function(e){e=e.detail,Cn||br(e)}));var Dn,Cn=!1,Kr=function(){};return typeof BroadcastChannel<"u"&&((Kr=function(){(Dn=new BroadcastChannel(kn)).onmessage=function(e){return e.data&&br(e.data)}})(),"function"==typeof Dn.unref&&Dn.unref(),hn(In,function(e){Cn||Dn.postMessage(e)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(e){if(!Tn.disableBfCache&&e.persisted){me&&console.debug("Dexie: handling persisted pagehide"),Dn?.close();for(var t=0,n=ot;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!Tn.disableBfCache&&e.persisted&&(me&&console.debug("Dexie: handling persisted pageshow"),Kr(),br({all:new ln(-1/0,[[]])}))})),M.rejectionMapper=function(e,t){return!e||e instanceof qt||e instanceof TypeError||e instanceof SyntaxError||!e.name||!$[e.name]?e:(t=new $[e.name](t||e.message,e),"stack"in e&&De(t,"stack",{get:function(){return this.inner.stack}}),t)},Ot(me),R(Tn,Object.freeze({__proto__:null,Dexie:Tn,liveQuery:Br,Entity:S,cmp:U,PropModification:Q,replacePrefix:function(e,t){return new Q({replacePrefix:[e,t]})},add:function(e){return new Q({add:e})},remove:function(e){return new Q({remove:e})},default:Tn,RangeSet:ln,mergeRanges:qn,rangesOverlap:Or}),{default:Tn}),Tn}()},65592:(X,_e,R)=>{"use strict";R.d(_e,{y:()=>ke});var N=R(80305),W=R(55113),z=R(14850),V=R(88407),se=R(82653),be=R(84674),nt=R(81441);let ke=(()=>{class xe{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const qe=new xe;return qe.source=this,qe.operator=Ie,qe}subscribe(Ie,qe,Te){const Re=function De(xe){return xe&&xe instanceof N.Lv||function ut(xe){return xe&&(0,be.m)(xe.next)&&(0,be.m)(xe.error)&&(0,be.m)(xe.complete)}(xe)&&(0,W.Nn)(xe)}(Ie)?Ie:new N.Hp(Ie,qe,Te);return(0,nt.x)(()=>{const{operator:Ze,source:pt}=this;Re.add(Ze?Ze.call(Re,pt):pt?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(qe){Ie.error(qe)}}forEach(Ie,qe){return new(qe=Me(qe))((Te,Re)=>{const Ze=new N.Hp({next:pt=>{try{Ie(pt)}catch(st){Re(st),Ze.unsubscribe()}},error:Re,complete:Te});this.subscribe(Ze)})}_subscribe(Ie){var qe;return null===(qe=this.source)||void 0===qe?void 0:qe.subscribe(Ie)}[z.L](){return this}pipe(...Ie){return(0,V.U)(Ie)(this)}toPromise(Ie){return new(Ie=Me(Ie))((qe,Te)=>{let Re;this.subscribe(Ze=>Re=Ze,Ze=>Te(Ze),()=>qe(Re))})}}return xe.create=St=>new xe(St),xe})();function Me(xe){var St;return null!==(St=xe??se.config.Promise)&&void 0!==St?St:Promise}},80305:(X,_e,R)=>{"use strict";R.d(_e,{Hp:()=>Te,Lv:()=>xe});var N=R(84674),W=R(55113),z=R(82653),V=R(93894),se=R(72420);const be=Me("C",void 0,void 0);function Me(ct,we,rt){return{kind:ct,value:we,error:rt}}var ut=R(87599),De=R(81441);class xe extends W.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,W.Nn)(we)&&we.add(this)):this.destination=st}static create(we,rt,un){return new Te(we,rt,un)}next(we){this.isStopped?pt(function ke(ct){return Me("N",ct,void 0)}(we),this):this._next(we)}error(we){this.isStopped?pt(function nt(ct){return Me("E",void 0,ct)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?pt(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const St=Function.prototype.bind;function Ie(ct,we){return St.call(ct,we)}class qe{constructor(we){this.partialObserver=we}next(we){const{partialObserver:rt}=this;if(rt.next)try{rt.next(we)}catch(un){Re(un)}}error(we){const{partialObserver:rt}=this;if(rt.error)try{rt.error(we)}catch(un){Re(un)}else Re(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(rt){Re(rt)}}}class Te extends xe{constructor(we,rt,un){let Nt;if(super(),(0,N.m)(we)||!we)Nt={next:we??void 0,error:rt??void 0,complete:un??void 0};else{let He;this&&z.config.useDeprecatedNextContext?(He=Object.create(we),He.unsubscribe=()=>this.unsubscribe(),Nt={next:we.next&&Ie(we.next,He),error:we.error&&Ie(we.error,He),complete:we.complete&&Ie(we.complete,He)}):Nt=we}this.destination=new qe(Nt)}}function Re(ct){z.config.useDeprecatedSynchronousErrorHandling?(0,De.O)(ct):(0,V.h)(ct)}function pt(ct,we){const{onStoppedNotification:rt}=z.config;rt&&ut.z.setTimeout(()=>rt(ct,we))}const st={closed:!0,next:se.Z,error:function Ze(ct){throw ct},complete:se.Z}},82653:(X,_e,R)=>{"use strict";R.d(_e,{config:()=>N});const N={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},87599:(X,_e,R)=>{"use strict";R.d(_e,{z:()=>N});const N={setTimeout(W,z,...V){const{delegate:se}=N;return se?.setTimeout?se.setTimeout(W,z,...V):setTimeout(W,z,...V)},clearTimeout(W){const{delegate:z}=N;return(z?.clearTimeout||clearTimeout)(W)},delegate:void 0}},14850:(X,_e,R)=>{"use strict";R.d(_e,{L:()=>N});const N="function"==typeof Symbol&&Symbol.observable||"@@observable"},59732:(X,_e,R)=>{"use strict";R.d(_e,{B:()=>W});const W=(0,R(82306).d)(z=>function(se){z(this),this.message=se?`${se.length} errors occurred during unsubscription:\n${se.map((be,nt)=>`${nt+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=se})},49039:(X,_e,R)=>{"use strict";function N(W,z){if(W){const V=W.indexOf(z);0<=V&&W.splice(V,1)}}R.d(_e,{P:()=>N})},82306:(X,_e,R)=>{"use strict";function N(W){const V=W(se=>{Error.call(se),se.stack=(new Error).stack});return V.prototype=Object.create(Error.prototype),V.prototype.constructor=V,V}R.d(_e,{d:()=>N})},81441:(X,_e,R)=>{"use strict";R.d(_e,{O:()=>V,x:()=>z});var N=R(82653);let W=null;function z(se){if(N.config.useDeprecatedSynchronousErrorHandling){const be=!W;if(be&&(W={errorThrown:!1,error:null}),se(),be){const{errorThrown:nt,error:ke}=W;if(W=null,nt)throw ke}}else se()}function V(se){N.config.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=se)}},42737:(X,_e,R)=>{"use strict";function N(W){return W}R.d(_e,{y:()=>N})},84674:(X,_e,R)=>{"use strict";function N(W){return"function"==typeof W}R.d(_e,{m:()=>N})},72420:(X,_e,R)=>{"use strict";function N(){}R.d(_e,{Z:()=>N})},93894:(X,_e,R)=>{"use strict";R.d(_e,{h:()=>z});var N=R(82653),W=R(87599);function z(V){W.z.setTimeout(()=>{const{onUnhandledError:se}=N.config;if(!se)throw V;se(V)})}},83801:X=>{X.exports=function _e(R,N){this.v=R,this.k=N},X.exports.__esModule=!0,X.exports.default=X.exports},72331:(X,_e,R)=>{var N=R(61169);function W(){var z,V,se="function"==typeof Symbol?Symbol:{},be=se.iterator||"@@iterator",nt=se.toStringTag||"@@toStringTag";function ke(Te,Re,Ze,pt){var ct=Object.create((Re&&Re.prototype instanceof ut?Re:ut).prototype);return N(ct,"_invoke",function(we,rt,un){var Nt,He,nn,On=0,Nn=un||[],En=!1,Gt={p:0,n:0,v:z,a:mn,f:mn.bind(z,4),d:function(Yt,vn){return Nt=Yt,He=0,nn=z,Gt.n=vn,Me}};function mn(Kt,Yt){for(He=Kt,nn=Yt,V=0;!En&&On&&!vn&&V<Nn.length;V++){var vn,qt=Nn[V],Sn=Gt.p,bn=qt[2];Kt>3?(vn=bn===Yt)&&(nn=qt[(He=qt[4])?5:(He=3,3)],qt[4]=qt[5]=z):qt[0]<=Sn&&((vn=Kt<2&&Sn<qt[1])?(He=0,Gt.v=Yt,Gt.n=qt[1]):Sn<bn&&(vn=Kt<3||qt[0]>Yt||Yt>bn)&&(qt[4]=Kt,qt[5]=Yt,Gt.n=bn,He=0))}if(vn||Kt>1)return Me;throw En=!0,Yt}return function(Kt,Yt,vn){if(On>1)throw TypeError("Generator is already running");for(En&&1===Yt&&mn(Yt,vn),He=Yt,nn=vn;(V=He<2?z:nn)||!En;){Nt||(He?He<3?(He>1&&(Gt.n=-1),mn(He,nn)):Gt.n=nn:Gt.v=nn);try{if(On=2,Nt){if(He||(Kt="next"),V=Nt[Kt]){if(!(V=V.call(Nt,nn)))throw TypeError("iterator result is not an object");if(!V.done)return V;nn=V.value,He<2&&(He=0)}else 1===He&&(V=Nt.return)&&V.call(Nt),He<2&&(nn=TypeError("The iterator does not provide a '"+Kt+"' method"),He=1);Nt=z}else if((V=(En=Gt.n<0)?nn:we.call(rt,Gt))!==Me)break}catch(qt){Nt=z,He=1,nn=qt}finally{On=1}}return{value:V,done:En}}}(Te,Ze,pt),!0),ct}var Me={};function ut(){}function De(){}function xe(){}V=Object.getPrototypeOf;var St=[][be]?V(V([][be]())):(N(V={},be,function(){return this}),V),Ie=xe.prototype=ut.prototype=Object.create(St);function qe(Te){return Object.setPrototypeOf?Object.setPrototypeOf(Te,xe):(Te.__proto__=xe,N(Te,nt,"GeneratorFunction")),Te.prototype=Object.create(Ie),Te}return De.prototype=xe,N(Ie,"constructor",xe),N(xe,"constructor",De),De.displayName="GeneratorFunction",N(xe,nt,"GeneratorFunction"),N(Ie),N(Ie,nt,"Generator"),N(Ie,be,function(){return this}),N(Ie,"toString",function(){return"[object Generator]"}),(X.exports=W=function(){return{w:ke,m:qe}},X.exports.__esModule=!0,X.exports.default=X.exports)()}X.exports=W,X.exports.__esModule=!0,X.exports.default=X.exports},34132:(X,_e,R)=>{var N=R(91034);X.exports=function W(z,V,se,be,nt){var ke=N(z,V,se,be,nt);return ke.next().then(function(Me){return Me.done?Me.value:ke.next()})},X.exports.__esModule=!0,X.exports.default=X.exports},91034:(X,_e,R)=>{var N=R(72331),W=R(73524);X.exports=function z(V,se,be,nt,ke){return new W(N().w(V,se,be,nt),ke||Promise)},X.exports.__esModule=!0,X.exports.default=X.exports},73524:(X,_e,R)=>{var N=R(83801),W=R(61169);X.exports=function z(V,se){function be(ke,Me,ut,De){try{var xe=V[ke](Me),St=xe.value;return St instanceof N?se.resolve(St.v).then(function(Ie){be("next",Ie,ut,De)},function(Ie){be("throw",Ie,ut,De)}):se.resolve(St).then(function(Ie){xe.value=Ie,ut(xe)},function(Ie){return be("throw",Ie,ut,De)})}catch(Ie){De(Ie)}}var nt;this.next||(W(z.prototype),W(z.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),W(this,"_invoke",function(ke,Me,ut){function De(){return new se(function(xe,St){be(ke,ut,xe,St)})}return nt=nt?nt.then(De,De):De()},!0)},X.exports.__esModule=!0,X.exports.default=X.exports},61169:X=>{function _e(R,N,W,z){var V=Object.defineProperty;try{V({},"",{})}catch{V=0}X.exports=_e=function(be,nt,ke,Me){function ut(De,xe){_e(be,De,function(St){return this._invoke(De,xe,St)})}nt?V?V(be,nt,{value:ke,enumerable:!Me,configurable:!Me,writable:!Me}):be[nt]=ke:(ut("next",0),ut("throw",1),ut("return",2))},X.exports.__esModule=!0,X.exports.default=X.exports,_e(R,N,W,z)}X.exports=_e,X.exports.__esModule=!0,X.exports.default=X.exports},62261:X=>{X.exports=function _e(R){var N=Object(R),W=[];for(var z in N)W.unshift(z);return function V(){for(;W.length;)if((z=W.pop())in N)return V.value=z,V.done=!1,V;return V.done=!0,V}},X.exports.__esModule=!0,X.exports.default=X.exports},17061:(X,_e,R)=>{var N=R(83801),W=R(72331),z=R(34132),V=R(91034),se=R(73524),be=R(62261),nt=R(38249);function ke(){"use strict";var Me=W(),ut=Me.m(ke),De=(Object.getPrototypeOf?Object.getPrototypeOf(ut):ut.__proto__).constructor;function xe(qe){var Te="function"==typeof qe&&qe.constructor;return!!Te&&(Te===De||"GeneratorFunction"===(Te.displayName||Te.name))}var St={throw:1,return:2,break:3,continue:3};function Ie(qe){var Te,Re;return function(Ze){Te||(Te={stop:function(){return Re(Ze.a,2)},catch:function(){return Ze.v},abrupt:function(st,ct){return Re(Ze.a,St[st],ct)},delegateYield:function(st,ct,we){return Te.resultName=ct,Re(Ze.d,nt(st),we)},finish:function(st){return Re(Ze.f,st)}},Re=function(st,ct,we){Ze.p=Te.prev,Ze.n=Te.next;try{return st(ct,we)}finally{Te.next=Ze.n}}),Te.resultName&&(Te[Te.resultName]=Ze.v,Te.resultName=void 0),Te.sent=Ze.v,Te.next=Ze.n;try{return qe.call(this,Te)}finally{Ze.p=Te.prev,Ze.n=Te.next}}}return(X.exports=ke=function(){return{wrap:function(Re,Ze,pt,st){return Me.w(Ie(Re),Ze,pt,st&&st.reverse())},isGeneratorFunction:xe,mark:Me.m,awrap:function(Re,Ze){return new N(Re,Ze)},AsyncIterator:se,async:function(Re,Ze,pt,st,ct){return(xe(Ze)?V:z)(Ie(Re),Ze,pt,st,ct)},keys:be,values:nt}},X.exports.__esModule=!0,X.exports.default=X.exports)()}X.exports=ke,X.exports.__esModule=!0,X.exports.default=X.exports},38249:(X,_e,R)=>{var N=R(18698).default;X.exports=function W(z){if(null!=z){var V=z["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],se=0;if(V)return V.call(z);if("function"==typeof z.next)return z;if(!isNaN(z.length))return{next:function(){return z&&se>=z.length&&(z=void 0),{value:z&&z[se++],done:!z}}}}throw new TypeError(N(z)+" is not iterable")},X.exports.__esModule=!0,X.exports.default=X.exports},18698:X=>{function _e(R){return X.exports=_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(N){return typeof N}:function(N){return N&&"function"==typeof Symbol&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},X.exports.__esModule=!0,X.exports.default=X.exports,_e(R)}X.exports=_e,X.exports.__esModule=!0,X.exports.default=X.exports},64687:(X,_e,R)=>{var N=R(17061)();X.exports=N;try{regeneratorRuntime=N}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=N:Function("r","regeneratorRuntime = r")(N)}},7331:(X,_e,R)=>{"use strict";R.d(_e,{ZP:()=>qe});var N=R(93667);const W=Symbol.for("Dexie"),z=globalThis[W]||(globalThis[W]=N);if(N.semVer!==z.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${N.semVer} and ${z.semVer}`);const qe=z},15861:(X,_e,R)=>{"use strict";function N(z,V,se,be,nt,ke,Me){try{var ut=z[ke](Me),De=ut.value}catch(xe){return void se(xe)}ut.done?V(De):Promise.resolve(De).then(be,nt)}function W(z){return function(){var V=this,se=arguments;return new Promise(function(be,nt){var ke=z.apply(V,se);function Me(De){N(ke,be,nt,Me,ut,"next",De)}function ut(De){N(ke,be,nt,Me,ut,"throw",De)}Me(void 0)})}}R.d(_e,{Z:()=>W})}}]);