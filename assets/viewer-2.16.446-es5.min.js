window.ngxZone.runOutsideAngular(() => {
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?globalThis["pdfjs-dist/build/pdf"]=module.exports=t():"function"==typeof define&&define.amd?define("pdfjs-dist/build/pdf",[],t):"object"==typeof exports?globalThis["pdfjs-dist/build/pdf"]=exports["pdfjs-dist/build/pdf"]=t():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=t()}(globalThis,(()=>(()=>{var __webpack_modules__=[,(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0;t.arrayByteLength=arrayByteLength;t.arraysToBytes=function arraysToBytes(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let i=0;for(let n=0;n<t;n++)i+=arrayByteLength(e[n]);let n=0;const r=new Uint8Array(i);for(let i=0;i<t;i++){let t=e[i];t instanceof Uint8Array||(t="string"==typeof t?stringToBytes(t):new Uint8Array(t));const s=t.byteLength;r.set(t,n);n+=s}return r};t.assert=function assert(e,t){e||unreachable(t)};t.bytesToString=function bytesToString(e){"object"==typeof e&&null!==e&&void 0!==e.length||unreachable("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const n=[];for(let r=0;r<t;r+=i){const s=Math.min(r+i,t),a=e.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")};t.createPromiseCapability=function createPromiseCapability(){const e=Object.create(null);let t=!1;Object.defineProperty(e,"settled",{get:()=>t});e.promise=new Promise((function(i,n){e.resolve=function(e){t=!0;i(e)};e.reject=function(e){t=!0;n(e)}}));return e};t.createValidAbsoluteUrl=function createValidAbsoluteUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e=`http://${e}`)}if(i.tryConvertEncoding)try{e=stringToUTF8String(e)}catch(e){}}const n=t?new URL(e,t):new URL(e);if(_isValidProtocol(n))return n}catch(e){}return null};t.escapeString=function escapeString(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))};t.getModificationDate=function getModificationDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")};t.getVerbosityLevel=function getVerbosityLevel(){return r};t.info=function info(e){r>=n.INFOS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log(`Info: ${e}`):Window&&Window.ngxConsole?Window.ngxConsole.log(`Info: ${e}`):console.log(`Info: ${e}`))};t.isArrayBuffer=function isArrayBuffer(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength};t.isArrayEqual=function isArrayEqual(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0};t.isAscii=function isAscii(e){return/^[\x00-\x7F]*$/.test(e)};t.objectFromMap=function objectFromMap(e){const t=Object.create(null);for(const[i,n]of e)t[i]=n;return t};t.objectSize=function objectSize(e){return Object.keys(e).length};t.setVerbosityLevel=function setVerbosityLevel(e){Number.isInteger(e)&&(r=e)};t.shadow=shadow;t.string32=function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)};t.stringToBytes=stringToBytes;t.stringToPDFString=function stringToPDFString(e){if(e[0]>="ï"){let t;"þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8");if(t)try{const i=new TextDecoder(t,{fatal:!0}),n=stringToBytes(e);return i.decode(n)}catch(e){warn(`stringToPDFString: "${e}".`)}}const t=[];for(let i=0,n=e.length;i<n;i++){const n=o[e.charCodeAt(i)];t.push(n?String.fromCharCode(n):e.charAt(i))}return t.join("")};t.stringToUTF16BEString=function stringToUTF16BEString(e){const t=["þÿ"];for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);t.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return t.join("")};t.stringToUTF8String=stringToUTF8String;t.unreachable=unreachable;t.utf8StringToString=function utf8StringToString(e){return unescape(encodeURIComponent(e))};t.warn=warn;i(2);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.LINE_FACTOR=1.35;t.LINE_DESCENT_FACTOR=.35;t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationEditorPrefix="pdfjs_internal_editor_";t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.PageActionEventType={O:"PageOpen",C:"PageClose"};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=n;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function warn(e){r>=n.WARNINGS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log(`Warning: ${e}`):Window&&Window.ngxConsole?Window.ngxConsole.log(`Warning: ${e}`):console.log(`Warning: ${e}`))}function unreachable(e){throw new Error(e)}function _isValidProtocol(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return!0;default:return!1}}function shadow(e,t,i){Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!1});return i}const s=function BaseExceptionClosure(){function BaseException(e,t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=e;this.name=t}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();t.BaseException=s;t.PasswordException=class PasswordException extends s{constructor(e,t){super(e,"PasswordException");this.code=t}};t.UnknownErrorException=class UnknownErrorException extends s{constructor(e,t){super(e,"UnknownErrorException");this.details=t}};t.InvalidPDFException=class InvalidPDFException extends s{constructor(e){super(e,"InvalidPDFException")}};t.MissingPDFException=class MissingPDFException extends s{constructor(e){super(e,"MissingPDFException")}};t.UnexpectedResponseException=class UnexpectedResponseException extends s{constructor(e,t){super(e,"UnexpectedResponseException");this.status=t}};t.FormatError=class FormatError extends s{constructor(e){super(e,"FormatError")}};t.AbortException=class AbortException extends s{constructor(e){super(e,"AbortException")}};function stringToBytes(e){"string"!=typeof e&&unreachable("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}function arrayByteLength(e){if(void 0!==e.length)return e.length;if(void 0!==e.byteLength)return e.byteLength;unreachable("Invalid argument for arrayByteLength")}t.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const e=new Uint8Array(4);e[0]=1;return 1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const a=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class Util{static makeHexColor(e,t,i){return`#${a[e]}${a[t]}${a[i]}`}static scaleMinMax(e,t){let i;if(e[0]){if(e[0]<0){i=t[0];t[0]=t[1];t[1]=i}t[0]*=e[0];t[1]*=e[0];if(e[3]<0){i=t[2];t[2]=t[3];t[3]=i}t[2]*=e[3];t[3]*=e[3]}else{i=t[0];t[0]=t[2];t[2]=i;i=t[1];t[1]=t[3];t[3]=i;if(e[1]<0){i=t[2];t[2]=t[3];t[3]=i}t[2]*=e[1];t[3]*=e[1];if(e[2]<0){i=t[0];t[0]=t[1];t[1]=i}t[0]*=e[2];t[1]*=e[2]}t[0]+=e[4];t[1]+=e[4];t[2]+=e[5];t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=Util.applyTransform(e,t),n=Util.applyTransform(e.slice(2,4),t),r=Util.applyTransform([e[0],e[3]],t),s=Util.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],s[0]),Math.min(i[1],n[1],r[1],s[1]),Math.max(i[0],n[0],r[0],s[0]),Math.max(i[1],n[1],r[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(i+s)/2,o=Math.sqrt((i+s)**2-4*(i*s-r*n))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);if(e[0]>e[2]){t[0]=e[2];t[2]=e[0]}if(e[1]>e[3]){t[1]=e[3];t[3]=e[1]}return t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[i,r,n,s]}static bezierBoundingBox(e,t,i,n,r,s,a,o){const l=[],c=[[],[]];let d,h,u,p,g,f,m,v;for(let c=0;c<2;++c){if(0===c){h=6*e-12*i+6*r;d=-3*e+9*i-9*r+3*a;u=3*i-3*e}else{h=6*t-12*n+6*s;d=-3*t+9*n-9*s+3*o;u=3*n-3*t}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;p=-u/h;0<p&&p<1&&l.push(p)}else{m=h*h-4*u*d;v=Math.sqrt(m);if(!(m<0)){g=(-h+v)/(2*d);0<g&&g<1&&l.push(g);f=(-h-v)/(2*d);0<f&&f<1&&l.push(f)}}}let _,b=l.length;const w=b;for(;b--;){p=l[b];_=1-p;c[0][b]=_*_*_*e+3*_*_*p*i+3*_*p*p*r+p*p*p*a;c[1][b]=_*_*_*t+3*_*_*p*n+3*_*p*p*s+p*p*p*o}c[0][w]=e;c[1][w]=t;c[0][w+1]=a;c[1][w+1]=o;c[0].length=c[1].length=w+2;return[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}t.Util=Util;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(e){return decodeURIComponent(escape(e))}},(e,t,i)=>{"use strict";if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){globalThis.btoa}();!function checkNodeAtob(){globalThis.atob}();!function checkDOMMatrix(){globalThis.DOMMatrix}();!function checkReadableStream(){globalThis.ReadableStream}();!function checkArrayAt(){Array.prototype.at||i(3)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||i(76)}();!function checkStructuredClone(){globalThis.structuredClone||i(86)}()}},(e,t,i)=>{i(4);var n=i(75);e.exports=n("Array","at")},(e,t,i)=>{"use strict";var n=i(5),r=i(41),s=i(65),a=i(63),o=i(70);n({target:"Array",proto:!0},{at:function at(e){var t=r(this),i=s(t),n=a(e),o=n>=0?n:i+n;return o<0||o>=i?void 0:t[o]}});o("at")},(e,t,i)=>{var n=i(6),r=i(7).f,s=i(45),a=i(49),o=i(39),l=i(57),c=i(69);e.exports=function(e,t){var i,d,h,u,p,g=e.target,f=e.global,m=e.stat;if(i=f?n:m?n[g]||o(g,{}):(n[g]||{}).prototype)for(d in t){u=t[d];h=e.dontCallGetSet?(p=r(i,d))&&p.value:i[d];if(!c(f?d:g+(m?".":"#")+d,e.forced)&&void 0!==h){if(typeof u==typeof h)continue;l(u,h)}(e.sham||h&&h.sham)&&s(u,"sham",!0);a(i,d,u,e)}}},e=>{var check=function(e){return e&&e.Math==Math&&e};e.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(e,t,i)=>{var n=i(8),r=i(10),s=i(12),a=i(13),o=i(14),l=i(20),c=i(40),d=i(43),h=Object.getOwnPropertyDescriptor;t.f=n?h:function getOwnPropertyDescriptor(e,t){e=o(e);t=l(t);if(d)try{return h(e,t)}catch(e){}if(c(e,t))return a(!r(s.f,e,t),e[t])}},(e,t,i)=>{var n=i(9);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,i)=>{var n=i(11),r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},(e,t,i)=>{var n=i(9);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},(e,t)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);t.f=r?function propertyIsEnumerable(e){var t=n(this,e);return!!t&&t.enumerable}:i},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,i)=>{var n=i(15),r=i(18);e.exports=function(e){return n(r(e))}},(e,t,i)=>{var n=i(16),r=i(9),s=i(17),a=Object,o=n("".split);e.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?o(e,""):a(e)}:a},(e,t,i)=>{var n=i(11),r=Function.prototype,s=r.bind,a=r.call,o=n&&s.bind(a,a);e.exports=n?function(e){return e&&o(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},(e,t,i)=>{var n=i(16),r=n({}.toString),s=n("".slice);e.exports=function(e){return s(r(e),8,-1)}},(e,t,i)=>{var n=i(19),r=TypeError;e.exports=function(e){if(n(e))throw r("Can't call method on "+e);return e}},e=>{e.exports=function(e){return null==e}},(e,t,i)=>{var n=i(21),r=i(24);e.exports=function(e){var t=n(e,"string");return r(t)?t:t+""}},(e,t,i)=>{var n=i(10),r=i(22),s=i(24),a=i(31),o=i(34),l=i(35),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var i,l=a(e,d);if(l){void 0===t&&(t="default");i=n(l,e,t);if(!r(i)||s(i))return i;throw c("Can't convert object to primitive value")}void 0===t&&(t="number");return o(e,t)}},(e,t,i)=>{var n=i(23),r="object"==typeof document&&document.all,s=void 0===r&&void 0!==r;e.exports=s?function(e){return"object"==typeof e?null!==e:n(e)||e===r}:function(e){return"object"==typeof e?null!==e:n(e)}},e=>{e.exports=function(e){return"function"==typeof e}},(e,t,i)=>{var n=i(25),r=i(23),s=i(26),a=i(27),o=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return r(t)&&s(t.prototype,o(e))}},(e,t,i)=>{var n=i(6),r=i(23),aFunction=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?aFunction(n[e]):n[e]&&n[e][t]}},(e,t,i)=>{var n=i(16);e.exports=n({}.isPrototypeOf)},(e,t,i)=>{var n=i(28);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,i)=>{var n=i(29),r=i(9);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},(e,t,i)=>{var n,r,s=i(6),a=i(30),o=s.process,l=s.Deno,c=o&&o.versions||l&&l.version,d=c&&c.v8;d&&(r=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1]));!r&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(r=+n[1]);e.exports=r},(e,t,i)=>{var n=i(25);e.exports=n("navigator","userAgent")||""},(e,t,i)=>{var n=i(32),r=i(19);e.exports=function(e,t){var i=e[t];return r(i)?void 0:n(i)}},(e,t,i)=>{var n=i(23),r=i(33),s=TypeError;e.exports=function(e){if(n(e))return e;throw s(r(e)+" is not a function")}},e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},(e,t,i)=>{var n=i(10),r=i(23),s=i(22),a=TypeError;e.exports=function(e,t){var i,o;if("string"===t&&r(i=e.toString)&&!s(o=n(i,e)))return o;if(r(i=e.valueOf)&&!s(o=n(i,e)))return o;if("string"!==t&&r(i=e.toString)&&!s(o=n(i,e)))return o;throw a("Can't convert object to primitive value")}},(e,t,i)=>{var n=i(6),r=i(36),s=i(40),a=i(42),o=i(28),l=i(27),c=r("wks"),d=n.Symbol,h=d&&d.for,u=l?d:d&&d.withoutSetter||a;e.exports=function(e){if(!s(c,e)||!o&&"string"!=typeof c[e]){var t="Symbol."+e;o&&s(d,e)?c[e]=d[e]:c[e]=l&&h?h(t):u(t)}return c[e]}},(e,t,i)=>{var n=i(37),r=i(38);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.1/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,i)=>{var n=i(6),r=i(39),s="__core-js_shared__",a=n[s]||r(s,{});e.exports=a},(e,t,i)=>{var n=i(6),r=Object.defineProperty;e.exports=function(e,t){try{r(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},(e,t,i)=>{var n=i(16),r=i(41),s=n({}.hasOwnProperty);e.exports=Object.hasOwn||function hasOwn(e,t){return s(r(e),t)}},(e,t,i)=>{var n=i(18),r=Object;e.exports=function(e){return r(n(e))}},(e,t,i)=>{var n=i(16),r=0,s=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+s,36)}},(e,t,i)=>{var n=i(8),r=i(9),s=i(44);e.exports=!n&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},(e,t,i)=>{var n=i(6),r=i(22),s=n.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},(e,t,i)=>{var n=i(8),r=i(46),s=i(13);e.exports=n?function(e,t,i){return r.f(e,t,s(1,i))}:function(e,t,i){e[t]=i;return e}},(e,t,i)=>{var n=i(8),r=i(43),s=i(47),a=i(48),o=i(20),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",u="configurable",p="writable";t.f=n?s?function defineProperty(e,t,i){a(e);t=o(t);a(i);if("function"==typeof e&&"prototype"===t&&"value"in i&&p in i&&!i.writable){var n=d(e,t);if(n&&n.writable){e[t]=i.value;i={configurable:u in i?i.configurable:n.configurable,enumerable:h in i?i.enumerable:n.enumerable,writable:!1}}}return c(e,t,i)}:c:function defineProperty(e,t,i){a(e);t=o(t);a(i);if(r)try{return c(e,t,i)}catch(e){}if("get"in i||"set"in i)throw l("Accessors not supported");"value"in i&&(e[t]=i.value);return e}},(e,t,i)=>{var n=i(8),r=i(9);e.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(e,t,i)=>{var n=i(22),r=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw s(r(e)+" is not an object")}},(e,t,i)=>{var n=i(23),r=i(46),s=i(50),a=i(39);e.exports=function(e,t,i,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:t;n(i)&&s(i,c,o);if(o.global)l?e[t]=i:a(t,i);else{try{o.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:r.f(e,t,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},(e,t,i)=>{var n=i(9),r=i(23),s=i(40),a=i(8),o=i(51).CONFIGURABLE,l=i(52),c=i(53),d=c.enforce,h=c.get,u=Object.defineProperty,p=a&&!n((function(){return 8!==u((function(){}),"length",{value:8}).length})),g=String(String).split("String"),f=e.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]");i&&i.getter&&(t="get "+t);i&&i.setter&&(t="set "+t);(!s(e,"name")||o&&e.name!==t)&&(a?u(e,"name",{value:t,configurable:!0}):e.name=t);p&&i&&s(i,"arity")&&e.length!==i.arity&&u(e,"length",{value:i.arity});try{i&&s(i,"constructor")&&i.constructor?a&&u(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);s(n,"source")||(n.source=g.join("string"==typeof t?t:""));return e};Function.prototype.toString=f((function toString(){return r(this)&&h(this).source||l(this)}),"toString")},(e,t,i)=>{var n=i(8),r=i(40),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=r(s,"name"),l=o&&"something"===function something(){}.name,c=o&&(!n||n&&a(s,"name").configurable);e.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},(e,t,i)=>{var n=i(16),r=i(23),s=i(38),a=n(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return a(e)});e.exports=s.inspectSource},(e,t,i)=>{var n,r,s,a=i(54),o=i(6),l=i(16),c=i(22),d=i(45),h=i(40),u=i(38),p=i(55),g=i(56),f="Object already initialized",m=o.TypeError,v=o.WeakMap;if(a||u.state){var _=u.state||(u.state=new v),b=l(_.get),w=l(_.has),y=l(_.set);n=function(e,t){if(w(_,e))throw m(f);t.facade=e;y(_,e,t);return t};r=function(e){return b(_,e)||{}};s=function(e){return w(_,e)}}else{var P=p("state");g[P]=!0;n=function(e,t){if(h(e,P))throw m(f);t.facade=e;d(e,P,t);return t};r=function(e){return h(e,P)?e[P]:{}};s=function(e){return h(e,P)}}e.exports={set:n,get:r,has:s,enforce:function(e){return s(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!c(t)||(i=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return i}}}},(e,t,i)=>{var n=i(6),r=i(23),s=n.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},(e,t,i)=>{var n=i(36),r=i(42),s=n("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},e=>{e.exports={}},(e,t,i)=>{var n=i(40),r=i(58),s=i(7),a=i(46);e.exports=function(e,t,i){for(var o=r(t),l=a.f,c=s.f,d=0;d<o.length;d++){var h=o[d];n(e,h)||i&&n(i,h)||l(e,h,c(t,h))}}},(e,t,i)=>{var n=i(25),r=i(16),s=i(59),a=i(68),o=i(48),l=r([].concat);e.exports=n("Reflect","ownKeys")||function ownKeys(e){var t=s.f(o(e)),i=a.f;return i?l(t,i(e)):t}},(e,t,i)=>{var n=i(60),r=i(67).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return n(e,r)}},(e,t,i)=>{var n=i(16),r=i(40),s=i(14),a=i(61).indexOf,o=i(56),l=n([].push);e.exports=function(e,t){var i,n=s(e),c=0,d=[];for(i in n)!r(o,i)&&r(n,i)&&l(d,i);for(;t.length>c;)r(n,i=t[c++])&&(~a(d,i)||l(d,i));return d}},(e,t,i)=>{var n=i(14),r=i(62),s=i(65),createMethod=function(e){return function(t,i,a){var o,l=n(t),c=s(l),d=r(a,c);if(e&&i!=i){for(;c>d;)if((o=l[d++])!=o)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}};e.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(e,t,i)=>{var n=i(63),r=Math.max,s=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):s(i,t)}},(e,t,i)=>{var n=i(64);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},e=>{var t=Math.ceil,i=Math.floor;e.exports=Math.trunc||function trunc(e){var n=+e;return(n>0?i:t)(n)}},(e,t,i)=>{var n=i(66);e.exports=function(e){return n(e.length)}},(e,t,i)=>{var n=i(63),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,i)=>{var n=i(9),r=i(23),s=/#|\.prototype\./,isForced=function(e,t){var i=o[a(e)];return i==c||i!=l&&(r(t)?n(t):!!t)},a=isForced.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=isForced.data={},l=isForced.NATIVE="N",c=isForced.POLYFILL="P";e.exports=isForced},(e,t,i)=>{var n=i(35),r=i(71),s=i(46).f,a=n("unscopables"),o=Array.prototype;null==o[a]&&s(o,a,{configurable:!0,value:r(null)});e.exports=function(e){o[a][e]=!0}},(e,t,i)=>{var n,r=i(48),s=i(72),a=i(67),o=i(56),l=i(74),c=i(44),d=i(55),h=d("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return"<script>"+e+"</"+"script>"},NullProtoObjectViaActiveX=function(e){e.write(scriptTag(""));e.close();var t=e.parentWindow.Object;e=null;return t},NullProtoObject=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"!=typeof document?document.domain&&n?NullProtoObjectViaActiveX(n):function(){var e,t=c("iframe");t.style.display="none";l.appendChild(t);t.src=String("javascript:");(e=t.contentWindow.document).open();e.write(scriptTag("document.F=Object"));e.close();return e.F}():NullProtoObjectViaActiveX(n);for(var e=a.length;e--;)delete NullProtoObject.prototype[a[e]];return NullProtoObject()};o[h]=!0;e.exports=Object.create||function create(e,t){var i;if(null!==e){EmptyConstructor.prototype=r(e);i=new EmptyConstructor;EmptyConstructor.prototype=null;i[h]=e}else i=NullProtoObject();return void 0===t?i:s.f(i,t)}},(e,t,i)=>{var n=i(8),r=i(47),s=i(46),a=i(48),o=i(14),l=i(73);t.f=n&&!r?Object.defineProperties:function defineProperties(e,t){a(e);for(var i,n=o(t),r=l(t),c=r.length,d=0;c>d;)s.f(e,i=r[d++],n[i]);return e}},(e,t,i)=>{var n=i(60),r=i(67);e.exports=Object.keys||function keys(e){return n(e,r)}},(e,t,i)=>{var n=i(25);e.exports=n("document","documentElement")},(e,t,i)=>{var n=i(6),r=i(16);e.exports=function(e,t){return r(n[e].prototype[t])}},(e,t,i)=>{i(77)},(e,t,i)=>{"use strict";var n=i(78),r=i(65),s=i(63),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function at(e){var t=a(this),i=r(t),n=s(e),o=n>=0?n:i+n;return o<0||o>=i?void 0:t[o]}))},(e,t,i)=>{"use strict";var n,r,s,a=i(79),o=i(8),l=i(6),c=i(23),d=i(22),h=i(40),u=i(80),p=i(33),g=i(45),f=i(49),m=i(46).f,v=i(26),_=i(82),b=i(84),w=i(35),y=i(42),P=i(53),S=P.enforce,E=P.get,A=l.Int8Array,x=A&&A.prototype,C=l.Uint8ClampedArray,T=C&&C.prototype,M=A&&_(A),k=x&&_(x),I=Object.prototype,D=l.TypeError,L=w("toStringTag"),R=y("TYPED_ARRAY_TAG"),O="TypedArrayConstructor",N=a&&!!b&&"Opera"!==u(l.opera),B=!1,G={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(e){var t=_(e);if(d(t)){var i=E(t);return i&&h(i,O)?i.TypedArrayConstructor:getTypedArrayConstructor(t)}},isTypedArray=function(e){if(!d(e))return!1;var t=u(e);return h(G,t)||h(V,t)};for(n in G)(s=(r=l[n])&&r.prototype)?S(s).TypedArrayConstructor=r:N=!1;for(n in V)(s=(r=l[n])&&r.prototype)&&(S(s).TypedArrayConstructor=r);if(!N||!c(M)||M===Function.prototype){M=function TypedArray(){throw D("Incorrect invocation")};if(N)for(n in G)l[n]&&b(l[n],M)}if(!N||!k||k===I){k=M.prototype;if(N)for(n in G)l[n]&&b(l[n].prototype,k)}N&&_(T)!==k&&b(T,k);if(o&&!h(k,L)){B=!0;m(k,L,{get:function(){return d(this)?this[R]:void 0}});for(n in G)l[n]&&g(l[n],R,n)}e.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:B&&R,aTypedArray:function(e){if(isTypedArray(e))return e;throw D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||v(M,e)))return e;throw D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(o){if(i)for(var r in G){var s=l[r];if(s&&h(s.prototype,e))try{delete s.prototype[e]}catch(i){try{s.prototype[e]=t}catch(e){}}}k[e]&&!i||f(k,e,i?t:N&&x[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(o){if(b){if(i)for(n in G)if((r=l[n])&&h(r,e))try{delete r[e]}catch(e){}if(M[e]&&!i)return;try{return f(M,e,i?t:N&&M[e]||t)}catch(e){}}for(n in G)!(r=l[n])||r[e]&&!i||f(r,e,t)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(e){if(!d(e))return!1;var t=u(e);return"DataView"===t||h(G,t)||h(V,t)},isTypedArray:isTypedArray,TypedArray:M,TypedArrayPrototype:k}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,i)=>{var n=i(81),r=i(23),s=i(17),a=i(35)("toStringTag"),o=Object,l="Arguments"==s(function(){return arguments}());e.exports=n?s:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=o(e),a))?i:l?s(t):"Object"==(n=s(t))&&r(t.callee)?"Arguments":n}},(e,t,i)=>{var n={};n[i(35)("toStringTag")]="z";e.exports="[object z]"===String(n)},(e,t,i)=>{var n=i(40),r=i(23),s=i(41),a=i(55),o=i(83),l=a("IE_PROTO"),c=Object,d=c.prototype;e.exports=o?c.getPrototypeOf:function(e){var t=s(e);if(n(t,l))return t[l];var i=t.constructor;return r(i)&&t instanceof i?i.prototype:t instanceof c?d:null}},(e,t,i)=>{var n=i(9);e.exports=!n((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(e,t,i)=>{var n=i(16),r=i(48),s=i(85);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]);t=i instanceof Array}catch(e){}return function setPrototypeOf(i,n){r(i);s(n);t?e(i,n):i.__proto__=n;return i}}():void 0)},(e,t,i)=>{var n=i(23),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},(e,t,i)=>{i(87);i(94);i(96);i(118);i(120);var n=i(129);e.exports=n.structuredClone},(e,t,i)=>{"use strict";var n=i(14),r=i(70),s=i(88),a=i(53),o=i(46).f,l=i(89),c=i(93),d=i(37),h=i(8),u="Array Iterator",p=a.set,g=a.getterFor(u);e.exports=l(Array,"Array",(function(e,t){p(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=g(this),t=e.target,i=e.kind,n=e.index++;if(!t||n>=t.length){e.target=void 0;return c(void 0,!0)}return c("keys"==i?n:"values"==i?t[n]:[n,t[n]],!1)}),"values");var f=s.Arguments=s.Array;r("keys");r("values");r("entries");if(!d&&h&&"values"!==f.name)try{o(f,"name",{value:"values"})}catch(e){}},e=>{e.exports={}},(e,t,i)=>{"use strict";var n=i(5),r=i(10),s=i(37),a=i(51),o=i(23),l=i(90),c=i(82),d=i(84),h=i(92),u=i(45),p=i(49),g=i(35),f=i(88),m=i(91),v=a.PROPER,_=a.CONFIGURABLE,b=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,y=g("iterator"),P="keys",S="values",E="entries",returnThis=function(){return this};e.exports=function(e,t,i,a,g,m,A){l(i,t,a);var x,C,T,getIterationMethod=function(e){if(e===g&&L)return L;if(!w&&e in I)return I[e];switch(e){case P:return function keys(){return new i(this,e)};case S:return function values(){return new i(this,e)};case E:return function entries(){return new i(this,e)}}return function(){return new i(this)}},M=t+" Iterator",k=!1,I=e.prototype,D=I[y]||I["@@iterator"]||g&&I[g],L=!w&&D||getIterationMethod(g),R="Array"==t&&I.entries||D;if(R&&(x=c(R.call(new e)))!==Object.prototype&&x.next){s||c(x)===b||(d?d(x,b):o(x[y])||p(x,y,returnThis));h(x,M,!0,!0);s&&(f[M]=returnThis)}if(v&&g==S&&D&&D.name!==S)if(!s&&_)u(I,"name",S);else{k=!0;L=function values(){return r(D,this)}}if(g){C={values:getIterationMethod(S),keys:m?L:getIterationMethod(P),entries:getIterationMethod(E)};if(A)for(T in C)(w||k||!(T in I))&&p(I,T,C[T]);else n({target:t,proto:!0,forced:w||k},C)}s&&!A||I[y]===L||p(I,y,L,{name:g});f[t]=L;return C}},(e,t,i)=>{"use strict";var n=i(91).IteratorPrototype,r=i(71),s=i(13),a=i(92),o=i(88),returnThis=function(){return this};e.exports=function(e,t,i,l){var c=t+" Iterator";e.prototype=r(n,{next:s(+!l,i)});a(e,c,!1,!0);o[c]=returnThis;return e}},(e,t,i)=>{"use strict";var n,r,s,a=i(9),o=i(23),l=i(22),c=i(71),d=i(82),h=i(49),u=i(35),p=i(37),g=u("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(r=d(d(s)))!==Object.prototype&&(n=r):f=!0);!l(n)||a((function(){var e={};return n[g].call(e)!==e}))?n={}:p&&(n=c(n));o(n[g])||h(n,g,(function(){return this}));e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},(e,t,i)=>{var n=i(46).f,r=i(40),s=i(35)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype);e&&!r(e,s)&&n(e,s,{configurable:!0,value:t})}},e=>{e.exports=function(e,t){return{value:e,done:t}}},(e,t,i)=>{var n=i(81),r=i(49),s=i(95);n||r(Object.prototype,"toString",s,{unsafe:!0})},(e,t,i)=>{"use strict";var n=i(81),r=i(80);e.exports=n?{}.toString:function toString(){return"[object "+r(this)+"]"}},(e,t,i)=>{i(97)},(e,t,i)=>{"use strict";i(98)("Map",(function(e){return function Map(){return e(this,arguments.length?arguments[0]:void 0)}}),i(115))},(e,t,i)=>{"use strict";var n=i(5),r=i(6),s=i(16),a=i(69),o=i(49),l=i(99),c=i(106),d=i(112),h=i(23),u=i(19),p=i(22),g=i(9),f=i(113),m=i(92),v=i(114);e.exports=function(e,t,i){var _=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),w=_?"set":"add",y=r[e],P=y&&y.prototype,S=y,E={},fixMethod=function(e){var t=s(P[e]);o(P,e,"add"==e?function add(e){t(this,0===e?0:e);return this}:"delete"==e?function(e){return!(b&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function get(e){return b&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function has(e){return!(b&&!p(e))&&t(this,0===e?0:e)}:function set(e,i){t(this,0===e?0:e,i);return this})};if(a(e,!h(y)||!(b||P.forEach&&!g((function(){(new y).entries().next()}))))){S=i.getConstructor(t,e,_,w);l.enable()}else if(a(e,!0)){var A=new S,x=A[w](b?{}:-0,1)!=A,C=g((function(){A.has(1)})),T=f((function(e){new y(e)})),M=!b&&g((function(){for(var e=new y,t=5;t--;)e[w](t,t);return!e.has(-0)}));if(!T){(S=t((function(e,t){d(e,P);var i=v(new y,e,S);u(t)||c(t,i[w],{that:i,AS_ENTRIES:_});return i}))).prototype=P;P.constructor=S}if(C||M){fixMethod("delete");fixMethod("has");_&&fixMethod("get")}(M||x)&&fixMethod(w);b&&P.clear&&delete P.clear}E[e]=S;n({global:!0,constructor:!0,forced:S!=y},E);m(S,e);b||i.setStrong(S,e,_);return S}},(e,t,i)=>{var n=i(5),r=i(16),s=i(56),a=i(22),o=i(40),l=i(46).f,c=i(59),d=i(100),h=i(103),u=i(42),p=i(105),g=!1,f=u("meta"),m=0,setMetadata=function(e){l(e,f,{value:{objectID:"O"+m++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){};g=!0;var e=c.f,t=r([].splice),i={};i[f]=1;if(e(i).length){c.f=function(i){for(var n=e(i),r=0,s=n.length;r<s;r++)if(n[r]===f){t(n,r,1);break}return n};n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f})}},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,f)){if(!h(e))return"F";if(!t)return"E";setMetadata(e)}return e[f].objectID},getWeakData:function(e,t){if(!o(e,f)){if(!h(e))return!0;if(!t)return!1;setMetadata(e)}return e[f].weakData},onFreeze:function(e){p&&g&&h(e)&&!o(e,f)&&setMetadata(e);return e}};s[f]=!0},(e,t,i)=>{var n=i(17),r=i(14),s=i(59).f,a=i(101),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function getOwnPropertyNames(e){return o&&"Window"==n(e)?function(e){try{return s(e)}catch(e){return a(o)}}(e):s(r(e))}},(e,t,i)=>{var n=i(62),r=i(65),s=i(102),a=Array,o=Math.max;e.exports=function(e,t,i){for(var l=r(e),c=n(t,l),d=n(void 0===i?l:i,l),h=a(o(d-c,0)),u=0;c<d;c++,u++)s(h,u,e[c]);h.length=u;return h}},(e,t,i)=>{"use strict";var n=i(20),r=i(46),s=i(13);e.exports=function(e,t,i){var a=n(t);a in e?r.f(e,a,s(0,i)):e[a]=i}},(e,t,i)=>{var n=i(9),r=i(22),s=i(17),a=i(104),o=Object.isExtensible,l=n((function(){o(1)}));e.exports=l||a?function isExtensible(e){return!!r(e)&&((!a||"ArrayBuffer"!=s(e))&&(!o||o(e)))}:o},(e,t,i)=>{var n=i(9);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},(e,t,i)=>{var n=i(9);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(e,t,i)=>{var n=i(107),r=i(10),s=i(48),a=i(33),o=i(108),l=i(65),c=i(26),d=i(109),h=i(110),u=i(111),p=TypeError,Result=function(e,t){this.stopped=e;this.result=t},g=Result.prototype;e.exports=function(e,t,i){var f,m,v,_,b,w,y,P=i&&i.that,S=!(!i||!i.AS_ENTRIES),E=!(!i||!i.IS_RECORD),A=!(!i||!i.IS_ITERATOR),x=!(!i||!i.INTERRUPTED),C=n(t,P),stop=function(e){f&&u(f,"normal",e);return new Result(!0,e)},callFn=function(e){if(S){s(e);return x?C(e[0],e[1],stop):C(e[0],e[1])}return x?C(e,stop):C(e)};if(E)f=e.iterator;else if(A)f=e;else{if(!(m=h(e)))throw p(a(e)+" is not iterable");if(o(m)){for(v=0,_=l(e);_>v;v++)if((b=callFn(e[v]))&&c(g,b))return b;return new Result(!1)}f=d(e,m)}w=E?e.next:f.next;for(;!(y=r(w,f)).done;){try{b=callFn(y.value)}catch(e){u(f,"throw",e)}if("object"==typeof b&&b&&c(g,b))return b}return new Result(!1)}},(e,t,i)=>{var n=i(16),r=i(32),s=i(11),a=n(n.bind);e.exports=function(e,t){r(e);return void 0===t?e:s?a(e,t):function(){return e.apply(t,arguments)}}},(e,t,i)=>{var n=i(35),r=i(88),s=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},(e,t,i)=>{var n=i(10),r=i(32),s=i(48),a=i(33),o=i(110),l=TypeError;e.exports=function(e,t){var i=arguments.length<2?o(e):t;if(r(i))return s(n(i,e));throw l(a(e)+" is not iterable")}},(e,t,i)=>{var n=i(80),r=i(31),s=i(19),a=i(88),o=i(35)("iterator");e.exports=function(e){if(!s(e))return r(e,o)||r(e,"@@iterator")||a[n(e)]}},(e,t,i)=>{var n=i(10),r=i(48),s=i(31);e.exports=function(e,t,i){var a,o;r(e);try{if(!(a=s(e,"return"))){if("throw"===t)throw i;return i}a=n(a,e)}catch(e){o=!0;a=e}if("throw"===t)throw i;if(o)throw a;r(a);return i}},(e,t,i)=>{var n=i(26),r=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw r("Incorrect invocation")}},(e,t,i)=>{var n=i(35)("iterator"),r=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){r=!0}};a[n]=function(){return this};Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var s={};s[n]=function(){return{next:function(){return{done:i=!0}}}};e(s)}catch(e){}return i}},(e,t,i)=>{var n=i(23),r=i(22),s=i(84);e.exports=function(e,t,i){var a,o;s&&n(a=t.constructor)&&a!==i&&r(o=a.prototype)&&o!==i.prototype&&s(e,o);return e}},(e,t,i)=>{"use strict";var n=i(46).f,r=i(71),s=i(116),a=i(107),o=i(112),l=i(19),c=i(106),d=i(89),h=i(93),u=i(117),p=i(8),g=i(99).fastKey,f=i(53),m=f.set,v=f.getterFor;e.exports={getConstructor:function(e,t,i,d){var h=e((function(e,n){o(e,u);m(e,{type:t,index:r(null),first:void 0,last:void 0,size:0});p||(e.size=0);l(n)||c(n,e[d],{that:e,AS_ENTRIES:i})})),u=h.prototype,f=v(t),define=function(e,t,i){var n,r,s=f(e),a=getEntry(e,t);if(a)a.value=i;else{s.last=a={index:r=g(t,!0),key:t,value:i,previous:n=s.last,next:void 0,removed:!1};s.first||(s.first=a);n&&(n.next=a);p?s.size++:e.size++;"F"!==r&&(s.index[r]=a)}return e},getEntry=function(e,t){var i,n=f(e),r=g(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};s(u,{clear:function clear(){for(var e=f(this),t=e.index,i=e.first;i;){i.removed=!0;i.previous&&(i.previous=i.previous.next=void 0);delete t[i.index];i=i.next}e.first=e.last=void 0;p?e.size=0:this.size=0},delete:function(e){var t=this,i=f(t),n=getEntry(t,e);if(n){var r=n.next,s=n.previous;delete i.index[n.index];n.removed=!0;s&&(s.next=r);r&&(r.previous=s);i.first==n&&(i.first=r);i.last==n&&(i.last=s);p?i.size--:t.size--}return!!n},forEach:function forEach(e){for(var t,i=f(this),n=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:i.first;){n(t.value,t.key,this);for(;t&&t.removed;)t=t.previous}},has:function has(e){return!!getEntry(this,e)}});s(u,i?{get:function get(e){var t=getEntry(this,e);return t&&t.value},set:function set(e,t){return define(this,0===e?0:e,t)}}:{add:function add(e){return define(this,e=0===e?0:e,e)}});p&&n(u,"size",{get:function(){return f(this).size}});return h},setStrong:function(e,t,i){var n=t+" Iterator",r=v(t),s=v(n);d(e,t,(function(e,t){m(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=s(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;if(!e.target||!(e.last=i=i?i.next:e.state.first)){e.target=void 0;return h(void 0,!0)}return h("keys"==t?i.key:"values"==t?i.value:[i.key,i.value],!1)}),i?"entries":"values",!i,!0);u(t)}}},(e,t,i)=>{var n=i(49);e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},(e,t,i)=>{"use strict";var n=i(25),r=i(46),s=i(35),a=i(8),o=s("species");e.exports=function(e){var t=n(e),i=r.f;a&&t&&!t[o]&&i(t,o,{configurable:!0,get:function(){return this}})}},(e,t,i)=>{i(119)},(e,t,i)=>{"use strict";i(98)("Set",(function(e){return function Set(){return e(this,arguments.length?arguments[0]:void 0)}}),i(115))},(e,t,i)=>{var n,r=i(37),s=i(5),a=i(6),o=i(25),l=i(16),c=i(9),d=i(42),h=i(23),u=i(121),p=i(19),g=i(22),f=i(24),m=i(106),v=i(48),_=i(80),b=i(40),w=i(102),y=i(45),P=i(65),S=i(122),E=i(123),A=i(125),x=i(29),C=i(126),T=i(127),M=i(128),k=a.Object,I=a.Date,D=a.Error,L=a.EvalError,R=a.RangeError,O=a.ReferenceError,N=a.SyntaxError,B=a.TypeError,G=a.URIError,V=a.PerformanceMark,W=a.WebAssembly,U=W&&W.CompileError||D,j=W&&W.LinkError||D,H=W&&W.RuntimeError||D,z=o("DOMException"),q=o("Set"),$=o("Map"),X=$.prototype,K=l(X.has),Y=l(X.get),Q=l(X.set),Z=l(q.prototype.add),J=o("Object","keys"),ee=l([].push),te=l((!0).valueOf),ie=l(1..valueOf),ne=l("".valueOf),re=l(I.prototype.getTime),se=d("structuredClone"),ae="DataCloneError",oe="Transferring",checkBasicSemantic=function(e){return!c((function(){var t=new a.Set([7]),i=e(t),n=e(k(7));return i==t||!i.has(7)||"object"!=typeof n||7!=n}))&&e},checkErrorsCloning=function(e,t){return!c((function(){var i=new t,n=e({a:i,b:i});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===i.stack)}))},le=a.structuredClone,ce=r||!checkErrorsCloning(le,D)||!checkErrorsCloning(le,z)||!(n=le,!c((function(){var e=n(new a.AggregateError([1],se,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=se||3!=e.cause}))),de=!le&&checkBasicSemantic((function(e){return new V(se,{detail:e}).detail})),he=checkBasicSemantic(le)||de,throwUncloneable=function(e){throw new z("Uncloneable type: "+e,ae)},throwUnpolyfillable=function(e,t){throw new z((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ae)},structuredCloneInternal=function(e,t){f(e)&&throwUncloneable("Symbol");if(!g(e))return e;if(t){if(K(t,e))return Y(t,e)}else t=new $;var i,n,r,s,l,c,d,u,p,m,v=_(e),S=!1;switch(v){case"Array":r=[];S=!0;break;case"Object":r={};S=!0;break;case"Map":r=new $;S=!0;break;case"Set":r=new q;S=!0;break;case"RegExp":r=new RegExp(e.source,E(e));break;case"Error":switch(n=e.name){case"AggregateError":r=o("AggregateError")([]);break;case"EvalError":r=L();break;case"RangeError":r=R();break;case"ReferenceError":r=O();break;case"SyntaxError":r=N();break;case"TypeError":r=B();break;case"URIError":r=G();break;case"CompileError":r=U();break;case"LinkError":r=j();break;case"RuntimeError":r=H();break;default:r=D()}S=!0;break;case"DOMException":r=new z(e.message,e.name);S=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=a[v];g(i)||throwUnpolyfillable(v);r=new i(structuredCloneInternal(e.buffer,t),e.byteOffset,"DataView"===v?e.byteLength:e.length);break;case"DOMQuad":try{r=new DOMQuad(structuredCloneInternal(e.p1,t),structuredCloneInternal(e.p2,t),structuredCloneInternal(e.p3,t),structuredCloneInternal(e.p4,t))}catch(t){he?r=he(e):throwUnpolyfillable(v)}break;case"FileList":if(s=function(){var e;try{e=new a.DataTransfer}catch(t){try{e=new a.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null}()){for(l=0,c=P(e);l<c;l++)s.items.add(structuredCloneInternal(e[l],t));r=s.files}else he?r=he(e):throwUnpolyfillable(v);break;case"ImageData":try{r=new ImageData(structuredCloneInternal(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){he?r=he(e):throwUnpolyfillable(v)}break;default:if(he)r=he(e);else switch(v){case"BigInt":r=k(e.valueOf());break;case"Boolean":r=k(te(e));break;case"Number":r=k(ie(e));break;case"String":r=k(ne(e));break;case"Date":r=new I(re(e));break;case"ArrayBuffer":(i=a.DataView)||"function"==typeof e.slice||throwUnpolyfillable(v);try{if("function"==typeof e.slice)r=e.slice(0);else{c=e.byteLength;r=new ArrayBuffer(c);p=new i(e);m=new i(r);for(l=0;l<c;l++)m.setUint8(l,p.getUint8(l))}}catch(e){throw new z("ArrayBuffer is detached",ae)}break;case"SharedArrayBuffer":r=e;break;case"Blob":try{r=e.slice(0,e.size,e.type)}catch(e){throwUnpolyfillable(v)}break;case"DOMPoint":case"DOMPointReadOnly":i=a[v];try{r=i.fromPoint?i.fromPoint(e):new i(e.x,e.y,e.z,e.w)}catch(e){throwUnpolyfillable(v)}break;case"DOMRect":case"DOMRectReadOnly":i=a[v];try{r=i.fromRect?i.fromRect(e):new i(e.x,e.y,e.width,e.height)}catch(e){throwUnpolyfillable(v)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=a[v];try{r=i.fromMatrix?i.fromMatrix(e):new i(e)}catch(e){throwUnpolyfillable(v)}break;case"AudioData":case"VideoFrame":h(e.clone)||throwUnpolyfillable(v);try{r=e.clone()}catch(e){throwUncloneable(v)}break;case"File":try{r=new File([e],e.name,e)}catch(e){throwUnpolyfillable(v)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(v);default:throwUncloneable(v)}}Q(t,e,r);if(S)switch(v){case"Array":case"Object":d=J(e);for(l=0,c=P(d);l<c;l++){u=d[l];w(r,u,structuredCloneInternal(e[u],t))}break;case"Map":e.forEach((function(e,i){Q(r,structuredCloneInternal(i,t),structuredCloneInternal(e,t))}));break;case"Set":e.forEach((function(e){Z(r,structuredCloneInternal(e,t))}));break;case"Error":y(r,"message",structuredCloneInternal(e.message,t));b(e,"cause")&&y(r,"cause",structuredCloneInternal(e.cause,t));"AggregateError"==n&&(r.errors=structuredCloneInternal(e.errors,t));case"DOMException":A&&y(r,"stack",structuredCloneInternal(e.stack,t))}return r},ue=le&&!c((function(){if(T&&x>92||M&&x>94||C&&x>97)return!1;var e=new ArrayBuffer(8),t=le(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),tryToTransfer=function(e,t){if(!g(e))throw B("Transfer option cannot be converted to a sequence");var i=[];m(e,(function(e){ee(i,v(e))}));var n,r,s,o,l,c,d=0,p=P(i);if(ue){o=le(i,{transfer:i});for(;d<p;)Q(t,i[d],o[d++])}else for(;d<p;){n=i[d++];if(K(t,n))throw new z("Duplicate transferable",ae);switch(r=_(n)){case"ImageBitmap":s=a.OffscreenCanvas;u(s)||throwUnpolyfillable(r,oe);try{(c=new s(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n);l=c.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":h(n.clone)&&h(n.close)||throwUnpolyfillable(r,oe);try{l=n.clone();n.close()}catch(e){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(r,oe)}if(void 0===l)throw new z("This object cannot be transferred: "+r,ae);Q(t,n,l)}};s({global:!0,enumerable:!0,sham:!ue,forced:ce},{structuredClone:function structuredClone(e){var t,i=S(arguments.length,1)>1&&!p(arguments[1])?v(arguments[1]):void 0,n=i?i.transfer:void 0;if(void 0!==n){t=new $;tryToTransfer(n,t)}return structuredCloneInternal(e,t)}})},(e,t,i)=>{var n=i(16),r=i(9),s=i(23),a=i(80),o=i(25),l=i(52),noop=function(){},c=[],d=o("Reflect","construct"),h=/^\s*(?:class|function)\b/,u=n(h.exec),p=!h.exec(noop),g=function isConstructor(e){if(!s(e))return!1;try{d(noop,c,e);return!0}catch(e){return!1}},f=function isConstructor(e){if(!s(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!u(h,l(e))}catch(e){return!0}};f.sham=!0;e.exports=!d||r((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?f:g},e=>{var t=TypeError;e.exports=function(e,i){if(e<i)throw t("Not enough arguments");return e}},(e,t,i)=>{var n=i(10),r=i(40),s=i(26),a=i(124),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in o||r(e,"flags")||!s(o,e)?t:n(a,e)}},(e,t,i)=>{"use strict";var n=i(48);e.exports=function(){var e=n(this),t="";e.hasIndices&&(t+="d");e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.dotAll&&(t+="s");e.unicode&&(t+="u");e.unicodeSets&&(t+="v");e.sticky&&(t+="y");return t}},(e,t,i)=>{var n=i(9),r=i(13);e.exports=!n((function(){var e=Error("a");if(!("stack"in e))return!0;Object.defineProperty(e,"stack",r(1,7));return 7!==e.stack}))},(e,t,i)=>{var n=i(127),r=i(128);e.exports=!n&&!r&&"object"==typeof window&&"object"==typeof document},e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(e,t,i)=>{var n=i(17),r=i(6);e.exports="process"==n(r.process)},(e,t,i)=>{var n=i(6);e.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0;exports.getDocument=getDocument;exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory;exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(131),_display_utils=__w_pdfjs_require__(134),_font_loader=__w_pdfjs_require__(137),_canvas=__w_pdfjs_require__(138),_worker_options=__w_pdfjs_require__(142),_is_node=__w_pdfjs_require__(140),_message_handler=__w_pdfjs_require__(143),_metadata=__w_pdfjs_require__(144),_optional_content_config=__w_pdfjs_require__(145),_transport_stream=__w_pdfjs_require__(146),_xfa_text=__w_pdfjs_require__(147);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,i){_classApplyDescriptorSet(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return _classApplyDescriptorGet(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classStaticPrivateFieldSpecSet(e,t,i,n){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(i,"set");_classApplyDescriptorSet(e,i,n);return n}function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}function _classStaticPrivateFieldSpecGet(e,t,i){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(i,"get");return _classApplyDescriptorGet(e,i)}function _classCheckPrivateStaticFieldDescriptor(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,ServiceWorkerOptions={showUnverifiedSignatures:!1};window.ServiceWorkerOptions=ServiceWorkerOptions;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;if(_is_node.isNodeJS){const{NodeCanvasFactory:e,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:i}=__w_pdfjs_require__(148);exports.DefaultCanvasFactory=DefaultCanvasFactory=e;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=i}function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){const t=new PDFDocumentLoadingTask;let i;if("string"==typeof e||e instanceof URL)i={url:e};else if((0,_util.isArrayBuffer)(e))i={data:e};else if(e instanceof PDFDataRangeTransport)i={range:e};else{if("object"!=typeof e)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");i=e}const n=e.baseHref,r=Object.create(null);let s=null,a=null;for(const e in i){const t=i[e];switch(e){case"url":if("undefined"!=typeof window)try{r[e]=n?new URL(t,window.location.origin+n).href:new URL(t,window.location).href;continue}catch(e){(0,_util.warn)(`Cannot create valid URL: "${e}".`)}else if("string"==typeof t||t instanceof URL){r[e]=t.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":s=t;continue;case"worker":a=t;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer)r[e]=new Uint8Array(t);else{if(t instanceof Uint8Array)break;if("string"==typeof t)r[e]=(0,_util.stringToBytes)(t);else if("object"!=typeof t||null===t||isNaN(t.length)){if(!(0,_util.isArrayBuffer)(t))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");r[e]=new Uint8Array(t)}else r[e]=new Uint8Array(t)}continue}r[e]=t}r.CMapReaderFactory=r.CMapReaderFactory||DefaultCMapReaderFactory;r.StandardFontDataFactory=r.StandardFontDataFactory||DefaultStandardFontDataFactory;r.ignoreErrors=!0!==r.stopAtErrors;r.fontExtraProperties=!0===r.fontExtraProperties;r.pdfBug=!0===r.pdfBug;r.enableXfa=!0===r.enableXfa;(!Number.isInteger(r.rangeChunkSize)||r.rangeChunkSize<1)&&(r.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE);("string"!=typeof r.docBaseUrl||(0,_display_utils.isDataScheme)(r.docBaseUrl))&&(r.docBaseUrl=null);(!Number.isInteger(r.maxImageSize)||r.maxImageSize<-1)&&(r.maxImageSize=-1);"function"==typeof r.cMapUrl?r.cMapUrl=r.cMapUrl():"string"!=typeof r.cMapUrl&&(r.cMapUrl=null);"function"==typeof r.standardFontDataUrl&&(r.standardFontDataUrl=r.standardFontDataUrl());"string"!=typeof r.standardFontDataUrl&&(r.standardFontDataUrl=null);"boolean"!=typeof r.useWorkerFetch&&(r.useWorkerFetch=r.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&r.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory);"boolean"!=typeof r.isEvalSupported&&(r.isEvalSupported=!0);"boolean"!=typeof r.disableFontFace&&(r.disableFontFace=_is_node.isNodeJS);"boolean"!=typeof r.useSystemFonts&&(r.useSystemFonts=!_is_node.isNodeJS&&!r.disableFontFace);"object"==typeof r.ownerDocument&&null!==r.ownerDocument||(r.ownerDocument=globalThis.document);"boolean"!=typeof r.disableRange&&(r.disableRange=!1);"boolean"!=typeof r.disableStream&&(r.disableStream=!1);"boolean"!=typeof r.disableAutoFetch&&(r.disableAutoFetch=!1);(0,_util.setVerbosityLevel)(r.verbosity);if(!a){const e={verbosity:r.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};a=e.port?PDFWorker.fromPort(e):new PDFWorker(e);t._worker=a}const o=t.docId;a.promise.then((function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(a,r,s,o),i=new Promise((function(e){let t;s?t=new _transport_stream.PDFDataTransportStream({length:r.length,initialData:r.initialData,progressiveDone:r.progressiveDone,contentDispositionFilename:r.contentDispositionFilename,disableRange:r.disableRange,disableStream:r.disableStream},s):r.data||(t=createPDFNetworkStream({url:r.url,length:r.length,httpHeaders:r.httpHeaders,withCredentials:r.withCredentials,rangeChunkSize:r.rangeChunkSize,disableRange:r.disableRange,disableStream:r.disableStream}));e(t)}));return Promise.all([e,i]).then((function(e){let[i,n]=e;if(t.destroyed)throw new Error("Loading aborted");const s=new _message_handler.MessageHandler(o,i,a.port),l=new WorkerTransport(s,t,n,r);t._transport=l;s.send("showUnverifiedSignatures",window.ServiceWorkerOptions.showUnverifiedSignatures);s.send("Ready",null)}))})).catch(t._capability.reject);return t}async function _fetchDocument(e,t,i,n){var r;if(e.destroyed)throw new Error("Worker was destroyed");if(i){t.length=i.length;t.initialData=i.initialData;t.progressiveDone=i.progressiveDone;t.contentDispositionFilename=i.contentDispositionFilename}let s=t.cMapUrl;"Function"===(null===(r=s)||void 0===r?void 0:r.constructor.name)&&(s=s());const a=await e.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.446",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?s:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});t.data&&(t.data=null);if(e.destroyed)throw new Error("Worker was destroyed");return a}class PDFDocumentLoadingTask{constructor(){var e,t;this._capability=(0,_util.createPromiseCapability)();this._transport=null;this._worker=null;this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(e=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=e++,e)),t}`;this.destroyed=!1;this.onPassword=null;this.onProgress=null;this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;await(null===(e=this._transport)||void 0===e?void 0:e.destroy());this._transport=null;if(this._worker){this._worker.destroy();this._worker=null}}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e;this.initialData=t;this.progressiveDone=i;this.contentDispositionFilename=n;this._rangeListeners=[];this._progressListeners=[];this._progressiveReadListeners=[];this._progressiveDoneListeners=[];this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const i of this._progressListeners)i(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e;this._transport=t;Object.defineProperty(this,"fingerprint",{get(){(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead.");return this.fingerprints[0]}});Object.defineProperty(this,"getStats",{value:async()=>{(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead.");return this.stats||{streamTypes:{},fontTypes:{}}}})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");return this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this._pageIndex=e;this._pageInfo=t;this._ownerDocument=n;this._transport=i;this._stats=r?new _display_utils.StatTimer:null;this._pdfBug=r;this.commonObjs=i.commonObjs;this.objs=new PDFObjects;this._bitmaps=new Set;this.cleanupAfterRender=!1;this.pendingCleanup=!1;this._intentStates=new Map;this._annotationPromises=new Map;this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:n=0,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._transport.getRenderingIntent(e);let i=this._annotationPromises.get(t.cacheKey);if(!i){i=this._transport.getAnnotations(this._pageIndex,t.renderingIntent);this._annotationPromises.set(t.cacheKey,i);i=i.then((e=>{for(const t of e){void 0!==t.titleObj&&Object.defineProperty(t,"title",{get(){(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead.");return t.titleObj.str}});void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get(){(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead.");return t.contentsObj.str}})}return e}))}return i}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,i,n;let{canvasContext:r,viewport:s,intent:a="display",annotationMode:o=_util.AnnotationMode.ENABLE,transform:l=null,imageLayer:c=null,canvasFactory:d=null,background:h=null,backgroundColorToReplace:u=null,optionalContentConfigPromise:p=null,annotationCanvasMap:g=null,pageColors:f=null,printAnnotationStorage:m=null}=e;if(void 0!==(null===(t=arguments[0])||void 0===t?void 0:t.renderInteractiveForms)){(0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead.");!0===arguments[0].renderInteractiveForms&&o===_util.AnnotationMode.ENABLE&&(o=_util.AnnotationMode.ENABLE_FORMS)}if(void 0!==(null===(i=arguments[0])||void 0===i?void 0:i.includeAnnotationStorage)){(0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead.");!0===arguments[0].includeAnnotationStorage&&o===_util.AnnotationMode.ENABLE&&(o=_util.AnnotationMode.ENABLE_STORAGE)}this._stats&&this._stats.time("Overall");const v=this._transport.getRenderingIntent(a,o,m);this.pendingCleanup=!1;p||(p=this._transport.getOptionalContentConfig());let _=this._intentStates.get(v.cacheKey);if(!_){_=Object.create(null);this._intentStates.set(v.cacheKey,_)}if(_.streamReaderCancelTimeout){clearTimeout(_.streamReaderCancelTimeout);_.streamReaderCancelTimeout=null}const b=d||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),w=!!(v.renderingIntent&_util.RenderingIntentFlag.PRINT);if(!_.displayReadyCapability){_.displayReadyCapability=(0,_util.createPromiseCapability)();_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(v)}const complete=e=>{_.renderTasks.delete(y);(this.cleanupAfterRender||w)&&(this.pendingCleanup=!0);this._tryCleanup();if(e){y.capability.reject(e);this._abortOperatorList({intentState:_,reason:e instanceof Error?e:new Error(e)})}else y.capability.resolve();if(this._stats){this._stats.timeEnd("Rendering");this._stats.timeEnd("Overall")}},y=new InternalRenderTask({callback:complete,params:{canvasContext:r,viewport:s,transform:l,imageLayer:c,background:h,backgroundColorToReplace:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:g,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:b,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:f});((n=_).renderTasks||(n.renderTasks=new Set)).add(y);const P=y.task;Promise.all([_.displayReadyCapability.promise,p]).then((e=>{let[t,i]=e;if(this.pendingCleanup)complete();else{this._stats&&this._stats.time("Rendering");y.initializeGraphics({transparency:t,optionalContentConfig:i});y.operatorListChanged()}})).catch(complete);return P}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:i=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=this._transport.getRenderingIntent(e,t,i,!0);let r,s=this._intentStates.get(n.cacheKey);if(!s){s=Object.create(null);this._intentStates.set(n.cacheKey,s)}if(!s.opListReadCapability){var a;r=Object.create(null);r.operatorListChanged=function operatorListChanged(){if(s.operatorList.lastChunk){s.opListReadCapability.resolve(s.operatorList);s.renderTasks.delete(r)}};s.opListReadCapability=(0,_util.createPromiseCapability)();((a=s).renderTasks||(a.renderTasks=new Set)).add(r);s.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null};this._stats&&this._stats.time("Page Request");this._pumpOperatorList(n)}return s.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:e=!1,includeMarkedContent:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,i){const n=t.getReader(),r={items:[],styles:Object.create(null)};!function pump(){n.read().then((function(t){let{value:i,done:n}=t;if(n)e(r);else{Object.assign(r.styles,i.styles);r.items.push(...i.items);pump()}}),i)}()}))}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values()){this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0});if(!t.opListReadCapability)for(const i of t.renderTasks){e.push(i.completed);i.cancel()}}this.objs.clear();for(const e of this._bitmaps)e.close();this._bitmaps.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;this.pendingCleanup=!1;return Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.pendingCleanup=!0;this._tryCleanup(e)||(this.cleanupAfterRender=!0);return!0}_tryCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.pendingCleanup)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;this._intentStates.clear();this.objs.clear();this._annotationPromises.clear();this._jsActionsPromise=null;this._structTreePromise=null;e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const e of this._bitmaps)e.close();this._bitmaps.clear();this.pendingCleanup=!1;return!0}_startRenderPage(e,t){const i=this._intentStates.get(t);if(i){this._stats&&this._stats.timeEnd("Page Request");i.displayReadyCapability&&i.displayReadyCapability.resolve(e)}}_renderPageChunk(e,t){for(let i=0,n=e.length;i<n;i++){t.operatorList.fnArray.push(e.fnArray[i]);t.operatorList.argsArray.push(e.argsArray[i])}t.operatorList.lastChunk=e.lastChunk;t.operatorList.separateAnnots=e.separateAnnots;for(const e of t.renderTasks)e.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:i,annotationStorageMap:n}=e;const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:n}).getReader(),s=this._intentStates.get(i);s.streamReader=r;const pump=()=>{r.read().then((e=>{let{value:t,done:i}=e;if(i)s.streamReader=null;else if(!this._transport.destroyed){this._renderPageChunk(t,s);pump()}}),(e=>{s.streamReader=null;if(!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const e of s.renderTasks)e.operatorListChanged();this._tryCleanup()}if(s.displayReadyCapability)s.displayReadyCapability.reject(e);else{if(!s.opListReadCapability)throw e;s.opListReadCapability.reject(e)}}}))};pump()}_abortOperatorList(e){let{intentState:t,reason:i,force:n=!1}=e;if(t.streamReader){if(!n){if(t.renderTasks.size>0)return;if(i instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:t,reason:i,force:!0});t.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT);return}}t.streamReader.cancel(new _util.AbortException(i.message)).catch((()=>{}));t.streamReader=null;if(!this._transport.destroyed){for(const[e,i]of this._intentStates)if(i===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[];this._deferred=Promise.resolve()}postMessage(e,t){const i={data:structuredClone(e,t)};this._deferred.then((()=>{for(const e of this._listeners)e.call(this,i)}))}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){const i=this._listeners.indexOf(t);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;if(_is_node.isNodeJS&&"function"==typeof require){PDFWorkerUtil.isWorkerDisabled=!0;PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js"}else if("object"==typeof document){var _document,_document$currentScri;const e=null===(_document=document)||void 0===_document||null===(_document$currentScri=_document.currentScript)||void 0===_document$currentScri?void 0:_document$currentScri.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let i;try{i=new URL(e);if(!i.origin||"null"===i.origin)return!1}catch(e){return!1}const n=new URL(t,i);return i.origin===n.origin};PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))};class PDFWorker{constructor(){let{name:e=null,port:t=null,verbosity:i=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(t))throw new Error("Cannot use more than one PDFWorker per port.");this.name=e;this.destroyed=!1;this.verbosity=i;this._readyCapability=(0,_util.createPromiseCapability)();this._port=null;this._webWorker=null;this._messageHandler=null;if(t){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(t,this);this._initializeFromPort(t)}else this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e;this._messageHandler=new _message_handler.MessageHandler("main","worker",e);this._messageHandler.on("ready",(function(){}));this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),i=new _message_handler.MessageHandler("main","worker",t),terminateEarly=()=>{t.removeEventListener("error",onWorkerError);i.destroy();t.terminate();this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},onWorkerError=()=>{this._webWorker||terminateEarly()};t.addEventListener("error",onWorkerError);i.on("test",(e=>{t.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else if(e){this._messageHandler=i;this._port=t;this._webWorker=t;this._readyCapability.resolve();i.send("configure",{verbosity:this.verbosity})}else{this._setupFakeWorker();i.destroy();t.terminate()}}));i.on("ready",(e=>{t.removeEventListener("error",onWorkerError);if(this.destroyed)terminateEarly();else try{sendTest()}catch(e){this._setupFakeWorker()}}));const sendTest=()=>{const e=new Uint8Array;i.send("test",e,[e.buffer])};sendTest();return}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){if(!PDFWorkerUtil.isWorkerDisabled){(0,_util.warn)("Setting up fake worker.");PDFWorkerUtil.isWorkerDisabled=!0}PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const i="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(i+"_worker",i,t);e.setup(n,t);const r=new _message_handler.MessageHandler(i,i+"_worker",t);this._messageHandler=r;this._readyCapability.resolve();r.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))}))}destroy(){this.destroyed=!0;if(this._webWorker){this._webWorker.terminate();this._webWorker=null}_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port);this._port=null;if(this._messageHandler){this._messageHandler.destroy();this._messageHandler=null}}static fromPort(e){if(null==e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(e.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(e.port):new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return"Function"===_worker_options.GlobalWorkerOptions.workerSrc.constructor.name?_worker_options.GlobalWorkerOptions.workerSrc():_worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc){_is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.');return PDFWorkerUtil.fallbackWorkerSrc}throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var e;return(null===(e=globalThis.pdfjsWorker)||void 0===e?void 0:e.WorkerMessageHandler)||null}catch(e){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"==typeof require){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}await(0,_display_utils.loadScript)(this.workerSrc);return window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;var _workerPorts={writable:!0,value:new WeakMap};PDFWorker.getWorkerSrc=function(){(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead.");return this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(e,t,i,n){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null});_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null});this.messageHandler=e;this.loadingTask=t;this.commonObjs=new PDFObjects;this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument,styleElement:n.styleElement});this._params=n;if(!n.useWorkerFetch){var r;let e=n.cMapUrl;"Function"===(null===(r=e)||void 0===r?void 0:r.constructor.name)&&(e=e());this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:e,isCompressed:n.cMapPacked});this.StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})}this.destroyed=!1;this.destroyCapability=null;this._passwordCapability=null;this._networkStream=i;this._fullReader=null;this._lastProgress=null;this.downloadInfoCapability=(0,_util.createPromiseCapability)();this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=_util.RenderingIntentFlag.DISPLAY,s=null;switch(e){case"any":r=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":r=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:r+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:r+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:r+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE;s=(r&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}n&&(r+=_util.RenderingIntentFlag.OPLIST);return{renderingIntent:r,cacheKey:`${r}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0;this.destroyCapability=(0,_util.createPromiseCapability)();this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const t of _classPrivateFieldGet(this,_pageCache).values())e.push(t._destroy());_classPrivateFieldGet(this,_pageCache).clear();_classPrivateFieldGet(this,_pagePromises).clear();this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);e.push(t);Promise.all(e).then((()=>{this.commonObjs.clear();this.fontLoader.clear();_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null;this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated."));if(this.messageHandler){this.messageHandler.destroy();this.messageHandler=null}this.destroyCapability.resolve()}),this.destroyCapability.reject);return this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available.");this._fullReader=this._networkStream.getFullReader();this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}};t.onPull=()=>{this._fullReader.read().then((function(e){let{value:i,done:n}=e;if(n)t.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(i),"GetReader - expected an ArrayBuffer.");t.enqueue(new Uint8Array(i),1,[i])}})).catch((e=>{t.error(e)}))};t.onCancel=e=>{this._fullReader.cancel(e);t.ready.catch((e=>{if(!this.destroyed)throw e}))}}));e.on("ReaderHeadersReady",(e=>{const i=(0,_util.createPromiseCapability)(),n=this._fullReader;n.headersReady.then((()=>{if(!n.isStreamingSupported||!n.isRangeSupported){if(this._lastProgress){var e;null===(e=t.onProgress)||void 0===e||e.call(t,this._lastProgress)}n.onProgress=e=>{var i;null===(i=t.onProgress)||void 0===i||i.call(t,{loaded:e.loaded,total:e.total})}}i.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),i.reject);return i.promise}));e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const i=this._networkStream.getRangeReader(e.begin,e.end);if(i){t.onPull=()=>{i.read().then((function(e){let{value:i,done:n}=e;if(n)t.close();else{(0,_util.assert)((0,_util.isArrayBuffer)(i),"GetRangeReader - expected an ArrayBuffer.");t.enqueue(new Uint8Array(i),1,[i])}})).catch((e=>{t.error(e)}))};t.onCancel=e=>{i.cancel(e);t.ready.catch((e=>{if(!this.destroyed)throw e}))}}else t.close()}));e.on("GetDoc",(e=>{let{pdfInfo:i}=e;this._numPages=i.numPages;this._htmlForXfa=i.htmlForXfa;delete i.htmlForXfa;t._capability.resolve(new PDFDocumentProxy(i,this))}));e.on("DocException",(function(e){let i;switch(e.name){case"PasswordException":i=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":i=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(i)}));e.on("PasswordRequest",(e=>{this._passwordCapability=(0,_util.createPromiseCapability)();if(t.onPassword){const updatePassword=e=>{e instanceof Error?this._passwordCapability.reject(e):this._passwordCapability.resolve({password:e})};try{t.onPassword(updatePassword,e.code)}catch(e){this._passwordCapability.reject(e)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise}));e.on("DataLoaded",(e=>{var i;null===(i=t.onProgress)||void 0===i||i.call(t,{loaded:e.length,total:e.length});this.downloadInfoCapability.resolve(e)}));e.on("StartRenderPage",(e=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}));e.on("commonobj",(t=>{var i;let[n,r,s]=t;if(!this.destroyed&&!this.commonObjs.has(n))switch(r){case"Font":const t=this._params;if("error"in s){const e=s.error;(0,_util.warn)(`Error during font loading: ${e}`);this.commonObjs.resolve(n,e);break}let a=null;t.pdfBug&&null!==(i=globalThis.FontInspector)&&void 0!==i&&i.enabled&&(a={registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}});const o=new _font_loader.FontFaceObject(s,{isEvalSupported:t.isEvalSupported,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:a});this.fontLoader.bind(o).catch((t=>e.sendWithPromise("FontFallback",{id:n}))).finally((()=>{!t.fontExtraProperties&&o.data&&(o.data=null);this.commonObjs.resolve(n,o)}));break;case"FontPath":case"Image":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}}));e.on("obj",(e=>{let[t,i,n,r]=e;if(this.destroyed)return;const s=_classPrivateFieldGet(this,_pageCache).get(i);if(!s.objs.has(t))switch(n){case"Image":s.objs.resolve(t,r);const e=8e6;if(r){let t;if(r.bitmap){const{bitmap:e,width:i,height:n}=r;t=i*n*4;s._bitmaps.add(e)}else{var a;t=(null===(a=r.data)||void 0===a?void 0:a.length)||0}t>e&&(s.cleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(t,r);break;default:throw new Error(`Got unknown object type ${n}`)}}));e.on("DocProgress",(e=>{var i;this.destroyed||null===(i=t.onProgress)||void 0===i||i.call(t,{loaded:e.loaded,total:e.total})}));e.on("DocStats",(e=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))}));e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this));e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))));e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature(e){var t,i;let{featureId:n}=e;this.destroyed||null===(t=(i=this.loadingTask).onUnsupportedFeature)||void 0===t||t.call(i,n)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=_classPrivateFieldGet(this,_pagePromises).get(t);if(i)return i;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const i=new PDFPageProxy(t,e,this,this._params.ownerDocument,this._params.pdfBug);_classPrivateFieldGet(this,_pageCache).set(t,i);return i}));_classPrivateFieldGet(this,_pagePromises).set(t,n);return n}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(){var e,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then((e=>{var t,i,n,r;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:null!==(t=null===(i=this._fullReader)||void 0===i?void 0:i.filename)&&void 0!==t?t:null,contentLength:null!==(n=null===(r=this._fullReader)||void 0===r?void 0:r.contentLength)&&void 0!==n?n:null}})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];await this.messageHandler.sendWithPromise("Cleanup",null);if(!this.destroyed){for(const e of _classPrivateFieldGet(this,_pageCache).values()){if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`)}this.commonObjs.clear();e||this.fontLoader.clear();_classPrivateFieldSet(this,_metadataPromise,null);this._getFieldObjectsPromise=null;this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj);_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);i.capability.promise.then((()=>t(i.data)));return null}const i=_classPrivateFieldGet(this,_objs)[e];if(null==i||!i.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=_classPrivateFieldGet(this,_objs)[e];return(null==t?void 0:t.capability.settled)||!1}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,e);i.data=t;i.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(e){const t=_classPrivateFieldGet(this,_objs)[e];return t||(_classPrivateFieldGet(this,_objs)[e]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(e){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null});_classPrivateFieldSet(this,_internalRenderTask,e);this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:e}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return e.form||e.canvas&&(null==t?void 0:t.size)>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(e){let{callback:t,params:i,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,useRequestAnimationFrame:c=!1,pdfBug:d=!1,pageColors:h=null}=e;this.callback=t;this.params=i;this.objs=n;this.commonObjs=r;this.annotationCanvasMap=s;this.operatorListIdx=null;this.operatorList=a;this._pageIndex=o;this.canvasFactory=l;this._pdfBug=d;this.pageColors=h;this.running=!1;this.graphicsReadyCallback=null;this.graphicsReady=!1;this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window;this.cancelled=!1;this.capability=(0,_util.createPromiseCapability)();this.task=new RenderTask(this);this._cancelBound=this.cancel.bind(this);this._continueBound=this._continue.bind(this);this._scheduleNextBound=this._scheduleNext.bind(this);this._nextBound=this._next.bind(this);this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics(e){var t;let{transparency:i=!1,optionalContentConfig:n}=e;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}if(this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled){this.stepper=globalThis.StepperManager.create(this._pageIndex);this.stepper.init(this.operatorList);this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint()}const{canvasContext:r,viewport:s,transform:a,imageLayer:o,background:l,backgroundColorToReplace:c}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,o,n,this.annotationCanvasMap,this.pageColors);this.gfx.beginDrawing({transform:a,viewport:s,transparency:i,background:l,backgroundColorToReplace:c});this.operatorListIdx=0;this.graphicsReady=!0;this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.running=!1;this.cancelled=!0;this.gfx&&this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(this.graphicsReady){this.stepper&&this.stepper.updateOperatorList(this.operatorList);this.running||this._continue()}else this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0;this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){window.ngxZone.runOutsideAngular((()=>{this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}))}async _next(){if(!this.cancelled){this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper);if(this.operatorListIdx===this.operatorList.argsArray.length){this.running=!1;if(this.operatorList.lastChunk){this.gfx.endDrawing();this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas);this.callback()}}}}}var _canvasInUse={writable:!0,value:new WeakSet};const version="2.16.446";exports.version=version;const build="7e3678741";exports.build=build},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=i(1),r=i(132),s=i(136);function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}var a=new WeakSet;class AnnotationStorage{constructor(){!function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}(this,a);this._storage=new Map;this._modified=!1;this.onSetModified=null;this.onResetModified=null;this.onAnnotationEditor=null}getValue(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=this._storage.get(e);if(void 0===r&&window.getFormValue){window.assignFormIdAndFieldName(e,t,n);const s=window.getFormValue(t);if(void 0!==s&&void 0!==s.value){if(n){r={value:s.value===n}}else r=s;this.setValue(e,void 0,r,void 0,!0)}void 0===r&&void 0!==i&&void 0!==i.value&&""!==i.value&&(n?i.value&&window.setFormValue(t,n):window.setFormValue(t,i.value))}return void 0===r?i:Object.assign(i,r)}getRawValue(e){return this._storage.get(e)}remove(e){this._storage.delete(e);0===this._storage.size&&this.resetModified();if("function"==typeof this.onAnnotationEditor){for(const e of this._storage.values())if(e instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this._storage.get(e);let l=!1;if(void 0!==o){for(const[e,t]of Object.entries(i))if("radioValue"!==e&&"emitMessage"!==e&&o[e]!==t){l=!0;o[e]=t}}else{s||(l=!0);this._storage.set(e,i)}if(l){(function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i})(this,a,_setModified2).call(this);if("FreeTextEditor"!==(null==t?void 0:t.constructor.name)&&(t||n)&&window.setFormValue)if(i.items)window.setFormValue(t,i.items);else if(!1===i.emitMessage);else if(i.radioValue)window.setFormValue(t,i.radioValue);else if(i.exportValue)window.setFormValue(t,i.exportValue);else for(const e of Object.values(i))window.setFormValue(t,e)}i instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(i.constructor._type)}has(e){return this._storage.has(e)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){if(this._modified){this._modified=!1;"function"==typeof this.onResetModified&&this.onResetModified()}}get print(){return new PrintAnnotationStorage(this)}get serializable(){if(0===this._storage.size)return null;const e=new Map;for(const[t,i]of this._storage){const n=i instanceof r.AnnotationEditor?i.serialize():i;n&&e.set(t,n)}return e}static getHash(e){if(!e)return"";const t=new s.MurmurHash3_64;for(const[i,n]of e)t.update(`${i}:${JSON.stringify(n)}`);return t.hexdigest()}}t.AnnotationStorage=AnnotationStorage;function _setModified2(){if(!this._modified){this._modified=!0;"function"==typeof this.onSetModified&&this.onSetModified()}}var o=new WeakMap;class PrintAnnotationStorage extends AnnotationStorage{constructor(e){super();!function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}(this,o,{writable:!0,value:null});_classPrivateFieldSet(this,o,structuredClone(e.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}(this,o)}}t.PrintAnnotationStorage=PrintAnnotationStorage},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationEditor=void 0;var n=i(133),r=i(1);function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap;class AnnotationEditor{constructor(e){_classPrivateFieldInitSpec(this,s,{writable:!0,value:this.focusin.bind(this)});_classPrivateFieldInitSpec(this,a,{writable:!0,value:this.focusout.bind(this)});_classPrivateFieldInitSpec(this,o,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,l,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,c,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,d,{writable:!0,value:AnnotationEditor._zIndex++});this.constructor===AnnotationEditor&&(0,r.unreachable)("Cannot initialize AnnotationEditor.");this.parent=e.parent;this.id=e.id;this.width=this.height=null;this.pageIndex=e.parent.pageIndex;this.name=e.name;this.div=null;const[t,i]=this.parent.viewportBaseDimensions;this.x=e.x/t;this.y=e.y/i;this.rotation=this.parent.viewport.rotation;this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=_classPrivateFieldGet(this,d)}focusin(e){_classPrivateFieldGet(this,o)?_classPrivateFieldSet(this,o,!1):this.parent.setSelected(this)}focusout(e){if(!this.isAttachedToDOM)return;const t=e.relatedTarget;if(null==t||!t.closest(`#${this.id}`)){e.preventDefault();this.parent.isMultipleSelection||this.commitOrRemove()}}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(e){const t=this.parent.div.getBoundingClientRect();this.startX=e.clientX-t.x;this.startY=e.clientY-t.y;e.dataTransfer.setData("text/plain",this.id);e.dataTransfer.effectAllowed="move"}setAt(e,t,i,n){const[r,s]=this.parent.viewportBaseDimensions;[i,n]=this.screenToPageTranslation(i,n);this.x=(e+i)/r;this.y=(t+n)/s;this.div.style.left=100*this.x+"%";this.div.style.top=100*this.y+"%"}translate(e,t){const[i,n]=this.parent.viewportBaseDimensions;[e,t]=this.screenToPageTranslation(e,t);this.x+=e/i;this.y+=t/n;this.div.style.left=100*this.x+"%";this.div.style.top=100*this.y+"%"}screenToPageTranslation(e,t){const{rotation:i}=this.parent.viewport;switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}setDims(e,t){const[i,n]=this.parent.viewportBaseDimensions;this.div.style.width=100*e/i+"%";this.div.style.height=100*t/n+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div");this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360);this.div.className=this.name;this.div.setAttribute("id",this.id);this.div.setAttribute("tabIndex",0);this.setInForeground();this.div.addEventListener("focusin",_classPrivateFieldGet(this,s));this.div.addEventListener("focusout",_classPrivateFieldGet(this,a));const[e,t]=this.getInitialTranslation();this.translate(e,t);(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]);return this.div}pointerdown(e){const t=n.KeyboardManager.platform.isMac;if(0!==e.button||e.ctrlKey&&t)e.preventDefault();else{e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this);_classPrivateFieldSet(this,o,!0)}}getRect(e,t){const[i,n]=this.parent.viewportBaseDimensions,[r,s]=this.parent.pageDimensions,a=r*e/i,o=s*t/n,l=this.x*r,c=this.y*s,d=this.width*r,h=this.height*s;switch(this.rotation){case 0:return[l+a,s-c-o-h,l+a+d,s-c-o];case 90:return[l+o,s-c+a,l+o+h,s-c+a+d];case 180:return[l-a-d,s-c+o,l-a,s-c+o+h];case 270:return[l-o-h,s-c-a-d,l-o,s-c-a];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,n,r,s]=e,a=r-i,o=s-n;switch(this.rotation){case 0:return[i,t-s,a,o];case 90:return[i,t-n,o,a];case 180:return[r,t-n,a,o];case 270:return[r,t-s,o,a];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){_classPrivateFieldSet(this,c,!0)}disableEditMode(){_classPrivateFieldSet(this,c,!1)}isInEditMode(){return _classPrivateFieldGet(this,c)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var e;null===(e=this.div)||void 0===e||e.addEventListener("focusin",_classPrivateFieldGet(this,s))}serialize(){(0,r.unreachable)("An editor must be serializable")}static deserialize(e,t){const i=new this.prototype.constructor({parent:t,id:t.getNextId()});i.rotation=e.rotation;const[n,r]=t.pageDimensions,[s,a,o,l]=i.getRectInCurrentCoords(e.rect,r);i.x=s/n;i.y=a/r;i.width=o/n;i.height=l/r;return i}remove(){this.div.removeEventListener("focusin",_classPrivateFieldGet(this,s));this.div.removeEventListener("focusout",_classPrivateFieldGet(this,a));this.isEmpty()||this.commit();this.parent.remove(this)}select(){var e;null===(e=this.div)||void 0===e||e.classList.add("selectedEditor")}unselect(){var e;null===(e=this.div)||void 0===e||e.classList.remove("selectedEditor")}updateParams(e,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return _classPrivateFieldGet(this,l)}set isEditing(e){_classPrivateFieldSet(this,l,e);if(e){this.parent.setSelected(this);this.parent.setActiveEditor(this)}else this.parent.setActiveEditor(null)}}t.AnnotationEditor=AnnotationEditor;_defineProperty(AnnotationEditor,"_colorManager",new n.ColorManager);_defineProperty(AnnotationEditor,"_zIndex",1)},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0;t.bindEvents=function bindEvents(e,t,i){for(const n of i)t.addEventListener(n,e[n].bind(e))};t.opacityToHex=function opacityToHex(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")};var n=i(1),r=i(134);function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var s=new WeakMap;class IdManager{constructor(){_classPrivateFieldInitSpec(this,s,{writable:!0,value:0})}getId(){var e,t;return`${n.AnnotationEditorPrefix}${_classPrivateFieldSet(this,s,(e=_classPrivateFieldGet(this,s),t=e++,e)),t}`}}var a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap;class CommandManager{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;_classPrivateFieldInitSpec(this,a,{writable:!0,value:[]});_classPrivateFieldInitSpec(this,o,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,l,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,c,{writable:!0,value:-1});_classPrivateFieldSet(this,l,e)}add(e){let{cmd:t,undo:i,mustExec:n,type:r=NaN,overwriteIfSameType:s=!1,keepUndo:d=!1}=e;n&&t();if(_classPrivateFieldGet(this,o))return;const h={cmd:t,undo:i,type:r};if(-1===_classPrivateFieldGet(this,c)){_classPrivateFieldGet(this,a).length>0&&(_classPrivateFieldGet(this,a).length=0);_classPrivateFieldSet(this,c,0);_classPrivateFieldGet(this,a).push(h);return}if(s&&_classPrivateFieldGet(this,a)[_classPrivateFieldGet(this,c)].type===r){d&&(h.undo=_classPrivateFieldGet(this,a)[_classPrivateFieldGet(this,c)].undo);_classPrivateFieldGet(this,a)[_classPrivateFieldGet(this,c)]=h;return}const u=_classPrivateFieldGet(this,c)+1;if(u===_classPrivateFieldGet(this,l))_classPrivateFieldGet(this,a).splice(0,1);else{_classPrivateFieldSet(this,c,u);u<_classPrivateFieldGet(this,a).length&&_classPrivateFieldGet(this,a).splice(u)}_classPrivateFieldGet(this,a).push(h)}undo(){if(-1!==_classPrivateFieldGet(this,c)){_classPrivateFieldSet(this,o,!0);_classPrivateFieldGet(this,a)[_classPrivateFieldGet(this,c)].undo();_classPrivateFieldSet(this,o,!1);_classPrivateFieldSet(this,c,_classPrivateFieldGet(this,c)-1)}}redo(){if(_classPrivateFieldGet(this,c)<_classPrivateFieldGet(this,a).length-1){_classPrivateFieldSet(this,c,_classPrivateFieldGet(this,c)+1);_classPrivateFieldSet(this,o,!0);_classPrivateFieldGet(this,a)[_classPrivateFieldGet(this,c)].cmd();_classPrivateFieldSet(this,o,!1)}}hasSomethingToUndo(){return-1!==_classPrivateFieldGet(this,c)}hasSomethingToRedo(){return _classPrivateFieldGet(this,c)<_classPrivateFieldGet(this,a).length-1}destroy(){_classPrivateFieldSet(this,a,null)}}t.CommandManager=CommandManager;var d=new WeakSet;class KeyboardManager{constructor(e){_classPrivateMethodInitSpec(this,d);this.buffer=[];this.callbacks=new Map;this.allKeys=new Set;const t=KeyboardManager.platform.isMac;for(const[i,n]of e)for(const e of i){const i=e.startsWith("mac+");if(t&&i){this.callbacks.set(e.slice(4),n);this.allKeys.add(e.split("+").at(-1))}else if(!t&&!i){this.callbacks.set(e,n);this.allKeys.add(e.split("+").at(-1))}}}static get platform(){const e="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(_classPrivateMethodGet(this,d,_serialize2).call(this,t));if(i){i.bind(e)();t.stopPropagation();t.preventDefault()}}}t.KeyboardManager=KeyboardManager;function _serialize2(e){e.altKey&&this.buffer.push("alt");e.ctrlKey&&this.buffer.push("ctrl");e.metaKey&&this.buffer.push("meta");e.shiftKey&&this.buffer.push("shift");this.buffer.push(e.key);const t=this.buffer.join("+");this.buffer.length=0;return t}var h=new WeakMap;class ClipboardManager{constructor(){_classPrivateFieldInitSpec(this,h,{writable:!0,value:null})}copy(e){if(e){Array.isArray(e)?_classPrivateFieldSet(this,h,e.map((e=>e.serialize()))):_classPrivateFieldSet(this,h,[e.serialize()]);_classPrivateFieldSet(this,h,_classPrivateFieldGet(this,h).filter((e=>!!e)));0===_classPrivateFieldGet(this,h).length&&_classPrivateFieldSet(this,h,null)}}paste(){return _classPrivateFieldGet(this,h)}isEmpty(){return null===_classPrivateFieldGet(this,h)}destroy(){_classPrivateFieldSet(this,h,null)}}class ColorManager{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);(0,r.getColorValues)(e);return(0,n.shadow)(this,"_colors",e)}convert(e){const t=(0,r.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[e,i]of this._colors)if(i.every(((e,i)=>e===t[i])))return ColorManager._colorsMapping.get(e);return t}getHexCode(e){const t=this._colors.get(e);return t?n.Util.makeHexColor(...t):e}}t.ColorManager=ColorManager;_defineProperty(ColorManager,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var u=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,y=new WeakMap,P=new WeakMap,S=new WeakMap,E=new WeakMap,A=new WeakMap,x=new WeakMap,C=new WeakMap,T=new WeakMap,M=new WeakSet,k=new WeakSet,I=new WeakSet,D=new WeakSet,L=new WeakSet,R=new WeakSet,O=new WeakSet,N=new WeakSet,B=new WeakSet;class AnnotationEditorUIManager{constructor(e,t){_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,N);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,M);_classPrivateFieldInitSpec(this,u,{writable:!0,value:null});_classPrivateFieldInitSpec(this,p,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,g,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,f,{writable:!0,value:new ClipboardManager});_classPrivateFieldInitSpec(this,m,{writable:!0,value:new CommandManager});_classPrivateFieldInitSpec(this,v,{writable:!0,value:0});_classPrivateFieldInitSpec(this,_,{writable:!0,value:null});_classPrivateFieldInitSpec(this,b,{writable:!0,value:null});_classPrivateFieldInitSpec(this,w,{writable:!0,value:new IdManager});_classPrivateFieldInitSpec(this,y,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,P,{writable:!0,value:n.AnnotationEditorType.NONE});_classPrivateFieldInitSpec(this,S,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,E,{writable:!0,value:this.keydown.bind(this)});_classPrivateFieldInitSpec(this,A,{writable:!0,value:this.onEditingAction.bind(this)});_classPrivateFieldInitSpec(this,x,{writable:!0,value:this.onPageChanging.bind(this)});_classPrivateFieldInitSpec(this,C,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}});_classPrivateFieldInitSpec(this,T,{writable:!0,value:null});_classPrivateFieldSet(this,T,e);_classPrivateFieldSet(this,b,t);_classPrivateFieldGet(this,b)._on("editingaction",_classPrivateFieldGet(this,A));_classPrivateFieldGet(this,b)._on("pagechanging",_classPrivateFieldGet(this,x))}destroy(){_classPrivateMethodGet(this,k,_removeKeyboardManager2).call(this);_classPrivateFieldGet(this,b)._off("editingaction",_classPrivateFieldGet(this,A));_classPrivateFieldGet(this,b)._off("pagechanging",_classPrivateFieldGet(this,x));for(const e of _classPrivateFieldGet(this,g).values())e.destroy();_classPrivateFieldGet(this,g).clear();_classPrivateFieldGet(this,p).clear();_classPrivateFieldSet(this,u,null);_classPrivateFieldGet(this,S).clear();_classPrivateFieldGet(this,f).destroy();_classPrivateFieldGet(this,m).destroy()}onPageChanging(e){let{pageNumber:t}=e;_classPrivateFieldSet(this,v,t-1)}focusMainContainer(){_classPrivateFieldGet(this,T).focus()}keydown(e){var t;null!==(t=this.getActive())&&void 0!==t&&t.shouldGetKeyboardEvents()||AnnotationEditorUIManager._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","cut","copy","paste","delete","selectAll"].includes(e.name)&&this[e.name]()}setEditingState(e){if(e){_classPrivateMethodGet(this,M,_addKeyboardManager2).call(this);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{isEditing:_classPrivateFieldGet(this,P)!==n.AnnotationEditorType.NONE,isEmpty:_classPrivateMethodGet(this,N,_isEmpty2).call(this),hasSomethingToUndo:_classPrivateFieldGet(this,m).hasSomethingToUndo(),hasSomethingToRedo:_classPrivateFieldGet(this,m).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:_classPrivateFieldGet(this,f).isEmpty()})}else{_classPrivateMethodGet(this,k,_removeKeyboardManager2).call(this);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{isEditing:!1})}}registerEditorTypes(e){_classPrivateFieldSet(this,_,e);for(const e of _classPrivateFieldGet(this,_))_classPrivateMethodGet(this,D,_dispatchUpdateUI2).call(this,e.defaultPropertiesToUpdate)}getId(){return _classPrivateFieldGet(this,w).getId()}addLayer(e){_classPrivateFieldGet(this,g).set(e.pageIndex,e);_classPrivateFieldGet(this,y)?e.enable():e.disable()}removeLayer(e){_classPrivateFieldGet(this,g).delete(e.pageIndex)}updateMode(e){_classPrivateFieldSet(this,P,e);if(e===n.AnnotationEditorType.NONE){this.setEditingState(!1);_classPrivateMethodGet(this,R,_disableAll2).call(this)}else{this.setEditingState(!0);_classPrivateMethodGet(this,L,_enableAll2).call(this);for(const t of _classPrivateFieldGet(this,g).values())t.updateMode(e)}}updateToolbar(e){e!==_classPrivateFieldGet(this,P)&&_classPrivateFieldGet(this,b).dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){for(const i of _classPrivateFieldGet(this,S))i.updateParams(e,t);for(const i of _classPrivateFieldGet(this,_))i.updateDefaultParams(e,t)}getEditors(e){const t=[];for(const i of _classPrivateFieldGet(this,p).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return _classPrivateFieldGet(this,p).get(e)}addEditor(e){_classPrivateFieldGet(this,p).set(e.id,e)}removeEditor(e){_classPrivateFieldGet(this,p).delete(e.id);this.unselect(e)}setActiveEditor(e){if(_classPrivateFieldGet(this,u)!==e){_classPrivateFieldSet(this,u,e);e&&_classPrivateMethodGet(this,D,_dispatchUpdateUI2).call(this,e.propertiesToUpdate)}}toggleSelected(e){if(_classPrivateFieldGet(this,S).has(e)){_classPrivateFieldGet(this,S).delete(e);e.unselect();_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}else{_classPrivateFieldGet(this,S).add(e);e.select();_classPrivateMethodGet(this,D,_dispatchUpdateUI2).call(this,e.propertiesToUpdate);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}}setSelected(e){for(const t of _classPrivateFieldGet(this,S))t!==e&&t.unselect();_classPrivateFieldGet(this,S).clear();_classPrivateFieldGet(this,S).add(e);e.select();_classPrivateMethodGet(this,D,_dispatchUpdateUI2).call(this,e.propertiesToUpdate);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}isSelected(e){return _classPrivateFieldGet(this,S).has(e)}unselect(e){e.unselect();_classPrivateFieldGet(this,S).delete(e);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==_classPrivateFieldGet(this,S).size}undo(){_classPrivateFieldGet(this,m).undo();_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:_classPrivateFieldGet(this,m).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:_classPrivateMethodGet(this,N,_isEmpty2).call(this)})}redo(){_classPrivateFieldGet(this,m).redo();_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:_classPrivateFieldGet(this,m).hasSomethingToRedo(),isEmpty:_classPrivateMethodGet(this,N,_isEmpty2).call(this)})}addCommands(e){_classPrivateFieldGet(this,m).add(e);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:_classPrivateMethodGet(this,N,_isEmpty2).call(this)})}delete(){_classPrivateFieldGet(this,u)&&_classPrivateFieldGet(this,u).commitOrRemove();if(!this.hasSelection)return;const e=[..._classPrivateFieldGet(this,S)];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)_classPrivateMethodGet(this,O,_addEditorToLayer2).call(this,t)},mustExec:!0})}copy(){_classPrivateFieldGet(this,u)&&_classPrivateFieldGet(this,u).commitOrRemove();if(this.hasSelection){const e=[];for(const t of _classPrivateFieldGet(this,S))t.isEmpty()||e.push(t);if(0===e.length)return;_classPrivateFieldGet(this,f).copy(e);_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy();this.delete()}paste(){if(_classPrivateFieldGet(this,f).isEmpty())return;this.unselectAll();const e=_classPrivateFieldGet(this,g).get(_classPrivateFieldGet(this,v)),t=_classPrivateFieldGet(this,f).paste().map((t=>e.deserialize(t)));this.addCommands({cmd:()=>{for(const e of t)_classPrivateMethodGet(this,O,_addEditorToLayer2).call(this,e);_classPrivateMethodGet(this,B,_selectEditors2).call(this,t)},undo:()=>{for(const e of t)e.remove()},mustExec:!0})}selectAll(){for(const e of _classPrivateFieldGet(this,S))e.commit();_classPrivateMethodGet(this,B,_selectEditors2).call(this,_classPrivateFieldGet(this,p).values())}unselectAll(){if(_classPrivateFieldGet(this,u))_classPrivateFieldGet(this,u).commitOrRemove();else if(0!==_classPrivateMethodGet(this,B,_selectEditors2).size){for(const e of _classPrivateFieldGet(this,S))e.unselect();_classPrivateFieldGet(this,S).clear();_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!1})}}isActive(e){return _classPrivateFieldGet(this,u)===e}getActive(){return _classPrivateFieldGet(this,u)}getMode(){return _classPrivateFieldGet(this,P)}}t.AnnotationEditorUIManager=AnnotationEditorUIManager;function _addKeyboardManager2(){_classPrivateFieldGet(this,T).addEventListener("keydown",_classPrivateFieldGet(this,E))}function _removeKeyboardManager2(){_classPrivateFieldGet(this,T).removeEventListener("keydown",_classPrivateFieldGet(this,E))}function _dispatchUpdateStates2(e){Object.entries(e).some((e=>{let[t,i]=e;return _classPrivateFieldGet(this,C)[t]!==i}))&&_classPrivateFieldGet(this,b).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(_classPrivateFieldGet(this,C),e)})}function _dispatchUpdateUI2(e){_classPrivateFieldGet(this,b).dispatch("annotationeditorparamschanged",{source:this,details:e})}function _enableAll2(){if(!_classPrivateFieldGet(this,y)){_classPrivateFieldSet(this,y,!0);for(const e of _classPrivateFieldGet(this,g).values())e.enable()}}function _disableAll2(){this.unselectAll();if(_classPrivateFieldGet(this,y)){_classPrivateFieldSet(this,y,!1);for(const e of _classPrivateFieldGet(this,g).values())e.disable()}}function _addEditorToLayer2(e){const t=_classPrivateFieldGet(this,g).get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}function _isEmpty2(){if(0===_classPrivateFieldGet(this,p).size)return!0;if(1===_classPrivateFieldGet(this,p).size)for(const e of _classPrivateFieldGet(this,p).values())return e.isEmpty();return!1}function _selectEditors2(e){_classPrivateFieldGet(this,S).clear();for(const t of e)if(!t.isEmpty()){_classPrivateFieldGet(this,S).add(t);t.select()}_classPrivateMethodGet(this,I,_dispatchUpdateStates2).call(this,{hasSelectedEditor:!0})}_defineProperty(AnnotationEditorUIManager,"_keyboardManager",new KeyboardManager([[["ctrl+a","mac+meta+a"],AnnotationEditorUIManager.prototype.selectAll],[["ctrl+c","mac+meta+c"],AnnotationEditorUIManager.prototype.copy],[["ctrl+v","mac+meta+v"],AnnotationEditorUIManager.prototype.paste],[["ctrl+x","mac+meta+x"],AnnotationEditorUIManager.prototype.cut],[["ctrl+z","mac+meta+z"],AnnotationEditorUIManager.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],AnnotationEditorUIManager.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],AnnotationEditorUIManager.prototype.delete],[["Escape","mac+Escape"],AnnotationEditorUIManager.prototype.unselectAll]]))},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0;t.deprecated=function deprecated(e){Window.ngxConsole.log("Deprecated API usage: "+e)};t.getColorValues=function getColorValues(e){const t=document.createElement("span");t.style.visibility="hidden";document.body.append(t);for(const i of e.keys()){t.style.color=i;const n=window.getComputedStyle(t).color;e.set(i,getRGB(n))}t.remove()};t.getCurrentTransform=function getCurrentTransform(e){const{a:t,b:i,c:n,d:r,e:s,f:a}=e.getTransform();return[t,i,n,r,s,a]};t.getCurrentTransformInverse=function getCurrentTransformInverse(e){const{a:t,b:i,c:n,d:r,e:s,f:a}=e.getTransform().invertSelf();return[t,i,n,r,s,a]};t.getFilenameFromUrl=function getFilenameFromUrl(e){const t=e.indexOf("#"),i=e.indexOf("?"),n=Math.min(t>0?t:e.length,i>0?i:e.length);return e.substring(e.lastIndexOf("/",n)+1,n)};t.getPdfFilenameFromUrl=function getPdfFilenameFromUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if(window.PDFViewerApplication.appConfig.filenameForDownload)return window.PDFViewerApplication.appConfig.filenameForDownload;if("string"!=typeof e)return t;if(isDataScheme(e)){(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.');return t}const i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=i.exec(e);let a=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(a){a=a[0];if(a.includes("%"))try{a=n.exec(decodeURIComponent(a))[0]}catch(e){}}return a||t};t.getRGB=getRGB;t.getXfaPageViewport=function getXfaPageViewport(e,t){let{scale:i=1,rotation:n=0}=t;const{width:r,height:s}=e.attributes.style,a=[0,0,parseInt(r),parseInt(s)];return new PageViewport({viewBox:a,scale:i,rotation:n})};t.isDataScheme=isDataScheme;t.isPdfFile=function isPdfFile(e){return"string"==typeof e&&/\.pdf$/i.test(e)};t.isValidFetchUrl=isValidFetchUrl;t.loadScript=function loadScript(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(((i,n)=>{const r=document.createElement("script");"Function"===e.constructor.name?r.src=e():r.src=e;r.onload=function(e){t&&r.remove();i(e)};r.onerror=function(e){Window.ngxConsole.log(e);n(new Error(`Cannot load script at: ${r.src}`))};(document.head||document.documentElement).append(r)}))};var n=i(135),r=i(1);function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}t.AnnotationPrefix="pdfjs_internal_id_";class PixelsPerInch{}t.PixelsPerInch=PixelsPerInch;_defineProperty(PixelsPerInch,"CSS",96);_defineProperty(PixelsPerInch,"PDF",72);_defineProperty(PixelsPerInch,"PDF_TO_CSS_UNITS",PixelsPerInch.CSS/PixelsPerInch.PDF);class DOMCanvasFactory extends n.BaseCanvasFactory{constructor(){let{ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");i.width=e;i.height=t;return i}}t.DOMCanvasFactory=DOMCanvasFactory;async function fetchData(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(isValidFetchUrl(e,document.baseURI)){const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);return t?new Uint8Array(await i.arrayBuffer()):(0,r.stringToBytes)(await i.text())}return new Promise(((i,n)=>{const s=new XMLHttpRequest;s.open("GET",e,!0);t&&(s.responseType="arraybuffer");s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(200===s.status||0===s.status){let e;t&&s.response?e=new Uint8Array(s.response):!t&&s.responseText&&(e=(0,r.stringToBytes)(s.responseText));if(e){i(e);return}}n(new Error(s.statusText))}};s.send(null)}))}class DOMCMapReaderFactory extends n.BaseCMapReaderFactory{_fetchData(e,t){return fetchData(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=DOMCMapReaderFactory;class DOMStandardFontDataFactory extends n.BaseStandardFontDataFactory{_fetchData(e){return fetchData(e,!0)}}t.DOMStandardFontDataFactory=DOMStandardFontDataFactory;class DOMSVGFactory extends n.BaseSVGFactory{_createSVG(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}}t.DOMSVGFactory=DOMSVGFactory;class PageViewport{constructor(e){let{viewBox:t,scale:i,rotation:n,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}=e;this.viewBox=t;this.scale=i;this.rotation=n;this.offsetX=r;this.offsetY=s;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let c,d,h,u,p,g,f,m;n%=360;n<0&&(n+=360);switch(n){case 180:c=-1;d=0;h=0;u=1;break;case 90:c=0;d=1;h=1;u=0;break;case 270:c=0;d=-1;h=-1;u=0;break;case 0:c=1;d=0;h=0;u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}if(a){h=-h;u=-u}if(0===c){p=Math.abs(l-t[1])*i+r;g=Math.abs(o-t[0])*i+s;f=Math.abs(t[3]-t[1])*i;m=Math.abs(t[2]-t[0])*i}else{p=Math.abs(o-t[0])*i+r;g=Math.abs(l-t[1])*i+s;f=Math.abs(t[2]-t[0])*i;m=Math.abs(t[3]-t[1])*i}this.transform=[c*i,d*i,h*i,u*i,p-c*i*o-h*i*l,g-d*i*o-u*i*l];this.width=f;this.height=m}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new PageViewport({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:n,dontFlip:r})}convertToViewportPoint(e,t){return r.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=r.Util.applyTransform([e[0],e[1]],this.transform),i=r.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return r.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=PageViewport;class RenderingCancelledException extends r.BaseException{constructor(e,t){super(e,"RenderingCancelledException");this.type=t}}t.RenderingCancelledException=RenderingCancelledException;function isDataScheme(e){const t=e.length;let i=0;for(;i<t&&""===e[i].trim();)i++;return"data:"===e.substring(i,i+5).toLowerCase()}t.StatTimer=class StatTimer{constructor(){this.started=Object.create(null);this.times=[]}time(e){e in this.started&&(0,r.warn)(`Timer is already running for ${e}`);this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,r.warn)(`Timer has not been started for ${e}`);this.times.push({name:e,start:this.started[e],end:Date.now()});delete this.started[e]}toString(){const e=[];let t=0;for(const e of this.times){const i=e.name;i.length>t&&(t=i.length)}for(const i of this.times){const n=i.end-i.start;e.push(`${i.name.padEnd(t)} ${n}ms\n`)}return e.join("")}};function isValidFetchUrl(e,t){try{const{protocol:i}=t?new URL(e,t):new URL(e);return"http:"===i||"https:"===i||"capacitor:"===i}catch(e){return!1}}let s;t.PDFDateString=class PDFDateString{static toDateObject(e){if(!e||"string"!=typeof e)return null;s||(s=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=s.exec(e);if(!t)return null;const i=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;h=h>=0&&h<=59?h:0;if("-"===c){a+=d;o+=h}else if("+"===c){a-=d;o-=h}return new Date(Date.UTC(i,n,r,a,o,l))}};function getRGB(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}if(e.startsWith("rgb("))return e.slice(4,-1).split(",").map((e=>parseInt(e)));if(e.startsWith("rgba("))return e.slice(5,-1).split(",").map((e=>parseInt(e))).slice(0,3);(0,r.warn)(`Not a valid color format: "${e}"`);return[0,0,0]}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=i(1);class BaseCanvasFactory{constructor(){this.constructor===BaseCanvasFactory&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d")}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t;e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0;e.canvas.height=0;e.canvas=null;e.context=null}_createCanvas(e,t){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=BaseCanvasFactory;class BaseCMapReaderFactory{constructor(e){let{baseUrl:t=null,isCompressed:i=!1}=e;this.constructor===BaseCMapReaderFactory&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory.");this.baseUrl=t;this.isCompressed=i}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":""),r=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(i,r).catch((e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)}))}_fetchData(e,t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=BaseCMapReaderFactory;class BaseStandardFontDataFactory{constructor(e){let{baseUrl:t=null}=e;this.constructor===BaseStandardFontDataFactory&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory.");this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetchData(i).catch((e=>{throw new Error(`Unable to load font data at: ${i}`)}))}_fetchData(e){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=BaseStandardFontDataFactory;class BaseSVGFactory{constructor(){this.constructor===BaseSVGFactory&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");n.setAttribute("version","1.1");if(!i){n.setAttribute("width",`${e}px`);n.setAttribute("height",`${t}px`)}n.setAttribute("preserveAspectRatio","none");n.setAttribute("viewBox",`0 0 ${e} ${t}`);return n}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=BaseSVGFactory},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MurmurHash3_64=void 0;var n=i(1);const r=3285377520,s=4294901760,a=65535;t.MurmurHash3_64=class MurmurHash3_64{constructor(e){this.h1=e?4294967295&e:r;this.h2=e?4294967295&e:r}update(e){let t,i;if("string"==typeof e){t=new Uint8Array(2*e.length);i=0;for(let n=0,r=e.length;n<r;n++){const r=e.charCodeAt(n);if(r<=255)t[i++]=r;else{t[i++]=r>>>8;t[i++]=255&r}}}else{if(!(0,n.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice();i=t.byteLength}const r=i>>2,o=i-4*r,l=new Uint32Array(t.buffer,0,r);let c=0,d=0,h=this.h1,u=this.h2;const p=3432918353,g=461845907,f=11601,m=13715;for(let e=0;e<r;e++)if(1&e){c=l[e];c=c*p&s|c*f&a;c=c<<15|c>>>17;c=c*g&s|c*m&a;h^=c;h=h<<13|h>>>19;h=5*h+3864292196}else{d=l[e];d=d*p&s|d*f&a;d=d<<15|d>>>17;d=d*g&s|d*m&a;u^=d;u=u<<13|u>>>19;u=5*u+3864292196}c=0;switch(o){case 3:c^=t[4*r+2]<<16;case 2:c^=t[4*r+1]<<8;case 1:c^=t[4*r];c=c*p&s|c*f&a;c=c<<15|c>>>17;c=c*g&s|c*m&a;1&r?h^=c:u^=c}this.h1=h;this.h2=u}hexdigest(){let e=this.h1,t=this.h2;e^=t>>>1;e=3981806797*e&s|36045*e&a;t=4283543511*t&s|(2950163797*(t<<16|e>>>16)&s)>>>16;e^=t>>>1;e=444984403*e&s|60499*e&a;t=3301882366*t&s|(3120437893*(t<<16|e>>>16)&s)>>>16;e^=t>>>1;const i=(e>>>0).toString(16),n=(t>>>0).toString(16);return i.padStart(8,"0")+n.padStart(8,"0")}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FontLoader=t.FontFaceObject=void 0;var n=i(1);class BaseFontLoader{constructor(e){let{docId:t,onUnsupportedFeature:i,ownerDocument:r=globalThis.document,styleElement:s=null}=e;this.constructor===BaseFontLoader&&(0,n.unreachable)("Cannot initialize BaseFontLoader.");this.docId=t;this._onUnsupportedFeature=i;this._document=r;this.nativeFontFaces=[];this.styleElement=null}addNativeFontFace(e){this.nativeFontFaces.push(e);this._document.fonts.add(e)}insertRule(e){let t=this.styleElement;if(!t){t=this.styleElement=this._document.createElement("style");t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`;this._document.documentElement.getElementsByTagName("head")[0].append(t)}const i=t.sheet;i.insertRule(e,i.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.length=0;if(this.styleElement){this.styleElement.remove();this.styleElement=null}}async bind(e){if(e.attached||e.missingFile)return;e.attached=!0;if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(i){this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative});(0,n.warn)(`Failed to load font '${t.family}': '${i}'.`);e.disableFontFace=!0;throw i}}return}const t=e.createFontFaceRule();if(t){this.insertRule(t);if(this.isSyncFontLoadingSupported)return;await new Promise((i=>{const n=this._queueLoadingCallback(i);this._prepareFontLoadEvent([t],[e],n)}))}}_queueLoadingCallback(e){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e;const t=!(null===(e=this._document)||void 0===e||!e.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(e,t,i){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let r;t.FontLoader=r;t.FontLoader=r=class GenericFontLoader extends BaseFontLoader{constructor(e){super(e);this.loadingContext={requests:[],nextRequestId:0};this.loadTestFontId=0}get isSyncFontLoadingSupported(){let e=!1;if("undefined"==typeof navigator)e=!0;else{const t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==t?void 0:t[1])>=14&&(e=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const t=this.loadingContext,i={id:"pdfjs-font-loading-"+t.nextRequestId++,done:!1,complete:function completeRequest(){(0,n.assert)(!i.done,"completeRequest() cannot be called twice.");i.done=!0;for(;t.requests.length>0&&t.requests[0].done;){const e=t.requests.shift();setTimeout(e.callback,0)}},callback:e};t.requests.push(i);return i}get _loadTestFont(){return(0,n.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t,i){function int32(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function spliceString(e,t,i,n){return e.substring(0,t)+n+e.substring(t+i)}let r,s;const a=this._document.createElement("canvas");a.width=1;a.height=1;const o=a.getContext("2d");let l=0;const c=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=spliceString(d,976,c.length,c);const h=1482184792;let u=int32(d,16);for(r=0,s=c.length-3;r<s;r+=4)u=u-h+int32(c,r)|0;r<c.length&&(u=u-h+int32(c+"XXX",r)|0);d=spliceString(d,16,4,(0,n.string32)(u));const p=`@font-face {font-family:"${c}";src:${`url(data:font/opentype;base64,${btoa(d)});`}}`;this.insertRule(p);const g=[];for(const e of t)g.push(e.loadedName);g.push(c);const f=this._document.createElement("div");f.style.visibility="hidden";f.style.width=f.style.height="10px";f.style.position="absolute";f.style.top=f.style.left="0px";for(const e of g){const t=this._document.createElement("span");t.textContent="Hi";t.style.fontFamily=e;f.append(t)}this._document.body.append(f);!function isFontReady(e,t){l++;if(l>30){(0,n.warn)("Load test font never loaded.");t();return}o.font="30px "+e;o.fillText(".",0,20);o.getImageData(0,0,1,1).data[3]>0?t():setTimeout(isFontReady.bind(null,e,t))}(c,(()=>{f.remove();i.complete()}))}};t.FontFaceObject=class FontFaceObject{constructor(e,t){let{isEvalSupported:i=!0,disableFontFace:n=!1,ignoreErrors:r=!1,onUnsupportedFeature:s,fontRegistry:a=null}=t;this.compiledGlyphs=Object.create(null);for(const t in e)this[t]=e[t];this.isEvalSupported=!1!==i;this.disableFontFace=!0===n;this.ignoreErrors=!0===r;this._onUnsupportedFeature=s;this.fontRegistry=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`);e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});this.fontRegistry&&this.fontRegistry.registerFont(this);return e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,n.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let i;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`);i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;this.fontRegistry&&this.fontRegistry.registerFont(this,t);return i}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath});(0,n.warn)(`getPathGenerator - ignoring character: "${e}".`);return this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const e=[];for(const t of i){const i=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",i,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const n of i){"scale"===n.cmd&&(n.args=[t,-t]);e[n.cmd].apply(e,n.args)}}}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CanvasGraphics=void 0;var n=i(134),r=i(1),s=i(139),a=i(141),o=i(140);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const l=4096,c=o.isNodeJS&&"undefined"==typeof Path2D?-1:1e3,d=16;class CachedCanvases{constructor(e){this.canvasFactory=e;this.cache=Object.create(null)}getCanvas(e,t,i){let n;if(void 0!==this.cache[e]){n=this.cache[e];this.canvasFactory.reset(n,t,i)}else{n=this.canvasFactory.create(t,i);this.cache[e]=n}return n}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t);delete this.cache[e]}}}function drawImageAtIntegerCoords(e,t,i,r,s,a,o,l,c,d){const[h,u,p,g,f,m]=(0,n.getCurrentTransform)(e);if(0===u&&0===p){const n=o*h+f,v=Math.round(n),_=l*g+m,b=Math.round(_),w=(o+c)*h+f,y=Math.abs(Math.round(w)-v)||1,P=(l+d)*g+m,S=Math.abs(Math.round(P)-b)||1;e.setTransform(Math.sign(h),0,0,Math.sign(g),v,b);e.drawImage(t,i,r,s,a,0,0,y,S);e.setTransform(h,u,p,g,f,m);return[y,S]}if(0===h&&0===g){const n=l*p+f,v=Math.round(n),_=o*u+m,b=Math.round(_),w=(l+d)*p+f,y=Math.abs(Math.round(w)-v)||1,P=(o+c)*u+m,S=Math.abs(Math.round(P)-b)||1;e.setTransform(0,Math.sign(u),Math.sign(p),0,v,b);e.drawImage(t,i,r,s,a,0,0,S,y);e.setTransform(h,u,p,g,f,m);return[S,y]}e.drawImage(t,i,r,s,a,o,l,c,d);return[Math.hypot(h,u)*c,Math.hypot(p,g)*d]}class CanvasExtraState{constructor(e,t){this.alphaIsShape=!1;this.fontSize=0;this.fontSizeScale=1;this.textMatrix=r.IDENTITY_MATRIX;this.textMatrixScale=1;this.fontMatrix=r.FONT_IDENTITY_MATRIX;this.leading=0;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRenderingMode=r.TextRenderingMode.FILL;this.textRise=0;this.fillColor="#000000";this.strokeColor="#000000";this.patternFill=!1;this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.activeSMask=null;this.transferMaps=null;this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);e.clipBox=this.clipBox.slice();return e}setCurrentPoint(e,t){this.x=e;this.y=t}updatePathMinMax(e,t,i){[t,i]=r.Util.applyTransform([t,i],e);this.minX=Math.min(this.minX,t);this.minY=Math.min(this.minY,i);this.maxX=Math.max(this.maxX,t);this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=r.Util.applyTransform(t,e),n=r.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,i[0],n[0]);this.minY=Math.min(this.minY,i[1],n[1]);this.maxX=Math.max(this.maxX,i[0],n[0]);this.maxY=Math.max(this.maxY,i[1],n[1])}updateScalingPathMinMax(e,t){r.Util.scaleMinMax(e,t);this.minX=Math.min(this.minX,t[0]);this.maxX=Math.max(this.maxX,t[1]);this.minY=Math.min(this.minY,t[2]);this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,n,s,a,o,l,c,d){const h=r.Util.bezierBoundingBox(t,i,n,s,a,o,l,c);if(d){d[0]=Math.min(d[0],h[0],h[2]);d[1]=Math.max(d[1],h[0],h[2]);d[2]=Math.min(d[2],h[1],h[3]);d[3]=Math.max(d[3],h[1],h[3])}else this.updateRectMinMax(e,h)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===s.PathType.STROKE){t||(0,r.unreachable)("Stroke bounding box must include transform.");const e=r.Util.singularValueDecompose2dScale(t),n=e[0]*this.lineWidth/2,s=e[1]*this.lineWidth/2;i[0]-=n;i[1]-=s;i[2]+=n;i[3]+=s}return i}updateClipFromPath(){const e=r.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e;this.minX=1/0;this.minY=1/0;this.maxX=0;this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function putBinaryImageData(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("undefined"!=typeof ImageData&&t instanceof ImageData){e.putImageData(t,0,0);return}const n=t.height,s=t.width,a=n%d,o=(n-a)/d,l=0===a?o:o+1,c=e.createImageData(s,d);let h,u=0;const p=t.data,g=c.data;let f,m,v,_,b,w,y,P;if(i)switch(i.length){case 1:b=i[0];w=i[0];y=i[0];P=i[0];break;case 4:b=i[0];w=i[1];y=i[2];P=i[3]}if(t.kind===r.ImageKind.GRAYSCALE_1BPP){const t=p.byteLength,i=new Uint32Array(g.buffer,0,g.byteLength>>2),n=i.length,_=s+7>>3;let b=4294967295,w=r.FeatureTest.isLittleEndian?4278190080:255;P&&255===P[0]&&0===P[255]&&([b,w]=[w,b]);for(f=0;f<l;f++){v=f<o?d:a;h=0;for(m=0;m<v;m++){const e=t-u;let n=0;const r=e>_?s:8*e-7,a=-8&r;let o=0,l=0;for(;n<a;n+=8){l=p[u++];i[h++]=128&l?b:w;i[h++]=64&l?b:w;i[h++]=32&l?b:w;i[h++]=16&l?b:w;i[h++]=8&l?b:w;i[h++]=4&l?b:w;i[h++]=2&l?b:w;i[h++]=1&l?b:w}for(;n<r;n++){if(0===o){l=p[u++];o=128}i[h++]=l&o?b:w;o>>=1}}for(;h<n;)i[h++]=0;e.putImageData(c,0,f*d)}}else if(t.kind===r.ImageKind.RGBA_32BPP){const t=!!(b||w||y);m=0;_=s*d*4;for(f=0;f<o;f++){g.set(p.subarray(u,u+_));u+=_;if(t)for(let e=0;e<_;e+=4){b&&(g[e+0]=b[g[e+0]]);w&&(g[e+1]=w[g[e+1]]);y&&(g[e+2]=y[g[e+2]])}e.putImageData(c,0,m);m+=d}if(f<l){_=s*a*4;g.set(p.subarray(u,u+_));if(t)for(let e=0;e<_;e+=4){b&&(g[e+0]=b[g[e+0]]);w&&(g[e+1]=w[g[e+1]]);y&&(g[e+2]=y[g[e+2]])}e.putImageData(c,0,m)}}else{if(t.kind!==r.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);{const t=!!(b||w||y);v=d;_=s*v;for(f=0;f<l;f++){if(f>=o){v=a;_=s*v}h=0;for(m=_;m--;){g[h++]=p[u++];g[h++]=p[u++];g[h++]=p[u++];g[h++]=255}if(t)for(let e=0;e<h;e+=4){b&&(g[e+0]=b[g[e+0]]);w&&(g[e+1]=w[g[e+1]]);y&&(g[e+2]=y[g[e+2]])}e.putImageData(c,0,f*d)}}}}function putBinaryImageMask(e,t){if(t.bitmap){e.drawImage(t.bitmap,0,0);return}const i=t.height,n=t.width,r=i%d,s=(i-r)/d,o=0===r?s:s+1,l=e.createImageData(n,d);let c=0;const h=t.data,u=l.data;for(let t=0;t<o;t++){const i=t<s?d:r;({srcPos:c}=(0,a.applyMaskImageData)({src:h,srcPos:c,dest:u,width:n,height:i}));e.putImageData(l,0,t*d)}}function copyCtxState(e,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let n=0,r=i.length;n<r;n++){const r=i[n];void 0!==e[r]&&(t[r]=e[r])}if(void 0!==e.setLineDash){t.setLineDash(e.getLineDash());t.lineDashOffset=e.lineDashOffset}}function resetCtxToDefault(e,t){e.strokeStyle=e.fillStyle=t||"#000000";e.fillRule="nonzero";e.globalAlpha=1;e.lineWidth=1;e.lineCap="butt";e.lineJoin="miter";e.miterLimit=10;e.globalCompositeOperation="source-over";e.font="10px sans-serif";if(void 0!==e.setLineDash){e.setLineDash([]);e.lineDashOffset=0}}function composeSMaskBackdrop(e,t,i,n){const r=e.length;for(let s=3;s<r;s+=4){const r=e[s];if(0===r){e[s-3]=t;e[s-2]=i;e[s-1]=n}else if(r<255){const a=255-r;e[s-3]=e[s-3]*r+t*a>>8;e[s-2]=e[s-2]*r+i*a>>8;e[s-1]=e[s-1]*r+n*a>>8}}}function composeSMaskAlpha(e,t,i){const n=e.length;for(let r=3;r<n;r+=4){const n=i?i[e[r]]:e[r];t[r]=t[r]*n*.00392156862745098|0}}function composeSMaskLuminosity(e,t,i){const n=e.length;for(let r=3;r<n;r+=4){const n=77*e[r-3]+152*e[r-2]+28*e[r-1];t[r]=i?t[r]*i[n>>8]>>8:t[r]*n>>16}}function composeSMask(e,t,i,n){const r=n[0],s=n[1],a=n[2]-r,o=n[3]-s;if(0!==a&&0!==o){!function genericComposeSMask(e,t,i,n,r,s,a,o,l,c,d){const h=!!s,u=h?s[0]:0,p=h?s[1]:0,g=h?s[2]:0;let f;f="Luminosity"===r?composeSMaskLuminosity:composeSMaskAlpha;const m=Math.min(n,Math.ceil(1048576/i));for(let r=0;r<n;r+=m){const s=Math.min(m,n-r),v=e.getImageData(o-c,r+(l-d),i,s),_=t.getImageData(o,r+l,i,s);h&&composeSMaskBackdrop(v.data,u,p,g);f(v.data,_.data,a);t.putImageData(_,o,r+l)}}(t.context,i,a,o,t.subtype,t.backdrop,t.transferMap,r,s,t.offsetX,t.offsetY);e.save();e.globalAlpha=1;e.globalCompositeOperation="source-over";e.setTransform(1,0,0,1,0,0);e.drawImage(i.canvas,0,0);e.restore()}}function getImageSmoothingEnabled(e,t){const i=r.Util.singularValueDecompose2dScale(e);i[0]=Math.fround(i[0]);i[1]=Math.fround(i[1]);const s=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:i[0]<=s||i[1]<=s}const h=["butt","round","square"],u=["miter","round","bevel"],p={},g={};var f=new WeakSet;class CanvasGraphics{constructor(e,t,i,n,r,s,a,o){_classPrivateMethodInitSpec(this,f);this.ctx=e;this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.stateStack=[];this.pendingClip=null;this.pendingEOFill=!1;this.res=null;this.xobjs=null;this.commonObjs=t;this.objs=i;this.canvasFactory=n;this.imageLayer=r;this.groupStack=[];this.processingType3=null;this.baseTransform=null;this.baseTransformStack=[];this.groupLevel=0;this.smaskStack=[];this.smaskCounter=0;this.tempSMask=null;this.suspendedCtx=null;this.contentVisible=!0;this.markedContentStack=[];this.optionalContentConfig=s;this.cachedCanvases=new CachedCanvases(this.canvasFactory);this.cachedPatterns=new Map;this.annotationCanvasMap=a;this.viewportScale=1;this.outputScaleX=1;this.outputScaleY=1;this.backgroundColor=(null==o?void 0:o.background)||null;this.foregroundColor=(null==o?void 0:o.foreground)||null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:i,transparency:r=!1,background:s=null,backgroundColorToReplace:a=null}=e;const o=this.ctx.canvas.width,l=this.ctx.canvas.height,c=s||"#ffffff";this.ctx.save();if("function"==typeof s)s({context:this.ctx,width:o,height:l});else if(this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const e=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const t=this.backgroundColor=this.ctx.fillStyle;let i=!0,r=c;this.ctx.fillStyle=c;r=this.ctx.fillStyle;i="string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r);if("#000000"===e&&"#ffffff"===t||e===t||!i)this.foregroundColor=this.backgroundColor=null;else{const[i,s,a]=(0,n.getRGB)(r),newComp=e=>(e/=255)<=.03928?e/12.92:((e+.055)/1.055)**2.4,o=Math.round(.2126*newComp(i)+.7152*newComp(s)+.0722*newComp(a));this.selectColor=(i,n,r)=>{const s=.2126*newComp(i)+.7152*newComp(n)+.0722*newComp(r);return Math.round(s)===o?t:e}}}else{s&&(this.background=s);this.backgroundColor=s}if("function"!=typeof s){this.ctx.fillStyle=this.backgroundColor||c;this.ctx.fillRect(0,0,o,l)}this.ctx.restore();this.backgroundColorToReplace=a;if(r){const e=this.cachedCanvases.getCanvas("transparent",o,l);this.compositeCtx=this.ctx;this.transparentCanvas=e.canvas;this.ctx=e.context;this.ctx.save();this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save();resetCtxToDefault(this.ctx,this.foregroundColor);if(t){this.ctx.transform(...t);this.outputScaleX=t[0];this.outputScaleY=t[0]}this.ctx.transform(...i.transform);this.viewportScale=i.scale;this.baseTransform=(0,n.getCurrentTransform)(this.ctx);if(this.imageLayer){(0,n.deprecated)("The `imageLayer` functionality will be removed in the future.");this.imageLayer.beginLayout()}}executeOperatorList(e,t,i,n){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"==typeof i,d=c?Date.now()+15:0;let h=0;const u=this.commonObjs,p=this.objs;let g;for(;;){if(void 0!==n&&o===n.nextBreakPoint){n.breakIt(o,i);return o}g=a[o];if(g!==r.OPS.dependency)this[g].apply(this,s[o]);else for(const e of s[o]){const t=e.startsWith("g_")?u:p;if(!t.has(e)){t.get(e,i);return o}}o++;if(o===l)return o;if(c&&++h>10){if(Date.now()>d){i();return o}h=0}}}endDrawing(){_classPrivateMethodGet(this,f,_restoreInitialState2).call(this);this.cachedCanvases.clear();this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear();this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(e,t){const i=e.width,n=e.height;let r,s,a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=i,c=n,d="prescale1";for(;a>2&&l>1||o>2&&c>1;){let t=l,i=c;if(a>2&&l>1){t=Math.ceil(l/2);a/=l/t}if(o>2&&c>1){i=Math.ceil(c/2);o/=c/i}r=this.cachedCanvases.getCanvas(d,t,i);s=r.context;s.clearRect(0,0,t,i);s.drawImage(e,0,0,l,c,0,0,t,i);e=r.canvas;l=t;c=i;d="prescale1"===d?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:a}=e,o=this.current.fillColor,l=this.current.patternFill,c=(0,n.getCurrentTransform)(t);let d,h,u,p;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer,i=c.slice(0,4);h=JSON.stringify(l?i:[i,o]);d=this._cachedBitmapsMap.get(t);if(!d){d=new Map;this._cachedBitmapsMap.set(t,d)}const n=d.get(h);if(n&&!l){return{canvas:n,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])}}u=n}if(!u){p=this.cachedCanvases.getCanvas("maskCanvas",i,a);putBinaryImageMask(p.context,e)}let g=r.Util.transform(c,[1/i,0,0,-1/a,0,0]);g=r.Util.transform(g,[1,0,0,1,0,-a]);const f=r.Util.applyTransform([0,0],g),m=r.Util.applyTransform([i,a],g),v=r.Util.normalizeRect([f[0],f[1],m[0],m[1]]),_=Math.round(v[2]-v[0])||1,b=Math.round(v[3]-v[1])||1,w=this.cachedCanvases.getCanvas("fillCanvas",_,b),y=w.context,P=Math.min(f[0],m[0]),S=Math.min(f[1],m[1]);y.translate(-P,-S);y.transform(...g);if(!u){u=this._scaleImage(p.canvas,(0,n.getCurrentTransformInverse)(y));u=u.img;d&&l&&d.set(h,u)}y.imageSmoothingEnabled=getImageSmoothingEnabled((0,n.getCurrentTransform)(y),e.interpolate);drawImageAtIntegerCoords(y,u,0,0,u.width,u.height,0,0,i,a);y.globalCompositeOperation="source-in";const E=r.Util.transform((0,n.getCurrentTransformInverse)(y),[1,0,0,1,-P,-S]);y.fillStyle=l?o.getPattern(t,this,E,s.PathType.FILL):o;y.fillRect(0,0,i,a);if(d&&!l){this.cachedCanvases.delete("fillCanvas");d.set(h,w.canvas)}return{canvas:w.canvas,offsetX:Math.round(P),offsetY:Math.round(S)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking=null);this.current.lineWidth=e;this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=h[e]}setLineJoin(e){this.ctx.lineJoin=u[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;if(void 0!==i.setLineDash){i.setLineDash(e);i.lineDashOffset=t}}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let t=0,i=e.length;t<i;t++){const i=e[t],n=i[0],r=i[1];switch(n){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r[0],r[1]);break;case"CA":this.current.strokeAlpha=i[1];break;case"ca":this.current.fillAlpha=i[1];this.ctx.globalAlpha=i[1];break;case"BM":this.ctx.globalCompositeOperation=r;break;case"SMask":this.current.activeSMask=r?this.tempSMask:null;this.tempSMask=null;this.checkSMaskState();break;case"TR":this.current.transferMaps=r}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx;this.ctx=r.context;const s=this.ctx;s.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx));copyCtxState(this.suspendedCtx,s);!function mirrorContextOperations(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save;e.__originalRestore=e.restore;e.__originalRotate=e.rotate;e.__originalScale=e.scale;e.__originalTranslate=e.translate;e.__originalTransform=e.transform;e.__originalSetTransform=e.setTransform;e.__originalResetTransform=e.resetTransform;e.__originalClip=e.clip;e.__originalMoveTo=e.moveTo;e.__originalLineTo=e.lineTo;e.__originalBezierCurveTo=e.bezierCurveTo;e.__originalRect=e.rect;e.__originalClosePath=e.closePath;e.__originalBeginPath=e.beginPath;e._removeMirroring=()=>{e.save=e.__originalSave;e.restore=e.__originalRestore;e.rotate=e.__originalRotate;e.scale=e.__originalScale;e.translate=e.__originalTranslate;e.transform=e.__originalTransform;e.setTransform=e.__originalSetTransform;e.resetTransform=e.__originalResetTransform;e.clip=e.__originalClip;e.moveTo=e.__originalMoveTo;e.lineTo=e.__originalLineTo;e.bezierCurveTo=e.__originalBezierCurveTo;e.rect=e.__originalRect;e.closePath=e.__originalClosePath;e.beginPath=e.__originalBeginPath;delete e._removeMirroring};e.save=function ctxSave(){t.save();this.__originalSave()};e.restore=function ctxRestore(){t.restore();this.__originalRestore()};e.translate=function ctxTranslate(e,i){t.translate(e,i);this.__originalTranslate(e,i)};e.scale=function ctxScale(e,i){t.scale(e,i);this.__originalScale(e,i)};e.transform=function ctxTransform(e,i,n,r,s,a){t.transform(e,i,n,r,s,a);this.__originalTransform(e,i,n,r,s,a)};e.setTransform=function ctxSetTransform(e,i,n,r,s,a){t.setTransform(e,i,n,r,s,a);this.__originalSetTransform(e,i,n,r,s,a)};e.resetTransform=function ctxResetTransform(){t.resetTransform();this.__originalResetTransform()};e.rotate=function ctxRotate(e){t.rotate(e);this.__originalRotate(e)};e.clip=function ctxRotate(e){t.clip(e);this.__originalClip(e)};e.moveTo=function(e,i){t.moveTo(e,i);this.__originalMoveTo(e,i)};e.lineTo=function(e,i){t.lineTo(e,i);this.__originalLineTo(e,i)};e.bezierCurveTo=function(e,i,n,r,s,a){t.bezierCurveTo(e,i,n,r,s,a);this.__originalBezierCurveTo(e,i,n,r,s,a)};e.rect=function(e,i,n,r){t.rect(e,i,n,r);this.__originalRect(e,i,n,r)};e.closePath=function(){t.closePath();this.__originalClosePath()};e.beginPath=function(){t.beginPath();this.__originalBeginPath()}}(s,this.suspendedCtx);this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring();copyCtxState(this.ctx,this.suspendedCtx);this.ctx=this.suspendedCtx;this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;if(e){e[0]=Math.floor(e[0]);e[1]=Math.floor(e[1]);e[2]=Math.ceil(e[2]);e[3]=Math.ceil(e[3])}else e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;composeSMask(this.suspendedCtx,t,this.ctx,e);this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height);this.ctx.restore()}save(){if(this.inSMaskMode){copyCtxState(this.ctx,this.suspendedCtx);this.suspendedCtx.save()}else this.ctx.save();const e=this.current;this.stateStack.push(e);this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode();if(0!==this.stateStack.length){this.current=this.stateStack.pop();if(this.inSMaskMode){this.suspendedCtx.restore();copyCtxState(this.suspendedCtx,this.ctx)}else this.ctx.restore();this.checkSMaskState();this.pendingClip=null;this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}}transform(e,t,i,n,r,s){this.ctx.transform(e,t,i,n,r,s);this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,a=this.current;let o,l,c=a.x,d=a.y;const h=(0,n.getCurrentTransform)(s),u=0===h[0]&&0===h[3]||0===h[1]&&0===h[2],p=u?i.slice(0):null;for(let i=0,n=0,g=e.length;i<g;i++)switch(0|e[i]){case r.OPS.rectangle:c=t[n++];d=t[n++];const e=t[n++],i=t[n++],g=c+e,f=d+i;s.moveTo(c,d);if(0===e||0===i)s.lineTo(g,f);else{s.lineTo(g,d);s.lineTo(g,f);s.lineTo(c,f)}u||a.updateRectMinMax(h,[c,d,g,f]);s.closePath();break;case r.OPS.moveTo:c=t[n++];d=t[n++];s.moveTo(c,d);u||a.updatePathMinMax(h,c,d);break;case r.OPS.lineTo:c=t[n++];d=t[n++];s.lineTo(c,d);u||a.updatePathMinMax(h,c,d);break;case r.OPS.curveTo:o=c;l=d;c=t[n+4];d=t[n+5];s.bezierCurveTo(t[n],t[n+1],t[n+2],t[n+3],c,d);a.updateCurvePathMinMax(h,o,l,t[n],t[n+1],t[n+2],t[n+3],c,d,p);n+=6;break;case r.OPS.curveTo2:o=c;l=d;s.bezierCurveTo(c,d,t[n],t[n+1],t[n+2],t[n+3]);a.updateCurvePathMinMax(h,o,l,c,d,t[n],t[n+1],t[n+2],t[n+3],p);c=t[n+2];d=t[n+3];n+=4;break;case r.OPS.curveTo3:o=c;l=d;c=t[n+2];d=t[n+3];s.bezierCurveTo(t[n],t[n+1],c,d,c,d);a.updateCurvePathMinMax(h,o,l,t[n],t[n+1],c,d,c,d,p);n+=4;break;case r.OPS.closePath:s.closePath()}u&&a.updateScalingPathMinMax(h,p);a.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(e){e=void 0===e||e;const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha;if(this.contentVisible)if("object"==typeof i&&null!=i&&i.getPattern){t.save();t.strokeStyle=i.getPattern(t,this,(0,n.getCurrentTransformInverse)(t),s.PathType.STROKE);this.rescaleAndStroke(!1);t.restore()}else this.rescaleAndStroke(!0);e&&this.consumePath(this.current.getClippedPathBoundingBox());t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath();this.stroke()}fill(e){e=void 0===e||e;const t=this.ctx;let i=!0,r=this.current.fillColor;this.backgroundColorToReplace&&r===this.backgroundColorToReplace&&(this.background&&"function"!=typeof this.background?r=this.background:i=!1);let a=!1;if(this.current.patternFill){t.save();t.fillStyle=r.getPattern(t,this,(0,n.getCurrentTransformInverse)(t),s.PathType.FILL);a=!0}const o=this.current.getClippedPathBoundingBox();if(i&&this.contentVisible&&null!==o)if(this.pendingEOFill){t.fill("evenodd");this.pendingEOFill=!1}else t.fill();a&&t.restore();e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0;this.fill()}fillStroke(){this.fill(!1);this.stroke(!1);this.consumePath()}eoFillStroke(){this.pendingEOFill=!0;this.fillStroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0;this.closePath();this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=p}eoClip(){this.pendingClip=g}beginText(){this.current.textMatrix=r.IDENTITY_MATRIX;this.current.textMatrixScale=1;this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save();t.beginPath();for(const i of e){t.setTransform(...i.transform);t.translate(i.x,i.y);i.addToPath(t,i.fontSize)}t.restore();t.clip();t.beginPath();delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),n=this.current;if(!i)throw new Error(`Can't find font for ${e}`);n.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX;0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||(0,r.warn)("Invalid font matrix for font "+e);if(t<0){t=-t;n.fontDirection=-1}else n.fontDirection=1;this.current.font=i;this.current.fontSize=t;if(i.isType3Font)return;const s=i.loadedName||"sans-serif";let a="normal";i.black?a="900":i.bold&&(a="bold");const o=i.italic?"italic":"normal",l=`"${s}", ${i.fallbackName}`;let c=t;t<16?c=16:t>100&&(c=100);this.current.fontSizeScale=t/c;this.ctx.font=`${o} ${a} ${c}px ${l}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e;this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t);this.moveText(e,t)}setTextMatrix(e,t,i,n,r,s){this.current.textMatrix=[e,t,i,n,r,s];this.current.textMatrixScale=Math.hypot(e,t);this.current.x=this.current.lineX=0;this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,h=c&r.TextRenderingMode.FILL_STROKE_MASK,u=!!(c&r.TextRenderingMode.ADD_TO_PATH_FLAG),p=o.patternFill&&!l.missingFile;let g;(l.disableFontFace||u||p)&&(g=l.getPathGenerator(this.commonObjs,e));if(l.disableFontFace||p){a.save();a.translate(t,i);a.beginPath();g(a,d);s&&a.setTransform(...s);h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||a.fill();h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||a.stroke();a.restore()}else{h!==r.TextRenderingMode.FILL&&h!==r.TextRenderingMode.FILL_STROKE||a.fillText(e,t,i);h!==r.TextRenderingMode.STROKE&&h!==r.TextRenderingMode.FILL_STROKE||a.strokeText(e,t,i)}if(u){(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(a),x:t,y:i,fontSize:d,addToPath:g})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1);e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){i=!0;break}return(0,r.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const a=t.fontSize;if(0===a)return;const o=this.ctx,l=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,u=t.textHScale*h,p=e.length,g=i.vertical,f=g?1:-1,m=i.defaultVMetrics,v=a*t.fontMatrix[0],_=t.textRenderingMode===r.TextRenderingMode.FILL&&!i.disableFontFace&&!t.patternFill;o.save();o.transform(...t.textMatrix);o.translate(t.x,t.y+t.textRise);h>0?o.scale(u,-1):o.scale(u,1);let b;if(t.patternFill){o.save();const e=t.fillColor.getPattern(o,this,(0,n.getCurrentTransformInverse)(o),s.PathType.FILL);b=(0,n.getCurrentTransform)(o);o.restore();o.fillStyle=e}let w=t.lineWidth;const y=t.textMatrixScale;if(0===y||0===w){const e=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;e!==r.TextRenderingMode.STROKE&&e!==r.TextRenderingMode.FILL_STROKE||(w=this.getSinglePixelWidth())}else w/=y;if(1!==l){o.scale(l,l);w/=l}o.lineWidth=w;let P,S=0;for(P=0;P<p;++P){const t=e[P];if("number"==typeof t){S+=f*t*a/1e3;continue}let n=!1;const r=(t.isSpace?d:0)+c,s=t.fontChar,u=t.accent;let p,w,y,E=t.width;if(g){const e=t.vmetric||m,i=-(t.vmetric?e[1]:.5*E)*v,n=e[2]*v;E=e?-e[0]:E;p=i/l;w=(S+n)/l}else{p=S/l;w=0}if(i.remeasure&&E>0){const e=1e3*o.measureText(s).width/a*l;if(E<e&&this.isFontSubpixelAAEnabled){const t=E/e;n=!0;o.save();o.scale(t,1);p/=t}else E!==e&&(p+=(E-e)/2e3*a/l)}if(this.contentVisible&&(t.isInFont||i.missingFile))if(_&&!u)o.fillText(s,p,w);else{this.paintChar(s,p,w,b);if(u){const e=p+a*u.offset.x/l,t=w-a*u.offset.y/l;this.paintChar(u.fontChar,e,t,b)}}y=g?E*v-r*h:E*v+r*h;S+=y;n&&o.restore()}g?t.y-=S:t.x+=S*u;o.restore();this.compose()}showType3Text(e){const t=this.ctx,i=this.current,n=i.font,s=i.fontSize,a=i.fontDirection,o=n.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||r.FONT_IDENTITY_MATRIX,u=e.length;let p,g,f,m;if(!(i.textRenderingMode===r.TextRenderingMode.INVISIBLE)&&0!==s){this._cachedScaleForStroking=null;this._cachedGetSinglePixelWidth=null;t.save();t.transform(...i.textMatrix);t.translate(i.x,i.y);t.scale(d,a);for(p=0;p<u;++p){g=e[p];if("number"==typeof g){m=o*g*s/1e3;this.ctx.translate(m,0);i.x+=m*d;continue}const a=(g.isSpace?c:0)+l,u=n.charProcOperatorList[g.operatorListId];if(!u){(0,r.warn)(`Type3 character "${g.operatorListId}" is not available.`);continue}if(this.contentVisible){this.processingType3=g;this.save();t.scale(s,s);t.transform(...h);this.executeOperatorList(u);this.restore()}f=r.Util.applyTransform([g.width,0],h)[0]*s+a;t.translate(f,0);i.x+=f*d}t.restore();this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,n,r,s){this.ctx.rect(i,n,r-i,s-n);this.ctx.clip();this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const i=e[1],r=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),a={createCanvasGraphics:e=>new CanvasGraphics(e,this.commonObjs,this.objs,this.canvasFactory)};t=new s.TilingPattern(e,i,this.ctx,a,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments);this.current.patternFill=!0}setStrokeRGBColor(e,t,i){var n;const s=(null===(n=this.selectColor)||void 0===n?void 0:n.call(this,e,t,i))||r.Util.makeHexColor(e,t,i);this.ctx.strokeStyle=s;this.current.strokeColor=s}setFillRGBColor(e,t,i){var n;let s=(null===(n=this.selectColor)||void 0===n?void 0:n.call(this,e,t,i))||r.Util.makeHexColor(e,t,i);this.backgroundColorToReplace&&s===this.backgroundColorToReplace&&this.background&&"function"!=typeof this.background&&(s=this.background);this.ctx.fillStyle=s;this.current.fillColor=s;this.current.patternFill=!1}_getPattern(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.cachedPatterns.has(e))t=this.cachedPatterns.get(e);else{t=(0,s.getShadingPattern)(this.objs.get(e));this.cachedPatterns.set(e,t)}i&&(t.matrix=i);return t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,(0,n.getCurrentTransformInverse)(t),s.PathType.SHADING);const a=(0,n.getCurrentTransformInverse)(t);if(a){const e=t.canvas,i=e.width,n=e.height,s=r.Util.applyTransform([0,0],a),o=r.Util.applyTransform([0,n],a),l=r.Util.applyTransform([i,0],a),c=r.Util.applyTransform([i,n],a),d=Math.min(s[0],o[0],l[0],c[0]),h=Math.min(s[1],o[1],l[1],c[1]),u=Math.max(s[0],o[0],l[0],c[0]),p=Math.max(s[1],o[1],l[1],c[1]);this.ctx.fillRect(d,h,u-d,p-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox());this.restore()}beginInlineImage(){(0,r.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,r.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible){this.save();this.baseTransformStack.push(this.baseTransform);Array.isArray(e)&&6===e.length&&this.transform(...e);this.baseTransform=(0,n.getCurrentTransform)(this.ctx);if(t){const e=t[2]-t[0],i=t[3]-t[1];this.ctx.rect(t[0],t[1],e,i);this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),t);this.clip();this.endPath()}}}paintFormXObjectEnd(){if(this.contentVisible){this.restore();this.baseTransform=this.baseTransformStack.pop()}}beginGroup(e){if(!this.contentVisible)return;this.save();if(this.inSMaskMode){this.endSMaskMode();this.current.activeSMask=null}const t=this.ctx;e.isolated||(0,r.info)("TODO: Support non-isolated groups.");e.knockout&&(0,r.warn)("Knockout groups not supported.");const i=(0,n.getCurrentTransform)(t);e.matrix&&t.transform(...e.matrix);if(!e.bbox)throw new Error("Bounding box is required.");let s=r.Util.getAxialAlignedBoundingBox(e.bbox,(0,n.getCurrentTransform)(t));const a=[0,0,t.canvas.width,t.canvas.height];s=r.Util.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),c=Math.floor(s[1]);let d=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-c,1),u=1,p=1;if(d>l){u=d/l;d=l}if(h>l){p=h/l;h=l}this.current.startNewPathAndClipBox([0,0,d,h]);let g="groupAt"+this.groupLevel;e.smask&&(g+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(g,d,h),m=f.context;m.scale(1/u,1/p);m.translate(-o,-c);m.transform(...i);if(e.smask)this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:c,scaleX:u,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null});else{t.setTransform(1,0,0,1,0,0);t.translate(o,c);t.scale(u,p);t.save()}copyCtxState(t,m);this.ctx=m;this.setGState([["BM","source-over"],["ca",1],["CA",1]]);this.groupStack.push(t);this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();this.ctx=i;this.ctx.imageSmoothingEnabled=!1;if(e.smask){this.tempSMask=this.smaskStack.pop();this.restore()}else{this.ctx.restore();const e=(0,n.getCurrentTransform)(this.ctx);this.restore();this.ctx.save();this.ctx.setTransform(...e);const i=r.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0);this.ctx.restore();this.compose(i)}}beginAnnotation(e,t,i,s,a){_classPrivateMethodGet(this,f,_restoreInitialState2).call(this);resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.save();this.save();this.baseTransform&&this.ctx.setTransform(...this.baseTransform);if(Array.isArray(t)&&4===t.length){const s=t[2]-t[0],o=t[3]-t[1];if(a&&this.annotationCanvasMap){(i=i.slice())[4]-=t[0];i[5]-=t[1];(t=t.slice())[0]=t[1]=0;t[2]=s;t[3]=o;const[a,l]=r.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,d=Math.ceil(s*this.outputScaleX*c),h=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,h);const{canvas:u,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,u);this.annotationCanvas.savedCtx=this.ctx;this.ctx=p;this.ctx.setTransform(a,0,0,-l,0,o*l);resetCtxToDefault(this.ctx,this.foregroundColor)}else{resetCtxToDefault(this.ctx,this.foregroundColor);this.ctx.rect(t[0],t[1],s,o);this.ctx.clip();this.endPath()}}this.current=new CanvasExtraState(this.ctx.canvas.width,this.ctx.canvas.height);this.transform(...i);this.transform(...s)}endAnnotation(){if(this.annotationCanvas){this.ctx=this.annotationCanvas.savedCtx;delete this.annotationCanvas.savedCtx;delete this.annotationCanvas}}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const i=this.ctx,n=this.processingType3;if(n){void 0===n.compiled&&(n.compiled=function compileType3Glyph(e){const{width:t,height:i}=e;if(t>c||i>c)return null;const n=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let s,a,o,l=new Uint8Array(r*(i+1));const d=t+7&-8;let h=new Uint8Array(d*i),u=0;for(const t of e.data){let e=128;for(;e>0;){h[u++]=t&e?0:255;e>>=1}}let p=0;u=0;if(0!==h[u]){l[0]=1;++p}for(a=1;a<t;a++){if(h[u]!==h[u+1]){l[a]=h[u]?2:1;++p}u++}if(0!==h[u]){l[a]=2;++p}for(s=1;s<i;s++){u=s*d;o=s*r;if(h[u-d]!==h[u]){l[o]=h[u]?1:8;++p}let e=(h[u]?4:0)+(h[u-d]?8:0);for(a=1;a<t;a++){e=(e>>2)+(h[u+1]?4:0)+(h[u-d+1]?8:0);if(n[e]){l[o+a]=n[e];++p}u++}if(h[u-d]!==h[u]){l[o+a]=h[u]?2:4;++p}if(p>1e3)return null}u=d*(i-1);o=s*r;if(0!==h[u]){l[o]=8;++p}for(a=1;a<t;a++){if(h[u]!==h[u+1]){l[o+a]=h[u]?4:8;++p}u++}if(0!==h[u]){l[o+a]=4;++p}if(p>1e3)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),f=new Path2D;for(s=0;p&&s<=i;s++){let e=s*r;const i=e+t;for(;e<i&&!l[e];)e++;if(e===i)continue;f.moveTo(e%r,s);const n=e;let a=l[e];do{const t=g[a];do{e+=t}while(!l[e]);const i=l[e];if(5!==i&&10!==i){a=i;l[e]=0}else{a=i&51*a>>4;l[e]&=a>>2|a<<2}f.lineTo(e%r,e/r|0);l[e]||--p}while(n!==e);--s}h=null;l=null;return function(e){e.save();e.scale(1/t,-1/i);e.translate(0,-i);e.fill(f);e.beginPath();e.restore()}}(e));if(n.compiled){n.compiled(i);return}}const r=this._createMaskCanvas(e),s=r.canvas;i.save();i.setTransform(1,0,0,1,0,0);i.drawImage(s,r.offsetX,r.offsetY);i.restore();this.compose()}paintImageMaskXObjectRepeat(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const l=this.ctx;l.save();const c=(0,n.getCurrentTransform)(l);l.transform(t,i,s,a,0,0);const d=this._createMaskCanvas(e);l.setTransform(1,0,0,1,0,0);for(let e=0,n=o.length;e<n;e+=2){const n=r.Util.transform(c,[t,i,s,a,o[e],o[e+1]]),[h,u]=r.Util.applyTransform([0,0],n);l.drawImage(d.canvas,h,u)}l.restore();this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const a of e){const{data:e,width:o,height:l,transform:c}=a,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=d.context;h.save();putBinaryImageMask(h,this.getObject(e,a));h.globalCompositeOperation="source-in";h.fillStyle=r?i.getPattern(h,this,(0,n.getCurrentTransformInverse)(t),s.PathType.FILL):i;h.fillRect(0,0,o,l);h.restore();t.save();t.transform(...c);t.scale(1,-1);drawImageAtIntegerCoords(t,d.canvas,0,0,o,l,0,-1,1,1);t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,r.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,i,n){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){(0,r.warn)("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let e=0,r=n.length;e<r;e+=2)l.push({transform:[t,0,0,i,n[e],n[e+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;this.save();s.scale(1/t,-1/i);let a;if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)a=e;else{const n=this.cachedCanvases.getCanvas("inlineImage",t,i);putBinaryImageData(n.context,e,this.current.transferMaps);a=n.canvas}const o=this._scaleImage(a,(0,n.getCurrentTransformInverse)(s));s.imageSmoothingEnabled=getImageSmoothingEnabled((0,n.getCurrentTransform)(s),e.interpolate);const[l,c]=drawImageAtIntegerCoords(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i);if(this.imageLayer){const[t,s]=r.Util.applyTransform([0,-i],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:e,left:t,top:s,width:l,height:c})}this.compose();this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx,s=e.width,a=e.height,o=this.cachedCanvases.getCanvas("inlineImage",s,a);putBinaryImageData(o.context,e,this.current.transferMaps);for(const l of t){i.save();i.transform(...l.transform);i.scale(1,-1);drawImageAtIntegerCoords(i,o.canvas,l.x,l.y,l.w,l.h,0,-1,1,1);if(this.imageLayer){const[t,i]=r.Util.applyTransform([l.x,l.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:e,left:t,top:i,width:s,height:a})}i.restore()}this.compose()}paintSolidColorImageMask(){if(this.contentVisible){this.ctx.fillRect(0,0,1,1);this.compose()}}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0});this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop();this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath();this.pendingClip||this.compose(e);const i=this.ctx;if(this.pendingClip){t||(this.pendingClip===g?i.clip("evenodd"):i.clip());this.pendingClip=null}this.current.startNewPathAndClipBox(this.current.clipBox);i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,n.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:e}=this.current,t=(0,n.getCurrentTransform)(this.ctx);let i,r;if(0===t[1]&&0===t[2]){const n=Math.abs(t[0]),s=Math.abs(t[3]);if(0===e){i=1/n;r=1/s}else{const t=n*e,a=s*e;i=t<1?1/t:1;r=a<1?1/a:1}}else{const n=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[1]),a=Math.hypot(t[2],t[3]);if(0===e){i=a/n;r=s/n}else{const t=e*n;i=a>t?a/t:1;r=s>t?s/t:1}}this._cachedScaleForStroking=[i,r]}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();t.lineWidth=i||1;if(1===r&&1===s){t.stroke();return}let a,o,l;if(e){a=(0,n.getCurrentTransform)(t);o=t.getLineDash().slice();l=t.lineDashOffset}t.scale(r,s);const c=Math.max(r,s);t.setLineDash(t.getLineDash().map((e=>e/c)));t.lineDashOffset/=c;t.stroke();if(e){t.setTransform(...a);t.setLineDash(o);t.lineDashOffset=l}}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}t.CanvasGraphics=CanvasGraphics;function _restoreInitialState2(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore();if(this.transparentCanvas){this.ctx=this.compositeCtx;this.ctx.save();this.ctx.setTransform(1,0,0,1,0,0);this.ctx.drawImage(this.transparentCanvas,0,0);this.ctx.restore();this.transparentCanvas=null}}for(const e in r.OPS)void 0!==CanvasGraphics.prototype[e]&&(CanvasGraphics.prototype[r.OPS[e]]=CanvasGraphics.prototype[e])},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TilingPattern=t.PathType=void 0;t.getShadingPattern=function getShadingPattern(e){switch(e[0]){case"RadialAxial":return new RadialAxialShadingPattern(e);case"Mesh":return new MeshShadingPattern(e);case"Dummy":return new DummyShadingPattern}throw new Error(`Unknown IR type: ${e[0]}`)};var n=i(1),r=i(134),s=i(140);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=a;function applyBoundingBox(e,t){if(!t||s.isNodeJS)return;const i=t[2]-t[0],n=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,n);e.clip(r)}class BaseShadingPattern{constructor(){this.constructor===BaseShadingPattern&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class RadialAxialShadingPattern extends BaseShadingPattern{constructor(e){super();this._type=e[1];this._bbox=e[2];this._colorStops=e[3];this._p0=e[4];this._p1=e[5];this._r0=e[6];this._r1=e[7];this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const e of this._colorStops)t.addColorStop(e[0],e[1]);return t}getPattern(e,t,i,s){let o;if(s===a.STROKE||s===a.FILL){const a=t.current.getClippedPathBoundingBox(s,(0,r.getCurrentTransform)(e))||[0,0,0,0],l=Math.ceil(a[2]-a[0])||1,c=Math.ceil(a[3]-a[1])||1,d=t.cachedCanvases.getCanvas("pattern",l,c,!0),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height);h.beginPath();h.rect(0,0,h.canvas.width,h.canvas.height);h.translate(-a[0],-a[1]);i=n.Util.transform(i,[1,0,0,1,a[0],a[1]]);h.transform(...t.baseTransform);this.matrix&&h.transform(...this.matrix);applyBoundingBox(h,this._bbox);h.fillStyle=this._createGradient(h);h.fill();o=e.createPattern(d.canvas,"no-repeat");const u=new DOMMatrix(i);try{o.setTransform(u)}catch(e){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${null==e?void 0:e.message}".`)}}else{applyBoundingBox(e,this._bbox);o=this._createGradient(e)}return o}}function drawTriangle(e,t,i,n,r,s,a,o){const l=t.coords,c=t.colors,d=e.data,h=4*e.width;let u;if(l[i+1]>l[n+1]){u=i;i=n;n=u;u=s;s=a;a=u}if(l[n+1]>l[r+1]){u=n;n=r;r=u;u=a;a=o;o=u}if(l[i+1]>l[n+1]){u=i;i=n;n=u;u=s;s=a;a=u}const p=(l[i]+t.offsetX)*t.scaleX,g=(l[i+1]+t.offsetY)*t.scaleY,f=(l[n]+t.offsetX)*t.scaleX,m=(l[n+1]+t.offsetY)*t.scaleY,v=(l[r]+t.offsetX)*t.scaleX,_=(l[r+1]+t.offsetY)*t.scaleY;if(g>=_)return;const b=c[s],w=c[s+1],y=c[s+2],P=c[a],S=c[a+1],E=c[a+2],A=c[o],x=c[o+1],C=c[o+2],T=Math.round(g),M=Math.round(_);let k,I,D,L,R,O,N,B;for(let e=T;e<=M;e++){if(e<m){let t;t=e<g?0:(g-e)/(g-m);k=p-(p-f)*t;I=b-(b-P)*t;D=w-(w-S)*t;L=y-(y-E)*t}else{let t;t=e>_?1:m===_?0:(m-e)/(m-_);k=f-(f-v)*t;I=P-(P-A)*t;D=S-(S-x)*t;L=E-(E-C)*t}let t;t=e<g?0:e>_?1:(g-e)/(g-_);R=p-(p-v)*t;O=b-(b-A)*t;N=w-(w-x)*t;B=y-(y-C)*t;const i=Math.round(Math.min(k,R)),n=Math.round(Math.max(k,R));let r=h*e+4*i;for(let e=i;e<=n;e++){t=(k-e)/(k-R);t<0?t=0:t>1&&(t=1);d[r++]=I-(I-O)*t|0;d[r++]=D-(D-N)*t|0;d[r++]=L-(L-B)*t|0;d[r++]=255}}}function drawFigure(e,t,i){const n=t.coords,r=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(n.length/o)-1,c=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<c;s++,t++){drawTriangle(e,i,n[t],n[t+1],n[t+o],r[t],r[t+1],r[t+o]);drawTriangle(e,i,n[t+o+1],n[t+1],n[t+o],r[t+o+1],r[t+1],r[t+o])}}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)drawTriangle(e,i,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class MeshShadingPattern extends BaseShadingPattern{constructor(e){super();this._coords=e[2];this._colors=e[3];this._figures=e[4];this._bounds=e[5];this._bbox=e[7];this._background=e[8];this.matrix=null}_createMeshCanvas(e,t,i){const n=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-n,a=Math.ceil(this._bounds[3])-r,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,d=a/l,h={coords:this._coords,colors:this._colors,offsetX:-n,offsetY:-r,scaleX:1/c,scaleY:1/d},u=o+4,p=l+4,g=i.getCanvas("mesh",u,p,!1),f=g.context,m=f.createImageData(o,l);if(t){const e=m.data;for(let i=0,n=e.length;i<n;i+=4){e[i]=t[0];e[i+1]=t[1];e[i+2]=t[2];e[i+3]=255}}for(const e of this._figures)drawFigure(m,e,h);f.putImageData(m,2,2);return{canvas:g.canvas,offsetX:n-2*c,offsetY:r-2*d,scaleX:c,scaleY:d}}getPattern(e,t,i,s){applyBoundingBox(e,this._bbox);let o;if(s===a.SHADING)o=n.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(e));else{o=n.Util.singularValueDecompose2dScale(t.baseTransform);if(this.matrix){const e=n.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*e[0],o[1]*e[1]]}}const l=this._createMeshCanvas(o,s===a.SHADING?null:this._background,t.cachedCanvases);if(s!==a.SHADING){e.setTransform(...t.baseTransform);this.matrix&&e.transform(...this.matrix)}e.translate(l.offsetX,l.offsetY);e.scale(l.scaleX,l.scaleY);return e.createPattern(l.canvas,"no-repeat")}}class DummyShadingPattern extends BaseShadingPattern{getPattern(){return"hotpink"}}const o=1,l=2;class TilingPattern{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(e,t,i,n,r){this.operatorList=e[2];this.matrix=e[3]||[1,0,0,1,0,0];this.bbox=e[4];this.xstep=e[5];this.ystep=e[6];this.paintType=e[7];this.tilingType=e[8];this.color=t;this.ctx=i;this.canvasGraphicsFactory=n;this.baseTransform=r}createPatternCanvas(e){const t=this.operatorList,i=this.bbox,s=this.xstep,a=this.ystep,o=this.paintType,l=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+l);const h=i[0],u=i[1],p=i[2],g=i[3],f=n.Util.singularValueDecompose2dScale(this.matrix),m=n.Util.singularValueDecompose2dScale(this.baseTransform),v=[f[0]*m[0],f[1]*m[1]],_=this.getSizeAndScale(s,this.ctx.canvas.width,v[0]),b=this.getSizeAndScale(a,this.ctx.canvas.height,v[1]),w=e.cachedCanvases.getCanvas("pattern",_.size,b.size,!0),y=w.context,P=d.createCanvasGraphics(y);P.groupLevel=e.groupLevel;this.setFillAndStrokeStyleToContext(P,o,c);let S=h,E=u,A=p,x=g;if(h<0){S=0;A+=Math.abs(h)}if(u<0){E=0;x+=Math.abs(u)}y.translate(-_.scale*S,-b.scale*E);P.transform(_.scale,0,0,b.scale,0,0);y.save();this.clipBbox(P,S,E,A,x);P.baseTransform=(0,r.getCurrentTransform)(P.ctx);P.executeOperatorList(t);P.endDrawing();return{canvas:w.canvas,scaleX:_.scale,scaleY:b.scale,offsetX:S,offsetY:E}}getSizeAndScale(e,t,i){e=Math.abs(e);const n=Math.max(TilingPattern.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);r>=n?r=n:i=r/e;return{scale:i,size:r}}clipBbox(e,t,i,n,s){const a=n-t,o=s-i;e.ctx.rect(t,i,a,o);e.current.updateRectMinMax((0,r.getCurrentTransform)(e.ctx),[t,i,n,s]);e.clip();e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case o:const e=this.ctx;r.fillStyle=e.fillStyle;r.strokeStyle=e.strokeStyle;s.fillColor=e.fillStyle;s.strokeColor=e.strokeStyle;break;case l:const a=n.Util.makeHexColor(i[0],i[1],i[2]);r.fillStyle=a;r.strokeStyle=a;s.fillColor=a;s.strokeColor=a;break;default:throw new n.FormatError(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;if(r!==a.SHADING){s=n.Util.transform(s,t.baseTransform);this.matrix&&(s=n.Util.transform(s,this.matrix))}const o=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(o.offsetX,o.offsetY);l=l.scale(1/o.scaleX,1/o.scaleY);const c=e.createPattern(o.canvas,"repeat");try{c.setTransform(l)}catch(e){(0,n.warn)(`TilingPattern.getPattern: "${null==e?void 0:e.message}".`)}return c}}t.TilingPattern=TilingPattern},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isNodeJS=void 0;const i=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=i},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.applyMaskImageData=function applyMaskImageData(e){let{src:t,srcPos:i=0,dest:r,destPos:s=0,width:a,height:o,inverseDecode:l=!1}=e;const c=n.FeatureTest.isLittleEndian?4278190080:255,[d,h]=l?[0,c]:[c,0],u=a>>3,p=7&a,g=t.length;r=new Uint32Array(r.buffer);for(let e=0;e<o;e++){for(const e=i+u;i<e;i++){const e=i<g?t[i]:255;r[s++]=128&e?h:d;r[s++]=64&e?h:d;r[s++]=32&e?h:d;r[s++]=16&e?h:d;r[s++]=8&e?h:d;r[s++]=4&e?h:d;r[s++]=2&e?h:d;r[s++]=1&e?h:d}if(0===p)continue;const e=i<g?t[i++]:255;for(let t=0;t<p;t++)r[s++]=e&1<<7-t?h:d}return{srcPos:i,destPos:s}};var n=i(1)},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GlobalWorkerOptions=void 0;const i=Object.create(null);t.GlobalWorkerOptions=i;i.workerPort=void 0===i.workerPort?null:i.workerPort;i.workerSrc=void 0===i.workerSrc?"":i.workerSrc},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MessageHandler=void 0;var n=i(1);const r=1,s=2,a=1,o=2,l=3,c=4,d=5,h=6,u=7,p=8;function wrapReason(e){e instanceof Error||"object"==typeof e&&null!==e||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.');switch(e.name){case"AbortException":return new n.AbortException(e.message);case"MissingPDFException":return new n.MissingPDFException(e.message);case"PasswordException":return new n.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new n.UnknownErrorException(e.message,e.details);default:return new n.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class MessageHandler{constructor(e,t,i){this.sourceName=e;this.targetName=t;this.comObj=i;this.callbackId=1;this.streamId=1;this.streamSinks=Object.create(null);this.streamControllers=Object.create(null);this.callbackCapabilities=Object.create(null);this.actionHandler=Object.create(null);this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream){this._processStreamMessage(t);return}if(t.callback){const e=t.callbackId,i=this.callbackCapabilities[e];if(!i)throw new Error(`Cannot resolve callback ${e}`);delete this.callbackCapabilities[e];if(t.callback===r)i.resolve(t.data);else{if(t.callback!==s)throw new Error("Unexpected callback case");i.reject(wrapReason(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,a=t.sourceName;new Promise((function(e){e(n(t.data))})).then((function(n){i.postMessage({sourceName:e,targetName:a,callback:r,callbackId:t.callbackId,data:n})}),(function(n){i.postMessage({sourceName:e,targetName:a,callback:s,callbackId:t.callbackId,reason:wrapReason(n)})}))}else t.streamId?this._createStreamSink(t):n(t.data)};i.addEventListener("message",this._onComObjOnMessage)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=(0,n.createPromiseCapability)();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(e){s.reject(e)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:i=>{const a=(0,n.createPromiseCapability)();this.streamControllers[s]={controller:i,startCall:a,pullCall:null,cancelCall:null,isClosed:!1};c.postMessage({sourceName:o,targetName:l,action:e,streamId:s,data:t,desiredSize:i.desiredSize},r);return a.promise},pull:e=>{const t=(0,n.createPromiseCapability)();this.streamControllers[s].pullCall=t;c.postMessage({sourceName:o,targetName:l,stream:h,streamId:s,desiredSize:e.desiredSize});return t.promise},cancel:e=>{(0,n.assert)(e instanceof Error,"cancel must have a valid reason");const t=(0,n.createPromiseCapability)();this.streamControllers[s].cancelCall=t;this.streamControllers[s].isClosed=!0;c.postMessage({sourceName:o,targetName:l,stream:a,streamId:s,reason:wrapReason(e)});return t.promise}},i)}_createStreamSink(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],h={enqueue(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=a;if(l>0&&this.desiredSize<=0){this.sinkCapability=(0,n.createPromiseCapability)();this.ready=this.sinkCapability.promise}s.postMessage({sourceName:i,targetName:r,stream:c,streamId:t,chunk:e},o)},close(){if(!this.isCancelled){this.isCancelled=!0;s.postMessage({sourceName:i,targetName:r,stream:l,streamId:t});delete a.streamSinks[t]}},error(e){(0,n.assert)(e instanceof Error,"error must have a valid reason");if(!this.isCancelled){this.isCancelled=!0;s.postMessage({sourceName:i,targetName:r,stream:d,streamId:t,reason:wrapReason(e)})}},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve();h.ready=h.sinkCapability.promise;this.streamSinks[t]=h;new Promise((function(t){t(o(e.data,h))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:i,targetName:r,stream:p,streamId:t,reason:wrapReason(e)})}))}_processStreamMessage(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,g=this.streamControllers[t],f=this.streamSinks[t];switch(e.stream){case p:e.success?g.startCall.resolve():g.startCall.reject(wrapReason(e.reason));break;case u:e.success?g.pullCall.resolve():g.pullCall.reject(wrapReason(e.reason));break;case h:if(!f){s.postMessage({sourceName:i,targetName:r,stream:u,streamId:t,success:!0});break}f.desiredSize<=0&&e.desiredSize>0&&f.sinkCapability.resolve();f.desiredSize=e.desiredSize;new Promise((function(e){e(f.onPull&&f.onPull())})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:u,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:i,targetName:r,stream:u,streamId:t,reason:wrapReason(e)})}));break;case c:(0,n.assert)(g,"enqueue should have stream controller");if(g.isClosed)break;g.controller.enqueue(e.chunk);break;case l:(0,n.assert)(g,"close should have stream controller");if(g.isClosed)break;g.isClosed=!0;g.controller.close();this._deleteStreamController(g,t);break;case d:(0,n.assert)(g,"error should have stream controller");g.controller.error(wrapReason(e.reason));this._deleteStreamController(g,t);break;case o:e.success?g.cancelCall.resolve():g.cancelCall.reject(wrapReason(e.reason));this._deleteStreamController(g,t);break;case a:if(!f)break;new Promise((function(t){t(f.onCancel&&f.onCancel(wrapReason(e.reason)))})).then((function(){s.postMessage({sourceName:i,targetName:r,stream:o,streamId:t,success:!0})}),(function(e){s.postMessage({sourceName:i,targetName:r,stream:o,streamId:t,reason:wrapReason(e)})}));f.sinkCapability.reject(wrapReason(e.reason));f.isCancelled=!0;delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e,t){await Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]);delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Metadata=void 0;var n=i(1);function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var r=new WeakMap,s=new WeakMap;t.Metadata=class Metadata{constructor(e){let{parsedData:t,rawData:i}=e;_classPrivateFieldInitSpec(this,r,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,s,{writable:!0,value:void 0});_classPrivateFieldSet(this,r,t);_classPrivateFieldSet(this,s,i)}getRaw(){return _classPrivateFieldGet(this,s)}get(e){var t;return null!==(t=_classPrivateFieldGet(this,r).get(e))&&void 0!==t?t:null}getAll(){return(0,n.objectFromMap)(_classPrivateFieldGet(this,r))}has(e){return _classPrivateFieldGet(this,r).has(e)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OptionalContentConfig=void 0;var n=i(1);function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}const r=Symbol("INTERNAL");var s=new WeakMap;class OptionalContentGroup{constructor(e,t){_classPrivateFieldInitSpec(this,s,{writable:!0,value:!0});this.name=e;this.intent=t}get visible(){return _classPrivateFieldGet(this,s)}_setVisible(e,t){e!==r&&(0,n.unreachable)("Internal method `_setVisible` called.");_classPrivateFieldSet(this,s,t)}}var a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakSet;t.OptionalContentConfig=class OptionalContentConfig{constructor(e){!function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}(this,d);_classPrivateFieldInitSpec(this,a,{writable:!0,value:!0});_classPrivateFieldInitSpec(this,o,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,l,{writable:!0,value:null});_classPrivateFieldInitSpec(this,c,{writable:!0,value:null});this.name=null;this.creator=null;if(null!==e){this.name=e.name;this.creator=e.creator;_classPrivateFieldSet(this,c,e.order);for(const t of e.groups)_classPrivateFieldGet(this,o).set(t.id,new OptionalContentGroup(t.name,t.intent));if("OFF"===e.baseState)for(const e of _classPrivateFieldGet(this,o).values())e._setVisible(r,!1);for(const t of e.on)_classPrivateFieldGet(this,o).get(t)._setVisible(r,!0);for(const t of e.off)_classPrivateFieldGet(this,o).get(t)._setVisible(r,!1);_classPrivateFieldSet(this,l,new Map);for(const[e,t]of _classPrivateFieldGet(this,o))_classPrivateFieldGet(this,l).set(e,t.visible)}}isVisible(e){if(0===_classPrivateFieldGet(this,o).size)return!0;if(!e){(0,n.warn)("Optional content group not defined.");return!0}if("OCG"===e.type){if(!_classPrivateFieldGet(this,o).has(e.id)){(0,n.warn)(`Optional content group not found: ${e.id}`);return!0}return _classPrivateFieldGet(this,o).get(e.id).visible}if("OCMD"===e.type){if(e.expression)return _classPrivateMethodGet(this,d,_evaluateVisibilityExpression2).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(this,o).has(t)){(0,n.warn)(`Optional content group not found: ${t}`);return!0}if(_classPrivateFieldGet(this,o).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(this,o).has(t)){(0,n.warn)(`Optional content group not found: ${t}`);return!0}if(!_classPrivateFieldGet(this,o).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(this,o).has(t)){(0,n.warn)(`Optional content group not found: ${t}`);return!0}if(!_classPrivateFieldGet(this,o).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!_classPrivateFieldGet(this,o).has(t)){(0,n.warn)(`Optional content group not found: ${t}`);return!0}if(_classPrivateFieldGet(this,o).get(t).visible)return!1}return!0}(0,n.warn)(`Unknown optional content policy ${e.policy}.`);return!0}(0,n.warn)(`Unknown group type ${e.type}.`);return!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_classPrivateFieldGet(this,o).has(e)){_classPrivateFieldGet(this,o).get(e)._setVisible(r,!!t);_classPrivateFieldSet(this,a,null)}else(0,n.warn)(`Optional content group not found: ${e}`)}get hasInitialVisibility(){if(null!==_classPrivateFieldGet(this,a))return _classPrivateFieldGet(this,a);for(const[e,t]of _classPrivateFieldGet(this,o)){const i=_classPrivateFieldGet(this,l).get(e);if(t.visible!==i)return _classPrivateFieldSet(this,a,!1)}return _classPrivateFieldSet(this,a,!0)}getOrder(){return _classPrivateFieldGet(this,o).size?_classPrivateFieldGet(this,c)?_classPrivateFieldGet(this,c).slice():[..._classPrivateFieldGet(this,o).keys()]:null}getGroups(){return _classPrivateFieldGet(this,o).size>0?(0,n.objectFromMap)(_classPrivateFieldGet(this,o)):null}getGroup(e){return _classPrivateFieldGet(this,o).get(e)||null}};function _evaluateVisibilityExpression2(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const t=e[r];let s;if(Array.isArray(t))s=_classPrivateMethodGet(this,d,_evaluateVisibilityExpression2).call(this,t);else{if(!_classPrivateFieldGet(this,o).has(t)){(0,n.warn)(`Optional content group not found: ${t}`);return!0}s=_classPrivateFieldGet(this,o).get(t).visible}switch(i){case"And":if(!s)return!1;break;case"Or":if(s)return!0;break;case"Not":return!s;default:return!0}}return"And"===i}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFDataTransportStream=void 0;var n=i(1),r=i(134);t.PDFDataTransportStream=class PDFDataTransportStream{constructor(e,t){(0,n.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');this._queuedChunks=[];this._progressiveDone=e.progressiveDone||!1;this._contentDispositionFilename=e.contentDispositionFilename||null;const i=e.initialData;if((null==i?void 0:i.length)>0){const e=new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t;this._isStreamingSupported=!e.disableStream;this._isRangeSupported=!e.disableRange;this._contentLength=e.length;this._fullRequestReader=null;this._rangeReaders=[];this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})}));this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})}));this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})}));this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()}));this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{const i=this._rangeReaders.some((function(i){if(i._begin!==e.begin)return!1;i._enqueue(t);return!0}));(0,n.assert)(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){if(void 0===e.total){const t=this._rangeReaders[0];null!=t&&t.onProgress&&t.onProgress({loaded:e.loaded})}else{const t=this._fullRequestReader;null!=t&&t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone();this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;this._queuedChunks=null;return new PDFDataTransportStreamReader(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new PDFDataTransportStreamRangeReader(this,e,t);this._pdfDataRangeTransport.requestDataRange(e,t);this._rangeReaders.push(i);return i}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}};class PDFDataTransportStreamReader{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e;this._done=i||!1;this._filename=(0,r.isPdfFile)(n)?n:null;this._queuedChunks=t||[];this._loaded=0;for(const e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[];this._headersReady=Promise.resolve();e._fullRequestReader=this;this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();this._requests.push(e);return e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class PDFDataTransportStreamRangeReader{constructor(e,t,i){this._stream=e;this._begin=t;this._end=i;this._queuedChunk=null;this._requests=[];this._done=!1;this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0;this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;this._queuedChunk=null;return{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();this._requests.push(e);return e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0;this._stream._removeRangeReader(this)}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.XfaText=void 0;class XfaText{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};!function walk(e){var i;if(!e)return;let n=null;const r=e.name;if("#text"===r)n=e.value;else{if(!XfaText.shouldBuildText(r))return;null!=e&&null!==(i=e.attributes)&&void 0!==i&&i.textContent?n=e.attributes.textContent:e.value&&(n=e.value)}null!==n&&t.push({str:n});if(e.children)for(const t of e.children)walk(t)}(e);return i}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=XfaText},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=i(135);const fetchData=function(e){return new Promise(((t,i)=>{require("fs").readFile(e,((e,n)=>{!e&&n?t(new Uint8Array(n)):i(new Error(e))}))}))};class NodeCanvasFactory extends n.BaseCanvasFactory{_createCanvas(e,t){return require("canvas").createCanvas(e,t)}}t.NodeCanvasFactory=NodeCanvasFactory;class NodeCMapReaderFactory extends n.BaseCMapReaderFactory{_fetchData(e,t){return fetchData(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=NodeCMapReaderFactory;class NodeStandardFontDataFactory extends n.BaseStandardFontDataFactory{_fetchData(e){return fetchData(e)}}t.NodeStandardFontDataFactory=NodeStandardFontDataFactory},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationEditorLayer=void 0;var n=i(133),r=i(1),s=i(150),a=i(151);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakSet,m=new WeakSet,v=new WeakSet,_=new WeakSet;class AnnotationEditorLayer{constructor(e){_classPrivateMethodInitSpec(this,_);_classPrivateMethodInitSpec(this,v);_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,f);_classPrivateFieldInitSpec(this,o,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,l,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,c,{writable:!0,value:this.pointerup.bind(this)});_classPrivateFieldInitSpec(this,d,{writable:!0,value:this.pointerdown.bind(this)});_classPrivateFieldInitSpec(this,h,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,u,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,p,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,g,{writable:!0,value:void 0});if(!AnnotationEditorLayer._initialized){AnnotationEditorLayer._initialized=!0;s.FreeTextEditor.initialize(e.l10n);a.InkEditor.initialize(e.l10n);e.uiManager.registerEditorTypes([s.FreeTextEditor,a.InkEditor])}_classPrivateFieldSet(this,g,e.uiManager);this.annotationStorage=e.annotationStorage;this.pageIndex=e.pageIndex;this.div=e.div;_classPrivateFieldSet(this,o,e.accessibilityManager);_classPrivateFieldGet(this,g).addLayer(this)}updateToolbar(e){_classPrivateFieldGet(this,g).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(this,g).getMode();_classPrivateMethodGet(this,_,_cleanup2).call(this);if(e===r.AnnotationEditorType.INK){this.addInkEditorIfNeeded(!1);this.disableClick()}else this.enableClick();_classPrivateFieldGet(this,g).unselectAll()}addInkEditorIfNeeded(e){if(!e&&_classPrivateFieldGet(this,g).getMode()!==r.AnnotationEditorType.INK)return;if(!e)for(const e of _classPrivateFieldGet(this,h).values())if(e.isEmpty()){e.setInBackground();return}_classPrivateMethodGet(this,v,_createAndAddNewEditor2).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(e){_classPrivateFieldGet(this,g).setEditingState(e)}addCommands(e){_classPrivateFieldGet(this,g).addCommands(e)}enable(){this.div.style.pointerEvents="auto";for(const e of _classPrivateFieldGet(this,h).values())e.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const e of _classPrivateFieldGet(this,h).values())e.disableEditing()}setActiveEditor(e){_classPrivateFieldGet(this,g).getActive()!==e&&_classPrivateFieldGet(this,g).setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",_classPrivateFieldGet(this,d));this.div.addEventListener("pointerup",_classPrivateFieldGet(this,c))}disableClick(){this.div.removeEventListener("pointerdown",_classPrivateFieldGet(this,d));this.div.removeEventListener("pointerup",_classPrivateFieldGet(this,c))}attach(e){_classPrivateFieldGet(this,h).set(e.id,e)}detach(e){var t;_classPrivateFieldGet(this,h).delete(e.id);null===(t=_classPrivateFieldGet(this,o))||void 0===t||t.removePointerInTextLayer(e.contentDiv)}remove(e){_classPrivateFieldGet(this,g).removeEditor(e);this.detach(e);this.annotationStorage.remove(e.id);e.div.style.display="none";setTimeout((()=>{e.div.style.display="";e.div.remove();e.isAttachedToDOM=!1;document.activeElement===document.body&&_classPrivateFieldGet(this,g).focusMainContainer()}),0);_classPrivateFieldGet(this,p)||this.addInkEditorIfNeeded(!1)}add(e){_classPrivateMethodGet(this,f,_changeParent2).call(this,e);_classPrivateFieldGet(this,g).addEditor(e);this.attach(e);if(!e.isAttachedToDOM){const t=e.render();this.div.append(t);e.isAttachedToDOM=!0}this.moveEditorInDOM(e);e.onceAdded();this.addToAnnotationStorage(e)}moveEditorInDOM(e){var t;null===(t=_classPrivateFieldGet(this,o))||void 0===t||t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addToAnnotationStorage(e){e.isEmpty()||this.annotationStorage.has(e.id)||this.annotationStorage.setValue(e.id,e)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addANewEditor(e){this.addCommands({cmd:()=>{this.addOrRebuild(e)},undo:()=>{e.remove()},mustExec:!0})}addUndoableEditor(e){this.addCommands({cmd:()=>{this.addOrRebuild(e)},undo:()=>{e.remove()},mustExec:!1})}getNextId(){return _classPrivateFieldGet(this,g).getId()}deserialize(e){switch(e.annotationType){case r.AnnotationEditorType.FREETEXT:return s.FreeTextEditor.deserialize(e,this);case r.AnnotationEditorType.INK:return a.InkEditor.deserialize(e,this)}return null}setSelected(e){_classPrivateFieldGet(this,g).setSelected(e)}toggleSelected(e){_classPrivateFieldGet(this,g).toggleSelected(e)}isSelected(e){return _classPrivateFieldGet(this,g).isSelected(e)}unselect(e){_classPrivateFieldGet(this,g).unselect(e)}pointerup(e){const t=n.KeyboardManager.platform.isMac;if(!(0!==e.button||e.ctrlKey&&t)&&e.target===this.div&&_classPrivateFieldGet(this,u)){_classPrivateFieldSet(this,u,!1);_classPrivateFieldGet(this,l)?_classPrivateMethodGet(this,v,_createAndAddNewEditor2).call(this,e):_classPrivateFieldSet(this,l,!0)}}pointerdown(e){const t=n.KeyboardManager.platform.isMac;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;_classPrivateFieldSet(this,u,!0);const i=_classPrivateFieldGet(this,g).getActive();_classPrivateFieldSet(this,l,!i||i.isEmpty())}drop(e){const t=e.dataTransfer.getData("text/plain"),i=_classPrivateFieldGet(this,g).getEditor(t);if(!i)return;e.preventDefault();e.dataTransfer.dropEffect="move";_classPrivateMethodGet(this,f,_changeParent2).call(this,i);const n=this.div.getBoundingClientRect(),r=e.clientX-n.x,s=e.clientY-n.y;i.translate(r-i.startX,s-i.startY);this.moveEditorInDOM(i);i.div.focus()}dragover(e){e.preventDefault()}destroy(){var e;(null===(e=_classPrivateFieldGet(this,g).getActive())||void 0===e?void 0:e.parent)===this&&_classPrivateFieldGet(this,g).setActiveEditor(null);for(const e of _classPrivateFieldGet(this,h).values()){var t;null===(t=_classPrivateFieldGet(this,o))||void 0===t||t.removePointerInTextLayer(e.contentDiv);e.isAttachedToDOM=!1;e.div.remove();e.parent=null}this.div=null;_classPrivateFieldGet(this,h).clear();_classPrivateFieldGet(this,g).removeLayer(this)}render(e){this.viewport=e.viewport;(0,n.bindEvents)(this,this.div,["dragover","drop"]);this.setDimensions();for(const e of _classPrivateFieldGet(this,g).getEditors(this.pageIndex))this.add(e);this.updateMode()}update(e){this.viewport=e.viewport;this.setDimensions();this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[e,t,i,n]=this.viewport.viewBox;return[i-e,n-t]}get viewportBaseDimensions(){const{width:e,height:t,rotation:i}=this.viewport;return i%180==0?[e,t]:[t,e]}setDimensions(){const{width:e,height:t,rotation:i}=this.viewport,n=i%180!=0,r=Math.floor(e)+"px",s=Math.floor(t)+"px";this.div.style.width=n?s:r;this.div.style.height=n?r:s;this.div.setAttribute("data-main-rotation",i)}}t.AnnotationEditorLayer=AnnotationEditorLayer;function _changeParent2(e){var t;if(e.parent!==this){this.attach(e);e.pageIndex=this.pageIndex;null===(t=e.parent)||void 0===t||t.detach(e);e.parent=this;if(e.div&&e.isAttachedToDOM){e.div.remove();this.div.append(e.div)}}}function _createNewEditor2(e){switch(_classPrivateFieldGet(this,g).getMode()){case r.AnnotationEditorType.FREETEXT:return new s.FreeTextEditor(e);case r.AnnotationEditorType.INK:return new a.InkEditor(e)}return null}function _createAndAddNewEditor2(e){const t=this.getNextId(),i=_classPrivateMethodGet(this,m,_createNewEditor2).call(this,{parent:this,id:t,x:e.offsetX,y:e.offsetY});i&&this.add(i);return i}function _cleanup2(){_classPrivateFieldSet(this,p,!0);for(const e of _classPrivateFieldGet(this,h).values())e.isEmpty()&&e.remove();_classPrivateFieldSet(this,p,!1)}!function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}(AnnotationEditorLayer,"_initialized",!1)},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.FreeTextEditor=void 0;var n=i(1),r=i(133),s=i(132);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var a=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakSet,g=new WeakSet,f=new WeakSet,m=new WeakSet;class FreeTextEditor extends s.AnnotationEditor{constructor(e){super({...e,name:"freeTextEditor"});_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,f);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,p);_classPrivateFieldInitSpec(this,a,{writable:!0,value:this.editorDivBlur.bind(this)});_classPrivateFieldInitSpec(this,o,{writable:!0,value:this.editorDivFocus.bind(this)});_classPrivateFieldInitSpec(this,l,{writable:!0,value:this.editorDivKeydown.bind(this)});_classPrivateFieldInitSpec(this,c,{writable:!0,value:void 0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:""});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,u,{writable:!0,value:void 0});_classPrivateFieldSet(this,c,e.color||FreeTextEditor._defaultColor||s.AnnotationEditor._defaultLineColor);_classPrivateFieldSet(this,u,e.fontSize||FreeTextEditor._defaultFontSize)}static initialize(e){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map((t=>[t,e.get(t)])));const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:FreeTextEditor._defaultFontSize=t;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:FreeTextEditor._defaultColor=t}}updateParams(e,t){switch(e){case n.AnnotationEditorParamsType.FREETEXT_SIZE:_classPrivateMethodGet(this,p,_updateFontSize2).call(this,t);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:_classPrivateMethodGet(this,g,_updateColor2).call(this,t)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,FreeTextEditor._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,FreeTextEditor._defaultColor||s.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,_classPrivateFieldGet(this,u)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,_classPrivateFieldGet(this,c)]]}getInitialTranslation(){return[-FreeTextEditor._internalPadding*this.parent.scaleFactor,-(FreeTextEditor._internalPadding+_classPrivateFieldGet(this,u))*this.parent.scaleFactor]}rebuild(){super.rebuild();null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){if(!this.isInEditMode()){this.parent.setEditingState(!1);this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT);super.enableEditMode();this.enableEditing();this.overlayDiv.classList.remove("enabled");this.editorDiv.contentEditable=!0;this.div.draggable=!1;this.editorDiv.addEventListener("keydown",_classPrivateFieldGet(this,l));this.editorDiv.addEventListener("focus",_classPrivateFieldGet(this,o));this.editorDiv.addEventListener("blur",_classPrivateFieldGet(this,a))}}disableEditMode(){if(this.isInEditMode()){this.parent.setEditingState(!0);super.disableEditMode();this.disableEditing();this.overlayDiv.classList.add("enabled");this.editorDiv.contentEditable=!1;this.div.draggable=!0;this.editorDiv.removeEventListener("keydown",_classPrivateFieldGet(this,l));this.editorDiv.removeEventListener("focus",_classPrivateFieldGet(this,o));this.editorDiv.removeEventListener("blur",_classPrivateFieldGet(this,a));this.div.focus();this.isEditing=!1}}focusin(e){super.focusin(e);e.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(!this.width){this.enableEditMode();this.editorDiv.focus()}}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1;this.parent.setEditingState(!0);super.remove()}commit(){super.commit();if(!_classPrivateFieldGet(this,h)){_classPrivateFieldSet(this,h,!0);this.parent.addUndoableEditor(this)}this.disableEditMode();_classPrivateFieldSet(this,d,_classPrivateMethodGet(this,f,_extractText2).call(this).trimEnd());_classPrivateMethodGet(this,m,_setEditorDimensions2).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(e){this.enableEditMode();this.editorDiv.focus()}keydown(e){if(e.target===this.div&&"Enter"===e.key){this.enableEditMode();this.editorDiv.focus()}}editorDivKeydown(e){FreeTextEditor._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment");this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox");this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;if(this.width){e=this.x;t=this.y}super.render();this.editorDiv=document.createElement("div");this.editorDiv.className="internal";this.editorDiv.setAttribute("id",`${this.id}-editor`);this.enableEditing();FreeTextEditor._l10nPromise.get("editor_free_text_aria_label").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("aria-label",e)}));FreeTextEditor._l10nPromise.get("free_text_default_content").then((e=>{var t;return null===(t=this.editorDiv)||void 0===t?void 0:t.setAttribute("default-content",e)}));this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;i.fontSize=`calc(${_classPrivateFieldGet(this,u)}px * var(--scale-factor))`;i.color=_classPrivateFieldGet(this,c);this.div.append(this.editorDiv);this.overlayDiv=document.createElement("div");this.overlayDiv.classList.add("overlay","enabled");this.div.append(this.overlayDiv);(0,r.bindEvents)(this,this.div,["dblclick","keydown"]);if(this.width){const[i,n]=this.parent.viewportBaseDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n);for(const e of _classPrivateFieldGet(this,d).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br"));this.editorDiv.append(t)}this.div.draggable=!0;this.editorDiv.contentEditable=!1}else{this.div.draggable=!1;this.editorDiv.contentEditable=!0}return this.div}get contentDiv(){return this.editorDiv}static deserialize(e,t){const i=super.deserialize(e,t);_classPrivateFieldSet(i,u,e.fontSize);_classPrivateFieldSet(i,c,n.Util.makeHexColor(...e.color));_classPrivateFieldSet(i,d,e.value);return i}serialize(){if(this.isEmpty())return null;const e=FreeTextEditor._internalPadding*this.parent.scaleFactor,t=this.getRect(e,e),i=s.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:i,fontSize:_classPrivateFieldGet(this,u),value:_classPrivateFieldGet(this,d),pageIndex:this.parent.pageIndex,rect:t,rotation:this.rotation}}}t.FreeTextEditor=FreeTextEditor;function _updateFontSize2(e){const setFontsize=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`;this.translate(0,-(e-_classPrivateFieldGet(this,u))*this.parent.scaleFactor);_classPrivateFieldSet(this,u,e);_classPrivateMethodGet(this,m,_setEditorDimensions2).call(this)},t=_classPrivateFieldGet(this,u);this.parent.addCommands({cmd:()=>{setFontsize(e)},undo:()=>{setFontsize(t)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(e){const t=_classPrivateFieldGet(this,c);this.parent.addCommands({cmd:()=>{_classPrivateFieldSet(this,c,e);this.editorDiv.style.color=e},undo:()=>{_classPrivateFieldSet(this,c,t);this.editorDiv.style.color=t},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _extractText2(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i].firstChild;"#text"===(null==n?void 0:n.nodeName)?t.push(n.data):t.push("")}return t.join("\n")}function _setEditorDimensions2(){const[e,t]=this.parent.viewportBaseDimensions,i=this.div.getBoundingClientRect();this.width=i.width/e;this.height=i.height/t}_defineProperty(FreeTextEditor,"_freeTextDefaultContent","");_defineProperty(FreeTextEditor,"_l10nPromise",void 0);_defineProperty(FreeTextEditor,"_internalPadding",0);_defineProperty(FreeTextEditor,"_defaultColor",null);_defineProperty(FreeTextEditor,"_defaultFontSize",10);_defineProperty(FreeTextEditor,"_keyboardManager",new r.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],FreeTextEditor.prototype.commitOrRemove]]));_defineProperty(FreeTextEditor,"_type","freetext")},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.InkEditor=void 0;Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return s.fitCurve}});var n=i(1),r=i(132),s=i(152),a=i(133);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(e,t,i){!function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t);return i}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const o=16;var l=new WeakMap,c=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap,p=new WeakMap,g=new WeakMap,f=new WeakMap,m=new WeakMap,v=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,y=new WeakMap,P=new WeakSet,S=new WeakSet,E=new WeakSet,A=new WeakSet,x=new WeakSet,C=new WeakSet,T=new WeakSet,M=new WeakSet,k=new WeakSet,I=new WeakSet,D=new WeakSet,L=new WeakSet,R=new WeakSet,O=new WeakSet,N=new WeakSet,B=new WeakSet,G=new WeakSet,V=new WeakSet,W=new WeakSet,U=new WeakSet,j=new WeakSet,H=new WeakSet;class InkEditor extends r.AnnotationEditor{constructor(e){super({...e,name:"inkEditor"});_classPrivateMethodInitSpec(this,H);_classPrivateMethodInitSpec(this,j);_classPrivateMethodInitSpec(this,U);_classPrivateMethodInitSpec(this,W);_classPrivateMethodInitSpec(this,V);_classPrivateMethodInitSpec(this,G);_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,N);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,k);_classPrivateMethodInitSpec(this,M);_classPrivateMethodInitSpec(this,T);_classPrivateMethodInitSpec(this,C);_classPrivateMethodInitSpec(this,x);_classPrivateMethodInitSpec(this,A);_classPrivateMethodInitSpec(this,E);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,P);_classPrivateFieldInitSpec(this,l,{writable:!0,value:0});_classPrivateFieldInitSpec(this,c,{writable:!0,value:0});_classPrivateFieldInitSpec(this,d,{writable:!0,value:0});_classPrivateFieldInitSpec(this,h,{writable:!0,value:this.canvasPointermove.bind(this)});_classPrivateFieldInitSpec(this,u,{writable:!0,value:this.canvasPointerleave.bind(this)});_classPrivateFieldInitSpec(this,p,{writable:!0,value:this.canvasPointerup.bind(this)});_classPrivateFieldInitSpec(this,g,{writable:!0,value:this.canvasPointerdown.bind(this)});_classPrivateFieldInitSpec(this,f,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,m,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,v,{writable:!0,value:null});_classPrivateFieldInitSpec(this,_,{writable:!0,value:null});_classPrivateFieldInitSpec(this,b,{writable:!0,value:0});_classPrivateFieldInitSpec(this,w,{writable:!0,value:0});_classPrivateFieldInitSpec(this,y,{writable:!0,value:null});this.color=e.color||null;this.thickness=e.thickness||null;this.opacity=e.opacity||null;this.paths=[];this.bezierPath2D=[];this.currentPath=[];this.scaleFactor=1;this.translationX=this.translationY=0;this.x=0;this.y=0}static initialize(e){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map((t=>[t,e.get(t)])))}static updateDefaultParams(e,t){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:InkEditor._defaultThickness=t;break;case n.AnnotationEditorParamsType.INK_COLOR:InkEditor._defaultColor=t;break;case n.AnnotationEditorParamsType.INK_OPACITY:InkEditor._defaultOpacity=t/100}}updateParams(e,t){switch(e){case n.AnnotationEditorParamsType.INK_THICKNESS:_classPrivateMethodGet(this,P,_updateThickness2).call(this,t);break;case n.AnnotationEditorParamsType.INK_COLOR:_classPrivateMethodGet(this,S,_updateColor2).call(this,t);break;case n.AnnotationEditorParamsType.INK_OPACITY:_classPrivateMethodGet(this,E,_updateOpacity2).call(this,t)}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,InkEditor._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*InkEditor._defaultOpacity)]]}get propertiesToUpdate(){var e;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||InkEditor._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||InkEditor._defaultColor||r.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(null!==(e=this.opacity)&&void 0!==e?e:InkEditor._defaultOpacity))]]}rebuild(){super.rebuild();if(null!==this.div){if(!this.canvas){_classPrivateMethodGet(this,D,_createCanvas2).call(this);_classPrivateMethodGet(this,L,_createObserver2).call(this)}if(!this.isAttachedToDOM){this.parent.add(this);_classPrivateMethodGet(this,R,_setCanvasDims2).call(this)}_classPrivateMethodGet(this,j,_fitToContent2).call(this)}}remove(){if(null!==this.canvas){this.isEmpty()||this.commit();this.canvas.width=this.canvas.height=0;this.canvas.remove();this.canvas=null;_classPrivateFieldGet(this,_).disconnect();_classPrivateFieldSet(this,_,null);super.remove()}}enableEditMode(){if(!_classPrivateFieldGet(this,f)&&null!==this.canvas){super.enableEditMode();this.div.draggable=!1;this.canvas.addEventListener("pointerdown",_classPrivateFieldGet(this,g));this.canvas.addEventListener("pointerup",_classPrivateFieldGet(this,p))}}disableEditMode(){if(this.isInEditMode()&&null!==this.canvas){super.disableEditMode();this.div.draggable=!this.isEmpty();this.div.classList.remove("editing");this.canvas.removeEventListener("pointerdown",_classPrivateFieldGet(this,g));this.canvas.removeEventListener("pointerup",_classPrivateFieldGet(this,p))}}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){if(!_classPrivateFieldGet(this,f)){super.commit();this.isEditing=!1;this.disableEditMode();this.setInForeground();_classPrivateFieldSet(this,f,!0);this.div.classList.add("disabled");_classPrivateMethodGet(this,j,_fitToContent2).call(this,!0);this.parent.addInkEditorIfNeeded(!0);this.parent.moveEditorInDOM(this);this.div.focus()}}focusin(e){super.focusin(e);this.enableEditMode()}canvasPointerdown(e){if(0===e.button&&this.isInEditMode()&&!_classPrivateFieldGet(this,f)){this.setInForeground();"mouse"!==e.type&&this.div.focus();e.stopPropagation();this.canvas.addEventListener("pointerleave",_classPrivateFieldGet(this,u));this.canvas.addEventListener("pointermove",_classPrivateFieldGet(this,h));_classPrivateMethodGet(this,C,_startDrawing2).call(this,e.offsetX,e.offsetY)}}canvasPointermove(e){e.stopPropagation();_classPrivateMethodGet(this,T,_draw2).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){if(0===e.button&&this.isInEditMode()&&0!==this.currentPath.length){e.stopPropagation();_classPrivateMethodGet(this,I,_endDrawing2).call(this,e);this.setInBackground()}}canvasPointerleave(e){_classPrivateMethodGet(this,I,_endDrawing2).call(this,e);this.setInBackground()}render(){if(this.div)return this.div;let e,t;if(this.width){e=this.x;t=this.y}super.render();InkEditor._l10nPromise.get("editor_ink_aria_label").then((e=>{var t;return null===(t=this.div)||void 0===t?void 0:t.setAttribute("aria-label",e)}));const[i,n,r,s]=_classPrivateMethodGet(this,A,_getInitialBBox2).call(this);this.setAt(i,n,0,0);this.setDims(r,s);_classPrivateMethodGet(this,D,_createCanvas2).call(this);if(this.width){const[i,n]=this.parent.viewportBaseDimensions;this.setAt(e*i,t*n,this.width*i,this.height*n);_classPrivateFieldSet(this,m,!0);_classPrivateMethodGet(this,R,_setCanvasDims2).call(this);this.setDims(this.width*i,this.height*n);_classPrivateMethodGet(this,k,_redraw2).call(this);_classPrivateMethodGet(this,H,_setMinDims2).call(this);this.div.classList.add("disabled")}else{this.div.classList.add("editing");this.enableEditMode()}_classPrivateMethodGet(this,L,_createObserver2).call(this);return this.div}setDimensions(e,t){const i=Math.round(e),n=Math.round(t);if(_classPrivateFieldGet(this,b)===i&&_classPrivateFieldGet(this,w)===n)return;_classPrivateFieldSet(this,b,i);_classPrivateFieldSet(this,w,n);this.canvas.style.visibility="hidden";if(_classPrivateFieldGet(this,l)&&Math.abs(_classPrivateFieldGet(this,l)-e/t)>.01){t=Math.ceil(e/_classPrivateFieldGet(this,l));this.setDims(e,t)}const[r,s]=this.parent.viewportBaseDimensions;this.width=e/r;this.height=t/s;_classPrivateFieldGet(this,f)&&_classPrivateMethodGet(this,O,_setScaleFactor2).call(this,e,t);_classPrivateMethodGet(this,R,_setCanvasDims2).call(this);_classPrivateMethodGet(this,k,_redraw2).call(this);this.canvas.style.visibility="visible"}static deserialize(e,t){const i=super.deserialize(e,t);i.thickness=e.thickness;i.color=n.Util.makeHexColor(...e.color);i.opacity=e.opacity;const[r,s]=t.pageDimensions,a=i.width*r,h=i.height*s,u=t.scaleFactor,p=e.thickness/2;_classPrivateFieldSet(i,l,a/h);_classPrivateFieldSet(i,f,!0);_classPrivateFieldSet(i,b,Math.round(a));_classPrivateFieldSet(i,w,Math.round(h));for(const{bezier:t}of e.paths){const e=[];i.paths.push(e);let n=u*(t[0]-p),r=u*(h-t[1]-p);for(let i=2,s=t.length;i<s;i+=6){const s=u*(t[i]-p),a=u*(h-t[i+1]-p),o=u*(t[i+2]-p),l=u*(h-t[i+3]-p),c=u*(t[i+4]-p),d=u*(h-t[i+5]-p);e.push([[n,r],[s,a],[o,l],[c,d]]);n=c;r=d}const s=_classStaticPrivateMethodGet(this,InkEditor,_buildPath2D).call(this,e);i.bezierPath2D.push(s)}const g=_classPrivateMethodGet(i,W,_getBbox2).call(i);_classPrivateFieldSet(i,d,Math.max(o,g[2]-g[0]));_classPrivateFieldSet(i,c,Math.max(o,g[3]-g[1]));_classPrivateMethodGet(i,O,_setScaleFactor2).call(i,a,h);return i}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=this.rotation%180==0?e[3]-e[1]:e[2]-e[0],i=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:_classPrivateMethodGet(this,B,_serializePaths2).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,t),pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}}t.InkEditor=InkEditor;function _updateThickness2(e){const t=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=e;_classPrivateMethodGet(this,j,_fitToContent2).call(this)},undo:()=>{this.thickness=t;_classPrivateMethodGet(this,j,_fitToContent2).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function _updateColor2(e){const t=this.color;this.parent.addCommands({cmd:()=>{this.color=e;_classPrivateMethodGet(this,k,_redraw2).call(this)},undo:()=>{this.color=t;_classPrivateMethodGet(this,k,_redraw2).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _updateOpacity2(e){e/=100;const t=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=e;_classPrivateMethodGet(this,k,_redraw2).call(this)},undo:()=>{this.opacity=t;_classPrivateMethodGet(this,k,_redraw2).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function _getInitialBBox2(){const{width:e,height:t,rotation:i}=this.parent.viewport;switch(i){case 90:return[0,e,e,t];case 180:return[e,t,e,t];case 270:return[t,0,e,t];default:return[0,0,e,t]}}function _setStroke2(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor;this.ctx.lineCap="round";this.ctx.lineJoin="round";this.ctx.miterLimit=10;this.ctx.strokeStyle=`${this.color}${(0,a.opacityToHex)(this.opacity)}`}function _startDrawing2(e,t){this.isEditing=!0;if(!_classPrivateFieldGet(this,m)){var i;_classPrivateFieldSet(this,m,!0);_classPrivateMethodGet(this,R,_setCanvasDims2).call(this);this.thickness||(this.thickness=InkEditor._defaultThickness);this.color||(this.color=InkEditor._defaultColor||r.AnnotationEditor._defaultLineColor);null!==(i=this.opacity)&&void 0!==i||(this.opacity=InkEditor._defaultOpacity)}this.currentPath.push([e,t]);_classPrivateFieldSet(this,v,null);_classPrivateMethodGet(this,x,_setStroke2).call(this);this.ctx.beginPath();this.ctx.moveTo(e,t);_classPrivateFieldSet(this,y,(()=>{if(_classPrivateFieldGet(this,y)){if(_classPrivateFieldGet(this,v)){if(this.isEmpty()){this.ctx.setTransform(1,0,0,1,0,0);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}else _classPrivateMethodGet(this,k,_redraw2).call(this);this.ctx.lineTo(..._classPrivateFieldGet(this,v));_classPrivateFieldSet(this,v,null);this.ctx.stroke()}window.requestAnimationFrame(_classPrivateFieldGet(this,y))}}));window.requestAnimationFrame(_classPrivateFieldGet(this,y))}function _draw2(e,t){const[i,n]=this.currentPath.at(-1);if(e!==i||t!==n){this.currentPath.push([e,t]);_classPrivateFieldSet(this,v,[e,t])}}function _stopDrawing2(e,t){this.ctx.closePath();_classPrivateFieldSet(this,y,null);e=Math.min(Math.max(e,0),this.canvas.width);t=Math.min(Math.max(t,0),this.canvas.height);const[i,n]=this.currentPath.at(-1);e===i&&t===n||this.currentPath.push([e,t]);let r;if(1!==this.currentPath.length)r=(0,s.fitCurve)(this.currentPath,30,null);else{const i=[e,t];r=[[i,i.slice(),i.slice(),i]]}const a=_classStaticPrivateMethodGet(InkEditor,InkEditor,_buildPath2D).call(InkEditor,r);this.currentPath.length=0;this.parent.addCommands({cmd:()=>{this.paths.push(r);this.bezierPath2D.push(a);this.rebuild()},undo:()=>{this.paths.pop();this.bezierPath2D.pop();if(0===this.paths.length)this.remove();else{if(!this.canvas){_classPrivateMethodGet(this,D,_createCanvas2).call(this);_classPrivateMethodGet(this,L,_createObserver2).call(this)}_classPrivateMethodGet(this,j,_fitToContent2).call(this)}},mustExec:!0})}function _redraw2(){if(this.isEmpty()){_classPrivateMethodGet(this,N,_updateTransform2).call(this);return}_classPrivateMethodGet(this,x,_setStroke2).call(this);const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0);t.clearRect(0,0,e.width,e.height);_classPrivateMethodGet(this,N,_updateTransform2).call(this);for(const e of this.bezierPath2D)t.stroke(e)}function _endDrawing2(e){_classPrivateMethodGet(this,M,_stopDrawing2).call(this,e.offsetX,e.offsetY);this.canvas.removeEventListener("pointerleave",_classPrivateFieldGet(this,u));this.canvas.removeEventListener("pointermove",_classPrivateFieldGet(this,h));this.parent.addToAnnotationStorage(this)}function _createCanvas2(){this.canvas=document.createElement("canvas");this.canvas.width=this.canvas.height=0;this.canvas.className="inkEditorCanvas";InkEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((e=>{var t;return null===(t=this.canvas)||void 0===t?void 0:t.setAttribute("aria-label",e)}));this.div.append(this.canvas);this.ctx=this.canvas.getContext("2d")}function _createObserver2(){_classPrivateFieldSet(this,_,new ResizeObserver((e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)})));_classPrivateFieldGet(this,_).observe(this.div)}function _setCanvasDims2(){if(!_classPrivateFieldGet(this,m))return;const[e,t]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*e);this.canvas.height=Math.ceil(this.height*t);_classPrivateMethodGet(this,N,_updateTransform2).call(this)}function _setScaleFactor2(e,t){const i=_classPrivateMethodGet(this,U,_getPadding2).call(this),n=(e-i)/_classPrivateFieldGet(this,d),r=(t-i)/_classPrivateFieldGet(this,c);this.scaleFactor=Math.min(n,r)}function _updateTransform2(){const e=_classPrivateMethodGet(this,U,_getPadding2).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}function _buildPath2D(e){const t=new Path2D;for(let i=0,n=e.length;i<n;i++){const[n,r,s,a]=e[i];0===i&&t.moveTo(...n);t.bezierCurveTo(r[0],r[1],s[0],s[1],a[0],a[1])}return t}function _serializePaths2(e,t,i,n){const r=[],s=this.thickness/2;let a,o;for(const l of this.paths){a=[];o=[];for(let r=0,c=l.length;r<c;r++){const[c,d,h,u]=l[r],p=e*(c[0]+t)+s,g=n-e*(c[1]+i)-s,f=e*(d[0]+t)+s,m=n-e*(d[1]+i)-s,v=e*(h[0]+t)+s,_=n-e*(h[1]+i)-s,b=e*(u[0]+t)+s,w=n-e*(u[1]+i)-s;if(0===r){a.push(p,g);o.push(p,g)}a.push(f,m,v,_,b,w);_classPrivateMethodGet(this,G,_extractPointsOnBezier2).call(this,p,g,f,m,v,_,b,w,4,o)}r.push({bezier:a,points:o})}return r}function _extractPointsOnBezier2(e,t,i,n,r,s,a,o,l,c){if(_classPrivateMethodGet(this,V,_isAlmostFlat2).call(this,e,t,i,n,r,s,a,o))c.push(a,o);else{for(let d=1;d<l-1;d++){const h=d/l,u=1-h;let p=h*e+u*i,g=h*t+u*n,f=h*i+u*r,m=h*n+u*s;p=h*p+u*f;g=h*g+u*m;f=h*f+u*(h*r+u*a);m=h*m+u*(h*s+u*o);p=h*p+u*f;g=h*g+u*m;c.push(p,g)}c.push(a,o)}}function _isAlmostFlat2(e,t,i,n,r,s,a,o){const l=(3*i-2*e-a)**2,c=(3*n-2*t-o)**2,d=(3*r-e-2*a)**2,h=(3*s-t-2*o)**2;return Math.max(l,d)+Math.max(c,h)<=10}function _getBbox2(){let e=1/0,t=-1/0,i=1/0,r=-1/0;for(const s of this.paths)for(const[a,o,l,c]of s){const s=n.Util.bezierBoundingBox(...a,...o,...l,...c);e=Math.min(e,s[0]);i=Math.min(i,s[1]);t=Math.max(t,s[2]);r=Math.max(r,s[3])}return[e,i,t,r]}function _getPadding2(){return _classPrivateFieldGet(this,f)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function _fitToContent2(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!_classPrivateFieldGet(this,f)){_classPrivateMethodGet(this,k,_redraw2).call(this);return}const t=_classPrivateMethodGet(this,W,_getBbox2).call(this),i=_classPrivateMethodGet(this,U,_getPadding2).call(this);_classPrivateFieldSet(this,d,Math.max(o,t[2]-t[0]));_classPrivateFieldSet(this,c,Math.max(o,t[3]-t[1]));const n=Math.ceil(i+_classPrivateFieldGet(this,d)*this.scaleFactor),r=Math.ceil(i+_classPrivateFieldGet(this,c)*this.scaleFactor),[s,a]=this.parent.viewportBaseDimensions;this.width=n/s;this.height=r/a;_classPrivateFieldSet(this,l,n/r);_classPrivateMethodGet(this,H,_setMinDims2).call(this);const h=this.translationX,u=this.translationY;this.translationX=-t[0];this.translationY=-t[1];_classPrivateMethodGet(this,R,_setCanvasDims2).call(this);_classPrivateMethodGet(this,k,_redraw2).call(this);_classPrivateFieldSet(this,b,n);_classPrivateFieldSet(this,w,r);this.setDims(n,r);const p=e?i/this.scaleFactor/2:0;this.translate(h-this.translationX-p,u-this.translationY-p)}function _setMinDims2(){const{style:e}=this.div;if(_classPrivateFieldGet(this,l)>=1){e.minHeight="16px";e.minWidth=`${Math.round(_classPrivateFieldGet(this,l)*o)}px`}else{e.minWidth="16px";e.minHeight=`${Math.round(o/_classPrivateFieldGet(this,l))}px`}}_defineProperty(InkEditor,"_defaultColor",null);_defineProperty(InkEditor,"_defaultOpacity",1);_defineProperty(InkEditor,"_defaultThickness",1);_defineProperty(InkEditor,"_l10nPromise",void 0);_defineProperty(InkEditor,"_type","ink")},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.fitCurve=void 0;const n=i(153);t.fitCurve=n},e=>{"use strict";function fitCubic(e,t,i,n,r){var s,a,o,l,c,d,h,u,p,g,f,m,v;if(2===e.length){m=maths.vectorLen(maths.subtract(e[0],e[1]))/3;return[s=[e[0],maths.addArrays(e[0],maths.mulItems(t,m)),maths.addArrays(e[1],maths.mulItems(i,m)),e[1]]]}a=function chordLengthParameterize(e){var t,i,n,r=[];e.forEach(((e,s)=>{t=s?i+maths.vectorLen(maths.subtract(e,n)):0;r.push(t);i=t;n=e}));return r=r.map((e=>e/i))}(e);[s,l,d]=generateAndReport(e,a,a,t,i,r);if(0===l||l<n)return[s];if(l<n*n){o=a;c=l;h=d;for(v=0;v<20;v++){o=reparameterize(s,e,o);[s,l,d]=generateAndReport(e,a,o,t,i,r);if(l<n)return[s];if(d===h){let e=l/c;if(e>.9999&&e<1.0001)break}c=l;h=d}}f=[];if((u=maths.subtract(e[d-1],e[d+1])).every((e=>0===e))){u=maths.subtract(e[d-1],e[d]);[u[0],u[1]]=[-u[1],u[0]]}p=maths.normalize(u);g=maths.mulItems(p,-1);return f=(f=f.concat(fitCubic(e.slice(0,d+1),t,p,n,r))).concat(fitCubic(e.slice(d),g,i,n,r))}function generateAndReport(e,t,i,n,r,s){var a,o,l;a=function generateBezier(e,t,i,n){var r,s,a,o,l,c,d,h,u,p,g,f,m,v,_,b,w,y=e[0],P=e[e.length-1];r=[y,null,null,P];s=maths.zeros_Xx2x2(t.length);for(m=0,v=t.length;m<v;m++){w=1-(b=t[m]);(a=s[m])[0]=maths.mulItems(i,3*b*(w*w));a[1]=maths.mulItems(n,3*w*(b*b))}o=[[0,0],[0,0]];l=[0,0];for(m=0,v=e.length;m<v;m++){b=t[m];a=s[m];o[0][0]+=maths.dot(a[0],a[0]);o[0][1]+=maths.dot(a[0],a[1]);o[1][0]+=maths.dot(a[0],a[1]);o[1][1]+=maths.dot(a[1],a[1]);_=maths.subtract(e[m],bezier.q([y,y,P,P],b));l[0]+=maths.dot(a[0],_);l[1]+=maths.dot(a[1],_)}c=o[0][0]*o[1][1]-o[1][0]*o[0][1];d=o[0][0]*l[1]-o[1][0]*l[0];h=l[0]*o[1][1]-l[1]*o[0][1];u=0===c?0:h/c;p=0===c?0:d/c;f=maths.vectorLen(maths.subtract(y,P));if(u<(g=1e-6*f)||p<g){r[1]=maths.addArrays(y,maths.mulItems(i,f/3));r[2]=maths.addArrays(P,maths.mulItems(n,f/3))}else{r[1]=maths.addArrays(y,maths.mulItems(i,u));r[2]=maths.addArrays(P,maths.mulItems(n,p))}return r}(e,i,n,r);[o,l]=function computeMaxError(e,t,i){var n,r,s,a,o,l,c,d;r=0;s=Math.floor(e.length/2);const h=mapTtoRelativeDistances(t,10);for(o=0,l=e.length;o<l;o++){c=e[o];d=find_t(t,i[o],h,10);if((n=(a=maths.subtract(bezier.q(t,d),c))[0]*a[0]+a[1]*a[1])>r){r=n;s=o}}return[r,s]}(e,a,t);s&&s({bez:a,points:e,params:t,maxErr:o,maxPoint:l});return[a,o,l]}function reparameterize(e,t,i){return i.map(((i,n)=>newtonRaphsonRootFind(e,t[n],i)))}function newtonRaphsonRootFind(e,t,i){var n=maths.subtract(bezier.q(e,i),t),r=bezier.qprime(e,i),s=maths.mulMatrix(n,r),a=maths.sum(maths.squareItems(r))+2*maths.mulMatrix(n,bezier.qprimeprime(e,i));return 0===a?i:i-s/a}var mapTtoRelativeDistances=function(e,t){for(var i,n=[0],r=e[0],s=0,a=1;a<=t;a++){i=bezier.q(e,a/t);s+=maths.vectorLen(maths.subtract(i,r));n.push(s);r=i}return n=n.map((e=>e/s))};function find_t(e,t,i,n){if(t<0)return 0;if(t>1)return 1;for(var r,s,a,o,l=1;l<=n;l++)if(t<=i[l]){a=(l-1)/n;s=l/n;o=(t-(r=i[l-1]))/(i[l]-r)*(s-a)+a;break}return o}function createTangent(e,t){return maths.normalize(maths.subtract(e,t))}class maths{static zeros_Xx2x2(e){for(var t=[];e--;)t.push([0,0]);return t}static mulItems(e,t){return e.map((e=>e*t))}static mulMatrix(e,t){return e.reduce(((e,i,n)=>e+i*t[n]),0)}static subtract(e,t){return e.map(((e,i)=>e-t[i]))}static addArrays(e,t){return e.map(((e,i)=>e+t[i]))}static addItems(e,t){return e.map((e=>e+t))}static sum(e){return e.reduce(((e,t)=>e+t))}static dot(e,t){return maths.mulMatrix(e,t)}static vectorLen(e){return Math.hypot(...e)}static divItems(e,t){return e.map((e=>e/t))}static squareItems(e){return e.map((e=>e*e))}static normalize(e){return this.divItems(e,this.vectorLen(e))}}class bezier{static q(e,t){var i=1-t,n=maths.mulItems(e[0],i*i*i),r=maths.mulItems(e[1],3*i*i*t),s=maths.mulItems(e[2],3*i*t*t),a=maths.mulItems(e[3],t*t*t);return maths.addArrays(maths.addArrays(n,r),maths.addArrays(s,a))}static qprime(e,t){var i=1-t,n=maths.mulItems(maths.subtract(e[1],e[0]),3*i*i),r=maths.mulItems(maths.subtract(e[2],e[1]),6*i*t),s=maths.mulItems(maths.subtract(e[3],e[2]),3*t*t);return maths.addArrays(maths.addArrays(n,r),s)}static qprimeprime(e,t){return maths.addArrays(maths.mulItems(maths.addArrays(maths.subtract(e[2],maths.mulItems(e[1],2)),e[0]),6*(1-t)),maths.mulItems(maths.addArrays(maths.subtract(e[3],maths.mulItems(e[2],2)),e[1]),6*t))}}e.exports=function fitCurve(e,t,i){if(!Array.isArray(e))throw new TypeError("First argument should be an array");e.forEach((t=>{if(!Array.isArray(t)||t.some((e=>"number"!=typeof e))||t.length!==e[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}));if((e=e.filter(((t,i)=>0===i||!t.every(((t,n)=>t===e[i-1][n]))))).length<2)return[];const n=e.length,r=createTangent(e[1],e[0]),s=createTangent(e[n-2],e[n-1]);return fitCubic(e,r,s,t,i)};e.exports.fitCubic=fitCubic;e.exports.createTangent=createTangent},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationLayer=void 0;var n=i(1),r=i(134),s=i(131),a=i(155),o=i(156);function _classStaticPrivateMethodGet(e,t,i){!function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t);return i}const l=1e3,c=new WeakSet;function getRectDims(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class AnnotationElementFactory{static create(e){switch(e.data.annotationType){case n.AnnotationType.LINK:return new LinkAnnotationElement(e);case n.AnnotationType.TEXT:return new TextAnnotationElement(e);case n.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new TextWidgetAnnotationElement(e);case"Btn":return e.data.radioButton?new RadioButtonWidgetAnnotationElement(e):e.data.checkBox?new CheckboxWidgetAnnotationElement(e):new PushButtonWidgetAnnotationElement(e);case"Ch":return new ChoiceWidgetAnnotationElement(e)}return new WidgetAnnotationElement(e);case n.AnnotationType.POPUP:return new PopupAnnotationElement(e);case n.AnnotationType.FREETEXT:return new FreeTextAnnotationElement(e);case n.AnnotationType.LINE:return new LineAnnotationElement(e);case n.AnnotationType.SQUARE:return new SquareAnnotationElement(e);case n.AnnotationType.CIRCLE:return new CircleAnnotationElement(e);case n.AnnotationType.POLYLINE:return new PolylineAnnotationElement(e);case n.AnnotationType.CARET:return new CaretAnnotationElement(e);case n.AnnotationType.INK:return new InkAnnotationElement(e);case n.AnnotationType.POLYGON:return new PolygonAnnotationElement(e);case n.AnnotationType.HIGHLIGHT:return new HighlightAnnotationElement(e);case n.AnnotationType.UNDERLINE:return new UnderlineAnnotationElement(e);case n.AnnotationType.SQUIGGLY:return new SquigglyAnnotationElement(e);case n.AnnotationType.STRIKEOUT:return new StrikeOutAnnotationElement(e);case n.AnnotationType.STAMP:return new StampAnnotationElement(e);case n.AnnotationType.FILEATTACHMENT:return new FileAttachmentAnnotationElement(e);default:return new AnnotationElement(e)}}}class AnnotationElement{constructor(e){let{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=t;this.data=e.data;this.layer=e.layer;this.page=e.page;this.viewport=e.viewport;this.linkService=e.linkService;this.downloadManager=e.downloadManager;this.imageResourcesPath=e.imageResourcesPath;this.renderForms=e.renderForms;this.svgFactory=e.svgFactory;this.annotationStorage=e.annotationStorage;this.enableScripting=e.enableScripting;this.hasJSActions=e.hasJSActions;this._fieldObjects=e.fieldObjects;this._mouseState=e.mouseState;t&&(this.container=this._createContainer(i));n&&(this.quadrilaterals=this._createQuadrilaterals(i))}_createContainer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.data,i=this.page,r=this.viewport,s=document.createElement("section"),{width:a,height:o}=getRectDims(t.rect),[l,c,d,h]=r.viewBox,u=d-l,p=h-c;s.setAttribute("data-annotation-id",t.id);const g=n.Util.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]);if(!e&&t.borderStyle.width>0){s.style.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,i=t.borderStyle.verticalCornerRadius;if(e>0||i>0){const t=`calc(${e}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;s.style.borderRadius=t}else if(this instanceof RadioButtonWidgetAnnotationElement){const e=`calc(${a}px * var(--scale-factor)) / calc(${o}px * var(--scale-factor))`;s.style.borderRadius=e}switch(t.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:s.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:s.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:s.style.borderBottomStyle="solid"}const r=t.borderColor||null;r?s.style.borderColor=n.Util.makeHexColor(0|r[0],0|r[1],0|r[2]):s.style.borderWidth=0}s.style.left=100*(g[0]-l)/u+"%";s.style.top=100*(g[1]-c)/p+"%";const{rotation:f}=t;if(t.hasOwnCanvas||0===f){s.style.width=100*a/u+"%";s.style.height=100*o/p+"%"}else this.setRotation(f,s);return s}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;const[i,n,r,s]=this.viewport.viewBox,a=r-i,o=s-n,{width:l,height:c}=getRectDims(this.data.rect);let d,h;if(e%180==0){d=100*l/a;h=100*c/o}else{d=100*c/a;h=100*l/o}t.style.width=`${d}%`;t.style.height=`${h}%`;t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const setColor=(e,t,i)=>{const n=i.detail[e];i.target.style[t]=a.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:e=>{const t=e.detail.display%2==1;this.container.style.visibility=t?"hidden":"visible";this.annotationStorage.setValue(this.data.id,this.data.fieldName,{hidden:t,print:0===e.detail.display||3===e.detail.display})},print:e=>{this.annotationStorage.setValue(this.data.id,this.data.fieldName,{print:e.detail.print})},hidden:e=>{this.container.style.visibility=e.detail.hidden?"hidden":"visible";this.annotationStorage.setValue(this.data.id,this.data.fieldName,{hidden:e.detail.hidden})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.detail.readonly?e.target.setAttribute("readonly",""):e.target.removeAttribute("readonly")},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{setColor("bgColor","backgroundColor",e)},fillColor:e=>{setColor("fillColor","backgroundColor",e)},fgColor:e=>{setColor("fgColor","color",e)},textColor:e=>{setColor("textColor","color",e)},borderColor:e=>{setColor("borderColor","borderColor",e)},strokeColor:e=>{setColor("strokeColor","borderColor",e)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t);this.annotationStorage.setValue(this.data.id,this.data.fieldName,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const n of Object.keys(t.detail)){const r=e[n]||i[n];r&&r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[n,r]of Object.entries(t)){const s=i[n];if(s){s({detail:{[n]:r},target:e});delete t[n]}}}_createQuadrilaterals(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;const t=[],i=this.data.rect;for(const i of this.data.quadPoints){this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y];t.push(this._createContainer(e))}this.data.rect=i;return t}_createPopup(e,t){let i=this.container;if(this.quadrilaterals){e=e||this.quadrilaterals;i=this.quadrilaterals[0]}if(!e){(e=document.createElement("div")).className="popupTriggerArea";i.append(e)}const n=new PopupElement({container:i,trigger:e,color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,hideWrapper:!0}).render();n.style.left="100%";i.append(n)}_renderQuadrilaterals(e){for(const t of this.quadrilaterals)t.className=e;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:s,exportValues:a}of r){if(-1===e)continue;if(s===t)continue;const r="string"==typeof a?a:null,o=document.querySelector(`[data-element-id="${s}"]`);!o||c.has(o)?i.push({id:s,exportValue:r,domElement:o}):(0,n.warn)(`_getElementsByName - element not allowed: ${s}`)}return i}for(const n of document.getElementsByName(e)){const{id:e,exportValue:r}=n;e!==t&&(c.has(n)&&i.push({id:e,exportValue:r,domElement:n}))}return i}static get platform(){const e="undefined"!=typeof navigator?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class LinkAnnotationElement extends AnnotationElement{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null==t||!t.ignoreBorder),createQuadrilaterals:!0});this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let n=!1;if(e.url){t.addLinkAttributes(i,e.url,e.newWindow);n=!0}else if(e.action){this._bindNamedAction(i,e.action);n=!0}else if(e.dest){this._bindLink(i,e.dest);n=!0}else{if(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions){this._bindJSAction(i,e);n=!0}if(e.resetForm){this._bindResetFormAction(i,e.resetForm);n=!0}else if(this.isTooltipOnly&&!n){this._bindLink(i,"");n=!0}}if(this.quadrilaterals)return this._renderQuadrilaterals("linkAnnotation").map(((e,t)=>{const n=0===t?i:i.cloneNode();e.append(n);return e}));this.container.className="linkAnnotation";n&&this.container.append(i);return this.container}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t);e.onclick=()=>{t&&this.linkService.goToDestination(t);return!1};(t||""===t)&&(e.className="internalLink")}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl("");e.onclick=()=>{this.linkService.executeNamedAction(t);return!1};e.className="internalLink"}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(t.actions)){const r=i.get(n);r&&(e[r]=()=>{var e;null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}});return!1})}e.onclick||(e.onclick=()=>!1);e.className="internalLink"}_bindResetFormAction(e,t){const i=e.onclick;i||(e.href=this.linkService.getAnchorUrl(""));e.className="internalLink";if(this._fieldObjects)e.onclick=()=>{i&&i();const{fields:e,refs:r,include:s}=t,a=[];if(0!==e.length||0!==r.length){const t=new Set(r);for(const i of e){const e=this._fieldObjects[i]||[];for(const{id:i}of e)t.add(i)}for(const e of Object.values(this._fieldObjects))for(const i of e)t.has(i.id)===s&&a.push(i)}else for(const e of Object.values(this._fieldObjects))a.push(...e);const o=this.annotationStorage,l=[];for(const e of a){const{id:t}=e;l.push(t);switch(e.type){case"text":{const i=e.defaultValue||"";o.setValue(t,this.data.fieldName,{value:i});break}case"checkbox":case"radiobutton":{const i=e.defaultValue===e.exportValues;o.setValue(t,this.data.fieldName,{value:i});break}case"combobox":case"listbox":{const i=e.defaultValue||"";o.setValue(t,this.data.fieldName,{value:i});break}default:continue}const i=document.querySelector(`[data-element-id="${t}"]`);i&&(c.has(i)?i.dispatchEvent(new Event("resetform")):(0,n.warn)(`_bindResetFormAction - element not allowed: ${t}`))}if(this.enableScripting){var d;null===(d=this.linkService.eventBus)||void 0===d||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})}return!1};else{(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.');i||(e.onclick=()=>!1)}}}class TextAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg";e.alt="[{{type}} Annotation]";e.dataset.l10nId="text_annotation_type";e.dataset.l10nArgs=JSON.stringify({type:this.data.name});this.data.hasPopup||this._createPopup(e,this.data);this.container.append(e);return this.container}}class WidgetAnnotationElement extends AnnotationElement{render(){this.data.alternativeText&&(this.container.title=this.data.alternativeText);return this.container}_getKeyModifier(e){const{isWin:t,isMac:i}=AnnotationElement.platform;return t&&e.ctrlKey||i&&e.metaKey}_setEventListener(e,t,i,n){t.includes("mouse")?e.addEventListener(t,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:n(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(t,(e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:n(e)}})}))}_setEventListeners(e,t,i){for(const[r,s]of t){var n;("Action"===s||null!==(n=this.data.actions)&&void 0!==n&&n[s])&&this._setEventListener(e,r,s,i)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":n.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,s=e.style;let a;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]),t=e/(Math.round(e/(n.LINE_FACTOR*r))||1);a=Math.min(r,Math.round(t/n.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]);a=Math.min(r,Math.round(e/n.LINE_FACTOR))}s.fontSize=`calc(${a}px * var(--scale-factor))`;s.color=n.Util.makeHexColor(i[0],i[1],i[2]);null!==this.data.textAlignment&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required");e.setAttribute("aria-required",t)}}class TextWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,i,n){const r=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id)){s.domElement&&(s.domElement[t]=i);r.setValue(s.id,this.data.fieldName,{[n]:i})}}render(){const e=this.annotationStorage,t=this.data.id;this.container.className="textWidgetAnnotation";let i=null;if(this.renderForms){const r=e.getValue(t,this.data.fieldName,{value:this.data.fieldValue});let s=r.formattedValue||r.value||"";const a=e.getValue(t,this.data.fieldName,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));const o={userValue:s,formattedValue:null,valueOnFocus:""};if(this.data.multiLine){i=document.createElement("textarea");i.textContent=s;this.data.doNotScroll&&(i.style.overflowY="hidden")}else{i=document.createElement("input");i.type="text";i.setAttribute("value",s);this.data.doNotScroll&&(i.style.overflowX="hidden")}c.add(i);i.setAttribute("data-element-id",t);i.disabled=this.data.readOnly;i.name=this.data.fieldName;i.tabIndex=l;this._setRequired(i,this.data.required);a&&(i.maxLength=a);i.addEventListener("input",(n=>{e.setValue(t,this.data.fieldName,{value:n.target.value});this.setPropertyOnSiblings(i,"value",n.target.value,"value")}));i.addEventListener("resetform",(e=>{var t;const n=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";i.value=o.userValue=n;o.formattedValue=null}));let blurListener=e=>{const{formattedValue:t}=o;null!=t&&(e.target.value=t);e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var n;i.addEventListener("focus",(e=>{o.userValue&&(e.target.value=o.userValue);o.valueOnFocus=e.target.value}));const r=this.data.fieldName;i.addEventListener("updatefromsandbox",(i=>{const n={value(i){var n;o.userValue=null!==(n=i.detail.value)&&void 0!==n?n:"";e.setValue(t,r,{value:o.userValue.toString()});i.target.value=o.userValue},formattedValue(i){const{formattedValue:n}=i.detail;o.formattedValue=n;null!=n&&i.target!==document.activeElement&&(i.target.value=n);e.setValue(t,r,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:i=>{var n;const{charLimit:r}=i.detail,{target:s}=i;if(0===r){s.removeAttribute("maxLength");return}s.setAttribute("maxLength",r);let a=o.userValue;if(a&&!(a.length<=r)){a=a.slice(0,r);s.value=o.userValue=a;e.setValue(t,this.data.fieldName,{value:a});null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}})}}};this._dispatchEventFromSandbox(n,i)}));i.addEventListener("keydown",(e=>{var i;let n=-1;"Escape"===e.key?n=0:"Enter"===e.key?n=2:"Tab"===e.key&&(n=3);if(-1===n)return;const{value:r}=e.target;if(o.valueOnFocus!==r){o.userValue=r;null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})}}));const s=blurListener;blurListener=null;i.addEventListener("blur",(e=>{const{value:i}=e.target;o.userValue=i;if(this._mouseState.isDown&&o.valueOnFocus!==i){var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:1,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})}s(e)}));null!==(n=this.data.actions)&&void 0!==n&&n.Keystroke&&i.addEventListener("beforeinput",(e=>{var i;const{data:n,target:r}=e,{value:s,selectionStart:a,selectionEnd:o}=r;let l=a,c=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(c+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(c+=1)}e.preventDefault();null===(i=this.linkService.eventBus)||void 0===i||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:n||"",willCommit:!1,selStart:l,selEnd:c}})}));this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}blurListener&&i.addEventListener("blur",blurListener);if(this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb");i.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else{i=document.createElement("div");i.textContent=this.data.fieldValue;i.style.verticalAlign="middle";i.style.display="table-cell"}this._setTextStyle(i);this._setBackgroundColor(i);this._setDefaultPropertiesFromJS(i);this.container.append(i);return this.container}}class CheckboxWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,`${this.data.fieldName}/${this.data.exportValue}`,{value:t.exportValue===t.fieldValue}).value;if("string"==typeof n){n="Off"!==n;e.setValue(i,this.data.fieldName,{value:n})}this.container.className="buttonWidgetAnnotation checkBox";const r=document.createElement("input");c.add(r);r.setAttribute("data-element-id",i);r.disabled=t.readOnly;this._setRequired(r,this.data.required);r.type="checkbox";r.name=t.fieldName;n&&r.setAttribute("checked",!0);r.setAttribute("exportValue",t.exportValue);r.tabIndex=l;r.addEventListener("change",(n=>{const{name:r,checked:s}=n.target;for(const n of this._getElementsByName(r,i)){const i=s&&n.exportValue===t.exportValue;n.domElement&&(n.domElement.checked=i);e.setValue(n.id,this.data.fieldName,{value:i,emitMessage:!1})}e.setValue(i,this.data.fieldName,{value:s,exportValue:s?t.exportValue:null})}));r.addEventListener("resetform",(e=>{const i=t.defaultFieldValue||"Off";e.target.checked=i===t.exportValue}));if(this.enableScripting&&this.hasJSActions){const t=this.data.fieldName;r.addEventListener("updatefromsandbox",(n=>{const r={value(n){n.target.checked="Off"!==n.detail.value;e.setValue(i,t,{value:n.target.checked})}};this._dispatchEventFromSandbox(r,n)}));this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}this._setBackgroundColor(r);this._setDefaultPropertiesFromJS(r);this.container.append(r);return this.container}}class RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,t=this.data,i=t.id;let n=e.getValue(i,this.data.fieldName,{value:t.fieldValue===t.buttonValue},this.data.buttonValue).value;if("string"==typeof n){n=n!==t.buttonValue;e.setValue(i,this.data.fieldName,{value:n},this.data.buttonValue)}const r=document.createElement("input");c.add(r);r.setAttribute("data-element-id",i);r.disabled=t.readOnly;this._setRequired(r,this.data.required);r.type="radio";r.name=t.fieldName;n&&r.setAttribute("checked",!0);r.tabIndex=l;r.addEventListener("change",(t=>{const{name:n,checked:r}=t.target;for(const t of this._getElementsByName(n,i))e.setValue(t.id,this.data.fieldName,{value:!1,emitMessage:!1});e.setValue(i,this.data.fieldName,{value:r,radioValue:this.data.buttonValue})}));r.addEventListener("resetform",(e=>{const i=t.defaultFieldValue;e.target.checked=null!=i&&i===t.buttonValue}));if(this.enableScripting&&this.hasJSActions){const n=t.buttonValue;r.addEventListener("updatefromsandbox",(t=>{const r=this.data.fieldName,s={value:t=>{const s=n===t.detail.value;for(const n of this._getElementsByName(t.target.name)){const t=s&&n.id===i;n.domElement&&(n.domElement.checked=t);e.setValue(n.id,r,{value:t})}}};this._dispatchEventFromSandbox(s,t)}));this._setEventListeners(r,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}this._setBackgroundColor(r);this._setDefaultPropertiesFromJS(r);this.container.append(r);return this.container}}class PushButtonWidgetAnnotationElement extends LinkAnnotationElement{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.className="buttonWidgetAnnotation pushButton";this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;if(this.enableScripting&&this.hasJSActions&&t){this._setDefaultPropertiesFromJS(t);t.addEventListener("updatefromsandbox",(e=>{this._dispatchEventFromSandbox({},e)}))}return e}}class ChoiceWidgetAnnotationElement extends WidgetAnnotationElement{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,this.data.fieldName,{value:this.data.fieldValue}),n=document.createElement("select");c.add(n);n.setAttribute("data-element-id",t);n.disabled=this.data.readOnly;this._setRequired(n,this.data.required);n.name=this.data.fieldName;n.tabIndex=l;let r=this.data.combo&&this.data.options.length>0;if(!this.data.combo){n.size=this.data.options.length;this.data.multiSelect&&(n.multiple=!0)}n.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const e of n.options)e.selected=e.value===t}));for(const e of this.data.options){const t=document.createElement("option");t.textContent=e.displayValue;t.value=e.exportValue;if(i.value.includes(e.exportValue)){t.setAttribute("selected",!0);r=!1}n.append(t)}let s=null;if(r){const e=document.createElement("option");e.value=" ";e.setAttribute("hidden",!0);e.setAttribute("selected",!0);n.prepend(e);s=()=>{e.remove();n.removeEventListener("input",s);s=null};n.addEventListener("input",s)}const getValue=(e,t)=>{const i=t?"value":"textContent",n=e.target.options;return e.target.multiple?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[i])):-1===n.selectedIndex?null:n[n.selectedIndex][i]},getItems=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};if(this.enableScripting&&this.hasJSActions){n.addEventListener("updatefromsandbox",(i=>{const r=this.data.fieldName,a={value(i){var a;null===(a=s)||void 0===a||a();const o=i.detail.value,l=new Set(Array.isArray(o)?o:[o]);for(const e of n.options)e.selected=l.has(e.value);e.setValue(t,r,{value:getValue(i,!0)})},multipleSelection(e){n.multiple=!0},remove(i){const r=n.options,s=i.detail.remove;r[s].selected=!1;n.remove(s);if(r.length>0){-1===Array.prototype.findIndex.call(r,(e=>e.selected))&&(r[0].selected=!0)}e.setValue(t,this.data.fieldName,{value:getValue(i,!0),items:getItems(i)})},clear(i){for(;0!==n.length;)n.remove(0);e.setValue(t,this.data.fieldName,{value:null,items:[]})},insert(i){const{index:r,displayValue:s,exportValue:a}=i.detail.insert,o=n.children[r],l=document.createElement("option");l.textContent=s;l.value=a;o?o.before(l):n.append(l);e.setValue(t,this.data.fieldName,{value:getValue(i,!0),items:getItems(i)})},items(i){const{items:r}=i.detail;for(;0!==n.length;)n.remove(0);for(const e of r){const{displayValue:t,exportValue:i}=e,r=document.createElement("option");r.textContent=t;r.value=i;n.append(r)}n.options.length>0&&(n.options[0].selected=!0);e.setValue(t,this.data.fieldName,{value:getValue(i,!0),items:getItems(i)})},indices(i){const n=new Set(i.detail.indices);for(const e of i.target.options)e.selected=n.has(e.index);e.setValue(t,this.data.fieldName,{value:getValue(i,!0)})},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(a,i)}));n.addEventListener("input",(i=>{var n;const r=getValue(i,!0),s=getValue(i,!1);e.setValue(t,this.data.fieldName,{value:r});null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,changeEx:r,willCommit:!0,commitKey:1,keyDown:!1}})}));this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(e=>e.target.checked))}else n.addEventListener("input",(i=>{e.setValue(t,this.data.fieldName,{value:getValue(i,!0),radioValue:getValue(i,!0)})}));this.data.combo&&this._setTextStyle(n);this._setBackgroundColor(n);this._setDefaultPropertiesFromJS(n);this.container.append(n);return this.container}}class PopupAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str)})}render(){this.container.className="popupAnnotation";if(["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const e=`[data-annotation-id="${this.data.parentId}"]`,t=this.layer.querySelectorAll(e);if(0===t.length)return this.container;const i=new PopupElement({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),r=this.page,s=n.Util.normalizeRect([this.data.parentRect[0],r.view[3]-this.data.parentRect[1]+r.view[1],this.data.parentRect[2],r.view[3]-this.data.parentRect[3]+r.view[1]]),a=s[0]+this.data.parentRect[2]-this.data.parentRect[0],o=s[1],[l,c,d,h]=this.viewport.viewBox,u=d-l,p=h-c;this.container.style.left=100*(a-l)/u+"%";this.container.style.top=100*(o-c)/p+"%";this.container.append(i.render());return this.container}}class PopupElement{constructor(e){this.container=e.container;this.trigger=e.trigger;this.color=e.color;this.titleObj=e.titleObj;this.modificationDate=e.modificationDate;this.contentsObj=e.contentsObj;this.richText=e.richText;this.hideWrapper=e.hideWrapper||!1;this.pinned=!1}render(){var e,t;const i=document.createElement("div");i.className="popupWrapper";this.hideElement=this.hideWrapper?i:this.container;this.hideElement.hidden=!0;const s=document.createElement("div");s.className="popup";const a=this.color;if(a){const e=.7*(255-a[0])+a[0],t=.7*(255-a[1])+a[1],i=.7*(255-a[2])+a[2];s.style.backgroundColor=n.Util.makeHexColor(0|e,0|t,0|i)}const l=document.createElement("h1");l.dir=this.titleObj.dir;l.textContent=this.titleObj.str;s.append(l);const c=r.PDFDateString.toDateObject(this.modificationDate);if(c){const e=document.createElement("span");e.className="popupDate";e.textContent="{{date}}, {{time}}";e.dataset.l10nId="annotation_date_string";e.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()});s.append(e)}if(null===(e=this.richText)||void 0===e||!e.str||null!==(t=this.contentsObj)&&void 0!==t&&t.str&&this.contentsObj.str!==this.richText.str){const e=this._formatContents(this.contentsObj);s.append(e)}else{o.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:s});s.lastChild.className="richText popupContent"}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const e of this.trigger){null==e||e.addEventListener("click",this._toggle.bind(this));null==e||e.addEventListener("mouseover",this._show.bind(this,!1));null==e||e.addEventListener("mouseout",this._hide.bind(this,!1))}s.addEventListener("click",this._hide.bind(this,!0));i.append(s);return i}_formatContents(e){let{str:t,dir:i}=e;const n=document.createElement("p");n.className="popupContent";n.dir=i;const r=t.split(/(?:\r\n?|\n)/);for(let e=0,t=r.length;e<t;++e){const i=r[e];n.append(document.createTextNode(i));e<t-1&&n.append(document.createElement("br"))}return n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0);if(this.hideElement.hidden){this.hideElement.hidden=!1;this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3}}_hide(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1);if(!this.hideElement.hidden&&!this.pinned){this.hideElement.hidden=!0;this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3}}}class FreeTextAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0});this.textContent=e.data.textContent}render(){this.container.className="freeTextAnnotation";if(this.textContent){const e=document.createElement("div");e.className="annotationTextContent";e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t;e.append(i)}this.container.append(e)}this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class LineAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:t,height:i}=getRectDims(e.rect),n=this.svgFactory.create(t,i,!0),r=this.svgFactory.createElement("svg:line");r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]);r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]);r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]);r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]);r.setAttribute("stroke-width",e.borderStyle.width||1);r.setAttribute("stroke","transparent");r.setAttribute("fill","transparent");n.append(r);this.container.append(n);this._createPopup(r,e);return this.container}}class SquareAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:t,height:i}=getRectDims(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,s=this.svgFactory.createElement("svg:rect");s.setAttribute("x",r/2);s.setAttribute("y",r/2);s.setAttribute("width",t-r);s.setAttribute("height",i-r);s.setAttribute("stroke-width",r||1);s.setAttribute("stroke","transparent");s.setAttribute("fill","transparent");n.append(s);this.container.append(n);this._createPopup(s,e);return this.container}}class CircleAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:t,height:i}=getRectDims(e.rect),n=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");s.setAttribute("cx",t/2);s.setAttribute("cy",i/2);s.setAttribute("rx",t/2-r/2);s.setAttribute("ry",i/2-r/2);s.setAttribute("stroke-width",r||1);s.setAttribute("stroke","transparent");s.setAttribute("fill","transparent");n.append(s);this.container.append(n);this._createPopup(s,e);return this.container}}class PolylineAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0});this.containerClassName="polylineAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:i}=getRectDims(e.rect),n=this.svgFactory.create(t,i,!0);let r=[];for(const t of e.vertices){const i=t.x-e.rect[0],n=e.rect[3]-t.y;r.push(i+","+n)}r=r.join(" ");const s=this.svgFactory.createElement(this.svgElementName);s.setAttribute("points",r);s.setAttribute("stroke-width",e.borderStyle.width||1);s.setAttribute("stroke","transparent");s.setAttribute("fill","transparent");n.append(s);this.container.append(n);this._createPopup(s,e);return this.container}}class PolygonAnnotationElement extends PolylineAnnotationElement{constructor(e){super(e);this.containerClassName="polygonAnnotation";this.svgElementName="svg:polygon"}}class CaretAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0})}render(){this.container.className="caretAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class InkAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0});this.containerClassName="inkAnnotation";this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:i}=getRectDims(e.rect),n=this.svgFactory.create(t,i,!0);for(const t of e.inkLists){let i=[];for(const n of t){const t=n.x-e.rect[0],r=e.rect[3]-n.y;i.push(`${t},${r}`)}i=i.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",i);r.setAttribute("stroke-width",e.borderStyle.width||1);r.setAttribute("stroke","transparent");r.setAttribute("fill","transparent");this._createPopup(r,e);n.append(r)}this.container.append(n);return this.container}}class HighlightAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("highlightAnnotation");this.container.className="highlightAnnotation";return this.container}}class UnderlineAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("underlineAnnotation");this.container.className="underlineAnnotation";return this.container}}class SquigglyAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("squigglyAnnotation");this.container.className="squigglyAnnotation";return this.container}}class StrikeOutAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){this.data.hasPopup||this._createPopup(null,this.data);if(this.quadrilaterals)return this._renderQuadrilaterals("strikeoutAnnotation");this.container.className="strikeoutAnnotation";return this.container}}class StampAnnotationElement extends AnnotationElement{constructor(e){var t,i,n;super(e,{isRenderable:!!(e.data.hasPopup||null!==(t=e.data.titleObj)&&void 0!==t&&t.str||null!==(i=e.data.contentsObj)&&void 0!==i&&i.str||null!==(n=e.data.richText)&&void 0!==n&&n.str),ignoreBorder:!0})}render(){this.container.className="stampAnnotation";this.data.hasPopup||this._createPopup(null,this.data);return this.container}}class FileAttachmentAnnotationElement extends AnnotationElement{constructor(e){var t;super(e,{isRenderable:!0});const{filename:i,content:n}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(i);this.content=n;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",{source:this,filename:i,content:n})}render(){var e,t;this.container.className="fileAttachmentAnnotation";const i=document.createElement("div");i.className="popupTriggerArea";i.addEventListener("dblclick",this._download.bind(this));!this.data.hasPopup&&(null!==(e=this.data.titleObj)&&void 0!==e&&e.str||null!==(t=this.data.contentsObj)&&void 0!==t&&t.str||this.data.richText)&&this._createPopup(i,this.data);this.container.append(i);return this.container}_download(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.container,this.content,this.filename)}}class AnnotationLayer{static render(e){const{annotations:t,div:i,viewport:a,accessibilityManager:o}=e;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,i,a);let l=0;window.registerAcroformAnnotations&&window.registerAcroformAnnotations(t);for(const c of t){if(c.annotationType!==n.AnnotationType.POPUP){const{width:e,height:t}=getRectDims(c.rect);if(e<=0||t<=0)continue}const t=AnnotationElementFactory.create({data:c,layer:i,page:e.page,viewport:a,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:e.annotationStorage||new s.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(t.isRenderable){const e=t.render();c.hidden&&(e.style.visibility="hidden");if(Array.isArray(e))for(const t of e){t.style.zIndex=l++;_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,t,c.id,i,o)}else{e.style.zIndex=l++;t instanceof PopupAnnotationElement?i.prepend(e):_classStaticPrivateMethodGet(AnnotationLayer,AnnotationLayer,_appendElement).call(AnnotationLayer,e,c.id,i,o)}}}_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,e.annotationCanvasMap)}static update(e){const{annotationCanvasMap:t,div:i,viewport:n}=e;_classStaticPrivateMethodGet(this,AnnotationLayer,_setDimensions).call(this,i,n);_classStaticPrivateMethodGet(this,AnnotationLayer,_setAnnotationCanvasMap).call(this,i,t);i.hidden=!1}}t.AnnotationLayer=AnnotationLayer;function _appendElement(e,t,i,n){const s=e.firstChild||e;s.id=`${r.AnnotationPrefix}${t}`;i.append(e);null==n||n.moveElementInDOM(i,e,s,!1)}function _setDimensions(e,t){let{width:i,height:n,rotation:r}=t;const{style:s}=e,a=r%180!=0,o=Math.floor(i)+"px",l=Math.floor(n)+"px";s.width=a?l:o;s.height=a?o:l;e.setAttribute("data-main-rotation",r)}function _setAnnotationCanvasMap(e,t){if(t){for(const[i,n]of t){const t=e.querySelector(`[data-annotation-id="${i}"]`);if(!t)continue;const{firstChild:r}=t;r?"CANVAS"===r.nodeName?r.replaceWith(n):r.before(n):t.append(n)}t.clear()}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ColorConverters=void 0;function makeColorComp(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}t.ColorConverters=class ColorConverters{static CMYK_G(e){let[t,i,n,r]=e;return["G",1-Math.min(1,.3*t+.59*n+.11*i+r)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_HTML(e){let[t]=e;const i=makeColorComp(t);return`#${i}${i}${i}`}static RGB_G(e){let[t,i,n]=e;return["G",.3*t+.59*i+.11*n]}static RGB_HTML(e){let[t,i,n]=e;return`#${makeColorComp(t)}${makeColorComp(i)}${makeColorComp(n)}`}static T_HTML(){return"#00000000"}static CMYK_RGB(e){let[t,i,n,r]=e;return["RGB",1-Math.min(1,t+r),1-Math.min(1,n+r),1-Math.min(1,i+r)]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,i,n]=e;const r=1-t,s=1-i,a=1-n;return["CMYK",r,s,a,Math.min(r,s,a)]}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.XfaLayer=void 0;var n=i(147);t.XfaLayer=class XfaLayer{static setupStorage(e,t,i,n,r){const s=n.getValue(t,{value:null});switch(i.name){case"textarea":null!==s.value&&(e.textContent=s.value);if("print"===r)break;e.addEventListener("input",(e=>{n.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){s.value===i.attributes.xfaOn?e.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&e.removeAttribute("checked");if("print"===r)break;e.addEventListener("change",(e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{null!==s.value&&e.setAttribute("value",s.value);if("print"===r)break;e.addEventListener("input",(e=>{n.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==s.value)for(const e of i.children)e.attributes.value===s.value&&(e.attributes.selected=!0);e.addEventListener("input",(e=>{const i=e.target.options,r=-1===i.selectedIndex?"":i[i.selectedIndex].value;n.setValue(t,{value:r})}))}}static setAttributes(e){let{html:t,element:i,storage:n=null,intent:r,linkService:s}=e;const{attributes:a}=i,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${r}`);for(const[e,i]of Object.entries(a))if(null!=i)switch(e){case"class":i.length&&t.setAttribute(e,i.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",i);break;case"style":Object.assign(t.style,i);break;case"textContent":t.textContent=i;break;default:(!o||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,i)}o&&s.addLinkAttributes(t,a.href,a.newWindow);n&&a.dataId&&this.setupStorage(t,a.dataId,i,n)}static render(e){const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=[[r,-1,a]],l=e.div;l.append(a);if(e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=t}"richText"!==s&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;o.length>0;){var d;const[e,r,a]=o.at(-1);if(r+1===e.children.length){o.pop();continue}const l=e.children[++o.at(-1)[1]];if(null===l)continue;const{name:h}=l;if("#text"===h){const e=document.createTextNode(l.value);c.push(e);a.append(e);continue}let u;u=null!=l&&null!==(d=l.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h);a.append(u);l.attributes&&this.setAttributes({html:u,element:l,storage:t,intent:s,linkService:i});if(l.children&&l.children.length>0)o.push([l,-1,u]);else if(l.value){const e=document.createTextNode(l.value);n.XfaText.shouldBuildText(h)&&c.push(e);u.append(e)}}for(const e of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t;e.div.hidden=!1}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextLayerRenderTask=void 0;t.renderTextLayer=function renderTextLayer(e){const t=new TextLayerRenderTask({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});t._render(e.timeout);return t};var n=i(1),r=i(134);const s=30,a=new Map,o=/^\s+$/g;function appendText(e,t,i,r){const l=document.createElement("span"),c=e._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(l);const d=n.Util.transform(e._viewport.transform,t.transform);let h=Math.atan2(d[1],d[0]);const u=i[t.fontName];u.vertical&&(h+=Math.PI/2);const p=Math.hypot(d[2],d[3]),g=p*function getAscent(e,t){const i=a.get(e);if(i)return i;t.save();t.font=`30px ${e}`;const n=t.measureText("");let r=null==n?void 0:n.fontBoundingBoxAscent,o=Math.abs(null==n?void 0:n.fontBoundingBoxDescent);if(r){t.restore();const i=r/(r+o);a.set(e,i);return i}t.strokeStyle="red";t.clearRect(0,0,s,s);t.strokeText("g",0,0);let l=t.getImageData(0,0,s,s).data;o=0;for(let e=l.length-1-3;e>=0;e-=4)if(l[e]>0){o=Math.ceil(e/4/s);break}t.clearRect(0,0,s,s);t.strokeText("A",0,s);l=t.getImageData(0,0,s,s).data;r=0;for(let e=0,t=l.length;e<t;e+=4)if(l[e]>0){r=s-Math.floor(e/4/s);break}t.restore();if(r){const t=r/(r+o);a.set(e,t);return t}a.set(e,.8);return.8}(u.fontFamily,r);let f,m;if(0===h){f=d[4];m=d[5]-g}else{f=d[4]+g*Math.sin(h);m=d[5]-g*Math.cos(h)}l.style.left=`${f}px`;l.style.top=`${m}px`;l.style.fontSize=`${p}px`;l.style.fontFamily=u.fontFamily;c.fontSize=p;l.setAttribute("role","presentation");l.textContent=t.str;l.dir=t.dir;e._fontInspectorEnabled&&(l.dataset.fontName=t.fontName);0!==h&&(c.angle=h*(180/Math.PI));let v=!1;if(t.str.length>1||e._enhanceTextSelection&&o.test(t.str))v=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),i=Math.abs(t.transform[3]);e!==i&&Math.max(e,i)/Math.min(e,i)>1.5&&(v=!0)}v&&(u.vertical?c.canvasWidth=t.height*e._viewport.scale:c.canvasWidth=t.width*e._viewport.scale);e._textDivProperties.set(l,c);e._textContentStream&&e._layoutText(l);if(e._enhanceTextSelection&&c.hasText){let i=1,r=0;if(0!==h){i=Math.cos(h);r=Math.sin(h)}const s=(u.vertical?t.height:t.width)*e._viewport.scale,a=p;let o,c;if(0!==h){o=[i,r,-r,i,f,m];c=n.Util.getAxialAlignedBoundingBox([0,0,s,a],o)}else c=[f,m,f+s,m+a];e._bounds.push({left:c[0],top:c[1],right:c[2],bottom:c[3],div:l,size:[s,a],m:o})}}function render(e){if(e._canceled)return;const t=e._textDivs,i=e._capability,n=t.length;if(n>1e5){e._renderingDone=!0;i.resolve()}else{if(!e._textContentStream)for(let i=0;i<n;i++)e._layoutText(t[i]);e._renderingDone=!0;i.resolve()}}function findPositiveMin(e,t,i){let n=0;for(let r=0;r<i;r++){const i=e[t++];i>0&&(n=n?Math.min(i,n):i)}return n}function expand(e){const t=e._bounds,i=e._viewport,r=function expandBounds(e,t,i){const n=i.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));expandBoundsLTR(e,n);const r=new Array(i.length);for(const e of n){const t=e.index;r[t]={left:e.x1New,top:0,right:e.x2New,bottom:0}}i.map((function(t,i){const s=r[i],a=n[i];a.x1=t.top;a.y1=e-s.right;a.x2=t.bottom;a.y2=e-s.left;a.index=i;a.x1New=void 0;a.x2New=void 0}));expandBoundsLTR(t,n);for(const e of n){const t=e.index;r[t].top=e.x1New;r[t].bottom=e.x2New}return r}(i.width,i.height,t);for(let i=0;i<r.length;i++){const s=t[i].div,a=e._textDivProperties.get(s);if(0===a.angle){a.paddingLeft=t[i].left-r[i].left;a.paddingTop=t[i].top-r[i].top;a.paddingRight=r[i].right-t[i].right;a.paddingBottom=r[i].bottom-t[i].bottom;e._textDivProperties.set(s,a);continue}const o=r[i],l=t[i],c=l.m,d=c[0],h=c[1],u=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],p=new Float64Array(64);for(let e=0,t=u.length;e<t;e++){const t=n.Util.applyTransform(u[e],c);p[e+0]=d&&(o.left-t[0])/d;p[e+4]=h&&(o.top-t[1])/h;p[e+8]=d&&(o.right-t[0])/d;p[e+12]=h&&(o.bottom-t[1])/h;p[e+16]=h&&(o.left-t[0])/-h;p[e+20]=d&&(o.top-t[1])/d;p[e+24]=h&&(o.right-t[0])/-h;p[e+28]=d&&(o.bottom-t[1])/d;p[e+32]=d&&(o.left-t[0])/-d;p[e+36]=h&&(o.top-t[1])/-h;p[e+40]=d&&(o.right-t[0])/-d;p[e+44]=h&&(o.bottom-t[1])/-h;p[e+48]=h&&(o.left-t[0])/h;p[e+52]=d&&(o.top-t[1])/-d;p[e+56]=h&&(o.right-t[0])/h;p[e+60]=d&&(o.bottom-t[1])/-d}const g=1+Math.min(Math.abs(d),Math.abs(h));a.paddingLeft=findPositiveMin(p,32,16)/g;a.paddingTop=findPositiveMin(p,48,16)/g;a.paddingRight=findPositiveMin(p,0,16)/g;a.paddingBottom=findPositiveMin(p,16,16)/g;e._textDivProperties.set(s,a)}}function expandBoundsLTR(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const e of t){let t=0;for(;t<i.length&&i[t].end<=e.y1;)t++;let n,r,s=i.length-1;for(;s>=0&&i[s].start>=e.y2;)s--;let a,o,l=-1/0;for(a=t;a<=s;a++){n=i[a];r=n.boundary;let t;t=r.x2>e.x1?r.index>e.index?r.x1New:e.x1:void 0===r.x2New?(r.x2+e.x1)/2:r.x2New;t>l&&(l=t)}e.x1New=l;for(a=t;a<=s;a++){n=i[a];r=n.boundary;void 0===r.x2New?r.x2>e.x1?r.index>e.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2))}const c=[];let d=null;for(a=t;a<=s;a++){n=i[a];r=n.boundary;const t=r.x2>e.x2?r:e;if(d===t)c.at(-1).end=n.end;else{c.push({start:n.start,end:n.end,boundary:t});d=t}}if(i[t].start<e.y1){c[0].start=e.y1;c.unshift({start:i[t].start,end:e.y1,boundary:i[t].boundary})}if(e.y2<i[s].end){c.at(-1).end=e.y2;c.push({start:e.y2,end:i[s].end,boundary:i[s].boundary})}for(a=t;a<=s;a++){n=i[a];r=n.boundary;if(void 0!==r.x2New)continue;let e=!1;for(o=t-1;!e&&o>=0&&i[o].start>=r.y1;o--)e=i[o].boundary===r;for(o=s+1;!e&&o<i.length&&i[o].end<=r.y2;o++)e=i[o].boundary===r;for(o=0;!e&&o<c.length;o++)e=c[o].boundary===r;e||(r.x2New=l)}Array.prototype.splice.apply(i,[t,s-t+1,...c])}for(const t of i){const i=t.boundary;void 0===i.x2New&&(i.x2New=Math.max(e,i.x2))}}class TextLayerRenderTask{constructor(e){var t;let{textContent:i,textContentStream:s,container:a,viewport:o,textDivs:l,textContentItemsStr:c,enhanceTextSelection:d}=e;d&&(0,r.deprecated)("The `enhanceTextSelection` functionality will be removed in the future.");this._textContent=i;this._textContentStream=s;this._container=a;this._document=a.ownerDocument;this._viewport=o;this._textDivs=l||[];this._textContentItemsStr=c||[];this._enhanceTextSelection=!!d;this._fontInspectorEnabled=!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled);this._reader=null;this._layoutTextLastFontSize=null;this._layoutTextLastFontFamily=null;this._layoutTextCtx=null;this._textDivProperties=new WeakMap;this._renderingDone=!1;this._canceled=!1;this._capability=(0,n.createPromiseCapability)();this._renderTimer=null;this._bounds=[];this._devicePixelRatio=globalThis.devicePixelRatio||1;this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null);if(this._layoutTextCtx){this._layoutTextCtx.canvas.width=0;this._layoutTextCtx.canvas.height=0;this._layoutTextCtx=null}})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0;if(this._reader){this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch((()=>{}));this._reader=null}if(null!==this._renderTimer){clearTimeout(this._renderTimer);this._renderTimer=null}this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(e,t){for(let i=0,n=e.length;i<n;i++)if(void 0!==e[i].str){this._textContentItemsStr.push(e[i].str);appendText(this,e[i],t,this._layoutTextCtx)}else if("beginMarkedContentProps"===e[i].type||"beginMarkedContent"===e[i].type){const t=this._container;this._container=document.createElement("span");this._container.classList.add("markedContent");null!==e[i].id&&this._container.setAttribute("id",`${e[i].id}`);t.append(this._container)}else"endMarkedContent"===e[i].type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._textDivProperties.get(e);let i="";if(0!==t.canvasWidth&&t.hasText){const{fontFamily:n}=e.style,{fontSize:r}=t;if(r!==this._layoutTextLastFontSize||n!==this._layoutTextLastFontFamily){this._layoutTextCtx.font=`${r*this._devicePixelRatio}px ${n}`;this._layoutTextLastFontSize=r;this._layoutTextLastFontFamily=n}try{const{width:n}=this._layoutTextCtx.measureText(e.textContent);if(n>0){const e=this._devicePixelRatio*t.canvasWidth/n;this._enhanceTextSelection&&(t.scale=e);i=`scaleX(${e})`}}catch(e){}}0!==t.angle&&(i=`rotate(${t.angle}deg) ${i}`);if(i.length>0){this._enhanceTextSelection&&(t.originalTransform=i);e.style.transform=i}t.hasText&&this._container.append(e);if(t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation");this._container.append(e)}}_render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=(0,n.createPromiseCapability)();let i=Object.create(null);const r=this._document.createElement("canvas");r.height=r.width=s;this._layoutTextCtx=r.getContext("2d",{alpha:!1});if(this._textContent){const e=this._textContent.items,i=this._textContent.styles;this._processItems(e,i);t.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const pump=()=>{this._reader.read().then((e=>{let{value:n,done:r}=e;if(r)t.resolve();else{Object.assign(i,n.styles);this._processItems(n.items,i);pump()}}),t.reject)};this._reader=this._textContentStream.getReader();pump()}}t.promise.then((()=>{i=null;e?this._renderTimer=setTimeout((()=>{render(this);this._renderTimer=null}),e):render(this)}),this._capability.reject)}expandTextDivs(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._enhanceTextSelection||!this._renderingDone)return;if(null!==this._bounds){expand(this);this._bounds=null}const t=[],i=[];for(let n=0,r=this._textDivs.length;n<r;n++){const r=this._textDivs[n],s=this._textDivProperties.get(r);if(s.hasText)if(e){t.length=0;i.length=0;s.originalTransform&&t.push(s.originalTransform);if(s.paddingTop>0){i.push(`${s.paddingTop}px`);t.push(`translateY(${-s.paddingTop}px)`)}else i.push(0);s.paddingRight>0?i.push(s.paddingRight/s.scale+"px"):i.push(0);s.paddingBottom>0?i.push(`${s.paddingBottom}px`):i.push(0);if(s.paddingLeft>0){i.push(s.paddingLeft/s.scale+"px");t.push(`translateX(${-s.paddingLeft/s.scale}px)`)}else i.push(0);r.style.padding=i.join(" ");t.length&&(r.style.transform=t.join(" "))}else{r.style.padding=null;r.style.transform=s.originalTransform}}}}t.TextLayerRenderTask=TextLayerRenderTask},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SVGGraphics=void 0;var n=i(134),r=i(1);i(140);let s=class{constructor(){(0,r.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=s;{const a={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},o="http://www.w3.org/XML/1998/namespace",l="http://www.w3.org/1999/xlink",c=["butt","round","square"],d=["miter","round","bevel"],createObjectURL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!i)return URL.createObjectURL(new Blob([e],{type:t}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=`data:${t};base64,`;for(let t=0,i=e.length;t<i;t+=3){const s=255&e[t],a=255&e[t+1],o=255&e[t+2],l=(3&s)<<4|a>>4,c=t+1<i?(15&a)<<2|o>>6:64,d=t+2<i?63&o:64;r+=n[s>>2]+n[l]+n[c]+n[d]}return r},h=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let e=0;e<256;e++){let i=e;for(let e=0;e<8;e++)i=1&i?3988292384^i>>1&2147483647:i>>1&2147483647;t[e]=i}function writePngChunk(e,i,n,r){let s=r;const a=i.length;n[s]=a>>24&255;n[s+1]=a>>16&255;n[s+2]=a>>8&255;n[s+3]=255&a;s+=4;n[s]=255&e.charCodeAt(0);n[s+1]=255&e.charCodeAt(1);n[s+2]=255&e.charCodeAt(2);n[s+3]=255&e.charCodeAt(3);s+=4;n.set(i,s);s+=i.length;const o=function crc32(e,i,n){let r=-1;for(let s=i;s<n;s++){const i=255&(r^e[s]);r=r>>>8^t[i]}return-1^r}(n,r+4,s);n[s]=o>>24&255;n[s+1]=o>>16&255;n[s+2]=o>>8&255;n[s+3]=255&o}function deflateSync(e){return function deflateSyncUncompressed(e){let t=e.length;const i=65535,n=Math.ceil(t/i),r=new Uint8Array(2+t+5*n+4);let s=0;r[s++]=120;r[s++]=156;let a=0;for(;t>i;){r[s++]=0;r[s++]=255;r[s++]=255;r[s++]=0;r[s++]=0;r.set(e.subarray(a,a+i),s);s+=i;a+=i;t-=i}r[s++]=1;r[s++]=255&t;r[s++]=t>>8&255;r[s++]=255&~t;r[s++]=(65535&~t)>>8&255;r.set(e.subarray(a),s);s+=e.length-a;const o=function adler32(e,t,i){let n=1,r=0;for(let s=t;s<i;++s){n=(n+(255&e[s]))%65521;r=(r+n)%65521}return r<<16|n}(e,0,e.length);r[s++]=o>>24&255;r[s++]=o>>16&255;r[s++]=o>>8&255;r[s++]=255&o;return r}(e)}return function convertImgDataToPng(t,i,n){return function encode(t,i,n,s){const a=t.width,o=t.height;let l,c,d;const h=t.data;switch(i){case r.ImageKind.GRAYSCALE_1BPP:c=0;l=1;d=a+7>>3;break;case r.ImageKind.RGB_24BPP:c=2;l=8;d=3*a;break;case r.ImageKind.RGBA_32BPP:c=6;l=8;d=4*a;break;default:throw new Error("invalid format")}const u=new Uint8Array((1+d)*o);let p=0,g=0;for(let e=0;e<o;++e){u[p++]=0;u.set(h.subarray(g,g+d),p);g+=d;p+=d}if(i===r.ImageKind.GRAYSCALE_1BPP&&s){p=0;for(let e=0;e<o;e++){p++;for(let e=0;e<d;e++)u[p++]^=255}}const f=new Uint8Array([a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o,l,c,0,0,0]),m=deflateSync(u),v=e.length+36+f.length+m.length,_=new Uint8Array(v);let b=0;_.set(e,b);b+=e.length;writePngChunk("IHDR",f,_,b);b+=12+f.length;writePngChunk("IDATA",m,_,b);b+=12+m.length;writePngChunk("IEND",new Uint8Array(0),_,b);return createObjectURL(_,"image/png",n)}(t,void 0===t.kind?r.ImageKind.GRAYSCALE_1BPP:t.kind,i,n)}}();class SVGExtraState{constructor(){this.fontSizeScale=1;this.fontWeight=a.fontWeight;this.fontSize=0;this.textMatrix=r.IDENTITY_MATRIX;this.fontMatrix=r.FONT_IDENTITY_MATRIX;this.leading=0;this.textRenderingMode=r.TextRenderingMode.FILL;this.textMatrixScale=1;this.x=0;this.y=0;this.lineX=0;this.lineY=0;this.charSpacing=0;this.wordSpacing=0;this.textHScale=1;this.textRise=0;this.fillColor=a.fillColor;this.strokeColor="#000000";this.fillAlpha=1;this.strokeAlpha=1;this.lineWidth=1;this.lineJoin="";this.lineCap="";this.miterLimit=0;this.dashArray=[];this.dashPhase=0;this.dependencies=[];this.activeClipUrl=null;this.clipGroup=null;this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e;this.y=t}}function opListToTree(e){let t=[];const i=[];for(const n of e)if("save"!==n.fn)"restore"===n.fn?t=i.pop():t.push(n);else{t.push({fnId:92,fn:"group",items:[]});i.push(t);t=t.at(-1).items}return t}function pf(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let i=t.length-1;if("0"!==t[i])return t;do{i--}while("0"===t[i]);return t.substring(0,"."===t[i]?i:i+1)}function pm(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${pf(e[0])} ${pf(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){return`rotate(${pf(180*Math.acos(e[0])/Math.PI)})`}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${pf(e[4])} ${pf(e[5])})`;return`matrix(${pf(e[0])} ${pf(e[1])} ${pf(e[2])} ${pf(e[3])} ${pf(e[4])} ${pf(e[5])})`}let u=0,p=0,g=0;t.SVGGraphics=s=class{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future.");this.svgFactory=new n.DOMSVGFactory;this.current=new SVGExtraState;this.transformMatrix=r.IDENTITY_MATRIX;this.transformStack=[];this.extraStack=[];this.commonObjs=e;this.objs=t;this.pendingClip=null;this.pendingEOFill=!1;this.embedFonts=!1;this.embeddedFonts=Object.create(null);this.cssStyle=null;this.forceDataSchema=!!i;this._operatorIdMapping=[];for(const e in r.OPS)this._operatorIdMapping[r.OPS[e]]=e}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e);this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop();this.current=this.extraStack.pop();this.pendingClip=null;this.tgrp=null}group(e){this.save();this.executeOpTree(e);this.restore()}loadDependencies(e){const t=e.fnArray,i=e.argsArray;for(let e=0,n=t.length;e<n;e++)if(t[e]===r.OPS.dependency)for(const t of i[e]){const e=t.startsWith("g_")?this.commonObjs:this.objs,i=new Promise((i=>{e.get(t,i)}));this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(e,t,i,n,s,a){const o=[e,t,i,n,s,a];this.transformMatrix=r.Util.transform(this.transformMatrix,o);this.tgrp=null}getSVG(e,t){this.viewport=t;const i=this._initialize(t);return this.loadDependencies(e).then((()=>{this.transformMatrix=r.IDENTITY_MATRIX;this.executeOpTree(this.convertOpList(e));return i}))}convertOpList(e){const t=this._operatorIdMapping,i=e.argsArray,n=e.fnArray,r=[];for(let e=0,s=n.length;e<s;e++){const s=n[e];r.push({fnId:s,fn:t[s],args:i[e]})}return opListToTree(r)}executeOpTree(e){for(const t of e){const e=t.fn,i=t.fnId,n=t.args;switch(0|i){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(n);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(n[0],n[1]);break;case r.OPS.setFont:this.setFont(n);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(n[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(n[0],n[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(n[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(n[0]);break;case r.OPS.setHScale:this.setHScale(n[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.setTextRise:this.setTextRise(n[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(n[0]);break;case r.OPS.setLineWidth:this.setLineWidth(n[0]);break;case r.OPS.setLineJoin:this.setLineJoin(n[0]);break;case r.OPS.setLineCap:this.setLineCap(n[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(n[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(n[0],n[1],n[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(n);break;case r.OPS.setFillColorN:this.setFillColorN(n);break;case r.OPS.shadingFill:this.shadingFill(n[0]);break;case r.OPS.setDash:this.setDash(n[0],n[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(n[0]);break;case r.OPS.setFlatness:this.setFlatness(n[0]);break;case r.OPS.setGState:this.setGState(n[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(n[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(n[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(n[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(n[0],n[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(n[0],n[1],n[2],n[3],n[4],n[5]);break;case r.OPS.constructPath:this.constructPath(n[0],n[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,r.warn)(`Unimplemented operator ${e}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,i,n,r,s){const a=this.current;a.textMatrix=a.lineMatrix=[e,t,i,n,r,s];a.textMatrixScale=Math.hypot(e,t);a.x=a.lineX=0;a.y=a.lineY=0;a.xcoords=[];a.ycoords=[];a.tspan=this.svgFactory.createElement("svg:tspan");a.tspan.setAttributeNS(null,"font-family",a.fontFamily);a.tspan.setAttributeNS(null,"font-size",`${pf(a.fontSize)}px`);a.tspan.setAttributeNS(null,"y",pf(-a.y));a.txtElement=this.svgFactory.createElement("svg:text");a.txtElement.append(a.tspan)}beginText(){const e=this.current;e.x=e.lineX=0;e.y=e.lineY=0;e.textMatrix=r.IDENTITY_MATRIX;e.lineMatrix=r.IDENTITY_MATRIX;e.textMatrixScale=1;e.tspan=this.svgFactory.createElement("svg:tspan");e.txtElement=this.svgFactory.createElement("svg:text");e.txtgrp=this.svgFactory.createElement("svg:g");e.xcoords=[];e.ycoords=[]}moveText(e,t){const i=this.current;i.x=i.lineX+=e;i.y=i.lineY+=t;i.xcoords=[];i.ycoords=[];i.tspan=this.svgFactory.createElement("svg:tspan");i.tspan.setAttributeNS(null,"font-family",i.fontFamily);i.tspan.setAttributeNS(null,"font-size",`${pf(i.fontSize)}px`);i.tspan.setAttributeNS(null,"y",pf(-i.y))}showText(e){const t=this.current,i=t.font,n=t.fontSize;if(0===n)return;const s=t.fontSizeScale,l=t.charSpacing,c=t.wordSpacing,d=t.fontDirection,h=t.textHScale*d,u=i.vertical,p=u?1:-1,g=i.defaultVMetrics,f=n*t.fontMatrix[0];let m=0;for(const r of e){if(null===r){m+=d*c;continue}if("number"==typeof r){m+=p*r*n/1e3;continue}const e=(r.isSpace?c:0)+l,a=r.fontChar;let o,h,v,_=r.width;if(u){let e;const t=r.vmetric||g;e=r.vmetric?t[1]:.5*_;e=-e*f;const i=t[2]*f;_=t?-t[0]:_;o=e/s;h=(m+i)/s}else{o=m/s;h=0}if(r.isInFont||i.missingFile){t.xcoords.push(t.x+o);u&&t.ycoords.push(-t.y+h);t.tspan.textContent+=a}v=u?_*f-e*d:_*f+e*d;m+=v}t.tspan.setAttributeNS(null,"x",t.xcoords.map(pf).join(" "));u?t.tspan.setAttributeNS(null,"y",t.ycoords.map(pf).join(" ")):t.tspan.setAttributeNS(null,"y",pf(-t.y));u?t.y-=m:t.x+=m*h;t.tspan.setAttributeNS(null,"font-family",t.fontFamily);t.tspan.setAttributeNS(null,"font-size",`${pf(t.fontSize)}px`);t.fontStyle!==a.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle);t.fontWeight!==a.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const v=t.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(v===r.TextRenderingMode.FILL||v===r.TextRenderingMode.FILL_STROKE){t.fillColor!==a.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor);t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)}else t.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none");if(v===r.TextRenderingMode.STROKE||v===r.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let _=t.textMatrix;if(0!==t.textRise){_=_.slice();_[5]+=t.textRise}t.txtElement.setAttributeNS(null,"transform",`${pm(_)} scale(${pf(h)}, -1)`);t.txtElement.setAttributeNS(o,"xml:space","preserve");t.txtElement.append(t.tspan);t.txtgrp.append(t.txtElement);this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t);this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');if(!this.cssStyle){this.cssStyle=this.svgFactory.createElement("svg:style");this.cssStyle.setAttributeNS(null,"type","text/css");this.defs.append(this.cssStyle)}const t=createObjectURL(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,i=this.commonObjs.get(e[0]);let n=e[1];t.font=i;if(this.embedFonts&&!i.missingFile&&!this.embeddedFonts[i.loadedName]){this.addFontStyle(i);this.embeddedFonts[i.loadedName]=i}t.fontMatrix=i.fontMatrix||r.FONT_IDENTITY_MATRIX;let s="normal";i.black?s="900":i.bold&&(s="bold");const a=i.italic?"italic":"normal";if(n<0){n=-n;t.fontDirection=-1}else t.fontDirection=1;t.fontSize=n;t.fontFamily=i.loadedName;t.fontWeight=s;t.fontStyle=a;t.tspan=this.svgFactory.createElement("svg:tspan");t.tspan.setAttributeNS(null,"y",pf(-t.y));t.xcoords=[];t.ycoords=[]}endText(){var e;const t=this.current;if(t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&null!==(e=t.txtElement)&&void 0!==e&&e.hasChildNodes()){t.element=t.txtElement;this.clip("nonzero");this.endPath()}}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=c[e]}setLineJoin(e){this.current.lineJoin=d[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,i){this.current.strokeColor=r.Util.makeHexColor(e,t,i)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,i){this.current.fillColor=r.Util.makeHexColor(e,t,i);this.current.tspan=this.svgFactory.createElement("svg:tspan");this.current.xcoords=[];this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const t=this.viewport.width,i=this.viewport.height,n=r.Util.inverseTransform(this.transformMatrix),s=r.Util.applyTransform([0,0],n),a=r.Util.applyTransform([0,i],n),o=r.Util.applyTransform([t,0],n),l=r.Util.applyTransform([t,i],n),c=Math.min(s[0],a[0],o[0],l[0]),d=Math.min(s[1],a[1],o[1],l[1]),h=Math.max(s[0],a[0],o[0],l[0]),u=Math.max(s[1],a[1],o[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",c);p.setAttributeNS(null,"y",d);p.setAttributeNS(null,"width",h-c);p.setAttributeNS(null,"height",u-d);p.setAttributeNS(null,"fill",this._makeShadingPattern(e));this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha);this._ensureTransformGroup().append(p)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],i=e[2],n=e[3]||r.IDENTITY_MATRIX,[s,a,o,l]=e[4],c=e[5],d=e[6],h=e[7],u="shading"+g++,[p,f,m,v]=r.Util.normalizeRect([...r.Util.applyTransform([s,a],n),...r.Util.applyTransform([o,l],n)]),[_,b]=r.Util.singularValueDecompose2dScale(n),w=c*_,y=d*b,P=this.svgFactory.createElement("svg:pattern");P.setAttributeNS(null,"id",u);P.setAttributeNS(null,"patternUnits","userSpaceOnUse");P.setAttributeNS(null,"width",w);P.setAttributeNS(null,"height",y);P.setAttributeNS(null,"x",`${p}`);P.setAttributeNS(null,"y",`${f}`);const S=this.svg,E=this.transformMatrix,A=this.current.fillColor,x=this.current.strokeColor,C=this.svgFactory.create(m-p,v-f);this.svg=C;this.transformMatrix=n;if(2===h){const e=r.Util.makeHexColor(...t);this.current.fillColor=e;this.current.strokeColor=e}this.executeOpTree(this.convertOpList(i));this.svg=S;this.transformMatrix=E;this.current.fillColor=A;this.current.strokeColor=x;P.append(C.childNodes[0]);this.defs.append(P);return`url(#${u})`}_makeShadingPattern(e){"string"==typeof e&&(e=this.objs.get(e));switch(e[0]){case"RadialAxial":const t="shading"+g++,i=e[3];let n;switch(e[1]){case"axial":const i=e[4],r=e[5];n=this.svgFactory.createElement("svg:linearGradient");n.setAttributeNS(null,"id",t);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"x1",i[0]);n.setAttributeNS(null,"y1",i[1]);n.setAttributeNS(null,"x2",r[0]);n.setAttributeNS(null,"y2",r[1]);break;case"radial":const s=e[4],a=e[5],o=e[6],l=e[7];n=this.svgFactory.createElement("svg:radialGradient");n.setAttributeNS(null,"id",t);n.setAttributeNS(null,"gradientUnits","userSpaceOnUse");n.setAttributeNS(null,"cx",a[0]);n.setAttributeNS(null,"cy",a[1]);n.setAttributeNS(null,"r",l);n.setAttributeNS(null,"fx",s[0]);n.setAttributeNS(null,"fy",s[1]);n.setAttributeNS(null,"fr",o);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of i){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]);t.setAttributeNS(null,"stop-color",e[1]);n.append(t)}this.defs.append(n);return`url(#${t})`;case"Mesh":(0,r.warn)("Unimplemented pattern Mesh");return null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e;this.current.dashPhase=t}constructPath(e,t){const i=this.current;let n=i.x,s=i.y,a=[],o=0;for(const i of e)switch(0|i){case r.OPS.rectangle:n=t[o++];s=t[o++];const e=n+t[o++],i=s+t[o++];a.push("M",pf(n),pf(s),"L",pf(e),pf(s),"L",pf(e),pf(i),"L",pf(n),pf(i),"Z");break;case r.OPS.moveTo:n=t[o++];s=t[o++];a.push("M",pf(n),pf(s));break;case r.OPS.lineTo:n=t[o++];s=t[o++];a.push("L",pf(n),pf(s));break;case r.OPS.curveTo:n=t[o+4];s=t[o+5];a.push("C",pf(t[o]),pf(t[o+1]),pf(t[o+2]),pf(t[o+3]),pf(n),pf(s));o+=6;break;case r.OPS.curveTo2:a.push("C",pf(n),pf(s),pf(t[o]),pf(t[o+1]),pf(t[o+2]),pf(t[o+3]));n=t[o+2];s=t[o+3];o+=4;break;case r.OPS.curveTo3:n=t[o+2];s=t[o+3];a.push("C",pf(t[o]),pf(t[o+1]),pf(n),pf(s),pf(n),pf(s));o+=4;break;case r.OPS.closePath:a.push("Z")}a=a.join(" ");if(i.path&&e.length>0&&e[0]!==r.OPS.rectangle&&e[0]!==r.OPS.moveTo)a=i.path.getAttributeNS(null,"d")+a;else{i.path=this.svgFactory.createElement("svg:path");this._ensureTransformGroup().append(i.path)}i.path.setAttributeNS(null,"d",a);i.path.setAttributeNS(null,"fill","none");i.element=i.path;i.setCurrentPoint(n,s)}endPath(){const e=this.current;e.path=null;if(!this.pendingClip)return;if(!e.element){this.pendingClip=null;return}const t="clippath"+u++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",t);i.setAttributeNS(null,"transform",pm(this.transformMatrix));const n=e.element.cloneNode(!0);"evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero");this.pendingClip=null;i.append(n);this.defs.append(i);if(e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;i.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`;this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,r.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;if(e.element){e.element.setAttributeNS(null,"fill",e.fillColor);e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha);this.endPath()}}stroke(){const e=this.current;if(e.element){this._setStrokeAttributes(e.element);e.element.setAttributeNS(null,"fill","none");this.endPath()}}_setStrokeAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const i=this.current;let n=i.dashArray;1!==t&&n.length>0&&(n=n.map((function(e){return t*e})));e.setAttributeNS(null,"stroke",i.strokeColor);e.setAttributeNS(null,"stroke-opacity",i.strokeAlpha);e.setAttributeNS(null,"stroke-miterlimit",pf(i.miterLimit));e.setAttributeNS(null,"stroke-linecap",i.lineCap);e.setAttributeNS(null,"stroke-linejoin",i.lineJoin);e.setAttributeNS(null,"stroke-width",pf(t*i.lineWidth)+"px");e.setAttributeNS(null,"stroke-dasharray",n.map(pf).join(" "));e.setAttributeNS(null,"stroke-dashoffset",pf(t*i.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fill()}fillStroke(){this.stroke();this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd");this.fillStroke()}closeStroke(){this.closePath();this.stroke()}closeFillStroke(){this.closePath();this.fillStroke()}closeEOFillStroke(){this.closePath();this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0");e.setAttributeNS(null,"y","0");e.setAttributeNS(null,"width","1px");e.setAttributeNS(null,"height","1px");e.setAttributeNS(null,"fill",this.current.fillColor);this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,r.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const i=e.width,n=e.height,r=h(e,this.forceDataSchema,!!t),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0");s.setAttributeNS(null,"y","0");s.setAttributeNS(null,"width",pf(i));s.setAttributeNS(null,"height",pf(n));this.current.element=s;this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(l,"xlink:href",r);a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y",pf(-n));a.setAttributeNS(null,"width",pf(i)+"px");a.setAttributeNS(null,"height",pf(n)+"px");a.setAttributeNS(null,"transform",`scale(${pf(1/i)} ${pf(-1/n)})`);t?t.append(a):this._ensureTransformGroup().append(a)}paintImageMaskXObject(e){const t=this.current,i=e.width,n=e.height,r=t.fillColor;t.maskId="mask"+p++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",t.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0");a.setAttributeNS(null,"y","0");a.setAttributeNS(null,"width",pf(i));a.setAttributeNS(null,"height",pf(n));a.setAttributeNS(null,"fill",r);a.setAttributeNS(null,"mask",`url(#${t.maskId})`);this.defs.append(s);this._ensureTransformGroup().append(a);this.paintInlineImageXObject(e,s)}paintFormXObjectBegin(e,t){Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]);if(t){const e=t[2]-t[0],i=t[3]-t[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",t[0]);n.setAttributeNS(null,"y",t[1]);n.setAttributeNS(null,"width",pf(e));n.setAttributeNS(null,"height",pf(i));this.current.element=n;this.clip("nonzero");this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),i=this.svgFactory.createElement("svg:defs");t.append(i);this.defs=i;const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"transform",pm(e.transform));t.append(n);this.svg=n;return t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl);this.svg.append(e);this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){if(!this.tgrp){this.tgrp=this.svgFactory.createElement("svg:g");this.tgrp.setAttributeNS(null,"transform",pm(this.transformMatrix));this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)}return this.tgrp}}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFNodeStream=void 0;var n=i(1),r=i(160);const s=require("fs"),a=require("http"),o=require("https"),l=require("url"),c=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class PDFNodeStream{constructor(e){this.source=e;this.url=function parseUrl(e){const t=l.parse(e);if("file:"===t.protocol||t.host)return t;if(/^[a-z]:[/\\]/i.test(e))return l.parse(`file:///${e}`);t.host||(t.protocol="file:");return t}(e.url);this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol||"capacitor:"===this.url.protocol;this.isFsUrl="file:"===this.url.protocol;this.httpHeaders=this.isHttp&&e.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once.");this._fullRequestReader=this.isFsUrl?new PDFNodeStreamFsFullReader(this):new PDFNodeStreamFullReader(this);return this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new PDFNodeStreamFsRangeReader(this,e,t):new PDFNodeStreamRangeReader(this,e,t);this._rangeRequestReaders.push(i);return i}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class BaseFullReader{constructor(e){this._url=e.url;this._done=!1;this._storedError=null;this.onProgress=null;const t=e.source;this._contentLength=t.length;this._loaded=0;this._filename=null;this._disableRange=t.disableRange||!1;this._rangeChunkSize=t.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e){this._readCapability=(0,n.createPromiseCapability)();return this.read()}this._loaded+=e.length;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e;this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e;e.on("readable",(()=>{this._readCapability.resolve()}));e.on("end",(()=>{e.destroy();this._done=!0;this._readCapability.resolve()}));e.on("error",(e=>{this._error(e)}));!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled"));this._storedError&&this._readableStream.destroy(this._storedError)}}class BaseRangeReader{constructor(e){this._url=e.url;this._done=!1;this._storedError=null;this.onProgress=null;this._loaded=0;this._readableStream=null;this._readCapability=(0,n.createPromiseCapability)();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;if(this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e){this._readCapability=(0,n.createPromiseCapability)();return this.read()}this._loaded+=e.length;this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e;this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e;e.on("readable",(()=>{this._readCapability.resolve()}));e.on("end",(()=>{e.destroy();this._done=!0;this._readCapability.resolve()}));e.on("error",(e=>{this._error(e)}));this._storedError&&this._readableStream.destroy(this._storedError)}}function createRequestOptions(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class PDFNodeStreamFullReader extends BaseFullReader{constructor(e){super(e);const handleResponse=t=>{if(404===t.statusCode){const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e;this._headersCapability.reject(e);return}this._headersCapability.resolve();this._setReadableStream(t);const getResponseHeader=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:i,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i;this._contentLength=s||this._contentLength;this._filename=(0,r.extractFilenameFromHeader)(getResponseHeader)};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,e.httpHeaders),handleResponse):this._request=o.request(createRequestOptions(this._url,e.httpHeaders),handleResponse);this._request.on("error",(e=>{this._storedError=e;this._headersCapability.reject(e)}));this._request.end()}}class PDFNodeStreamRangeReader extends BaseRangeReader{constructor(e,t,i){super(e);this._httpHeaders={};for(const t in e.httpHeaders){const i=e.httpHeaders[t];void 0!==i&&(this._httpHeaders[t]=i)}this._httpHeaders.Range=`bytes=${t}-${i-1}`;const handleResponse=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e}};this._request=null;"http:"===this._url.protocol?this._request=a.request(createRequestOptions(this._url,this._httpHeaders),handleResponse):this._request=o.request(createRequestOptions(this._url,this._httpHeaders),handleResponse);this._request.on("error",(e=>{this._storedError=e}));this._request.end()}}class PDFNodeStreamFsFullReader extends BaseFullReader{constructor(e){super(e);let t=decodeURIComponent(this._url.path);c.test(this._url.href)&&(t=t.replace(/^\//,""));s.lstat(t,((e,i)=>{if(e){"ENOENT"===e.code&&(e=new n.MissingPDFException(`Missing PDF "${t}".`));this._storedError=e;this._headersCapability.reject(e)}else{this._contentLength=i.size;this._setReadableStream(s.createReadStream(t));this._headersCapability.resolve()}}))}}class PDFNodeStreamFsRangeReader extends BaseRangeReader{constructor(e,t,i){super(e);let n=decodeURIComponent(this._url.path);c.test(this._url.href)&&(n=n.replace(/^\//,""));this._setReadableStream(s.createReadStream(n,{start:t,end:i-1}))}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createResponseStatusError=function createResponseStatusError(e,t){if(404===e||0===e&&t.startsWith("file:"))return new n.MissingPDFException('Missing PDF "'+t+'".');return new n.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)};t.extractFilenameFromHeader=function extractFilenameFromHeader(e){const t=e("Content-Disposition");if(t){let e=(0,r.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(e){}if((0,s.isPdfFile)(e))return e}return null};t.validateRangeRequestCapabilities=function validateRangeRequestCapabilities(e){let{getResponseHeader:t,isHttp:i,rangeChunkSize:n,disableRange:r}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t("Content-Length"),10);if(!Number.isInteger(a))return s;s.suggestedLength=a;if(a<=2*n)return s;if(r||!i)return s;if("bytes"!==t("Accept-Ranges"))return s;if("identity"!==(t("Content-Encoding")||"identity"))return s;s.allowRangeRequests=!0;return s};t.validateResponseStatus=function validateResponseStatus(e){return 200===e||206===e};var n=i(1),r=i(161),s=i(134)},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getFilenameFromContentDispositionHeader=function getFilenameFromContentDispositionHeader(e){let t=!0,i=toParamRegExp("filename\\*","i").exec(e);if(i){i=i[1];let e=rfc2616unquote(i);e=unescape(e);e=rfc5987decode(e);e=rfc2047decode(e);return fixupEncoding(e)}i=function rfc2231getparam(e){const t=[];let i;const n=toParamRegExp("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(i=n.exec(e));){let[,e,n,r]=i;e=parseInt(e,10);if(e in t){if(0===e)break}else t[e]=[n,r]}const r=[];for(let e=0;e<t.length&&e in t;++e){let[i,n]=t[e];n=rfc2616unquote(n);if(i){n=unescape(n);0===e&&(n=rfc5987decode(n))}r.push(n)}return r.join("")}(e);if(i){return fixupEncoding(rfc2047decode(i))}i=toParamRegExp("filename","i").exec(e);if(i){i=i[1];let e=rfc2616unquote(i);e=rfc2047decode(e);return fixupEncoding(e)}function toParamRegExp(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function textdecode(e,i){if(e){if(!/^[\x00-\xFF]+$/.test(i))return i;try{const r=new TextDecoder(e,{fatal:!0}),s=(0,n.stringToBytes)(i);i=r.decode(s);t=!1}catch(e){}}return i}function fixupEncoding(e){if(t&&/[\x80-\xff]/.test(e)){e=textdecode("utf-8",e);t&&(e=textdecode("iso-8859-1",e))}return e}function rfc2616unquote(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const i=t[e].indexOf('"');if(-1!==i){t[e]=t[e].slice(0,i);t.length=e+1}t[e]=t[e].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function rfc5987decode(e){const t=e.indexOf("'");if(-1===t)return e;return textdecode(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function rfc2047decode(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,i,n){if("q"===i||"Q"===i)return textdecode(t,n=(n=n.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})));try{n=atob(n)}catch(e){}return textdecode(t,n)}))}return""};var n=i(1)},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFNetworkStream=void 0;var n=i(1),r=i(160);class NetworkManager{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e;this.isHttp=/^https?:/i.test(e);this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null);this.withCredentials=t.withCredentials||!1;this.getXhr=t.getXhr||function NetworkManager_getXhr(){return new XMLHttpRequest};this.currXhrId=0;this.pendingRequests=Object.create(null)}requestRange(e,t,i){const n={begin:e,end:t};for(const e in i)n[e]=i[e];return this.request(n)}requestFull(e){return this.request(e)}request(e){const t=this.getXhr(),i=this.currXhrId++,n=this.pendingRequests[i]={xhr:t};t.open("GET",this.url);t.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const i=this.httpHeaders[e];void 0!==i&&t.setRequestHeader(e,i)}if(this.isHttp&&"begin"in e&&"end"in e){t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`);n.expectedStatus=206}else n.expectedStatus=200;t.responseType="arraybuffer";e.onError&&(t.onerror=function(i){e.onError(t.status)});t.onreadystatechange=this.onStateChange.bind(this,i);t.onprogress=this.onProgress.bind(this,i);n.onHeadersReceived=e.onHeadersReceived;n.onDone=e.onDone;n.onError=e.onError;n.onProgress=e.onProgress;t.send(null);return i}onProgress(e,t){var i;const n=this.pendingRequests[e];n&&(null===(i=n.onProgress)||void 0===i||i.call(n,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived){i.onHeadersReceived();delete i.onHeadersReceived}if(4!==r.readyState)return;if(!(e in this.pendingRequests))return;delete this.pendingRequests[e];if(0===r.status&&this.isHttp){var s;null===(s=i.onError)||void 0===s||s.call(i,r.status);return}const a=r.status||200;if(!(200===a&&206===i.expectedStatus)&&a!==i.expectedStatus){var o;null===(o=i.onError)||void 0===o||o.call(i,r.status);return}const l=function getArrayBuffer(e){const t=e.response;return"string"!=typeof t?t:(0,n.stringToBytes)(t).buffer}(r);if(206===a){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);i.onDone({begin:parseInt(t[1],10),chunk:l})}else if(l)i.onDone({begin:0,chunk:l});else{var c;null===(c=i.onError)||void 0===c||c.call(i,r.status)}}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e];t.abort()}}t.PDFNetworkStream=class PDFNetworkStream{constructor(e){this._source=e;this._manager=new NetworkManager(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials});this._rangeChunkSize=e.rangeChunkSize;this._fullRequestReader=null;this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once.");this._fullRequestReader=new PDFNetworkStreamFullRequestReader(this._manager,this._source);return this._fullRequestReader}getRangeReader(e,t){const i=new PDFNetworkStreamRangeRequestReader(this._manager,e,t);i.onClosed=this._onRangeRequestReaderClosed.bind(this);this._rangeRequestReaders.push(i);return i}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class PDFNetworkStreamFullRequestReader{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url;this._fullRequestId=e.requestFull(i);this._headersReceivedCapability=(0,n.createPromiseCapability)();this._disableRange=t.disableRange||!1;this._contentLength=t.length;this._rangeChunkSize=t.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._isStreamingSupported=!1;this._isRangeSupported=!1;this._cachedChunks=[];this._requests=[];this._done=!1;this._storedError=void 0;this._filename=null;this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),getResponseHeader=e=>t.getResponseHeader(e),{allowRangeRequests:i,suggestedLength:n}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0);this._contentLength=n||this._contentLength;this._filename=(0,r.extractFilenameFromHeader)(getResponseHeader);this._isRangeSupported&&this._manager.abortRequest(e);this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);this._done=!0;if(!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,r.createResponseStatusError)(e,this._url);this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0;this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();this._requests.push(e);return e.promise}cancel(e){this._done=!0;this._headersReceivedCapability.reject(e);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0;this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId);this._fullRequestReader=null}}class PDFNetworkStreamRangeRequestReader{constructor(e,t,i){this._manager=e;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url;this._requestId=e.requestRange(t,i,n);this._requests=[];this._queuedChunk=null;this._done=!1;this._storedError=void 0;this.onProgress=null;this.onClosed=null}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0;this._close()}_onError(e){this._storedError=(0,r.createResponseStatusError)(e,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0;this._queuedChunk=null}_onProgress(e){if(!this.isStreamingSupported){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;this._queuedChunk=null;return{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();this._requests.push(e);return e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0;this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId);this._close()}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFFetchStream=void 0;var n=i(1),r=i(160);function createFetchOptions(e,t,i){return{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function createHeaders(e){const t=new Headers;for(const i in e){const n=e[i];void 0!==n&&t.append(i,n)}return t}t.PDFFetchStream=class PDFFetchStream{constructor(e){this.source=e;this.isHttp=/^https?:/i.test(e.url);this.httpHeaders=this.isHttp&&e.httpHeaders||{};this._fullRequestReader=null;this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once.");this._fullRequestReader=new PDFFetchStreamReader(this);return this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new PDFFetchStreamRangeReader(this,e,t);this._rangeRequestReaders.push(i);return i}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class PDFFetchStreamReader{constructor(e){this._stream=e;this._reader=null;this._loaded=0;this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1;this._contentLength=t.length;this._headersCapability=(0,n.createPromiseCapability)();this._disableRange=t.disableRange||!1;this._rangeChunkSize=t.rangeChunkSize;this._rangeChunkSize||this._disableRange||(this._disableRange=!0);this._abortController=new AbortController;this._isStreamingSupported=!t.disableStream;this._isRangeSupported=!t.disableRange;this._headers=createHeaders(this._stream.httpHeaders);const i=t.url;fetch(i,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,i);this._reader=e.body.getReader();this._headersCapability.resolve();const getResponseHeader=t=>e.headers.get(t),{allowRangeRequests:t,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:getResponseHeader,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=t;this._contentLength=s||this._contentLength;this._filename=(0,r.extractFilenameFromHeader)(getResponseHeader);!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject);this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();if(t)return{value:e,done:t};this._loaded+=e.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._reader&&this._reader.cancel(e);this._abortController.abort()}}class PDFFetchStreamRangeReader{constructor(e,t,i){this._stream=e;this._reader=null;this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1;this._readCapability=(0,n.createPromiseCapability)();this._isStreamingSupported=!s.disableStream;this._abortController=new AbortController;this._headers=createHeaders(this._stream.httpHeaders);this._headers.append("Range",`bytes=${t}-${i-1}`);const a=s.url;fetch(a,createFetchOptions(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,r.validateResponseStatus)(e.status))throw(0,r.createResponseStatusError)(e.status,a);this._readCapability.resolve();this._reader=e.body.getReader()})).catch(this._readCapability.reject);this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();if(t)return{value:e,done:t};this._loaded+=e.byteLength;this.onProgress&&this.onProgress({loaded:this._loaded});return{value:new Uint8Array(e).buffer,done:!1}}cancel(e){this._reader&&this._reader.cancel(e);this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var i=__webpack_module_cache__[e]={exports:{}};__webpack_modules__[e](i,i.exports,__w_pdfjs_require__);return i.exports}var __webpack_exports__={};(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0});Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}});Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}});Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}});Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}});Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}});Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}});Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}});Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}});Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}});Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return i.LoopbackPort}});Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}});Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}});Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}});Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}});Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}});Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}});Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}});Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}});Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}});Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return d.SVGGraphics}});Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}});Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}});Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}});Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}});Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return h.XfaLayer}});Object.defineProperty(e,"build",{enumerable:!0,get:function(){return i.build}});Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}});Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}});Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return i.getDocument}});Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}});Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}});Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}});Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}});Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}});Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return c.renderTextLayer}});Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}});Object.defineProperty(e,"version",{enumerable:!0,get:function(){return i.version}});var t=__w_pdfjs_require__(1),i=__w_pdfjs_require__(130),n=__w_pdfjs_require__(134),r=__w_pdfjs_require__(149),s=__w_pdfjs_require__(133),a=__w_pdfjs_require__(154),o=__w_pdfjs_require__(142),l=__w_pdfjs_require__(140),c=__w_pdfjs_require__(157),d=__w_pdfjs_require__(158),h=__w_pdfjs_require__(156);if(l.isNodeJS){const{PDFNodeStream:e}=__w_pdfjs_require__(159);(0,i.setPDFNetworkStreamFactory)((t=>new e(t)))}else{const{PDFNetworkStream:e}=__w_pdfjs_require__(162),{PDFFetchStream:t}=__w_pdfjs_require__(163);(0,i.setPDFNetworkStreamFactory)((i=>(0,n.isValidFetchUrl)(i.url)?new t(i):new e(i)))}})();return __webpack_exports__})()));
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2022 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */(()=>{var e=[,(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.animationStarted=t.VERTICAL_PADDING=t.UNKNOWN_SCALE=t.TextLayerMode=t.SpreadMode=t.SidebarView=t.ScrollMode=t.SCROLLBAR_PADDING=t.RenderingStates=t.RendererType=t.ProgressBar=t.PresentationModeState=t.OutputScale=t.MIN_SCALE=t.MAX_SCALE=t.MAX_AUTO_SCALE=t.DEFAULT_SCALE_VALUE=t.DEFAULT_SCALE_DELTA=t.DEFAULT_SCALE=t.AutoPrintRegExp=void 0;t.apiPageLayoutToViewerModes=function apiPageLayoutToViewerModes(e){let t=n.VERTICAL,i=r.NONE;switch(e){case"SinglePage":t=n.PAGE;break;case"OneColumn":break;case"TwoPageLeft":t=n.PAGE;case"TwoColumnLeft":i=r.ODD;break;case"TwoPageRight":t=n.PAGE;case"TwoColumnRight":i=r.EVEN}return{scrollMode:t,spreadMode:i}};t.apiPageModeToSidebarView=function apiPageModeToSidebarView(e){switch(e){case"UseNone":return i.NONE;case"UseThumbs":return i.THUMBS;case"UseOutlines":return i.OUTLINE;case"UseAttachments":return i.ATTACHMENTS;case"UseOC":return i.LAYERS}return i.NONE};t.approximateFraction=function approximateFraction(e){if(Math.floor(e)===e)return[e,1];const t=1/e;if(t>8)return[1,8];if(Math.floor(t)===t)return[1,t];const i=e>1?t:e;let n,r=0,s=1,a=1,o=1;for(;;){const e=r+a,t=s+o;if(t>8)break;if(i<=e/t){a=e;o=t}else{r=e;s=t}}n=i-r/s<a/o-i?i===e?[r,s]:[s,r]:i===e?[a,o]:[o,a];return n};t.backtrackBeforeAllVisibleElements=backtrackBeforeAllVisibleElements;t.binarySearchFirstItem=binarySearchFirstItem;t.docStyle=void 0;t.getActiveOrFocusedElement=function getActiveOrFocusedElement(){let e=document,t=e.activeElement||e.querySelector(":focus");for(;null!==(i=t)&&void 0!==i&&i.shadowRoot;){var i;e=t.shadowRoot;t=e.activeElement||e.querySelector(":focus")}return t};t.getPageSizeInches=function getPageSizeInches(e){let{view:t,userUnit:i,rotate:n}=e;const[r,s,a,o]=t,l=n%180!=0,c=(a-r)/72*i,d=(o-s)/72*i;return{width:l?d:c,height:l?c:d}};t.getVisibleElements=function getVisibleElements(e){let{scrollEl:t,views:i,sortByVisibility:n=!1,horizontal:r=!1,rtl:s=!1}=e;const a=t.scrollTop,o=a+t.clientHeight,l=t.scrollLeft,c=l+t.clientWidth;const d=[],h=new Set,u=i.length;let p=binarySearchFirstItem(i,r?function isElementNextAfterViewHorizontally(e){const t=e.div,i=t.offsetLeft+t.clientLeft,n=i+t.clientWidth;return s?i<c:n>l}:function isElementBottomAfterViewTop(e){const t=e.div;return t.offsetTop+t.clientTop+t.clientHeight>a});p>0&&p<u&&!r&&(p=backtrackBeforeAllVisibleElements(p,i,a));let g=r?c:-1;for(let e=p;e<u;e++){const t=i[e],n=t.div,s=n.offsetLeft+n.clientLeft,u=n.offsetTop+n.clientTop,p=n.clientWidth,f=n.clientHeight,m=s+p,v=u+f;if(-1===g)v>=o&&(g=v);else if((r?s:u)>g)break;if(v<=a||u>=o||m<=l||s>=c)continue;const _=Math.max(0,a-u)+Math.max(0,v-o),b=Math.max(0,l-s)+Math.max(0,m-c),w=(p-b)/p,y=(f-_)/f*w*100|0;d.push({id:t.id,x:s,y:u,view:t,percent:y,widthPercent:100*w|0});h.add(t.id)}const f=d[0],m=d.at(-1);n&&d.sort((function(e,t){const i=e.percent-t.percent;return Math.abs(i)>.001?-i:e.id-t.id}));return{first:f,last:m,views:d,ids:h}};t.isPortraitOrientation=function isPortraitOrientation(e){return e.width<=e.height};t.isValidRotation=function isValidRotation(e){return Number.isInteger(e)&&e%90==0};t.isValidScrollMode=function isValidScrollMode(e){return Number.isInteger(e)&&Object.values(n).includes(e)&&e!==n.UNKNOWN};t.isValidSpreadMode=function isValidSpreadMode(e){return Number.isInteger(e)&&Object.values(r).includes(e)&&e!==r.UNKNOWN};t.noContextMenuHandler=function noContextMenuHandler(e){e.preventDefault()};t.normalizeWheelEventDelta=function normalizeWheelEventDelta(e){let t=normalizeWheelEventDirection(e);0===e.deltaMode?t/=900:1===e.deltaMode&&(t/=30);return t};t.normalizeWheelEventDirection=normalizeWheelEventDirection;t.parseQueryString=function parseQueryString(e){const t=new Map;for(const[i,n]of new URLSearchParams(e))t.set(i.toLowerCase(),n);return t};t.removeNullCharacters=function removeNullCharacters(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e){console.error("The argument must be a string.");return e}t&&(e=e.replace(a," "));return e.replace(s,"")};t.roundToDivide=function roundToDivide(e,t){const i=e%t;return 0===i?e:Math.round(e-i+t)};t.scrollIntoView=function scrollIntoView(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.classList.contains("stf__item")){Window.ngxConsole.log("don't scroll in book mode");return}let r=e.offsetParent;if(!r){Window.ngxConsole.error("offsetParent is not set -- cannot scroll");return}let s=e.offsetTop+e.clientTop,a=e.offsetLeft+e.clientLeft;for(;r.clientHeight===r.scrollHeight&&r.clientWidth===r.scrollWidth||i&&(r.classList.contains("markedContent")||"hidden"===getComputedStyle(r).overflow);){s+=r.offsetTop;a+=r.offsetLeft;r=r.offsetParent;if(!r){if(n&&document.body.clientHeight>s){s-=32;window.scrollTo(window.scrollX,s)}return}}if(t){void 0!==t.top&&(s+=t.top);if(void 0!==t.left){a+=t.left;r.scrollLeft=a}}r.scrollTop=s};t.watchScroll=function watchScroll(e,t){const debounceScroll=function(r){n||(n=window.requestAnimationFrame((function viewAreaElementScrolled(){n=null;const r=e.scrollLeft,s=i.lastX;r!==s&&(i.right=r>s);i.lastX=r;const a=e.scrollTop,o=i.lastY;a!==o&&(i.down=a>o);i.lastY=a;t(i)})))},i={right:!0,down:!0,lastX:e.scrollLeft,lastY:e.scrollTop,_eventHandler:debounceScroll};let n=null;e.addEventListener("scroll",debounceScroll,!0);return i};function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}t.DEFAULT_SCALE_VALUE="auto";t.DEFAULT_SCALE=1;t.DEFAULT_SCALE_DELTA=1.1;t.MIN_SCALE=.1;t.MAX_SCALE=10;t.UNKNOWN_SCALE=0;t.MAX_AUTO_SCALE=1.25;t.SCROLLBAR_PADDING=40;t.VERTICAL_PADDING=5;t.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3};t.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const i={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};t.SidebarView=i;t.RendererType={CANVAS:"canvas",SVG:"svg"};t.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const n={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};t.ScrollMode=n;const r={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};t.SpreadMode=r;t.AutoPrintRegExp=/\bprint\s*\(/;t.OutputScale=class OutputScale{constructor(){const e=window.devicePixelRatio||1;this.sx=e;this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}};const s=/\x00/g,a=/[\x01-\x1F]/g;function binarySearchFirstItem(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=i,r=e.length-1;if(r<0||!t(e[r]))return e.length;if(t(e[n]))return n;for(;n<r;){const i=n+r>>1;t(e[i])?r=i:n=i+1}return n}function backtrackBeforeAllVisibleElements(e,t,i){if(e<2)return e;let n=t[e].div,r=n.offsetTop+n.clientTop;if(r>=i){n=t[e-1].div;r=n.offsetTop+n.clientTop}for(let i=e-2;i>=0;--i){n=t[i].div;if(n.offsetTop+n.clientTop+n.clientHeight<=r)break;e=i}return e}function normalizeWheelEventDirection(e){let t=Math.hypot(e.deltaX,e.deltaY);const i=Math.atan2(e.deltaY,e.deltaX);-.25*Math.PI<i&&i<.75*Math.PI&&(t=-t);return t}const o=new Promise((function(e){window.ngxZone.runOutsideAngular((()=>{window.requestAnimationFrame(e)}))}));t.animationStarted=o;const l=document.documentElement.style;t.docStyle=l;var c=new WeakMap,d=new WeakMap,h=new WeakMap;t.ProgressBar=class ProgressBar{constructor(e){_classPrivateFieldInitSpec(this,c,{writable:!0,value:null});_classPrivateFieldInitSpec(this,d,{writable:!0,value:0});_classPrivateFieldInitSpec(this,h,{writable:!0,value:!0});if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const t=document.getElementById(e);_classPrivateFieldSet(this,c,t.classList)}get percent(){return _classPrivateFieldGet(this,d)}set percent(e){_classPrivateFieldSet(this,d,function clamp(e,t,i){return Math.min(Math.max(e,t),i)}(e,0,100));if(isNaN(e))_classPrivateFieldGet(this,c).add("indeterminate");else{_classPrivateFieldGet(this,c).remove("indeterminate");l.setProperty("--progressBar-percent",`${_classPrivateFieldGet(this,d)}%`)}}setWidth(e){if(!e)return;const t=e.parentNode.offsetWidth-e.offsetWidth;t>0&&l.setProperty("--progressBar-end-offset",`${t}px`)}hide(){if(_classPrivateFieldGet(this,h)){_classPrivateFieldSet(this,h,!1);_classPrivateFieldGet(this,c).add("hidden")}}show(){if(!_classPrivateFieldGet(this,h)){_classPrivateFieldSet(this,h,!0);_classPrivateFieldGet(this,c).remove("hidden")}}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.compatibilityParams=t.OptionKind=t.AppOptions=void 0;const i=Object.create(null);t.compatibilityParams=i;{const e=navigator.userAgent||"",t=navigator.platform||"",n=navigator.maxTouchPoints||1,r=/Android/.test(e),s=/\b(iPad|iPhone|iPod)(?=;)/.test(e)||"MacIntel"===t&&n>1;!function checkCanvasSizeLimitation(){(s||r)&&(i.maxCanvasPixels=5242880)}()}const n={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};t.OptionKind=n;const r={annotationEditorMode:{value:-1,kind:n.VIEWER+n.PREFERENCE},annotationMode:{value:2,kind:n.VIEWER+n.PREFERENCE},cursorToolOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},defaultZoomValue:{value:"",kind:n.VIEWER+n.PREFERENCE},disableHistory:{value:!1,kind:n.VIEWER},disablePageLabels:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePermissions:{value:!1,kind:n.VIEWER+n.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:n.VIEWER+n.PREFERENCE},enableScripting:{value:!0,kind:n.VIEWER+n.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:n.VIEWER},externalLinkTarget:{value:0,kind:n.VIEWER+n.PREFERENCE},historyUpdateUrl:{value:!1,kind:n.VIEWER+n.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},imageResourcesPath:{value:"./images/",kind:n.VIEWER},maxCanvasPixels:{value:16777216,kind:n.VIEWER},forcePageColors:{value:!1,kind:n.VIEWER+n.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:n.VIEWER+n.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:n.VIEWER+n.PREFERENCE},pdfBugEnabled:{value:!1,kind:n.VIEWER+n.PREFERENCE},printResolution:{value:150,kind:n.VIEWER},removePageBorders:{value:!1,kind:n.VIEWER+n.PREFERENCE},sidebarViewOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},scrollModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},spreadModeOnLoad:{value:-1,kind:n.VIEWER+n.PREFERENCE},textLayerMode:{value:1,kind:n.VIEWER+n.PREFERENCE},useOnlyCssZoom:{value:!1,kind:n.VIEWER+n.PREFERENCE},viewerCssTheme:{value:0,kind:n.VIEWER+n.PREFERENCE},viewOnLoad:{value:0,kind:n.VIEWER+n.PREFERENCE},cMapPacked:{value:!0,kind:n.API},cMapUrl:{value:"../web/cmaps/",kind:n.API},disableAutoFetch:{value:!1,kind:n.API+n.PREFERENCE},disableFontFace:{value:!1,kind:n.API+n.PREFERENCE},disableRange:{value:!1,kind:n.API+n.PREFERENCE},disableStream:{value:!1,kind:n.API+n.PREFERENCE},docBaseUrl:{value:"",kind:n.API},enableXfa:{value:!0,kind:n.API+n.PREFERENCE},fontExtraProperties:{value:!1,kind:n.API},isEvalSupported:{value:!0,kind:n.API},maxImageSize:{value:-1,kind:n.API},pdfBug:{value:!1,kind:n.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:n.API},verbosity:{value:1,kind:n.API},workerPort:{value:null,kind:n.WORKER},workerSrc:{value:"./assets/pdf.worker.js",kind:n.WORKER}};r.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:n.VIEWER};r.disablePreferences={value:!1,kind:n.VIEWER};r.locale={value:navigator.language||"en-US",kind:n.VIEWER};r.renderer={value:"canvas",kind:n.VIEWER+n.PREFERENCE};r.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:n.VIEWER};const s=Object.create(null);if(globalThis.pdfDefaultOptions)for(const e in globalThis.pdfDefaultOptions)s[e]=globalThis.pdfDefaultOptions[e];t.AppOptions=class AppOptions{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(e){const t=s[e];if(void 0!==t)return t;const n=r[e];if(void 0!==n){var a;return null!==(a=i[e])&&void 0!==a?a:n.value}}static getAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=Object.create(null);for(const o in r){var a;const l=r[o];if(e){if(0==(e&l.kind))continue;if(e===n.PREFERENCE){const e=l.value,i=typeof e;if("boolean"===i||"string"===i||"number"===i&&Number.isInteger(e)){t[o]=e;continue}throw new Error(`Invalid type for preference: ${o}`)}}const c=s[o];t[o]=void 0!==c?c:null!==(a=i[o])&&void 0!==a?a:l.value}return t}static set(e,t){s[e]=t}static setAll(e){for(const t in e)s[t]=e[t]}static remove(e){delete s[e]}static _hasUserOptions(){return Object.keys(s).length>0}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SimpleLinkService=t.PDFLinkService=t.LinkTarget=void 0;var n=i(1);function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classStaticPrivateMethodGet(e,t,i){!function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t);return i}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(e,t){var i=function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}(e,t,"get");return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,i)}const r="noopener noreferrer nofollow",s={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};t.LinkTarget=s;function addLinkAttributes(e){let{url:t,target:i,rel:a,enabled:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||"string"!=typeof t)throw new Error('A valid "url" parameter must provided.');const l=(0,n.removeNullCharacters)(t);if(o)e.href=e.title=l;else{e.href="";e.title=`Disabled: ${l}`;e.onclick=()=>!1}let c="";switch(i){case s.NONE:break;case s.SELF:c="_self";break;case s.BLANK:c="_blank";break;case s.PARENT:c="_parent";break;case s.TOP:c="_top"}e.target=c;e.rel="string"==typeof a?a:r}var a=new WeakMap,o=new WeakSet;class PDFLinkService{constructor(){let{eventBus:e,externalLinkTarget:t=null,externalLinkRel:i=null,ignoreDestinationZoom:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}(this,o);!function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}(this,a,{writable:!0,value:new Map});this.eventBus=e;this.externalLinkTarget=t;this.externalLinkRel=i;this.externalLinkEnabled=!0;this._ignoreDestinationZoom=n;this.baseUrl=null;this.pdfDocument=null;this.pdfViewer=null;this.pdfHistory=null}setDocument(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.baseUrl=t;this.pdfDocument=e;_classPrivateFieldGet(this,a).clear()}setViewer(e){this.pdfViewer=e}setHistory(e){this.pdfHistory=e}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(e){this.pdfViewer.currentPageNumber=e}get rotation(){return this.pdfViewer.pagesRotation}set rotation(e){this.pdfViewer.pagesRotation=e}async goToDestination(e){if(!this.pdfDocument)return;let t,i;if("string"==typeof e){t=e;i=await this.pdfDocument.getDestination(e)}else{t=null;i=await e}Array.isArray(i)?_classPrivateMethodGet(this,o,_goToDestinationHelper2).call(this,e,t,i):Window.ngxConsole.error(`PDFLinkService.goToDestination: "${i}" is not a valid destination array, for dest="${e}".`)}goToPage(e){if(!this.pdfDocument)return;const t="string"==typeof e&&this.pdfViewer.pageLabelToPageNumber(e)||0|e;if(Number.isInteger(t)&&t>0&&t<=this.pagesCount){if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.pushPage(t)}this.pdfViewer.scrollPageIntoView({pageNumber:t})}else Window.ngxConsole.error(`PDFLinkService.goToPage: "${e}" is not a valid page.`)}addLinkAttributes(e,t){addLinkAttributes(e,{url:t,target:arguments.length>2&&void 0!==arguments[2]&&arguments[2]?s.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(e){if("string"==typeof e){if(e.length>0)return this.getAnchorUrl("#"+escape(e))}else if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length>0)return this.getAnchorUrl("#"+escape(t))}return this.getAnchorUrl("")}getAnchorUrl(e){return(this.baseUrl||"")+e}setHash(e){if(!this.pdfDocument)return;let t,i;if(e.includes("=")){const r=(0,n.parseQueryString)(e);r.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:r.get("search").replace(/"/g,""),phraseSearch:"true"===r.get("phrase")});r.has("page")&&(t=0|r.get("page")||1);if(r.has("zoom")){const e=r.get("zoom").split(","),t=e[0],n=parseFloat(t);t.includes("Fit")?"Fit"===t||"FitB"===t?i=[null,{name:t}]:"FitH"===t||"FitBH"===t||"FitV"===t||"FitBV"===t?i=[null,{name:t},e.length>1?0|e[1]:null]:"FitR"===t?5!==e.length?Window.ngxConsole.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):i=[null,{name:t},0|e[1],0|e[2],0|e[3],0|e[4]]:Window.ngxConsole.error(`PDFLinkService.setHash: "${t}" is not a valid zoom value.`):i=[null,{name:"XYZ"},e.length>1?0|e[1]:null,e.length>2?0|e[2]:null,n?n/100:t]}i?this.pdfViewer.scrollPageIntoView({pageNumber:t||this.page,destArray:i,allowNegativeOffset:!0}):t&&(this.page=t);r.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:r.get("pagemode")});r.has("nameddest")&&this.goToDestination(r.get("nameddest"))}else{i=unescape(e);try{i=JSON.parse(i);Array.isArray(i)||(i=i.toString())}catch(e){}if("string"==typeof i||_classStaticPrivateMethodGet(PDFLinkService,PDFLinkService,_isValidExplicitDestination).call(PDFLinkService,i)){this.goToDestination(i);return}Window.ngxConsole.error(`PDFLinkService.setHash: "${unescape(e)}" is not a valid destination.`)}}executeNamedAction(e){var t,i;switch(e){case"GoBack":null===(t=this.pdfHistory)||void 0===t||t.back();break;case"GoForward":null===(i=this.pdfHistory)||void 0===i||i.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:e})}cachePageRef(e,t){if(!t)return;const i=0===t.gen?`${t.num}R`:`${t.num}R${t.gen}`;_classPrivateFieldGet(this,a).set(i,e)}_cachedPageNumber(e){if(!e)return null;const t=0===e.gen?`${e.num}R`:`${e.num}R${e.gen}`;return _classPrivateFieldGet(this,a).get(t)||null}isPageVisible(e){return this.pdfViewer.isPageVisible(e)}isPageCached(e){return this.pdfViewer.isPageCached(e)}}t.PDFLinkService=PDFLinkService;function _goToDestinationHelper2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;const n=i[0];let r;if("object"==typeof n&&null!==n){r=this._cachedPageNumber(n);if(!r){this.pdfDocument.getPageIndex(n).then((r=>{this.cachePageRef(r+1,n);_classPrivateMethodGet(this,o,_goToDestinationHelper2).call(this,e,t,i)})).catch((()=>{Window.ngxConsole.error(`PDFLinkService.#goToDestinationHelper: "${n}" is not a valid page reference, for dest="${e}".`)}));return}}else{if(!Number.isInteger(n)){Window.ngxConsole.error(`PDFLinkService.#goToDestinationHelper: "${n}" is not a valid destination reference, for dest="${e}".`);return}r=n+1}if(!r||r<1||r>this.pagesCount)Window.ngxConsole.error(`PDFLinkService.#goToDestinationHelper: "${r}" is not a valid page number, for dest="${e}".`);else{if(this.pdfHistory){this.pdfHistory.pushCurrentPosition();this.pdfHistory.push({namedDest:t,explicitDest:i,pageNumber:r})}this.pdfViewer.scrollPageIntoView({pageNumber:r,destArray:i,ignoreDestinationZoom:this._ignoreDestinationZoom})}}function _isValidExplicitDestination(e){if(!Array.isArray(e))return!1;const t=e.length;if(t<2)return!1;const i=e[0];if(!("object"==typeof i&&Number.isInteger(i.num)&&Number.isInteger(i.gen)||Number.isInteger(i)&&i>=0))return!1;const n=e[1];if("object"!=typeof n||"string"!=typeof n.name)return!1;let r=!0;switch(n.name){case"XYZ":if(5!==t)return!1;break;case"Fit":case"FitB":return 2===t;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==t)return!1;break;case"FitR":if(6!==t)return!1;r=!1;break;default:return!1}for(let i=2;i<t;i++){const t=e[i];if(!("number"==typeof t||r&&null===t))return!1}return!0}t.SimpleLinkService=class SimpleLinkService{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(e){}get rotation(){return 0}set rotation(e){}async goToDestination(e){}goToPage(e){}addLinkAttributes(e,t){addLinkAttributes(e,{url:t,enabled:this.externalLinkEnabled})}getDestinationHash(e){return"#"}getAnchorUrl(e){return"#"}setHash(e){}executeNamedAction(e){}cachePageRef(e,t){}isPageVisible(e){return!0}isPageCached(e){return!0}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFViewerApplication=t.PDFPrintServiceFactory=t.DefaultExternalServices=void 0;var n=i(1),r=i(5),s=i(2),a=i(6),o=i(7),l=i(3),c=i(9),d=i(10),h=i(12),u=i(13),p=i(15),g=i(16),f=i(17),m=i(21),v=i(22),_=i(23),b=i(24),w=i(25),y=i(26),P=i(27),S=i(28),E=i(29),A=i(31),x=i(173),C=i(174),T=i(175);const M=-1,k=1,I={AUTOMATIC:0,LIGHT:1,DARK:2},D=["1.0","1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0","2.1","2.2","2.3"],L=["acrobat distiller","acrobat pdfwriter","adobe livecycle","adobe pdf library","adobe photoshop","ghostscript","tcpdf","cairo","dvipdfm","dvips","pdftex","pdfkit","itext","prince","quarkxpress","mac os x","microsoft","openoffice","oracle","luradocument","pdf-xchange","antenna house","aspose.cells","fpdf"];class DefaultExternalServices{constructor(){throw new Error("Cannot initialize DefaultExternalServices.")}static updateFindControlState(e){}static updateFindMatchesCount(e){}static initPassiveLoading(e){}static reportTelemetry(e){}static createDownloadManager(e){throw new Error("Not implemented: createDownloadManager")}static createPreferences(){throw new Error("Not implemented: createPreferences")}static createL10n(e){throw new Error("Not implemented: createL10n")}static createScripting(e){throw new Error("Not implemented: createScripting")}static get supportsIntegratedFind(){return(0,r.shadow)(this,"supportsIntegratedFind",!1)}static get supportsDocumentFonts(){return(0,r.shadow)(this,"supportsDocumentFonts",!0)}static get supportedMouseWheelZoomModifierKeys(){return(0,r.shadow)(this,"supportedMouseWheelZoomModifierKeys",{ctrlKey:!0,metaKey:!0})}static get isInAutomation(){return(0,r.shadow)(this,"isInAutomation",!1)}static updateEditorStates(e){throw new Error("Not implemented: updateEditorStates")}}t.DefaultExternalServices=DefaultExternalServices;const R={initialBookmark:document.location.hash.substring(1),_initializedCapability:(0,r.createPromiseCapability)(),appConfig:null,pdfDocument:null,pdfLoadingTask:null,printService:null,pdfViewer:null,pdfThumbnailViewer:null,pdfRenderingQueue:null,pdfPresentationMode:null,pdfDocumentProperties:null,pdfLinkService:null,pdfHistory:null,pdfSidebar:null,pdfSidebarResizer:null,pdfOutlineViewer:null,pdfAttachmentViewer:null,pdfLayerViewer:null,pdfCursorTools:null,pdfScriptingManager:null,store:null,downloadManager:null,overlayManager:null,preferences:null,toolbar:null,secondaryToolbar:null,eventBus:null,l10n:null,annotationEditorParams:null,isInitialViewSet:!1,downloadComplete:!1,isViewerEmbedded:window.parent!==window,url:"",baseUrl:"",_downloadUrl:"",externalServices:DefaultExternalServices,_boundEvents:Object.create(null),documentInfo:null,metadata:null,_contentDispositionFilename:null,_contentLength:null,_saveInProgress:!1,_docStats:null,_wheelUnusedTicks:0,_idleCallbacks:new Set,_PDFBug:null,_hasAnnotationEditors:!1,_title:document.title,_printAnnotationStoragePromise:null,async initialize(e){this.preferences=this.externalServices.createPreferences();this.appConfig=e;await this._readPreferences();await this._parseHashParameters();this._forceCssTheme();await this._initializeL10n();this.isViewerEmbedded&&s.AppOptions.get("externalLinkTarget")===l.LinkTarget.NONE&&s.AppOptions.set("externalLinkTarget",l.LinkTarget.TOP);await this._initializeViewerComponents();this.bindEvents();this.bindWindowEvents();const t=e.appContainer||document.documentElement;this.l10n.translate(t).then((()=>{this.eventBus.dispatch("localized",{source:this})}));this._initializedCapability.resolve();this.initializeLoadingBar()},async _readPreferences(){if(!s.AppOptions.get("disablePreferences")){s.AppOptions._hasUserOptions()&&Window.ngxConsole.warn('_readPreferences: The Preferences may override manually set AppOptions; please use the "disablePreferences"-option in order to prevent that.');try{s.AppOptions.setAll(await this.preferences.getAll())}catch(e){Window.ngxConsole.error(`_readPreferences: "${null==e?void 0:e.message}".`)}}},async _parseHashParameters(){if(!s.AppOptions.get("pdfBugEnabled"))return;const e=document.location.hash.substring(1);if(!e)return;const{mainContainer:t,viewerContainer:i}=this.appConfig,a=(0,n.parseQueryString)(e);if("true"===a.get("disableworker"))try{await async function loadFakeWorker(){r.GlobalWorkerOptions.workerSrc||(r.GlobalWorkerOptions.workerSrc=s.AppOptions.get("workerSrc"));"Function"===r.GlobalWorkerOptions.workerSrc.constructor.name&&(r.GlobalWorkerOptions.workerSrc=r.GlobalWorkerOptions.workerSrc());await(0,r.loadScript)(r.PDFWorker.workerSrc)}()}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}a.has("disablerange")&&s.AppOptions.set("disableRange","true"===a.get("disablerange"));a.has("disablestream")&&s.AppOptions.set("disableStream","true"===a.get("disablestream"));a.has("disableautofetch")&&s.AppOptions.set("disableAutoFetch","true"===a.get("disableautofetch"));a.has("disablefontface")&&s.AppOptions.set("disableFontFace","true"===a.get("disablefontface"));a.has("disablehistory")&&s.AppOptions.set("disableHistory","true"===a.get("disablehistory"));a.has("verbosity")&&s.AppOptions.set("verbosity",0|a.get("verbosity"));if(a.has("textlayer"))switch(a.get("textlayer")){case"off":s.AppOptions.set("textLayerMode",n.TextLayerMode.DISABLE);break;case"visible":case"shadow":case"hover":i.classList.add(`textLayer-${a.get("textlayer")}`);try{await loadPDFBug(this);this._PDFBug.loadCSS()}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}}if(a.has("pdfbug")){s.AppOptions.set("pdfBug",!0);s.AppOptions.set("fontExtraProperties",!0);const e=a.get("pdfbug").split(",");try{await loadPDFBug(this);this._PDFBug.init({OPS:r.OPS},t,e)}catch(e){console.error(`_parseHashParameters: "${e.message}".`)}}a.has("locale")&&s.AppOptions.set("locale",a.get("locale"))},async _initializeL10n(){this.l10n=this.externalServices.createL10n({locale:s.AppOptions.get("locale")});const e=await this.l10n.getDirection();document.getElementsByTagName("html")[0].dir=e},_forceCssTheme(){const e=s.AppOptions.get("viewerCssTheme");if(e!==I.AUTOMATIC&&Object.values(I).includes(e))try{const i=document.styleSheets[0],n=(null==i?void 0:i.cssRules)||[];for(let r=0,s=n.length;r<s;r++){var t;const s=n[r];if(s instanceof CSSMediaRule&&"(prefers-color-scheme: dark)"===(null===(t=s.media)||void 0===t?void 0:t[0])){if(e===I.LIGHT){i.deleteRule(r);return}const t=/^@media \(prefers-color-scheme: dark\) {\n\s*([\w\s-.,:;/\\{}()]+)\n}$/.exec(s.cssText);if(null!=t&&t[1]){i.deleteRule(r);i.insertRule(t[1],r)}return}}}catch(e){Window.ngxConsole.error(`_forceCssTheme: "${null==e?void 0:e.message}".`)}},async _initializeViewerComponents(){const{appConfig:e,externalServices:t}=this,i=t.isInAutomation?new a.AutomationEventBus:new a.EventBus;this.eventBus=i;this.overlayManager=new d.OverlayManager;const n=new w.PDFRenderingQueue;n.onIdle=this._cleanup.bind(this);this.pdfRenderingQueue=n;const T=new l.PDFLinkService({eventBus:i,externalLinkTarget:s.AppOptions.get("externalLinkTarget"),externalLinkRel:s.AppOptions.get("externalLinkRel"),ignoreDestinationZoom:s.AppOptions.get("ignoreDestinationZoom")});this.pdfLinkService=T;const M=t.createDownloadManager();this.downloadManager=M;const k=new f.PDFFindController({linkService:T,eventBus:i,pageViewMode:s.AppOptions.get("pageViewMode")});this.findController=k;const I=new y.PDFScriptingManager({eventBus:i,sandboxBundleSrc:s.AppOptions.get("sandboxBundleSrc"),scriptingFactory:t,docPropertiesLookup:this._scriptingDocProperties.bind(this)});this.pdfScriptingManager=I;const D=e.mainContainer,L=e.viewerContainer,R=s.AppOptions.get("annotationEditorMode"),O=s.AppOptions.get("forcePageColors")||window.matchMedia("(forced-colors: active)").matches?{background:s.AppOptions.get("pageColorsBackground"),foreground:s.AppOptions.get("pageColorsForeground")}:null;this.pdfViewer=new A.PDFViewer({container:D,viewer:L,eventBus:i,renderingQueue:n,linkService:T,downloadManager:M,findController:k,scriptingManager:s.AppOptions.get("enableScripting")&&I,renderer:s.AppOptions.get("renderer"),l10n:this.l10n,textLayerMode:s.AppOptions.get("textLayerMode"),annotationMode:s.AppOptions.get("annotationMode"),annotationEditorMode:R,imageResourcesPath:s.AppOptions.get("imageResourcesPath"),removePageBorders:s.AppOptions.get("removePageBorders"),enablePrintAutoRotate:s.AppOptions.get("enablePrintAutoRotate"),useOnlyCssZoom:s.AppOptions.get("useOnlyCssZoom"),maxCanvasPixels:s.AppOptions.get("maxCanvasPixels"),pageViewMode:s.AppOptions.get("pageViewMode"),enablePermissions:s.AppOptions.get("enablePermissions"),pageColors:O});n.setViewer(this.pdfViewer);T.setViewer(this.pdfViewer);I.setViewer(this.pdfViewer);this.pdfThumbnailViewer=new E.PDFThumbnailViewer({container:e.sidebar.thumbnailView,eventBus:i,renderingQueue:n,linkService:T,l10n:this.l10n,pageColors:O});n.setThumbnailViewer(this.pdfThumbnailViewer);if(!this.isViewerEmbedded&&!s.AppOptions.get("disableHistory")){this.pdfHistory=new m.PDFHistory({linkService:T,eventBus:i});T.setHistory(this.pdfHistory)}this.supportsIntegratedFind||(this.findBar=new g.PDFFindBar(e.findBar,i,this.l10n));if(R!==r.AnnotationEditorType.DISABLE){this.annotationEditorParams=new c.AnnotationEditorParams(e.annotationEditorParams,i);for(const e of[document.getElementById("editorModeButtons"),document.getElementById("editorModeSeparator")])e.classList.remove("hidden")}this.pdfDocumentProperties=new p.PDFDocumentProperties(e.documentProperties,this.overlayManager,i,this.l10n,(()=>this._docFilename));this.pdfCursorTools=new o.PDFCursorTools({container:D,eventBus:i,cursorToolOnLoad:s.AppOptions.get("cursorToolOnLoad")});this.toolbar=new C.Toolbar(e.toolbar,i,this.l10n);this.secondaryToolbar=new x.SecondaryToolbar(e.secondaryToolbar,i);this.supportsFullscreen&&(this.pdfPresentationMode=new b.PDFPresentationMode({container:D,pdfViewer:this.pdfViewer,eventBus:i}));let N=s.AppOptions.get("passwordPrompt");N||(N=new h.PasswordPrompt(e.passwordOverlay,this.overlayManager,this.l10n,this.isViewerEmbedded));this.passwordPrompt=N;this.pdfOutlineViewer=new _.PDFOutlineViewer({container:e.sidebar.outlineView,eventBus:i,linkService:T});this.pdfAttachmentViewer=new u.PDFAttachmentViewer({container:e.sidebar.attachmentsView,eventBus:i,downloadManager:M});this.pdfLayerViewer=new v.PDFLayerViewer({container:e.sidebar.layersView,eventBus:i,l10n:this.l10n});this.pdfSidebar=new P.PDFSidebar({elements:e.sidebar,pdfViewer:this.pdfViewer,pdfThumbnailViewer:this.pdfThumbnailViewer,eventBus:i,l10n:this.l10n});this.pdfSidebar.onToggled=this.forceRendering.bind(this);this.pdfSidebarResizer=new S.PDFSidebarResizer(e.sidebarResizer,i,this.l10n)},run(e){this.initialize(e).then(webViewerInitialized)},get initialized(){return this._initializedCapability.settled},get initializedPromise(){return this._initializedCapability.promise},zoomIn(e){this.pdfViewer.isInPresentationMode||this.pdfViewer.increaseScale(e)},zoomOut(e){this.pdfViewer.isInPresentationMode||this.pdfViewer.decreaseScale(e)},zoomReset(){this.pdfViewer.isInPresentationMode||(this.pdfViewer.currentScaleValue=n.DEFAULT_SCALE_VALUE)},get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0},get page(){return this.pdfViewer.currentPageNumber},set page(e){this.pdfViewer.currentPageNumber=e},get supportsPrinting(){return B.instance.supportsPrinting},get supportsFullscreen(){return(0,r.shadow)(this,"supportsFullscreen",document.fullscreenEnabled)},get supportsIntegratedFind(){return this.externalServices.supportsIntegratedFind},get supportsDocumentFonts(){return this.externalServices.supportsDocumentFonts},initializeLoadingBar(){const e=new n.ProgressBar("loadingBar");e.hide();return(0,r.shadow)(this,"loadingBar",e)},get supportedMouseWheelZoomModifierKeys(){return this.externalServices.supportedMouseWheelZoomModifierKeys},initPassiveLoading(){throw new Error("Not implemented: initPassiveLoading")},setTitleUsingUrl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.url=e;this.baseUrl=e.split("#")[0];t&&(this._downloadUrl=t===e?this.baseUrl:t.split("#")[0]);let i=(0,r.getPdfFilenameFromUrl)(e,"");if(!i)try{i=decodeURIComponent((0,r.getFilenameFromUrl)(e))||e}catch(t){i=e}this.setTitle(i)},setTitle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._title;this._title=e;this.isViewerEmbedded||(document.title=`${this._hasAnnotationEditors?"* ":""}${e}`)},get _docFilename(){return this._contentDispositionFilename||(0,r.getPdfFilenameFromUrl)(this.url)},_hideViewBookmark(){const{toolbar:e,secondaryToolbar:t}=this.appConfig;e.viewBookmark.hidden=!0;t.viewBookmarkButton.hidden=!0},_cancelIdleCallbacks(){if(this._idleCallbacks.size){for(const e of this._idleCallbacks)window.cancelIdleCallback(e);this._idleCallbacks.clear()}},async close(){var e,t,i,n;this._unblockDocumentLoadEvent();this._hideViewBookmark();const{container:r}=this.appConfig.errorWrapper;r.hidden=!0;if(!this.pdfLoadingTask)return;if((null===(e=this.pdfDocument)||void 0===e?void 0:e.annotationStorage.size)>0&&this._annotationStorageModified)try{await this.save()}catch(e){}const s=[];s.push(this.pdfLoadingTask.destroy());this.pdfLoadingTask=null;if(this.pdfDocument){this.pdfDocument=null;this.pdfThumbnailViewer.setDocument(null);this.pdfViewer.setDocument(null);this.pdfLinkService.setDocument(null);this.pdfDocumentProperties.setDocument(null)}this.pdfLinkService.externalLinkEnabled=!0;this.store=null;this.isInitialViewSet=!1;this.downloadComplete=!1;this.url="";this.baseUrl="";this._downloadUrl="";this.documentInfo=null;this.metadata=null;this._contentDispositionFilename=null;this._contentLength=null;this._saveInProgress=!1;this._docStats=null;this._hasAnnotationEditors=!1;this._cancelIdleCallbacks();s.push(this.pdfScriptingManager.destroyPromise);this.setTitle();this.pdfSidebar.reset();this.pdfOutlineViewer.reset();this.pdfAttachmentViewer.reset();this.pdfLayerViewer.reset();null===(t=this.pdfHistory)||void 0===t||t.reset();null===(i=this.findBar)||void 0===i||i.reset();this.toolbar.reset();this.secondaryToolbar.reset();null===(n=this._PDFBug)||void 0===n||n.cleanup();await Promise.all(s)},async open(e,t){window.adjacentPagesLoader=void 0;window.ngxZone.runOutsideAngular((async()=>{this.pdfLoadingTask&&await this.close();const i=s.AppOptions.getAll(s.OptionKind.WORKER);for(const e in i)r.GlobalWorkerOptions[e]=i[e];const n=Object.create(null);if("string"==typeof e){this.setTitleUsingUrl(e,e);n.url=e}else if(e&&"byteLength"in e)n.data=e;else if(e.url&&e.originalUrl){this.setTitleUsingUrl(e.originalUrl,e.url);n.url=e.url}const a=s.AppOptions.getAll(s.OptionKind.API);for(const e in a){let t=a[e];n[e]=t}if(t)for(const e in t)n[e]=t[e];const o=(0,r.getDocument)(n);this.pdfLoadingTask=o;o.onPassword=(e,t)=>{this.pdfLinkService.externalLinkEnabled=!1;this.passwordPrompt.setUpdateCallback(e,t);this.passwordPrompt.open()};o.onProgress=e=>{var t;let{loaded:i,total:n}=e;this.progress(i/n);null===(t=this.eventBus)||void 0===t||t.dispatch("progress",{source:this,type:"load",total:n,loaded:i,percent:100*i/n})};o.onUnsupportedFeature=this.fallback.bind(this);this.loadingBar.show();return o.promise.then((e=>{this.load(e)}),(e=>{if(o!==this.pdfLoadingTask)return;let t="loading_error";e instanceof r.InvalidPDFException?t="invalid_file_error":e instanceof r.MissingPDFException?t="missing_file_error":e instanceof r.UnexpectedResponseException&&(t="unexpected_response_error");R.onError&&R.onError(e);return this.l10n.get(t).then((t=>{this._documentError(t,{message:null==e?void 0:e.message});throw e}))}))}))},_ensureDownloadComplete(){if(!this.pdfDocument||!this.downloadComplete)throw new Error("PDF document not downloaded.")},async download(){const e=this._downloadUrl,t=this._docFilename;try{this._ensureDownloadComplete();const i=await this.pdfDocument.getData(),n=new Blob([i],{type:"application/pdf"});await this.downloadManager.download(n,e,t)}catch(i){await this.downloadManager.downloadUrl(e,t)}},async save(){if(this._saveInProgress)return;this._saveInProgress=!0;await this.pdfScriptingManager.dispatchWillSave();const e=this._downloadUrl,t=this._docFilename;try{this._ensureDownloadComplete();const i=await this.pdfDocument.saveDocument(),n=new Blob([i],{type:"application/pdf"});await this.downloadManager.download(n,e,t)}catch(e){Window.ngxConsole.error(`Error when saving the document: ${e.message}`);await this.download()}finally{await this.pdfScriptingManager.dispatchDidSave();this._saveInProgress=!1}this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"save"}})},downloadOrSave(){var e;(null===(e=this.pdfDocument)||void 0===e?void 0:e.annotationStorage.size)>0?this.save():this.download()},fallback(e){this.externalServices.reportTelemetry({type:"unsupportedFeature",featureId:e})},_documentError(e){var t;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unblockDocumentLoadEvent();this._otherError(e,i);this.eventBus.dispatch("documenterror",{source:this,message:e,reason:null!==(t=null==i?void 0:i.message)&&void 0!==t?t:null})},_otherError(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const i=[this.l10n.get("error_version_info",{version:r.version||"?",build:r.build||"?"})];if(t){i.push(this.l10n.get("error_message",{message:t.message}));if(t.stack)i.push(this.l10n.get("error_stack",{stack:t.stack}));else{t.filename&&i.push(this.l10n.get("error_file",{file:t.filename}));t.lineNumber&&i.push(this.l10n.get("error_line",{line:t.lineNumber}))}}const s=this.appConfig.errorWrapper,a=s.container;a.hidden=!1;s.errorMessage.textContent=e;const o=s.closeButton;o.onclick=function(){a.hidden=!0};const l=s.errorMoreInfo,c=s.moreInfoButton,d=s.lessInfoButton;c.onclick=function(){l.hidden=!1;c.hidden=!0;d.hidden=!1;l.style.height=l.scrollHeight+"px"};d.onclick=function(){l.hidden=!0;c.hidden=!1;d.hidden=!0};c.oncontextmenu=n.noContextMenuHandler;d.oncontextmenu=n.noContextMenuHandler;o.oncontextmenu=n.noContextMenuHandler;c.hidden=!1;d.hidden=!0;Promise.all(i).then((e=>{l.value=e.join("\n")}))},progress(e){var t,i;if(this.downloadComplete)return;const n=Math.round(100*e);if(n<=this.loadingBar.percent)return;this.loadingBar.percent=n;if((null!==(t=null===(i=this.pdfDocument)||void 0===i?void 0:i.loadingParams.disableAutoFetch)&&void 0!==t?t:s.AppOptions.get("disableAutoFetch"))&&!isNaN(n)){if(this.disableAutoFetchLoadingBarTimeout){clearTimeout(this.disableAutoFetchLoadingBarTimeout);this.disableAutoFetchLoadingBarTimeout=null}this.loadingBar.show();this.disableAutoFetchLoadingBarTimeout=setTimeout((()=>{this.loadingBar.hide();this.disableAutoFetchLoadingBarTimeout=null}),5e3)}},load(e){this.pdfDocument=e;e.getDownloadInfo().then((e=>{let{length:t}=e;this._contentLength=t;this.downloadComplete=!0;this.loadingBar.hide();l.then((()=>{var e;null===(e=this.eventBus)||void 0===e||e.dispatch("documentloaded",{source:this})}))}));const t=e.getPageLayout().catch((function(){})),i=e.getPageMode().catch((function(){})),r=e.getOpenAction().catch((function(){}));this.toolbar.setPagesCount(e.numPages,!1);this.secondaryToolbar.setPagesCount(e.numPages);let a;a=null;this.pdfLinkService.setDocument(e,null);this.pdfDocumentProperties.setDocument(e);const o=this.pdfViewer;o.setDocument(e);const{firstPagePromise:l,onePageRendered:c,pagesPromise:d}=o;this.pdfThumbnailViewer.setDocument(e);const h=(this.store=new T.ViewHistory(e.fingerprints[0])).getMultiple({page:null,zoom:n.DEFAULT_SCALE_VALUE,scrollLeft:"0",scrollTop:"0",rotation:null,sidebarView:n.SidebarView.UNKNOWN,scrollMode:n.ScrollMode.UNKNOWN,spreadMode:n.SpreadMode.UNKNOWN}).catch((()=>Object.create(null)));l.then((a=>{this.loadingBar.setWidth(this.appConfig.viewerContainer);this._initializeAnnotationStorageCallbacks(e);Promise.all([n.animationStarted,h,t,i,r]).then((async t=>{let[i,r,a,l,c]=t;const h=s.AppOptions.get("viewOnLoad");this._initializePdfHistory({fingerprint:e.fingerprints[0],viewOnLoad:h,initialDest:null==c?void 0:c.dest});const u=this.initialBookmark,p=s.AppOptions.get("defaultZoomValue");let g=p?`zoom=${p}`:null,f=null,m=s.AppOptions.get("sidebarViewOnLoad"),v=s.AppOptions.get("scrollModeOnLoad"),_=s.AppOptions.get("spreadModeOnLoad");if(r.page&&h!==k){g=`page=${r.page}&zoom=${p||r.zoom},${r.scrollLeft},${r.scrollTop}`;f=parseInt(r.rotation,10);m===n.SidebarView.UNKNOWN&&(m=0|r.sidebarView);v===n.ScrollMode.UNKNOWN&&(v=0|r.scrollMode);_===n.SpreadMode.UNKNOWN&&(_=0|r.spreadMode)}l&&m===n.SidebarView.UNKNOWN&&(m=(0,n.apiPageModeToSidebarView)(l));if(a&&v===n.ScrollMode.UNKNOWN&&_===n.SpreadMode.UNKNOWN){_=(0,n.apiPageLayoutToViewerModes)(a).spreadMode}this.setInitialView(g,{rotation:f,sidebarView:m,scrollMode:v,spreadMode:_});this.eventBus.dispatch("documentinit",{source:this});this.isViewerEmbedded||o.focus();await Promise.race([d,new Promise((e=>{setTimeout(e,10)}))]);if((u||g)&&!o.hasEqualPageSizes){this.initialBookmark=u;o.currentScaleValue=o.currentScaleValue;this.setInitialView(g)}})).catch((()=>{this.setInitialView()})).then((function(){o.update()}))}));d.then((()=>{this._unblockDocumentLoadEvent();this._initializeAutoPrint(e,r)}),(e=>{R.onError&&R.onError(e);this.l10n.get("loading_error").then((t=>{this._documentError(t,{message:null==e?void 0:e.message})}))}));c.then((t=>{this.externalServices.reportTelemetry({type:"pageInfo",timestamp:t.timestamp});e.getOutline().then((t=>{e===this.pdfDocument&&this.pdfOutlineViewer.render({outline:t,pdfDocument:e})}));e.getAttachments().then((t=>{e===this.pdfDocument&&this.pdfAttachmentViewer.render({attachments:t})}));o.optionalContentConfigPromise.then((t=>{e===this.pdfDocument&&this.pdfLayerViewer.render({optionalContentConfig:t,pdfDocument:e})}));if("requestIdleCallback"in window){const t=window.requestIdleCallback((()=>{this._collectTelemetry(e);this._idleCallbacks.delete(t)}),{timeout:1e3});this._idleCallbacks.add(t)}}));this._initializePageLabels(e);this._initializeMetadata(e)},async _scriptingDocProperties(e){var t,i;if(!this.documentInfo){await new Promise((e=>{this.eventBus._on("metadataloaded",e,{once:!0})}));if(e!==this.pdfDocument)return null}if(!this._contentLength){await new Promise((e=>{this.eventBus._on("documentloaded",e,{once:!0})}));if(e!==this.pdfDocument)return null}return{...this.documentInfo,baseURL:this.baseUrl,filesize:this._contentLength,filename:this._docFilename,metadata:null===(t=this.metadata)||void 0===t?void 0:t.getRaw(),authors:null===(i=this.metadata)||void 0===i?void 0:i.get("dc:creator"),numPages:this.pagesCount,URL:this.url}},async _collectTelemetry(e){const t=await this.pdfDocument.getMarkInfo();if(e!==this.pdfDocument)return;const i=(null==t?void 0:t.Marked)||!1;this.externalServices.reportTelemetry({type:"tagged",tagged:i})},async _initializeAutoPrint(e,t){const[i,s]=await Promise.all([t,this.pdfViewer.enableScripting?null:e.getJavaScript()]);if(e!==this.pdfDocument)return;let a=!1;"Print"===(null==i?void 0:i.action)&&(a=!0);if(s){s.some((e=>{if(!e)return!1;Window.ngxConsole.warn("Warning: JavaScript support is not enabled");this.fallback(r.UNSUPPORTED_FEATURES.javaScript);return!0}));if(!a)for(const e of s)if(e&&n.AutoPrintRegExp.test(e)){a=!0;break}}a&&this.triggerPrinting()},async _initializeMetadata(e){var t,i,n;const{info:s,metadata:a,contentDispositionFilename:o,contentLength:l}=await e.getMetadata();if(e!==this.pdfDocument)return;this.documentInfo=s;this.metadata=a;null!==(t=this._contentDispositionFilename)&&void 0!==t||(this._contentDispositionFilename=o);null!==(i=this._contentLength)&&void 0!==i||(this._contentLength=l);const c=window.PDFViewerApplicationOptions;if(!c||c.get("verbosity")>0){Window.ngxConsole.log("PDF viewer: ngx-extended-pdf-viewer running on pdf.js "+(window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"].version:" developer version (?)"));Window.ngxConsole.log(`PDF ${e.fingerprints[0]} [${s.PDFFormatVersion} ${(s.Producer||"-").trim()} / ${(s.Creator||"-").trim()}] (PDF.js: ${r.version||"-"}`+(this.pdfViewer.enableWebGL?" [WebGL]":"")+") modified by ngx-extended-pdf-viewer)")}let d=null==s?void 0:s.Title;const h=null==a?void 0:a.get("dc:title");h&&("Untitled"===h||/[\uFFF0-\uFFFF]/g.test(h)||(d=h));d?this.setTitle(`${d} - ${this._contentDispositionFilename||this._title}`):this._contentDispositionFilename&&this.setTitle(this._contentDispositionFilename);if(!s.IsXFAPresent||s.IsAcroFormPresent||e.isPureXfa){if((s.IsAcroFormPresent||s.IsXFAPresent)&&!this.pdfViewer.renderForms){Window.ngxConsole.warn("Warning: Interactive form support is not enabled");this.fallback(r.UNSUPPORTED_FEATURES.forms)}}else{e.loadingParams.enableXfa?Window.ngxConsole.warn("Warning: XFA Foreground documents are not supported"):Window.ngxConsole.warn("Warning: XFA support is not enabled");this.fallback(r.UNSUPPORTED_FEATURES.forms)}if(s.IsSignaturesPresent){Window.ngxConsole.warn("Warning: Digital signatures validation is not supported");this.fallback(r.UNSUPPORTED_FEATURES.signatures)}let u="other";D.includes(s.PDFFormatVersion)&&(u=`v${s.PDFFormatVersion.replace(".","_")}`);let p="other";if(s.Producer){const e=s.Producer.toLowerCase();L.some((function(t){if(!e.includes(t))return!1;p=t.replace(/[ .-]/g,"_");return!0}))}let g=null;s.IsXFAPresent?g="xfa":s.IsAcroFormPresent&&(g="acroform");this.externalServices.reportTelemetry({type:"documentInfo",version:u,generator:p,formType:g});null===(n=this.eventBus)||void 0===n||n.dispatch("metadataloaded",{source:this})},async _initializePageLabels(e){const t=await e.getPageLabels();if(e!==this.pdfDocument)return;if(!t||s.AppOptions.get("disablePageLabels"))return;const i=t.length;let n=0,r=0;for(let e=0;e<i;e++){const i=t[e];if(i===(e+1).toString())n++;else{if(""!==i)break;r++}}if(n>=i||r>=i)return;const{pdfViewer:a,pdfThumbnailViewer:o,toolbar:l}=this;a.setPageLabels(t);o.setPageLabels(t);l.setPagesCount(i,!0);l.setPageNumber(a.currentPageNumber,a.currentPageLabel)},_initializePdfHistory(e){let{fingerprint:t,viewOnLoad:i,initialDest:n=null}=e;if(this.pdfHistory){this.pdfHistory.initialize({fingerprint:t,resetHistory:i===k,updateUrl:s.AppOptions.get("historyUpdateUrl")});if(this.pdfHistory.initialBookmark){this.initialBookmark=this.pdfHistory.initialBookmark;this.initialRotation=this.pdfHistory.initialRotation}if(n&&!this.initialBookmark&&i===M){this.initialBookmark=JSON.stringify(n);this.pdfHistory.push({explicitDest:n,pageNumber:null})}}},_initializeAnnotationStorageCallbacks(e){if(e!==this.pdfDocument)return;const{annotationStorage:t}=e;t.onSetModified=()=>{window.addEventListener("beforeunload",beforeUnload);this._annotationStorageModified=!0};t.onResetModified=()=>{window.removeEventListener("beforeunload",beforeUnload);delete this._annotationStorageModified};t.onAnnotationEditor=e=>{this._hasAnnotationEditors=!!e;this.setTitle();e&&this.externalServices.reportTelemetry({type:"editing",data:{type:e}})}},setInitialView(e){let{rotation:t,sidebarView:i,scrollMode:r,spreadMode:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const setRotation=e=>{(0,n.isValidRotation)(e)&&(this.pdfViewer.pagesRotation=e)};this.isInitialViewSet=!0;this.pdfSidebar.setInitialView(i);((e,t)=>{(0,n.isValidScrollMode)(e)&&(this.pdfViewer.scrollMode=e);(0,n.isValidSpreadMode)(t)&&(this.pdfViewer.spreadMode=t)})(r,s);if(this.initialBookmark){setRotation(this.initialRotation);delete this.initialRotation;this.pdfLinkService.setHash(this.initialBookmark);this.initialBookmark=null}else if(e){setRotation(t);this.pdfLinkService.setHash(e)}this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber,this.pdfViewer.currentPageLabel);this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber);if(!this.pdfViewer.currentScaleValue){const e=PDFViewerApplicationOptions.get("defaultZoomValue");e&&(this.pdfViewer.currentScaleValue=e)}},_cleanup(){if(this.pdfDocument){this.pdfViewer.cleanup();this.pdfThumbnailViewer.cleanup();this.pdfDocument.cleanup(this.pdfViewer.renderer===n.RendererType.SVG)}},forceRendering(){this.pdfRenderingQueue.printing=!!this.printService;this.pdfRenderingQueue.isThumbnailViewEnabled=this.pdfSidebar.visibleView===n.SidebarView.THUMBS;this.pdfRenderingQueue.renderHighestPriority()},beforePrint(){this._printAnnotationStoragePromise=this.pdfScriptingManager.dispatchWillPrint().catch((()=>{})).then((()=>{var e;return null===(e=this.pdfDocument)||void 0===e?void 0:e.annotationStorage.print}));if(this.printService)return;if(!this.supportsPrinting){this.l10n.get("printing_not_supported").then((e=>{this._otherError(e)}));return}if(!this.pdfViewer.pageViewsReady){this.l10n.get("printing_not_ready").then((e=>{window.alert(e)}));return}const e=this.pdfViewer.getPagesOverview(),t=this.appConfig.printContainer,i=s.AppOptions.get("printResolution"),n=this.pdfViewer.optionalContentConfigPromise,r=B.instance.createPrintService(this.pdfDocument,e,t,i,n,this._printAnnotationStoragePromise,this.l10n,this.pdfViewer.eventBus);this.printService=r;this.forceRendering();r.layout();this.externalServices.reportTelemetry({type:"print"});this._hasAnnotationEditors&&this.externalServices.reportTelemetry({type:"editing",data:{type:"print"}})},afterPrint(){if(this._printAnnotationStoragePromise){this._printAnnotationStoragePromise.then((()=>{this.pdfScriptingManager.dispatchDidPrint()}));this._printAnnotationStoragePromise=null}if(this.printService){var e;this.printService.destroy();this.printService=null;null===(e=this.pdfDocument)||void 0===e||e.annotationStorage.resetModified()}this.forceRendering()},rotatePages(e){this.pdfViewer.pagesRotation+=e},requestPresentationMode(){var e;null===(e=this.pdfPresentationMode)||void 0===e||e.request()},triggerPrinting(){this.supportsPrinting&&window.printPDF()},bindEvents(){const{eventBus:e,_boundEvents:t}=this;t.beforePrint=this.beforePrint.bind(this);t.afterPrint=this.afterPrint.bind(this);e._on("resize",webViewerResize);e._on("hashchange",webViewerHashchange);e._on("beforeprint",t.beforePrint);e._on("afterprint",t.afterPrint);e._on("pagerendered",webViewerPageRendered);e._on("updateviewarea",webViewerUpdateViewarea);e._on("pagechanging",webViewerPageChanging);e._on("scalechanging",webViewerScaleChanging);e._on("rotationchanging",webViewerRotationChanging);e._on("sidebarviewchanged",webViewerSidebarViewChanged);e._on("pagemode",webViewerPageMode);e._on("namedaction",webViewerNamedAction);e._on("presentationmodechanged",webViewerPresentationModeChanged);e._on("presentationmode",webViewerPresentationMode);e._on("switchannotationeditormode",webViewerSwitchAnnotationEditorMode);e._on("switchannotationeditorparams",webViewerSwitchAnnotationEditorParams);e._on("print",webViewerPrint);e._on("download",webViewerDownload);e._on("firstpage",webViewerFirstPage);e._on("lastpage",webViewerLastPage);e._on("nextpage",webViewerNextPage);e._on("previouspage",webViewerPreviousPage);e._on("zoomin",webViewerZoomIn);e._on("zoomout",webViewerZoomOut);e._on("zoomreset",webViewerZoomReset);e._on("pagenumberchanged",webViewerPageNumberChanged);e._on("scalechanged",webViewerScaleChanged);e._on("rotatecw",webViewerRotateCw);e._on("rotateccw",webViewerRotateCcw);e._on("optionalcontentconfig",webViewerOptionalContentConfig);e._on("switchscrollmode",webViewerSwitchScrollMode);e._on("scrollmodechanged",webViewerScrollModeChanged);e._on("switchspreadmode",webViewerSwitchSpreadMode);e._on("spreadmodechanged",webViewerSpreadModeChanged);e._on("documentproperties",webViewerDocumentProperties);e._on("findfromurlhash",webViewerFindFromUrlHash);e._on("updatefindmatchescount",webViewerUpdateFindMatchesCount);e._on("updatefindcontrolstate",webViewerUpdateFindControlState);if(s.AppOptions.get("pdfBug")){t.reportPageStatsPDFBug=reportPageStatsPDFBug;e._on("pagerendered",t.reportPageStatsPDFBug);e._on("pagechanging",t.reportPageStatsPDFBug)}e._on("fileinputchange",webViewerFileInputChange);e._on("openfile",webViewerOpenFile)},bindWindowEvents(){const{eventBus:e,_boundEvents:t}=this;!function addWindowResolutionChange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&webViewerResolutionChange(e);const i=window.matchMedia(`(resolution: ${window.devicePixelRatio||1}dppx)`);i.addEventListener("change",addWindowResolutionChange,{once:!0});t.removeWindowResolutionChange||(t.removeWindowResolutionChange=function(){i.removeEventListener("change",addWindowResolutionChange);t.removeWindowResolutionChange=null})}();t.windowResize=()=>{e.dispatch("resize",{source:window})};t.windowHashChange=()=>{e.dispatch("hashchange",{source:window,hash:document.location.hash.substring(1)})};t.windowBeforePrint=()=>{e.dispatch("beforeprint",{source:window})};t.windowAfterPrint=()=>{e.dispatch("afterprint",{source:window})};t.windowUpdateFromSandbox=t=>{e.dispatch("updatefromsandbox",{source:window,detail:t.detail})};window.addEventListener("visibilitychange",webViewerVisibilityChange);window.addEventListener("wheel",webViewerWheel,{passive:!1});window.addEventListener("click",webViewerClick);window.addEventListener("keydown",webViewerKeyDown);window.addEventListener("resize",t.windowResize);window.addEventListener("hashchange",t.windowHashChange);window.addEventListener("beforeprint",t.windowBeforePrint);window.addEventListener("afterprint",t.windowAfterPrint);window.addEventListener("updatefromsandbox",t.windowUpdateFromSandbox)},unbindEvents(){const{eventBus:e,_boundEvents:t}=this;e._off("resize",webViewerResize);e._off("hashchange",webViewerHashchange);e._off("beforeprint",t.beforePrint);e._off("afterprint",t.afterPrint);e._off("pagerendered",webViewerPageRendered);e._off("updateviewarea",webViewerUpdateViewarea);e._off("pagechanging",webViewerPageChanging);e._off("scalechanging",webViewerScaleChanging);e._off("rotationchanging",webViewerRotationChanging);e._off("sidebarviewchanged",webViewerSidebarViewChanged);e._off("pagemode",webViewerPageMode);e._off("namedaction",webViewerNamedAction);e._off("presentationmodechanged",webViewerPresentationModeChanged);e._off("presentationmode",webViewerPresentationMode);e._off("print",webViewerPrint);e._off("download",webViewerDownload);e._off("firstpage",webViewerFirstPage);e._off("lastpage",webViewerLastPage);e._off("nextpage",webViewerNextPage);e._off("previouspage",webViewerPreviousPage);e._off("zoomin",webViewerZoomIn);e._off("zoomout",webViewerZoomOut);e._off("zoomreset",webViewerZoomReset);e._off("pagenumberchanged",webViewerPageNumberChanged);e._off("scalechanged",webViewerScaleChanged);e._off("rotatecw",webViewerRotateCw);e._off("rotateccw",webViewerRotateCcw);e._off("optionalcontentconfig",webViewerOptionalContentConfig);e._off("switchscrollmode",webViewerSwitchScrollMode);e._off("scrollmodechanged",webViewerScrollModeChanged);e._off("switchspreadmode",webViewerSwitchSpreadMode);e._off("spreadmodechanged",webViewerSpreadModeChanged);e._off("documentproperties",webViewerDocumentProperties);e._off("findfromurlhash",webViewerFindFromUrlHash);e._off("updatefindmatchescount",webViewerUpdateFindMatchesCount);e._off("updatefindcontrolstate",webViewerUpdateFindControlState);if(t.reportPageStatsPDFBug){e._off("pagerendered",t.reportPageStatsPDFBug);e._off("pagechanging",t.reportPageStatsPDFBug);t.reportPageStatsPDFBug=null}e._off("fileinputchange",webViewerFileInputChange);e._off("openfile",webViewerOpenFile);t.beforePrint=null;t.afterPrint=null},unbindWindowEvents(){var e;const{_boundEvents:t}=this;window.removeEventListener("visibilitychange",webViewerVisibilityChange);window.removeEventListener("wheel",webViewerWheel,{passive:!1});window.removeEventListener("click",webViewerClick);window.removeEventListener("keydown",webViewerKeyDown);window.removeEventListener("resize",t.windowResize);window.removeEventListener("hashchange",t.windowHashChange);window.removeEventListener("beforeprint",t.windowBeforePrint);window.removeEventListener("afterprint",t.windowAfterPrint);window.removeEventListener("updatefromsandbox",t.windowUpdateFromSandbox);null===(e=t.removeWindowResolutionChange)||void 0===e||e.call(t);t.windowResize=null;t.windowHashChange=null;t.windowBeforePrint=null;t.windowAfterPrint=null;t.windowUpdateFromSandbox=null},accumulateWheelTicks(e){(this._wheelUnusedTicks>0&&e<0||this._wheelUnusedTicks<0&&e>0)&&(this._wheelUnusedTicks=0);this._wheelUnusedTicks+=e;const t=Math.sign(this._wheelUnusedTicks)*Math.floor(Math.abs(this._wheelUnusedTicks));this._wheelUnusedTicks-=t;return t},_unblockDocumentLoadEvent(){var e,t;null===(e=(t=document).blockUnblockOnload)||void 0===e||e.call(t,!1);this._unblockDocumentLoadEvent=()=>{}},_reportDocumentStatsTelemetry(){const{stats:e}=this.pdfDocument;if(e!==this._docStats){this._docStats=e;this.externalServices.reportTelemetry({type:"documentStats",stats:e})}},get scriptingReady(){return this.pdfScriptingManager.ready}};t.PDFViewerApplication=R;let O;{const e=["null","http://mozilla.github.io","https://mozilla.github.io"];O=function(t){if(t)try{const i=new URL(window.location.href).origin||"null";if(e.includes(i))return;if(new URL(t,window.location.href).origin!==i)throw new Error("file origin does not match viewer's")}catch(e){R.onError&&R.onError(e);R.l10n.get("loading_error").then((t=>{R._documentError(t,{message:null==e?void 0:e.message})}));throw e}}}async function loadPDFBug(e){const{debuggerScriptPath:t}=e.appConfig,{PDFBug:i}=await import(t);e._PDFBug=i}function reportPageStatsPDFBug(e){var t,i;let{pageNumber:n}=e;if(null===(t=globalThis.Stats)||void 0===t||!t.enabled)return;const r=R.pdfViewer.getPageView(n-1);globalThis.Stats.add(n,null==r||null===(i=r.pdfPage)||void 0===i?void 0:i.stats)}function webViewerInitialized(){var e;const{appConfig:t,eventBus:i}=R;let r;const a=document.location.search.substring(1);r=null!==(e=(0,n.parseQueryString)(a).get("file"))&&void 0!==e?e:s.AppOptions.get("defaultUrl");O(r);const o=t.openFileInput;o.value=null;o.addEventListener("change",(function(e){const{files:t}=e.target;t&&0!==t.length&&i.dispatch("fileinputchange",{source:this,fileInput:e.target})}));t.mainContainer.addEventListener("dragover",(function(e){if(s.AppOptions.get("enableDragAndDrop")){e.preventDefault();e.dataTransfer.dropEffect="copy"===e.dataTransfer.effectAllowed?"copy":"move"}}));t.mainContainer.addEventListener("drop",(function(e){if(s.AppOptions.get("enableDragAndDrop")){e.preventDefault();const{files:t}=e.dataTransfer;if(!t||0===t.length)return;R.eventBus.dispatch("fileinputchange",{source:this,fileInput:e.dataTransfer,dropEvent:e})}}));if(!R.supportsDocumentFonts){s.AppOptions.set("disableFontFace",!0);R.l10n.get("web_fonts_disabled").then((e=>{Window.ngxConsole.warn(e)}))}if(!R.supportsPrinting){t.toolbar.print.classList.add("hidden");t.secondaryToolbar.printButton.classList.add("hidden")}if(!R.supportsFullscreen){t.toolbar.presentationModeButton.classList.add("hidden");t.secondaryToolbar.presentationModeButton.classList.add("hidden")}R.supportsIntegratedFind&&t.toolbar.viewFind.classList.add("hidden");t.mainContainer.addEventListener("transitionend",(function(e){e.target===this&&i.dispatch("resize",{source:this})}),!0);try{r?R.open(r):R._hideViewBookmark()}catch(e){R.onError&&R.onError(e);R.l10n.get("loading_error").then((t=>{R._documentError(t,e)}))}}function webViewerPageRendered(e){let{pageNumber:t,error:i}=e;t===R.page&&R.toolbar.updateLoadingIndicatorState(!1);if(R.pdfSidebar.visibleView===n.SidebarView.THUMBS){const e=R.pdfViewer.getPageView(t-1),i=R.pdfThumbnailViewer.getThumbnail(t-1);e&&i&&i.setImage(e)}i&&R.l10n.get("rendering_error").then((e=>{R._otherError(e,i)}));R._reportDocumentStatsTelemetry()}function webViewerPageMode(e){let t,{mode:i}=e;switch(i){case"thumbs":t=n.SidebarView.THUMBS;break;case"bookmarks":case"outline":t=n.SidebarView.OUTLINE;break;case"attachments":t=n.SidebarView.ATTACHMENTS;break;case"layers":t=n.SidebarView.LAYERS;break;case"none":t=n.SidebarView.NONE;break;default:Window.ngxConsole.error('Invalid "pagemode" hash parameter: '+i);return}R.pdfSidebar.switchView(t,!0)}function webViewerNamedAction(e){switch(e.action){case"GoToPage":R.appConfig.toolbar.pageNumber.select();break;case"Find":R.supportsIntegratedFind||R.findBar.toggle();break;case"Print":R.triggerPrinting();break;case"SaveAs":R.downloadOrSave()}}function webViewerPresentationModeChanged(e){R.pdfViewer.presentationModeState=e.state}function webViewerSidebarViewChanged(e){let{view:t}=e;R.pdfRenderingQueue.isThumbnailViewEnabled=t===n.SidebarView.THUMBS;if(R.isInitialViewSet){var i;null===(i=R.store)||void 0===i||i.set("sidebarView",t).catch((()=>{}))}}function webViewerUpdateViewarea(e){let{location:t}=e;if(R.isInitialViewSet){var i;const e={};void 0===t.pageNumber&&null===t.pageNumber||(e.page=t.pageNumber);t.scale&&(e.zoom=t.scale);t.left&&(e.scrollLeft=t.left);t.top&&(e.scrollTop=t.top);void 0===t.rotation&&null===t.rotation||(e.rotation=t.rotation);null===(i=R.store)||void 0===i||i.setMultiple(e).catch((()=>{}))}const r=R.pdfLinkService.getAnchorUrl(t.pdfOpenParams);R.appConfig.toolbar.viewBookmark.href=r;R.appConfig.secondaryToolbar.viewBookmarkButton.href=r;const s=R.pdfViewer.getPageView(R.page-1),a=(null==s?void 0:s.renderingState)!==n.RenderingStates.FINISHED;R.toolbar.updateLoadingIndicatorState(a)}function webViewerScrollModeChanged(e){if(R.isInitialViewSet){var t;null===(t=R.store)||void 0===t||t.set("scrollMode",e.mode).catch((()=>{}))}}function webViewerSpreadModeChanged(e){if(R.isInitialViewSet){var t;null===(t=R.store)||void 0===t||t.set("spreadMode",e.mode).catch((()=>{}))}}function webViewerResize(){const{pdfDocument:e,pdfViewer:t,pdfRenderingQueue:i}=R;if(i.printing&&window.matchMedia("print").matches)return;t.updateContainerHeightCss();if(!e)return;const n=t.currentScaleValue;"auto"!==n&&"page-fit"!==n&&"page-width"!==n||(t.currentScaleValue=n);t.update()}function webViewerHashchange(e){var t;const i=e.hash;i&&(R.isInitialViewSet?null!==(t=R.pdfHistory)&&void 0!==t&&t.popStateInProgress||R.pdfLinkService.setHash(i):R.initialBookmark=i)}var webViewerFileInputChange=function(e){var t;if(null!==(t=R.pdfViewer)&&void 0!==t&&t.isInPresentationMode)return;const i=e.fileInput.files[0];let n=URL.createObjectURL(i);i.name&&(n={url:n,originalUrl:i.name});R.open(n);window.setNgxExtendedPdfViewerSource&&window.setNgxExtendedPdfViewerSource(i.name?i.name:n)},webViewerOpenFile=function(e){R.appConfig.openFileInput.click()};function webViewerPresentationMode(){R.requestPresentationMode()}function webViewerSwitchAnnotationEditorMode(e){R.pdfViewer.annotationEditorMode=e.mode}function webViewerSwitchAnnotationEditorParams(e){R.pdfViewer.annotationEditorParams=e}function webViewerPrint(){R.triggerPrinting()}function webViewerDownload(){R.downloadOrSave()}function webViewerFirstPage(){R.pdfDocument&&(R.page=1)}function webViewerLastPage(){R.pdfDocument&&(R.page=R.pagesCount)}function webViewerNextPage(){R.pdfViewer.nextPage()}function webViewerPreviousPage(){R.pdfViewer.previousPage()}function webViewerZoomIn(){R.zoomIn()}function webViewerZoomOut(){R.zoomOut()}function webViewerZoomReset(){R.zoomReset()}function webViewerPageNumberChanged(e){const t=R.pdfViewer;""!==e.value&&R.pdfLinkService.goToPage(e.value);e.value!==t.currentPageNumber.toString()&&e.value!==t.currentPageLabel&&R.toolbar.setPageNumber(t.currentPageNumber,t.currentPageLabel)}function webViewerScaleChanged(e){R.pdfViewer.currentScaleValue=e.value}function webViewerRotateCw(){R.rotatePages(90)}function webViewerRotateCcw(){R.rotatePages(-90)}function webViewerOptionalContentConfig(e){R.pdfViewer.optionalContentConfigPromise=e.promise}function webViewerSwitchScrollMode(e){R.pdfViewer.scrollMode=e.mode}function webViewerSwitchSpreadMode(e){R.pdfViewer.spreadMode=e.mode}function webViewerDocumentProperties(){R.pdfDocumentProperties.open()}function webViewerFindFromUrlHash(e){R.eventBus.dispatch("find",{source:e.source,type:"",query:e.query,phraseSearch:e.phraseSearch,caseSensitive:!1,entireWord:!1,ignoreAccents:!1,fuzzySearch:!1,highlightAll:!0,findPrevious:!1,matchDiacritics:!0})}function webViewerUpdateFindMatchesCount(e){let{matchesCount:t}=e;R.supportsIntegratedFind?R.externalServices.updateFindMatchesCount(t):R.findBar.updateResultsCount(t)}function webViewerUpdateFindControlState(e){let{state:t,previous:i,matchesCount:n,rawQuery:r}=e;R.supportsIntegratedFind?R.externalServices.updateFindControlState({result:t,findPrevious:i,matchesCount:n,rawQuery:r}):R.findBar.updateUIState(t,i,n)}function webViewerScaleChanging(e){R.toolbar.setPageScale(e.presetValue,e.scale);R.pdfViewer.update()}function webViewerRotationChanging(e){R.pdfThumbnailViewer.pagesRotation=e.pagesRotation;R.forceRendering();R.pdfViewer.currentPageNumber=e.pageNumber}function webViewerPageChanging(e){let{pageNumber:t,pageLabel:i}=e;R.toolbar.setPageNumber(t,i);R.secondaryToolbar.setPageNumber(t);R.pdfSidebar.visibleView===n.SidebarView.THUMBS&&R.pdfThumbnailViewer.scrollThumbnailIntoView(t);const r=document.getElementById("pageNumber");if(r){const e=new CustomEvent("page-change");r.dispatchEvent(e)}}function webViewerResolutionChange(e){R.pdfViewer.refresh()}function webViewerVisibilityChange(e){"visible"===document.visibilityState&&setZoomDisabledTimeout()}let N=null;function setZoomDisabledTimeout(){N&&clearTimeout(N);N=setTimeout((function(){N=null}),1e3)}function webViewerWheel(e){const t=document.getElementById("viewerContainer");if(t.parentNode.querySelector(":hover")!==t)return;const{pdfViewer:i,supportedMouseWheelZoomModifierKeys:r}=R;if(i.isInPresentationMode)return;const a=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0);if(window.isKeyIgnored&&window.isKeyIgnored(a,"WHEEL"))return;const o=s.AppOptions.get("wheelAction");if(e.ctrlKey&&r.ctrlKey||e.metaKey&&r.metaKey?"zoom"!==o:"zoom"===o){e.preventDefault();if(N||"hidden"===document.visibilityState)return;const t=e.deltaMode,r=(0,n.normalizeWheelEventDirection)(e),s=i.currentScale;let a=0;if(t===WheelEvent.DOM_DELTA_LINE||t===WheelEvent.DOM_DELTA_PAGE)a=Math.abs(r)>=1?Math.sign(r):R.accumulateWheelTicks(r);else{const e=30;a=R.accumulateWheelTicks(r/e)}a<0?R.zoomOut(-a):a>0&&R.zoomIn(a);const o=i.currentScale;if(s!==o){const t=o/s-1,n=i.container.getBoundingClientRect(),r=e.clientX-n.left,a=e.clientY-n.top;i.container.scrollLeft+=r*t;i.container.scrollTop+=a*t}}else setZoomDisabledTimeout()}function webViewerClick(e){if(!R.secondaryToolbar.isOpen)return;const t=R.appConfig;if(R.pdfViewer.containsElement(e.target)||t.toolbar.container.contains(e.target)&&e.target!==t.secondaryToolbar.toggleButton){if(e.target&&e.target.parentElement===t.secondaryToolbar.toggleButton)return;if(e.target&&e.target.parentElement&&e.target.parentElement.parentElement===t.secondaryToolbar.toggleButton)return;R.secondaryToolbar.close()}}function webViewerKeyDown(e){if(R.overlayManager.active)return;const{eventBus:t,pdfViewer:i}=R,r=i.isInPresentationMode;let s=!1,a=!1;const l=(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0);if(window.isKeyIgnored&&window.isKeyIgnored(l,e.keyCode))return;if(1===l||8===l||5===l||12===l)switch(e.keyCode){case 70:if(!R.supportsIntegratedFind&&!e.shiftKey){R.findBar.open();s=!0}break;case 71:if(!R.supportsIntegratedFind){const{state:e}=R.findController;if(e){const i=Object.assign(Object.create(null),e,{source:window,type:"again",findPrevious:5===l||12===l});t.dispatch("find",i)}s=!0}break;case 61:case 107:case 187:case 171:r||R.zoomIn();s=!0;break;case 173:case 109:case 189:r||R.zoomOut();s=!0;break;case 48:case 96:if(!r){setTimeout((function(){R.zoomReset()}));s=!1}break;case 38:if(r||R.page>1){R.page=1;s=!0;a=!0}break;case 40:if(r||R.page<R.pagesCount){R.page=R.pagesCount;s=!0;a=!0}}if(1===l||8===l)switch(e.keyCode){case 83:t.dispatch("download",{source:window});s=!0;break;case 79:t.dispatch("openfile",{source:window});s=!0}if(3===l||10===l)switch(e.keyCode){case 80:R.requestPresentationMode();s=!0;break;case 71:R.appConfig.toolbar.pageNumber.select();s=!0}if(s){a&&!r&&i.focus();e.preventDefault();return}const c=(0,n.getActiveOrFocusedElement)(),d=null==c?void 0:c.tagName.toUpperCase();if(!("INPUT"===d||"TEXTAREA"===d||"SELECT"===d||null!=c&&c.isContentEditable)||27===e.keyCode){if(0===l){let t=0,n=!1;switch(e.keyCode){case 38:case 33:i.isVerticalScrollbarEnabled&&(n=!0);t=-1;break;case 8:r||(n=!0);t=-1;break;case 37:i.isHorizontalScrollbarEnabled&&(n=!0);case 75:case 80:t=-1;break;case 27:if(R.secondaryToolbar.isOpen){R.secondaryToolbar.close();s=!0}if(!R.supportsIntegratedFind&&R.findBar.opened){R.findBar.close();s=!0}break;case 40:case 34:i.isVerticalScrollbarEnabled&&(n=!0);t=1;break;case 13:case 32:r||(n=!0);t=1;break;case 39:i.isHorizontalScrollbarEnabled&&(n=!0);case 74:case 78:t=1;break;case 36:if(r||R.page>1){R.page=1;s=!0;a=!0}break;case 35:if(r||R.page<R.pagesCount){R.page=R.pagesCount;s=!0;a=!0}break;case 83:R.pdfCursorTools.switchTool(o.CursorTool.SELECT);break;case 72:R.pdfCursorTools.switchTool(o.CursorTool.HAND);break;case 82:R.rotatePages(90);break;case 115:R.pdfSidebar.toggle()}if(0!==t&&(!n||"page-fit"===i.currentScaleValue)){t>0?i.nextPage():i.previousPage();s=!0}}if(4===l)switch(e.keyCode){case 13:case 32:if(!r&&"page-fit"!==i.currentScaleValue)break;i.previousPage();s=!0;break;case 82:R.rotatePages(-90)}a&&!i.containsElement(c)&&i.focus();s&&e.preventDefault()}}function beforeUnload(e){e.preventDefault();e.returnValue="";return!1}const B={instance:{supportsPrinting:!1,createPrintService(){throw new Error("Not implemented: createPrintService")}}};t.PDFPrintServiceFactory=B},e=>{"use strict";e.exports=window["pdfjs-dist/build/pdf"]},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WaitOnType=t.EventBus=t.AutomationEventBus=void 0;t.waitOnEventOrTimeout=function waitOnEventOrTimeout(e){let{target:t,name:n,delay:r=0}=e;return new Promise((function(e,s){if("object"!=typeof t||!n||"string"!=typeof n||!(Number.isInteger(r)&&r>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function handler(i){t instanceof EventBus?t._off(n,a):t.removeEventListener(n,a);l&&clearTimeout(l);e(i)}const a=handler.bind(null,i.EVENT);t instanceof EventBus?t._on(n,a):t.addEventListener(n,a);const o=handler.bind(null,i.TIMEOUT),l=setTimeout(o,r)}))};const i={EVENT:"event",TIMEOUT:"timeout"};t.WaitOnType=i;class EventBus{constructor(){this._listeners=Object.create(null)}on(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._on(e,t,{external:!0,once:null==i?void 0:i.once})}off(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._off(e,t,{external:!0,once:null==i?void 0:i.once})}dispatch(e,t){const i=this._listeners[e];if(!i||0===i.length)return;let n;for(const{listener:r,external:s,once:a}of i.slice(0)){a&&this._off(e,r);s?(n||(n=[])).push(r):r(t)}if(n){for(const e of n)e(t);n=null}}_on(e,t){var i;let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;((i=this._listeners)[e]||(i[e]=[])).push({listener:t,external:!0===(null==n?void 0:n.external),once:!0===(null==n?void 0:n.once)})}_off(e,t){const i=this._listeners[e];if(i)for(let e=0,n=i.length;e<n;e++)if(i[e].listener===t){i.splice(e,1);return}}}t.EventBus=EventBus;t.AutomationEventBus=class AutomationEventBus extends EventBus{dispatch(e,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFCursorTools=t.CursorTool=void 0;var n=i(8),r=i(1);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const s={SELECT:0,HAND:1,ZOOM:2};t.CursorTool=s;var a=new WeakSet,o=new WeakSet;t.PDFCursorTools=class PDFCursorTools{constructor(e){let{container:t,eventBus:i,cursorToolOnLoad:r=s.SELECT}=e;_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);this.container=t;this.eventBus=i;this.active=s.SELECT;this.activeBeforePresentationMode=null;this.handTool=new n.GrabToPan({element:this.container});_classPrivateMethodGet(this,o,_addEventListeners2).call(this);Promise.resolve().then((()=>{this.switchTool(r)}))}get activeTool(){return this.active}switchTool(e){if(null!==this.activeBeforePresentationMode)return;if(e===this.active)return;const disableActiveTool=()=>{switch(this.active){case s.SELECT:break;case s.HAND:this.handTool.deactivate();case s.ZOOM:}};switch(e){case s.SELECT:disableActiveTool();break;case s.HAND:disableActiveTool();this.handTool.activate();break;case s.ZOOM:default:Window.ngxConsole.error(`switchTool: "${e}" is an unsupported value.`);return}this.active=e;_classPrivateMethodGet(this,a,_dispatchEvent2).call(this)}};function _dispatchEvent2(){this.eventBus.dispatch("cursortoolchanged",{source:this,tool:this.active})}function _addEventListeners2(){this.eventBus._on("switchcursortool",(e=>{this.switchTool(e.tool)}));this.eventBus._on("presentationmodechanged",(e=>{switch(e.state){case r.PresentationModeState.FULLSCREEN:{const e=this.active;this.switchTool(s.SELECT);this.activeBeforePresentationMode=e;break}case r.PresentationModeState.NORMAL:{const e=this.activeBeforePresentationMode;this.activeBeforePresentationMode=null;this.switchTool(e);break}}}))}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GrabToPan=void 0;function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const i="grab-to-pan-grab";var n=new WeakSet,r=new WeakSet,s=new WeakSet;t.GrabToPan=class GrabToPan{constructor(e){_classPrivateMethodInitSpec(this,s);_classPrivateMethodInitSpec(this,r);_classPrivateMethodInitSpec(this,n);this.element=e.element;this.document=e.element.ownerDocument;"function"==typeof e.ignoreTarget&&(this.ignoreTarget=e.ignoreTarget);this.onActiveChanged=e.onActiveChanged;this.activate=this.activate.bind(this);this.deactivate=this.deactivate.bind(this);this.toggle=this.toggle.bind(this);this._onMouseDown=_classPrivateMethodGet(this,n,_onMouseDown2).bind(this);this._onMouseMove=_classPrivateMethodGet(this,r,_onMouseMove2).bind(this);this._endPan=_classPrivateMethodGet(this,s,_endPan2).bind(this);(this.overlay=document.createElement("div")).className="grab-to-pan-grabbing"}activate(){if(!this.active){var e;this.active=!0;this.element.addEventListener("mousedown",this._onMouseDown);this.element.classList.add(i);null===(e=this.onActiveChanged)||void 0===e||e.call(this,!0)}}deactivate(){if(this.active){var e;this.active=!1;this.element.removeEventListener("mousedown",this._onMouseDown);this._endPan();this.element.classList.remove(i);null===(e=this.onActiveChanged)||void 0===e||e.call(this,!1)}}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(e){return!!document.querySelector(".stf__item")||e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}};function _onMouseDown2(e){if(0!==e.button||this.ignoreTarget(e.target))return;if(e.originalTarget)try{e.originalTarget.tagName}catch(e){return}this.scrollLeftStart=this.element.scrollLeft;this.scrollTopStart=this.element.scrollTop;this.clientXStart=e.clientX;this.clientYStart=e.clientY;if(isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-x"))return;if(isOverPerfectScrollbar(this.clientXStart,this.clientYStart,"ps__rail-y"))return;this.document.addEventListener("mousemove",this._onMouseMove,!0);this.document.addEventListener("mouseup",this._endPan,!0);this.element.addEventListener("scroll",this._endPan,!0);e.preventDefault();e.stopPropagation();const t=document.activeElement;t&&!t.contains(e.target)&&t.blur()}function _onMouseMove2(e){this.element.removeEventListener("scroll",this._endPan,!0);if(!(1&e.buttons)){this._endPan();return}const t=e.clientX-this.clientXStart,i=e.clientY-this.clientYStart,n=this.scrollTopStart-i,r=this.scrollLeftStart-t;if(this.element.scrollTo)this.element.scrollTo({top:n,left:r,behavior:"instant"});else{this.element.scrollTop=n;this.element.scrollLeft=r}this.overlay.parentNode||document.body.append(this.overlay)}function _endPan2(){this.element.removeEventListener("scroll",this._endPan,!0);this.document.removeEventListener("mousemove",this._onMouseMove,!0);this.document.removeEventListener("mouseup",this._endPan,!0);this.overlay.remove()}function isOverPerfectScrollbar(e,t,i){const n=document.getElementsByClassName(i);if(n&&1===n.length){var{top:r,right:s,bottom:a,left:o}=n[0].getBoundingClientRect();if(t>=r&&t<=a&&e<=s&&e>=o)return!0}return!1}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationEditorParams=void 0;var n=i(5);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}var r=new WeakSet;t.AnnotationEditorParams=class AnnotationEditorParams{constructor(e,t){_classPrivateMethodInitSpec(this,r);this.eventBus=t;(function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i})(this,r,_bindListeners2).call(this,e)}};function _bindListeners2(e){let{editorFreeTextFontSize:t,editorFreeTextColor:i,editorInkColor:r,editorInkThickness:s,editorInkOpacity:a}=e;t.addEventListener("input",(e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,value:t.valueAsNumber})}));i.addEventListener("input",(e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,value:i.value})}));r.addEventListener("input",(e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType.INK_COLOR,value:r.value})}));s.addEventListener("input",(e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType.INK_THICKNESS,value:s.valueAsNumber})}));a.addEventListener("input",(e=>{this.eventBus.dispatch("switchannotationeditorparams",{source:this,type:n.AnnotationEditorParamsType.INK_OPACITY,value:a.valueAsNumber})}));this.eventBus._on("annotationeditorparamschanged",(e=>{for(const[o,l]of e.details)switch(o){case n.AnnotationEditorParamsType.FREETEXT_SIZE:t.value=l;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:i.value=l;break;case n.AnnotationEditorParamsType.INK_COLOR:r.value=l;break;case n.AnnotationEditorParamsType.INK_THICKNESS:s.value=l;break;case n.AnnotationEditorParamsType.INK_OPACITY:a.value=l}}))}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.OverlayManager=void 0;function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var n=new WeakMap,r=new WeakMap;t.OverlayManager=class OverlayManager{constructor(){_classPrivateFieldInitSpec(this,n,{writable:!0,value:new WeakMap});_classPrivateFieldInitSpec(this,r,{writable:!0,value:null})}get active(){return _classPrivateFieldGet(this,r)}async register(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!=typeof e)throw new Error("Not enough parameters.");if(_classPrivateFieldGet(this,n).has(e))throw new Error("The overlay is already registered.");_classPrivateFieldGet(this,n).set(e,{canForceClose:t});if(!e.showModal){i(11).registerDialog(e);if(!this._dialogPolyfillCSS){this._dialogPolyfillCSS=!0;const e=document.createElement("style");e.textContent="dialog {\n  position: absolute;\n  left: 0; right: 0;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  width: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  height: fit-content;\n  margin: auto;\n  border: solid;\n  padding: 1em;\n  background: white;\n  color: black;\n  display: block;\n}\n\ndialog:not([open]) {\n  display: none;\n}\n\ndialog + .backdrop {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n  background: rgba(0,0,0,0.1);\n}\n\n._dialog_overlay {\n  position: fixed;\n  top: 0; right: 0; bottom: 0; left: 0;\n}\n\ndialog.fixed {\n  position: fixed;\n  top: 50%;\n  transform: translate(0, -50%);\n}";document.head.prepend(e)}}e.addEventListener("cancel",(e=>{_classPrivateFieldSet(this,r,null)}))}async unregister(e){if(!_classPrivateFieldGet(this,n).has(e))throw new Error("The overlay does not exist.");if(_classPrivateFieldGet(this,r)===e)throw new Error("The overlay cannot be removed while it is active.");_classPrivateFieldGet(this,n).delete(e)}async open(e){if(!_classPrivateFieldGet(this,n).has(e))throw new Error("The overlay does not exist.");if(_classPrivateFieldGet(this,r)){if(_classPrivateFieldGet(this,r)===e)throw new Error("The overlay is already active.");if(!_classPrivateFieldGet(this,n).get(e).canForceClose)throw new Error("Another overlay is currently active.");await this.close()}_classPrivateFieldSet(this,r,e);e.showModal();e.classList.remove("hidden")}async close(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_classPrivateFieldGet(this,r);if(!_classPrivateFieldGet(this,n).has(e))throw new Error("The overlay does not exist.");if(!_classPrivateFieldGet(this,r))throw new Error("The overlay is currently not active.");if(_classPrivateFieldGet(this,r)!==e)throw new Error("Another overlay is currently active.");e.close();_classPrivateFieldSet(this,r,null)}}},e=>{"use strict";e.exports=function(){var e=window.CustomEvent;e&&"object"!=typeof e||((e=function CustomEvent(e,t){t=t||{};var i=document.createEvent("CustomEvent");i.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null);return i}).prototype=window.Event.prototype);function safeDispatchEvent(e,t){var i="on"+t.type.toLowerCase();"function"==typeof e[i]&&e[i](t);return e.dispatchEvent(t)}function createsStackingContext(e){for(;e&&e!==document.body;){var t=window.getComputedStyle(e),invalid=function(e,i){return!(void 0===t[e]||t[e]===i)};if(t.opacity<1||invalid("zIndex","auto")||invalid("transform","none")||invalid("mixBlendMode","normal")||invalid("filter","none")||invalid("perspective","none")||"isolate"===t.isolation||"fixed"===t.position||"touch"===t.webkitOverflowScrolling)return!0;e=e.parentElement}return!1}function findNearestDialog(e){for(;e;){if("dialog"===e.localName)return e;e=e.parentElement?e.parentElement:e.parentNode?e.parentNode.host:null}return null}function safeBlur(e){for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;e&&e.blur&&e!==document.body&&e.blur()}function inNodeList(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return!0;return!1}function isFormMethodDialog(e){return!(!e||!e.hasAttribute("method"))&&"dialog"===e.getAttribute("method").toLowerCase()}function findFocusableElementWithin(e){var t=["button","input","keygen","select","textarea"].map((function(e){return e+":not([disabled])"}));t.push('[tabindex]:not([disabled]):not([tabindex=""])');var i=e.querySelector(t.join(", "));if(!i&&"attachShadow"in Element.prototype)for(var n=e.querySelectorAll("*"),r=0;r<n.length&&!(n[r].tagName&&n[r].shadowRoot&&(i=findFocusableElementWithin(n[r].shadowRoot)));r++);return i}function isConnected(e){return e.isConnected||document.body.contains(e)}function findFormSubmitter(e){if(e.submitter)return e.submitter;var i=e.target;if(!(i instanceof HTMLFormElement))return null;var n=t.formSubmitter;if(!n){var r=e.target;n=("getRootNode"in r&&r.getRootNode()||document).activeElement}return n&&n.form===i?n:null}function maybeHandleSubmit(e){if(!e.defaultPrevented){var i=e.target,n=t.imagemapUseValue,r=findFormSubmitter(e);null===n&&r&&(n=r.value);var s=findNearestDialog(i);if(s&&"dialog"===(r&&r.getAttribute("formmethod")||i.getAttribute("method"))){e.preventDefault();null!=n?s.close(n):s.close()}}}function dialogPolyfillInfo(e){this.dialog_=e;this.replacedStyleTop_=!1;this.openAsModal_=!1;e.hasAttribute("role")||e.setAttribute("role","dialog");e.show=this.show.bind(this);e.showModal=this.showModal.bind(this);e.close=this.close.bind(this);e.addEventListener("submit",maybeHandleSubmit,!1);"returnValue"in e||(e.returnValue="");if("MutationObserver"in window)new MutationObserver(this.maybeHideModal.bind(this)).observe(e,{attributes:!0,attributeFilter:["open"]});else{var t,i=!1,n=function(){i?this.downgradeModal():this.maybeHideModal();i=!1}.bind(this),delayModel=function(r){if(r.target===e){var s="DOMNodeRemoved";i|=r.type.substr(0,s.length)===s;window.clearTimeout(t);t=window.setTimeout(n,0)}};["DOMAttrModified","DOMNodeRemoved","DOMNodeRemovedFromDocument"].forEach((function(t){e.addEventListener(t,delayModel)}))}Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")});this.backdrop_=document.createElement("div");this.backdrop_.className="backdrop";this.backdrop_.addEventListener("mouseup",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("mousedown",this.backdropMouseEvent_.bind(this));this.backdrop_.addEventListener("click",this.backdropMouseEvent_.bind(this))}dialogPolyfillInfo.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){this.dialog_.hasAttribute("open")&&isConnected(this.dialog_)||this.downgradeModal()},downgradeModal:function(){if(this.openAsModal_){this.openAsModal_=!1;this.dialog_.style.zIndex="";if(this.replacedStyleTop_){this.dialog_.style.top="";this.replacedStyleTop_=!1}this.backdrop_.parentNode&&this.backdrop_.parentNode.removeChild(this.backdrop_);t.dm.removeDialog(this)}},setOpen:function(e){if(e)this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open","");else{this.dialog_.removeAttribute("open");this.maybeHideModal()}},backdropMouseEvent_:function(e){if(this.dialog_.hasAttribute("tabindex"))this.dialog_.focus();else{var t=document.createElement("div");this.dialog_.insertBefore(t,this.dialog_.firstChild);t.tabIndex=-1;t.focus();this.dialog_.removeChild(t)}var i=document.createEvent("MouseEvents");i.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget);this.dialog_.dispatchEvent(i);e.stopPropagation()},focus_:function(){var e=this.dialog_.querySelector("[autofocus]:not([disabled])");!e&&this.dialog_.tabIndex>=0&&(e=this.dialog_);e||(e=findFocusableElementWithin(this.dialog_));safeBlur(document.activeElement);e&&e.focus()},updateZIndex:function(e,t){if(e<t)throw new Error("dialogZ should never be < backdropZ");this.dialog_.style.zIndex=e;this.backdrop_.style.zIndex=t},show:function(){if(!this.dialog_.open){this.setOpen(!0);this.focus_()}},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!isConnected(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!t.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");createsStackingContext(this.dialog_.parentElement)&&console.warn("A dialog is being shown inside a stacking context. This may cause it to be unusable. For more information, see this link: https://github.com/GoogleChrome/dialog-polyfill/#stacking-context");this.setOpen(!0);this.openAsModal_=!0;if(t.needsCentering(this.dialog_)){t.reposition(this.dialog_);this.replacedStyleTop_=!0}else this.replacedStyleTop_=!1;this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling);this.focus_()},close:function(t){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1);void 0!==t&&(this.dialog_.returnValue=t);var i=new e("close",{bubbles:!1,cancelable:!1});safeDispatchEvent(this.dialog_,i)}};var t={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,i=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,i)+"px"},isInlinePositionSetByStylesheet:function(e){for(var t=0;t<document.styleSheets.length;++t){var i=document.styleSheets[t],n=null;try{n=i.cssRules}catch(e){}if(n)for(var r=0;r<n.length;++r){var s=n[r],a=null;try{a=document.querySelectorAll(s.selectorText)}catch(e){}if(a&&inNodeList(a,e)){var o=s.style.getPropertyValue("top"),l=s.style.getPropertyValue("bottom");if(o&&"auto"!==o||l&&"auto"!==l)return!0}}}return!1},needsCentering:function(e){return!("absolute"!==window.getComputedStyle(e).position||"auto"!==e.style.top&&""!==e.style.top||"auto"!==e.style.bottom&&""!==e.style.bottom||t.isInlinePositionSetByStylesheet(e))},forceRegisterDialog:function(e){(window.HTMLDialogElement||e.showModal)&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e);if("dialog"!==e.localName)throw new Error("Failed to register dialog: The element is not a dialog.");new dialogPolyfillInfo(e)},registerDialog:function(e){e.showModal||t.forceRegisterDialog(e)},DialogManager:function(){this.pendingDialogStack=[];var e=this.checkDOM_.bind(this);this.overlay=document.createElement("div");this.overlay.className="_dialog_overlay";this.overlay.addEventListener("click",function(t){this.forwardTab_=void 0;t.stopPropagation();e([])}.bind(this));this.handleKey_=this.handleKey_.bind(this);this.handleFocus_=this.handleFocus_.bind(this);this.zIndexLow_=1e5;this.zIndexHigh_=100150;this.forwardTab_=void 0;"MutationObserver"in window&&(this.mo_=new MutationObserver((function(t){var i=[];t.forEach((function(e){for(var t,n=0;t=e.removedNodes[n];++n)if(t instanceof Element){"dialog"===t.localName&&i.push(t);i=i.concat(t.querySelectorAll("dialog"))}}));i.length&&e(i)})))}};t.DialogManager.prototype.blockDocument=function(){document.documentElement.addEventListener("focus",this.handleFocus_,!0);document.addEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.observe(document,{childList:!0,subtree:!0})};t.DialogManager.prototype.unblockDocument=function(){document.documentElement.removeEventListener("focus",this.handleFocus_,!0);document.removeEventListener("keydown",this.handleKey_);this.mo_&&this.mo_.disconnect()};t.DialogManager.prototype.updateStacking=function(){for(var e,t=this.zIndexHigh_,i=0;e=this.pendingDialogStack[i];++i){e.updateZIndex(--t,--t);0===i&&(this.overlay.style.zIndex=--t)}var n=this.pendingDialogStack[0];n?(n.dialog.parentNode||document.body).appendChild(this.overlay):this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay)};t.DialogManager.prototype.containedByTopDialog_=function(e){for(;e=findNearestDialog(e);){for(var t,i=0;t=this.pendingDialogStack[i];++i)if(t.dialog===e)return 0===i;e=e.parentElement}return!1};t.DialogManager.prototype.handleFocus_=function(e){var t=e.composedPath?e.composedPath()[0]:e.target;if(!this.containedByTopDialog_(t)&&document.activeElement!==document.documentElement){e.preventDefault();e.stopPropagation();safeBlur(t);if(void 0!==this.forwardTab_){var i=this.pendingDialogStack[0];i.dialog.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_PRECEDING&&(this.forwardTab_?i.focus_():t!==document.documentElement&&document.documentElement.focus());return!1}}};t.DialogManager.prototype.handleKey_=function(t){this.forwardTab_=void 0;if(27===t.keyCode){t.preventDefault();t.stopPropagation();var i=new e("cancel",{bubbles:!1,cancelable:!0}),n=this.pendingDialogStack[0];n&&safeDispatchEvent(n.dialog,i)&&n.dialog.close()}else 9===t.keyCode&&(this.forwardTab_=!t.shiftKey)};t.DialogManager.prototype.checkDOM_=function(e){this.pendingDialogStack.slice().forEach((function(t){-1!==e.indexOf(t.dialog)?t.downgradeModal():t.maybeHideModal()}))};t.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;if(this.pendingDialogStack.length>=t)return!1;1===this.pendingDialogStack.unshift(e)&&this.blockDocument();this.updateStacking();return!0};t.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);if(-1!==t){this.pendingDialogStack.splice(t,1);0===this.pendingDialogStack.length&&this.unblockDocument();this.updateStacking()}};t.dm=new t.DialogManager;t.formSubmitter=null;t.imagemapUseValue=null;if(void 0===window.HTMLDialogElement){var i=document.createElement("form");i.setAttribute("method","dialog");if("dialog"!==i.method){var n=Object.getOwnPropertyDescriptor(HTMLFormElement.prototype,"method");if(n){var r=n.get;n.get=function(){return isFormMethodDialog(this)?"dialog":r.call(this)};var s=n.set;n.set=function(e){return"string"==typeof e&&"dialog"===e.toLowerCase()?this.setAttribute("method",e):s.call(this,e)};Object.defineProperty(HTMLFormElement.prototype,"method",n)}}document.addEventListener("click",(function(e){t.formSubmitter=null;t.imagemapUseValue=null;if(!e.defaultPrevented){var i=e.target;"composedPath"in e&&(i=e.composedPath().shift()||i);if(i&&isFormMethodDialog(i.form)){if(!("submit"===i.type&&["button","input"].indexOf(i.localName)>-1)){if("input"!==i.localName||"image"!==i.type)return;t.imagemapUseValue=e.offsetX+","+e.offsetY}findNearestDialog(i)&&(t.formSubmitter=i)}}}),!1);document.addEventListener("submit",(function(e){var t=e.target;if(!findNearestDialog(t)){var i=findFormSubmitter(e);"dialog"===(i&&i.getAttribute("formmethod")||t.getAttribute("method"))&&e.preventDefault()}}));var a=HTMLFormElement.prototype.submit,replacementFormSubmit=function(){if(!isFormMethodDialog(this))return a.call(this);var e=findNearestDialog(this);e&&e.close()};HTMLFormElement.prototype.submit=replacementFormSubmit}return t}()},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PasswordPrompt=void 0;var n=i(5);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=new WeakSet,c=new WeakSet;t.PasswordPrompt=class PasswordPrompt{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,o);_classPrivateFieldInitSpec(this,r,{writable:!0,value:null});_classPrivateFieldInitSpec(this,s,{writable:!0,value:null});_classPrivateFieldInitSpec(this,a,{writable:!0,value:null});this.dialog=e.dialog;this.label=e.label;this.input=e.input;this.submitButton=e.submitButton;this.cancelButton=e.cancelButton;this.overlayManager=t;this.l10n=i;this._isViewerEmbedded=n;this.submitButton.addEventListener("click",_classPrivateMethodGet(this,o,_verify2).bind(this));this.cancelButton.addEventListener("click",this.close.bind(this));this.input.addEventListener("keydown",(e=>{13===e.keyCode&&_classPrivateMethodGet(this,o,_verify2).call(this)}));this.overlayManager.register(this.dialog,!0);this.dialog.addEventListener("close",_classPrivateMethodGet(this,l,_cancel2).bind(this))}async open(){_classPrivateFieldGet(this,r)&&await _classPrivateFieldGet(this,r).promise;_classPrivateFieldSet(this,r,(0,n.createPromiseCapability)());try{await this.overlayManager.open(this.dialog);this.input.type="password";this.input.focus()}catch(e){_classPrivateFieldSet(this,r,null);throw e}const e=_classPrivateFieldGet(this,a)===n.PasswordResponses.INCORRECT_PASSWORD;this._isViewerEmbedded&&!e||this.input.focus();this.label.textContent=await this.l10n.get("password_"+(e?"invalid":"label"))}async close(){if(this.overlayManager.active===this.dialog){this.overlayManager.close(this.dialog);this.input.value="";this.input.type="hidden"}}async setUpdateCallback(e,t){_classPrivateFieldGet(this,r)&&await _classPrivateFieldGet(this,r).promise;_classPrivateFieldSet(this,s,e);_classPrivateFieldSet(this,a,t)}};function _verify2(){const e=this.input.value;(null==e?void 0:e.length)>0&&_classPrivateMethodGet(this,c,_invokeCallback2).call(this,e)}function _cancel2(){_classPrivateMethodGet(this,c,_invokeCallback2).call(this,new Error("PasswordPrompt cancelled."));_classPrivateFieldGet(this,r).resolve()}function _invokeCallback2(e){if(_classPrivateFieldGet(this,s)){this.close();this.input.value="";_classPrivateFieldGet(this,s).call(this,e);_classPrivateFieldSet(this,s,null)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFAttachmentViewer=void 0;var n=i(5),r=i(14),s=i(6);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}var a=new WeakSet;class PDFAttachmentViewer extends r.BaseTreeViewer{constructor(e){super(e);_classPrivateMethodInitSpec(this,a);this.downloadManager=e.downloadManager;this.eventBus._on("fileattachmentannotation",function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(this,a,_appendAttachment2).bind(this))}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super.reset();this._attachments=null;e||(this._renderedCapability=(0,n.createPromiseCapability)());this._pendingDispatchEvent=!1}async _dispatchEvent(e){this._renderedCapability.resolve();if(0===e&&!this._pendingDispatchEvent){this._pendingDispatchEvent=!0;await(0,s.waitOnEventOrTimeout)({target:this.eventBus,name:"annotationlayerrendered",delay:1e3});if(!this._pendingDispatchEvent)return}this._pendingDispatchEvent=!1;this.eventBus.dispatch("attachmentsloaded",{source:this,attachmentsCount:e})}_bindLink(e,t){let{content:i,filename:n}=t;e.onclick=()=>{this.downloadManager.openOrDownloadData(e,i,n);return!1}}render(e){let{attachments:t,keepRenderedCapability:i=!1}=e;this._attachments&&this.reset(i);this._attachments=t||null;if(!t){this._dispatchEvent(0);return}const r=Object.keys(t).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})),s=document.createDocumentFragment();let a=0;for(const e of r){const i=t[e],r=i.content,o=(0,n.getFilenameFromUrl)(i.filename),l=document.createElement("div");l.className="treeItem";const c=document.createElement("a");this._bindLink(c,{content:r,filename:o});c.textContent=this._normalizeTextContent(o);l.append(c);s.append(l);a++}this._finishRendering(s,a)}}t.PDFAttachmentViewer=PDFAttachmentViewer;function _appendAttachment2(e){let{filename:t,content:i}=e;const n=this._renderedCapability.promise;n.then((()=>{if(n!==this._renderedCapability.promise)return;const e=this._attachments||Object.create(null);for(const i in e)if(t===i)return;e[t]={filename:t,content:i};this.render({attachments:e,keepRenderedCapability:!0})}))}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseTreeViewer=void 0;var n=i(1);const r="selected";class BaseTreeViewer{constructor(e){if(this.constructor===BaseTreeViewer)throw new Error("Cannot initialize BaseTreeViewer.");this.container=e.container;this.eventBus=e.eventBus;this.reset()}reset(){this._pdfDocument=null;this._lastToggleIsShow=!0;this._currentTreeItem=null;this.container.textContent="";this.container.classList.remove("treeWithDeepNesting")}_dispatchEvent(e){throw new Error("Not implemented: _dispatchEvent")}_bindLink(e,t){throw new Error("Not implemented: _bindLink")}_normalizeTextContent(e){return(0,n.removeNullCharacters)(e,!0)||"–"}_addToggleButton(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=document.createElement("div");i.className="treeItemToggler";t&&i.classList.add("treeItemsHidden");i.onclick=t=>{t.stopPropagation();i.classList.toggle("treeItemsHidden");if(t.shiftKey){const t=!i.classList.contains("treeItemsHidden");this._toggleTreeItem(e,t)}};e.prepend(i)}_toggleTreeItem(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._lastToggleIsShow=t;for(const i of e.querySelectorAll(".treeItemToggler"))i.classList.toggle("treeItemsHidden",!t)}_toggleAllTreeItems(){this._toggleTreeItem(this.container,!this._lastToggleIsShow)}_finishRendering(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]){this.container.classList.add("treeWithDeepNesting");this._lastToggleIsShow=!e.querySelector(".treeItemsHidden")}this.container.append(e);this._dispatchEvent(t)}render(e){throw new Error("Not implemented: render")}_updateCurrentTreeItem(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this._currentTreeItem){this._currentTreeItem.classList.remove(r);this._currentTreeItem=null}if(e){e.classList.add(r);this._currentTreeItem=e}}_scrollToCurrentTreeItem(e){if(!e)return;let t=e.parentNode;for(;t&&t!==this.container;){if(t.classList.contains("treeItem")){const e=t.firstElementChild;null==e||e.classList.remove("treeItemsHidden")}t=t.parentNode}this._updateCurrentTreeItem(e);this.container.scrollTo(e.offsetLeft,e.offsetTop+-100)}}t.BaseTreeViewer=BaseTreeViewer},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFDocumentProperties=void 0;var n=i(5),r=i(1);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const s="-",a=["en-us","en-lr","my"],o={"8.5x11":"Letter","8.5x14":"Legal"},l={"297x420":"A3","210x297":"A4"};function getPageName(e,t,i){return i[`${t?e.width:e.height}x${t?e.height:e.width}`]}var c=new WeakMap,d=new WeakSet,h=new WeakSet,u=new WeakSet,p=new WeakSet,g=new WeakSet,f=new WeakSet;t.PDFDocumentProperties=class PDFDocumentProperties{constructor(e,t,i,n,r){let{dialog:s,fields:o,closeButton:l}=e;_classPrivateMethodInitSpec(this,f);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);!function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}(this,c,{writable:!0,value:null});this.dialog=s;this.fields=o;this.overlayManager=t;this.l10n=n;this._fileNameLookup=r;_classPrivateMethodGet(this,d,_reset2).call(this);l.addEventListener("click",this.close.bind(this));this.overlayManager.register(this.dialog);i._on("pagechanging",(e=>{this._currentPageNumber=e.pageNumber}));i._on("rotationchanging",(e=>{this._pagesRotation=e.pagesRotation}));this._isNonMetricLocale=!0;n.getLanguage().then((e=>{this._isNonMetricLocale=a.includes(e)}))}async open(){await Promise.all([this.overlayManager.open(this.dialog),this._dataAvailableCapability.promise]);const e=this._currentPageNumber,t=this._pagesRotation;if(_classPrivateFieldGet(this,c)&&e===_classPrivateFieldGet(this,c)._currentPageNumber&&t===_classPrivateFieldGet(this,c)._pagesRotation){_classPrivateMethodGet(this,h,_updateUI2).call(this);return}const{info:i,contentLength:n}=await this.pdfDocument.getMetadata(),[s,a,o,l,d,m]=await Promise.all([this._fileNameLookup(),_classPrivateMethodGet(this,u,_parseFileSize2).call(this,n),_classPrivateMethodGet(this,g,_parseDate2).call(this,i.CreationDate),_classPrivateMethodGet(this,g,_parseDate2).call(this,i.ModDate),this.pdfDocument.getPage(e).then((e=>_classPrivateMethodGet(this,p,_parsePageSize2).call(this,(0,r.getPageSizeInches)(e),t))),_classPrivateMethodGet(this,f,_parseLinearization2).call(this,i.IsLinearized)]);_classPrivateFieldSet(this,c,Object.freeze({fileName:s,fileSize:a,title:i.Title,author:i.Author,subject:i.Subject,keywords:i.Keywords,creationDate:o,modificationDate:l,creator:i.Creator,producer:i.Producer,version:i.PDFFormatVersion,pageCount:this.pdfDocument.numPages,pageSize:d,linearized:m,_currentPageNumber:e,_pagesRotation:t}));_classPrivateMethodGet(this,h,_updateUI2).call(this);const{length:v}=await this.pdfDocument.getDownloadInfo();if(n===v)return;const _=Object.assign(Object.create(null),_classPrivateFieldGet(this,c));_.fileSize=await _classPrivateMethodGet(this,u,_parseFileSize2).call(this,v);_classPrivateFieldSet(this,c,Object.freeze(_));_classPrivateMethodGet(this,h,_updateUI2).call(this)}async close(){this.overlayManager.close(this.dialog)}setDocument(e){if(this.pdfDocument){_classPrivateMethodGet(this,d,_reset2).call(this);_classPrivateMethodGet(this,h,_updateUI2).call(this,!0)}if(e){this.pdfDocument=e;this._dataAvailableCapability.resolve()}}};function _reset2(){this.pdfDocument=null;_classPrivateFieldSet(this,c,null);this._dataAvailableCapability=(0,n.createPromiseCapability)();this._currentPageNumber=1;this._pagesRotation=0}function _updateUI2(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e&&_classPrivateFieldGet(this,c)){if(this.overlayManager.active===this.dialog)for(const e in this.fields){const t=_classPrivateFieldGet(this,c)[e];this.fields[e].textContent=t||0===t?t:s}}else for(const e in this.fields)this.fields[e].textContent=s}async function _parseFileSize2(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=e/1024,i=t/1024;if(t)return this.l10n.get("document_properties_"+(i>=1?"mb":"kb"),{size_mb:i>=1&&(+i.toPrecision(3)).toLocaleString(),size_kb:i<1&&(+t.toPrecision(3)).toLocaleString(),size_b:e.toLocaleString()})}async function _parsePageSize2(e,t){if(!e)return;t%180!=0&&(e={width:e.height,height:e.width});const i=(0,r.isPortraitOrientation)(e);let n={width:Math.round(100*e.width)/100,height:Math.round(100*e.height)/100},s={width:Math.round(25.4*e.width*10)/10,height:Math.round(25.4*e.height*10)/10},a=getPageName(n,i,o)||getPageName(s,i,l);if(!(a||Number.isInteger(s.width)&&Number.isInteger(s.height))){const t={width:25.4*e.width,height:25.4*e.height},r={width:Math.round(s.width),height:Math.round(s.height)};if(Math.abs(t.width-r.width)<.1&&Math.abs(t.height-r.height)<.1){a=getPageName(r,i,l);if(a){n={width:Math.round(r.width/25.4*100)/100,height:Math.round(r.height/25.4*100)/100};s=r}}}const[{width:c,height:d},h,u,p]=await Promise.all([this._isNonMetricLocale?n:s,this.l10n.get("document_properties_page_size_unit_"+(this._isNonMetricLocale?"inches":"millimeters")),a&&this.l10n.get(`document_properties_page_size_name_${a.toLowerCase()}`),this.l10n.get("document_properties_page_size_orientation_"+(i?"portrait":"landscape"))]);return this.l10n.get(`document_properties_page_size_dimension_${u?"name_":""}string`,{width:c.toLocaleString(),height:d.toLocaleString(),unit:h,name:u,orientation:p})}async function _parseDate2(e){const t=n.PDFDateString.toDateObject(e);if(t)return this.l10n.get("document_properties_date_string",{date:t.toLocaleDateString(),time:t.toLocaleTimeString()})}function _parseLinearization2(e){return this.l10n.get("document_properties_linearized_"+(e?"yes":"no"))}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFFindBar=void 0;var n=i(17);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var r=new WeakSet;t.PDFFindBar=class PDFFindBar{constructor(e,t,i){var n;_classPrivateMethodInitSpec(this,r);this.opened=!1;this.bar=e.bar;this.toggleButton=e.toggleButton;this.findField=e.findField;this.highlightAll=e.highlightAllCheckbox;this.currentPage=e.findCurrentPageCheckbox;this.pageRange=e.findPageRangeField;this.caseSensitive=e.caseSensitiveCheckbox;this.matchDiacritics=e.matchDiacriticsCheckbox;this.entireWord=e.entireWordCheckbox;this.findMsg=e.findMsg;this.findResultsCount=e.findResultsCount;this.findPreviousButton=e.findPreviousButton;this.findNextButton=e.findNextButton;this.findFieldMultiline=e.findFieldMultiline||null;this.multipleSearchTexts=e.findMultipleSearchTextsCheckbox||null;this.ignoreAccents=e.ignoreAccentsCheckbox||null;this.fuzzySearch=e.fuzzyCheckbox||null;this.eventBus=t;this.l10n=i;this.toggleButton.addEventListener("click",(()=>{this.toggle()}));this.findFieldMultiline.addEventListener("input",(()=>{this.dispatchEvent("")}));this.findField.addEventListener("input",(()=>{this.dispatchEvent("")}));this.bar.addEventListener("keydown",(e=>{switch(e.keyCode){case 13:e.target===this.findField&&this.dispatchEvent("again",e.shiftKey);break;case 27:this.close()}}));this.findPreviousButton.addEventListener("click",(()=>{this.dispatchEvent("again",!0)}));this.findNextButton.addEventListener("click",(()=>{this.dispatchEvent("again",!1)}));this.highlightAll.addEventListener("click",(()=>{this.dispatchEvent("highlightallchange")}));this.caseSensitive.addEventListener("click",(()=>{this.dispatchEvent("casesensitivitychange")}));this.entireWord.addEventListener("click",(()=>{this.dispatchEvent("entirewordchange")}));this.multipleSearchTexts.addEventListener("click",(()=>{this.dispatchEvent("multiplesearchtextschange")}));this.ignoreAccents.addEventListener("click",(()=>{this.dispatchEvent("ignoreAccentsChange")}));this.fuzzySearch.addEventListener("click",(()=>{this.dispatchEvent("fuzzySearchChange")}));this.currentPage.addEventListener("click",(()=>{this.dispatchEvent("currentPageChange")}));this.pageRange.addEventListener("input",(()=>{this.dispatchEvent("pageRangeChange")}));null===(n=this.matchDiacritics)||void 0===n||n.addEventListener("click",(()=>{this.dispatchEvent("diacriticmatchingchange")}));this.eventBus._on("resize",_classPrivateMethodGet(this,r,_adjustWidth2).bind(this))}reset(){this.updateUIState()}dispatchEvent(e){var t;let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.eventBus.dispatch("find",{source:this,type:e,query:this.findFieldMultiline.classList.contains("hidden")?this.findField.value:this.findFieldMultiline.value,phraseSearch:!this.multipleSearchTexts.checked,caseSensitive:this.caseSensitive.checked,entireWord:this.entireWord.checked,ignoreAccents:this.ignoreAccents.checked,fuzzySearch:this.fuzzySearch.checked,highlightAll:this.highlightAll.checked,currentPage:this.currentPage.checked,pageRange:this.pageRange.value,findPrevious:i,matchDiacritics:null===(t=this.matchDiacritics)||void 0===t?void 0:t.checked})}updateUIState(e,t,i){let s=Promise.resolve(""),a="";switch(e){case n.FindState.FOUND:break;case n.FindState.PENDING:a="pending";break;case n.FindState.NOT_FOUND:s=this.l10n.get("find_not_found");a="notFound";break;case n.FindState.WRAPPED:s=this.l10n.get("find_reached_"+(t?"top":"bottom"))}this.findField.setAttribute("data-status",a);this.findFieldMultiline.classList.toggle("notFound","notFound"===a);this.findFieldMultiline.setAttribute("data-status",a);this.findField.setAttribute("aria-invalid",e===n.FindState.NOT_FOUND);s.then((e=>{this.findMsg.textContent=e;_classPrivateMethodGet(this,r,_adjustWidth2).call(this)}));this.updateResultsCount(i)}updateResultsCount(){let{current:e=0,total:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};let i=Promise.resolve("");if(t>0)if(t>1e3){let e="find_match_count_limit";i=this.l10n.get(e,{limit:1e3})}else{let n="find_match_count";i=this.l10n.get(n,{current:e,total:t})}i.then((e=>{this.findResultsCount.textContent=e;_classPrivateMethodGet(this,r,_adjustWidth2).call(this)}))}open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.bar.classList.remove("hidden")}this.findField.select();this.findField.focus();this.dispatchEvent("");_classPrivateMethodGet(this,r,_adjustWidth2).call(this)}close(){if(this.opened){this.opened=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.bar.classList.add("hidden");this.eventBus.dispatch("findbarclose",{source:this})}}toggle(){this.opened?this.close():this.open()}};function _adjustWidth2(){if(!this.opened)return;this.bar.classList.remove("wrapContainers");this.bar.clientHeight>this.bar.firstElementChild.clientHeight&&this.bar.classList.add("wrapContainers")}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFFindController=t.FindState=void 0;var n=i(5),r=i(18),s=i(19),a=i(20),o=i(1);const l={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};t.FindState=l;const c={"‐":"-","‘":"'","’":"'","‚":"'","‛":"'","“":'"',"”":'"',"„":'"',"‟":'"',"¼":"1/4","½":"1/2","¾":"3/4","\n":" "};let d=null;function normalize(e){if(!d){const e=Object.keys(c).join("");d=new RegExp(`[${e}]`,"g")}let t=null;return[e.replace(d,(function(e,i){const n=c[e],r=n.length-e.length;"\n"===e?(t||(t=[])).push([i-1,1]):0!==r&&(t||(t=[])).push([i,r]);return n})),t]}function getOriginalIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return e;let i=0;for(const[n,r]of t){const t=n+i;if(n>=e)break;if(n+r>e){i+=e-t;break}i+=r}return e-i}t.PDFFindController=class PDFFindController{constructor(e){let{linkService:t,eventBus:i,pageViewMode:n}=e;this._linkService=t;this._eventBus=i;this._pageViewMode=n;this._reset();i._on("find",this._onFind.bind(this));i._on("findbarclose",this._onFindBarClose.bind(this));this.executeCommand=(e,t)=>{Window.ngxConsole.error('Deprecated method `PDFFindController.executeCommand` called, please dispatch a "find"-event using the EventBus instead.');const i=Object.assign(Object.create(null),t,{type:e.substring("find".length)});this._onFind(i)}}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesColor(){return this._pageMatchesColor}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(e){this._pdfDocument&&this._reset();if(e){this._pdfDocument=e;this._firstPageCapability.resolve()}}_onFind(e){if(!e)return;const t=this._pdfDocument,{type:i}=e;(null===this._state||this._shouldDirtyMatch(e))&&(this._dirtyMatch=!0);this._state=e;"highlightallchange"!==i&&this._updateUIState(l.PENDING);this._firstPageCapability.promise.then((()=>{if(!this._pdfDocument||t&&this._pdfDocument!==t)return;this._extractText();const e=!this._highlightMatches,n=!!this._findTimeout;if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(i)if(this._dirtyMatch)this._nextMatch();else if("again"===i){this._nextMatch();e&&this._state.highlightAll&&this._updateAllPages()}else if("highlightallchange"===i){n?this._nextMatch():this._highlightMatches=!0;this._updateAllPages()}else this._nextMatch();else this._findTimeout=setTimeout((()=>{this._nextMatch();this._findTimeout=null}),250)}))}scrollMatchIntoView(e){let{element:t=null,selectedLeft:i=0,pageIndex:n=-1,matchIndex:r=-1}=e;if(!this._scrollMatches||!t)return;if(-1===r||r!==this._selected.matchIdx)return;if(-1===n||n!==this._selected.pageIdx)return;this._scrollMatches=!1;const s={top:-50,left:i+-400};(0,o.scrollIntoView)(t,s,!0,"infinite-scroll"===this._pageViewMode)}_reset(){this._highlightMatches=!1;this._scrollMatches=!1;this._pdfDocument=null;this._pageMatches=[];this._pageMatchesLength=[];this._pageMatchesColor=[];this._state=null;this._selected={pageIdx:-1,matchIdx:-1};this._offset={pageIdx:null,matchIdx:null,wrapped:!1};this._extractTextPromises=[];this._pageContents=[];this._pageDiffs=[];this._matchesCountTotal=0;this._pagesToSearch=null;this._pendingFindMatches=new Set;this._resumePageIdx=null;this._dirtyMatch=!1;clearTimeout(this._findTimeout);this._findTimeout=null;this._firstPageCapability=(0,n.createPromiseCapability)()}get _query(){if(this._state.query!==this._rawQuery){this._rawQuery=this._state.query;[this._normalizedQuery]=normalize(this._state.query)}return this._normalizedQuery}_shouldDirtyMatch(e){if(e.query!==this._state.query)return!0;switch(e.type){case"again":const e=this._selected.pageIdx+1,t=this._linkService;return e>=1&&e<=t.pagesCount&&e!==t.page&&!t.isPageVisible(e);case"highlightallchange":return!1}return!0}_prepareMatches(e,t,i,n){function isSubTerm(t){const i=e[t],n=e[t+1];if(t<e.length-1&&i.match===n.match){i.skipped=!0;return!0}for(let n=t-1;n>=0;n--){const t=e[n];if(!t.skipped){if(t.match+t.matchLength<i.match)break;if(t.match+t.matchLength>=i.match+i.matchLength){i.skipped=!0;return!0}}}return!1}e.sort((function(e,t){return e.match===t.match?e.matchLength-t.matchLength:e.match-t.match}));for(let r=0,s=e.length;r<s;r++)if(!isSubTerm(r)){t.push(e[r].match);i.push(e[r].matchLength);n.push(e[r].color)}}_isEntireWord(e,t,i){if(t>0){const i=e.charCodeAt(t),n=e.charCodeAt(t-1);if((0,s.getCharacterType)(i)===(0,s.getCharacterType)(n))return!1}const n=t+i-1;if(n<e.length-1){const t=e.charCodeAt(n),i=e.charCodeAt(n+1);if((0,s.getCharacterType)(t)===(0,s.getCharacterType)(i))return!1}return!0}_calculateFuzzyMatch(e,t,i,n){const r=[],s=[],o=e.length,l=o<5?o:5,c=Math.round(o/5),d=e.substring(0,l),h={useCollator:!0};for(let t=0;t<i.length-o;t++){const u=i.substring(t,t+l);if(a.Levenshtein.distance(d,u,h)<3){const l=i.substring(t,t+o),d=a.Levenshtein.distance(e,l,h);if(d<=c){if(t+1<i.length-o){const n=i.substring(t+1,t+1+o);if(d>=a.Levenshtein.distance(e,n,h))continue}const l=getOriginalIndex(t,n),c=getOriginalIndex(t+o-1,n)-l+1;r.push(l);s.push(c);t+=o-1}}}this._pageMatches[t]=r;this._pageMatchesLength[t]=s}_calculatePhraseMatch(e,t,i,n,s,a){if(a){i=(0,r.deburr)(i);e=(0,r.deburr)(e)}const o=[],l=[],c=e.length;let d=-c;for(;;){d=i.indexOf(e,d+c);if(-1===d)break;if(s&&!this._isEntireWord(i,d,c))continue;const t=getOriginalIndex(d,n),r=getOriginalIndex(d+c-1,n)-t+1;o.push(t);l.push(r)}this._pageMatches[t]=o;this._pageMatchesLength[t]=l}_calculateWordMatch(e,t,i,n,s,a){if(a){i=(0,r.deburr)(i);e=(0,r.deburr)(e)}const o=[],l=e.includes("\n")?e.trim().split(/\n+/g):e.trim().match(/\S+/g);for(let e=0,t=l.length;e<t;e++){const t=l[e],r=t.length;if(0===r)continue;let a=-r;for(;;){a=i.indexOf(t,a+r);if(-1===a)break;if(s&&!this._isEntireWord(i,a,r))continue;const l=getOriginalIndex(a,n),c=getOriginalIndex(a+r-1,n)-l+1;o.push({match:l,matchLength:c,skipped:!1,color:e})}}this._pageMatchesLength[t]=[];this._pageMatchesColor[t]=[];this._pageMatches[t]=[];this._prepareMatches(o,this._pageMatches[t],this._pageMatchesLength[t],this._pageMatchesColor[t])}_isInPageRanges(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;try{if(!t)return!0;return t.split(",").some((t=>this._isInPageRange(e,t)))}catch(e){return!0}}_isInPageRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"6-7";try{if(!t)return!0;if(t.includes("-")){const i=t.split("-"),n=i[0].trim();if(n.length>0&&e<Number(n))return!1;const r=i[1].trim();if(r.length>0&&e>Number(r))return!1}else{const i=t.trim();if(i.length>0)return Number(i)===e}return!0}catch(e){return!0}}_calculateMatch(e){if(!this.state)return;let t=this._pageContents[e];const i=this._pageDiffs[e];let n=this._query;const{caseSensitive:r,entireWord:s,ignoreAccents:a,fuzzySearch:o,phraseSearch:l,currentPage:c,pageRange:d}=this._state;let h=!1;if(c&&e!==this._linkService.page-1){h=!0;this._pageMatches[e]=[]}if(!this._isInPageRanges(e+1,d)){h=!0;this._pageMatches[e]=[]}if(0===n.length)return;if(!h){if(!r){t=t.toLowerCase();n=n.toLowerCase()}o?n.length<=2?this._calculatePhraseMatch(n,e,t,i,!1):this._calculateFuzzyMatch(n,e,t,i):l?this._calculatePhraseMatch(n,e,t,i,s,a):this._calculateWordMatch(n,e,t,i,s,a)}this._state.highlightAll&&this._updatePage(e);if(this._resumePageIdx===e){this._resumePageIdx=null;this._nextPageMatch()}const u=this._pageMatches[e].length;if(u>0){this._matchesCountTotal+=u;this._updateUIResultsCount()}else e+1===this._pageContents.length&&0===this._matchesCountTotal&&this._updateUIResultsCount()}_extractText(){if(this._extractTextPromises.length>0)return;let e=Promise.resolve();for(let t=0,i=this._linkService.pagesCount;t<i;t++){const i=(0,n.createPromiseCapability)();this._extractTextPromises[t]=i.promise;e=e.then((()=>this._pdfDocument&&this._extractTextPromises.length>0?this._pdfDocument.getPage(t+1).then((e=>e.getTextContent())).then((e=>{const n=e.items,r=[];for(let e=0,t=n.length;e<t;e++){r.push(n[e].str);n[e].hasEOL&&r.push("\n")}[this._pageContents[t],this._pageDiffs[t]]=normalize(r.join(""));i.resolve(t)}),(e=>{Window.ngxConsole.error(`Unable to get text content for page ${t+1}`,e);this._pageContents[t]="";this._pageDiffs[t]=null;i.resolve(t)})):Promise.resolve()))}}_updatePage(e){this._scrollMatches&&this._selected.pageIdx===e&&(this._linkService.page=e+1);this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:e})}_updateAllPages(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}_nextMatch(){const e=this._state.findPrevious,t=this._linkService.page-1,i=this._linkService.pagesCount;this._highlightMatches=!0;if(this._dirtyMatch){this._dirtyMatch=!1;this._selected.pageIdx=this._selected.matchIdx=-1;this._offset.pageIdx=t;this._offset.matchIdx=null;this._offset.wrapped=!1;this._resumePageIdx=null;this._pageMatches.length=0;this._pageMatchesLength.length=0;this._pageMatchesColor.length=0;this._matchesCountTotal=0;this._updateAllPages();const{currentPage:e}=this.state;let n=0,r=i-1;if(e){n=this._linkService.page-1;r=n}for(let e=n;e<=r;e++)if(!this._pendingFindMatches.has(e)){this._pendingFindMatches.add(e);this._extractTextPromises[e].then((e=>{this._pendingFindMatches.delete(e);this._calculateMatch(e)}))}}if(""===this._query){this._updateUIState(l.FOUND);return}if(this._resumePageIdx)return;const n=this._offset;this._pagesToSearch=i;if(null!==n.matchIdx){const t=this._pageMatches[n.pageIdx].length;if(!e&&n.matchIdx+1<t||e&&n.matchIdx>0){n.matchIdx=e?n.matchIdx-1:n.matchIdx+1;this._updateMatch(!0);return}this._advanceOffsetPage(e)}this._nextPageMatch()}_matchesReady(e){const t=this._offset,i=e.length,n=this._state.findPrevious;if(i){t.matchIdx=n?i-1:0;this._updateMatch(!0);return!0}this._advanceOffsetPage(n);if(t.wrapped){t.matchIdx=null;if(this._pagesToSearch<0){this._updateMatch(!1);return!0}}return!1}_nextPageMatch(){null!==this._resumePageIdx&&Window.ngxConsole.error("There can only be one pending page.");let e=null;do{const t=this._offset.pageIdx;e=this._pageMatches[t];if(!e){this._resumePageIdx=t;break}}while(!this._matchesReady(e))}_advanceOffsetPage(e){const t=this._offset,i=this._linkService.pagesCount;t.pageIdx=e?t.pageIdx-1:t.pageIdx+1;t.matchIdx=null;this._pagesToSearch--;if(t.pageIdx>=i||t.pageIdx<0){t.pageIdx=e?i-1:0;t.wrapped=!0}}_updateMatch(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=l.NOT_FOUND;const i=this._offset.wrapped;this._offset.wrapped=!1;if(e){const e=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx;this._selected.matchIdx=this._offset.matchIdx;t=i?l.WRAPPED:l.FOUND;-1!==e&&e!==this._selected.pageIdx&&this._updatePage(e)}this._updateUIState(t,this._state.findPrevious);if(-1!==this._selected.pageIdx){this._scrollMatches=!0;this._updatePage(this._selected.pageIdx)}}_onFindBarClose(e){const t=this._pdfDocument;this._firstPageCapability.promise.then((()=>{if(this._pdfDocument&&(!t||this._pdfDocument===t)){if(this._findTimeout){clearTimeout(this._findTimeout);this._findTimeout=null}if(this._resumePageIdx){this._resumePageIdx=null;this._dirtyMatch=!0}this._updateUIState(l.FOUND);this._highlightMatches=!1;this._updateAllPages()}}))}_requestMatchesCount(){const{pageIdx:e,matchIdx:t}=this._selected;let i=0,n=this._matchesCountTotal;if(-1!==t){for(let t=0;t<e;t++){var r;i+=(null===(r=this._pageMatches[t])||void 0===r?void 0:r.length)||0}i+=t+1}(i<1||i>n)&&(i=n=0);return{current:i,total:n}}_updateUIResultsCount(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this._requestMatchesCount()})}_updateUIState(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:e,previous:n,matchesCount:this._requestMatchesCount(),rawQuery:null!==(t=null===(i=this._state)||void 0===i?void 0:i.query)&&void 0!==t?t:null})}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.deburr=function deburr(e){return(e=function toString(e){return null==e?"":function baseToString(e){if("string"==typeof e)return e;if(function isSymbol(e){return"symbol"==typeof e||function isObjectLike(e){return!!e&&"object"==typeof e}(e)&&c.call(e)==i}(e))return u?u.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e))&&e.replace(n,l).replace(r,"")};var i="[object Symbol]",n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),s="object"==typeof global&&global&&global.Object===Object&&global,a="object"==typeof self&&self&&self.Object===Object&&self,o=s||a||Function("return this")();var l=function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"}),c=Object.prototype.toString,d=o.Symbol,h=d?d.prototype:void 0,u=h?h.toString:void 0},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CharacterType=void 0;t.getCharacterType=function getCharacterType(e){if(function isAlphabeticalScript(e){return e<11904}(e))return function isAscii(e){return 0==(65408&e)}(e)?function isAsciiSpace(e){return 32===e||9===e||13===e||10===e}(e)?i.SPACE:function isAsciiAlpha(e){return e>=97&&e<=122||e>=65&&e<=90}(e)||function isAsciiDigit(e){return e>=48&&e<=57}(e)||95===e?i.ALPHA_LETTER:i.PUNCT:function isThai(e){return 3584==(65408&e)}(e)?i.THAI_LETTER:160===e?i.SPACE:i.ALPHA_LETTER;if(function isHan(e){return e>=13312&&e<=40959||e>=63744&&e<=64255}(e))return i.HAN_LETTER;if(function isKatakana(e){return e>=12448&&e<=12543}(e))return i.KATAKANA_LETTER;if(function isHiragana(e){return e>=12352&&e<=12447}(e))return i.HIRAGANA_LETTER;if(function isHalfwidthKatakana(e){return e>=65376&&e<=65439}(e))return i.HALFWIDTH_KATAKANA_LETTER;return i.ALPHA_LETTER};const i={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};t.CharacterType=i},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Levenshtein=void 0;let i;try{i=Intl.Collator("und",{sensitivity:"base"})}catch(e){try{i=Intl.Collator("generic",{sensitivity:"base"})}catch(e){i=void 0}}const n=[],r=[];t.Levenshtein=class Levenshtein{static distance(e,t,s){const a=s&&i&&s.useCollator,o=e.length,l=t.length;if(0===o)return l;if(0===l)return o;let c,d,h,u,p,g;for(h=0;h<l;++h){n[h]=h;r[h]=t.charCodeAt(h)}n[l]=l;if(a)for(h=0;h<o;++h){d=h+1;for(u=0;u<l;++u){c=d;g=0===i.compare(e.charAt(h),String.fromCharCode(r[u]));d=n[u]+(g?0:1);p=c+1;d>p&&(d=p);p=n[u+1]+1;d>p&&(d=p);n[u]=c}n[u]=d}else for(h=0;h<o;++h){d=h+1;for(u=0;u<l;++u){c=d;g=e.charCodeAt(h)===r[u];d=n[u]+(g?0:1);p=c+1;d>p&&(d=p);p=n[u+1]+1;d>p&&(d=p);n[u]=c}n[u]=d}return d}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFHistory=void 0;t.isDestArraysEqual=isDestArraysEqual;t.isDestHashesEqual=isDestHashesEqual;var n=i(1),r=i(6);function getCurrentHash(){return document.location.hash}t.PDFHistory=class PDFHistory{constructor(e){let{linkService:t,eventBus:i}=e;this.linkService=t;this.eventBus=i;this._initialized=!1;this._fingerprint="";this.reset();this._boundEvents=null;this.eventBus._on("pagesinit",(()=>{this._isPagesLoaded=!1;this.eventBus._on("pagesloaded",(e=>{this._isPagesLoaded=!!e.pagesCount}),{once:!0})}))}initialize(e){let{fingerprint:t,resetHistory:i=!1,updateUrl:n=!1}=e;if(!t||"string"!=typeof t){Window.ngxConsole.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');return}this._initialized&&this.reset();const r=""!==this._fingerprint&&this._fingerprint!==t;this._fingerprint=t;this._updateUrl=!0===n;this._initialized=!0;this._bindEvents();const s=window.history.state;this._popStateInProgress=!1;this._blockHashChange=0;this._currentHash=getCurrentHash();this._numPositionUpdates=0;this._uid=this._maxUid=0;this._destination=null;this._position=null;if(!this._isValidState(s,!0)||i){const{hash:e,page:t,rotation:n}=this._parseCurrentHash(!0);if(!e||r||i){this._pushOrReplaceState(null,!0);return}this._pushOrReplaceState({hash:e,page:t,rotation:n},!0);return}const a=s.destination;this._updateInternalState(a,s.uid,!0);void 0!==a.rotation&&(this._initialRotation=a.rotation);if(a.dest){this._initialBookmark=JSON.stringify(a.dest);this._destination.page=null}else a.hash?this._initialBookmark=a.hash:a.page&&(this._initialBookmark=`page=${a.page}`)}reset(){if(this._initialized){this._pageHide();this._initialized=!1;this._unbindEvents()}if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._initialBookmark=null;this._initialRotation=null}push(e){let{namedDest:t=null,explicitDest:i,pageNumber:n}=e;if(!this._initialized)return;if(t&&"string"!=typeof t){Window.ngxConsole.error(`PDFHistory.push: "${t}" is not a valid namedDest parameter.`);return}if(!Array.isArray(i)){Window.ngxConsole.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);return}if(!this._isValidPage(n)&&(null!==n||this._destination)){Window.ngxConsole.error(`PDFHistory.push: "${n}" is not a valid pageNumber parameter.`);return}const r=t||JSON.stringify(i);if(!r)return;let s=!1;if(this._destination&&(isDestHashesEqual(this._destination.hash,r)||isDestArraysEqual(this._destination.dest,i))){if(this._destination.page)return;s=!0}if(!this._popStateInProgress||s){this._pushOrReplaceState({dest:i,hash:r,page:n,rotation:this.linkService.rotation},s);if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}pushPage(e){var t;if(this._initialized)if(this._isValidPage(e)){if((null===(t=this._destination)||void 0===t?void 0:t.page)!==e&&!this._popStateInProgress){this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation});if(!this._popStateInProgress){this._popStateInProgress=!0;Promise.resolve().then((()=>{this._popStateInProgress=!1}))}}}else Window.ngxConsole.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`)}pushCurrentPosition(){this._initialized&&!this._popStateInProgress&&this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this._destination,i={fingerprint:this._fingerprint,uid:t?this._uid:this._uid+1,destination:e};this._updateInternalState(e,i.uid);let n;if(this._updateUrl&&null!=e&&e.hash){const t=document.location.href.split("#")[0];t.startsWith("file://")||(n=`${t}#${e.hash}`)}t?window.history.replaceState(i,"",n):window.history.pushState(i,"",n)}_tryPushCurrentPosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._position)return;let t=this._position;if(e){t=Object.assign(Object.create(null),this._position);t.temporary=!0}if(!this._destination){this._pushOrReplaceState(t);return}if(this._destination.temporary){this._pushOrReplaceState(t,!0);return}if(this._destination.hash===t.hash)return;if(!this._destination.page&&this._numPositionUpdates<=50)return;let i=!1;if(this._destination.page>=t.first&&this._destination.page<=t.page){if(void 0!==this._destination.dest||!this._destination.first)return;i=!0}this._pushOrReplaceState(t,i)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!t)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[t]=performance.getEntriesByType("navigation");if("reload"!==(null==t?void 0:t.type))return!1}}return!(!Number.isInteger(e.uid)||e.uid<0)&&(null!==e.destination&&"object"==typeof e.destination)}_updateInternalState(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}i&&null!=e&&e.temporary&&delete e.temporary;this._destination=e;this._uid=t;this._maxUid=Math.max(this._maxUid,t);this._numPositionUpdates=0}_parseCurrentHash(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=unescape(getCurrentHash()).substring(1),i=(0,n.parseQueryString)(t),r=i.get("nameddest")||"";let s=0|i.get("page");(!this._isValidPage(s)||e&&r.length>0)&&(s=null);return{hash:t,page:s,rotation:this.linkService.rotation}}_updateViewarea(e){let{location:t}=e;if(this._updateViewareaTimeout){clearTimeout(this._updateViewareaTimeout);this._updateViewareaTimeout=null}this._position={hash:t.pdfOpenParams.substring(1),page:this.linkService.page,first:t.pageNumber,rotation:t.rotation};if(!this._popStateInProgress){this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++;this._updateViewareaTimeout=setTimeout((()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0);this._updateViewareaTimeout=null}),1e3)}}_popState(e){let{state:t}=e;const i=getCurrentHash(),s=this._currentHash!==i;this._currentHash=i;if(!t){this._uid++;const{hash:e,page:t,rotation:i}=this._parseCurrentHash();this._pushOrReplaceState({hash:e,page:t,rotation:i},!0);return}if(!this._isValidState(t))return;this._popStateInProgress=!0;if(s){this._blockHashChange++;(0,r.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then((()=>{this._blockHashChange--}))}const a=t.destination;this._updateInternalState(a,t.uid,!0);(0,n.isValidRotation)(a.rotation)&&(this.linkService.rotation=a.rotation);a.dest?this.linkService.goToDestination(a.dest):a.hash?this.linkService.setHash(a.hash):a.page&&(this.linkService.page=a.page);Promise.resolve().then((()=>{this._popStateInProgress=!1}))}_pageHide(){this._destination&&!this._destination.temporary||this._tryPushCurrentPosition()}_bindEvents(){if(!this._boundEvents){this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)};this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea);window.addEventListener("popstate",this._boundEvents.popState);window.addEventListener("pagehide",this._boundEvents.pageHide)}}_unbindEvents(){if(this._boundEvents){this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea);window.removeEventListener("popstate",this._boundEvents.popState);window.removeEventListener("pagehide",this._boundEvents.pageHide);this._boundEvents=null}}};function isDestHashesEqual(e,t){if("string"!=typeof e||"string"!=typeof t)return!1;if(e===t)return!0;return(0,n.parseQueryString)(e).get("nameddest")===t}function isDestArraysEqual(e,t){function isEntryEqual(e,t){if(typeof e!=typeof t)return!1;if(Array.isArray(e)||Array.isArray(t))return!1;if(null!==e&&"object"==typeof e&&null!==t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!isEntryEqual(e[i],t[i]))return!1;return!0}return e===t||Number.isNaN(e)&&Number.isNaN(t)}if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!isEntryEqual(e[i],t[i]))return!1;return!0}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFLayerViewer=void 0;var n=i(14);class PDFLayerViewer extends n.BaseTreeViewer{constructor(e){super(e);this.l10n=e.l10n;this.eventBus._on("resetlayers",this._resetLayers.bind(this));this.eventBus._on("togglelayerstree",this._toggleAllTreeItems.bind(this))}reset(){super.reset();this._optionalContentConfig=null}_dispatchEvent(e){this.eventBus.dispatch("layersloaded",{source:this,layersCount:e})}_bindLink(e,t){let{groupId:i,input:n}=t;const setVisibility=()=>{this._optionalContentConfig.setVisibility(i,n.checked);this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(this._optionalContentConfig)})};e.onclick=t=>{if(t.target===n){setVisibility();return!0}if(t.target!==e)return!0;n.checked=!n.checked;setVisibility();return!1}}async _setNestedName(e,t){let{name:i=null}=t;if("string"!=typeof i){e.textContent=await this.l10n.get("additional_layers");e.style.fontStyle="italic"}else e.textContent=this._normalizeTextContent(i)}_addToggleButton(e,t){let{name:i=null}=t;super._addToggleButton(e,null===i)}_toggleAllTreeItems(){this._optionalContentConfig&&super._toggleAllTreeItems()}render(e){let{optionalContentConfig:t,pdfDocument:i}=e;this._optionalContentConfig&&this.reset();this._optionalContentConfig=t||null;this._pdfDocument=i||null;const n=null==t?void 0:t.getOrder();if(!n){this._dispatchEvent(0);return}const r=document.createDocumentFragment(),s=[{parent:r,groups:n}];let a=0,o=!1;for(;s.length>0;){const e=s.shift();for(const i of e.groups){const n=document.createElement("div");n.className="treeItem";const r=document.createElement("a");n.append(r);if("object"==typeof i){o=!0;this._addToggleButton(n,i);this._setNestedName(r,i);const e=document.createElement("div");e.className="treeItems";n.append(e);s.push({parent:e,groups:i.order})}else{const e=t.getGroup(i),n=document.createElement("input");this._bindLink(r,{groupId:i,input:n});n.type="checkbox";n.checked=e.visible;const s=document.createElement("label");s.textContent=this._normalizeTextContent(e.name);s.append(n);r.append(s);a++}e.parent.append(n)}}this._finishRendering(r,a,o)}async _resetLayers(){if(!this._optionalContentConfig)return;const e=await this._pdfDocument.getOptionalContentConfig();this.eventBus.dispatch("optionalcontentconfig",{source:this,promise:Promise.resolve(e)});this.render({optionalContentConfig:e,pdfDocument:this._pdfDocument})}}t.PDFLayerViewer=PDFLayerViewer},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFOutlineViewer=void 0;var n=i(14),r=i(5),s=i(1);class PDFOutlineViewer extends n.BaseTreeViewer{constructor(e){super(e);this.linkService=e.linkService;this.eventBus._on("toggleoutlinetree",this._toggleAllTreeItems.bind(this));this.eventBus._on("currentoutlineitem",this._currentOutlineItem.bind(this));this.eventBus._on("pagechanging",(e=>{this._currentPageNumber=e.pageNumber}));this.eventBus._on("pagesloaded",(e=>{this._isPagesLoaded=!!e.pagesCount;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded)}));this.eventBus._on("sidebarviewchanged",(e=>{this._sidebarView=e.view}))}reset(){super.reset();this._outline=null;this._pageNumberToDestHashCapability=null;this._currentPageNumber=1;this._isPagesLoaded=null;this._currentOutlineItemCapability&&!this._currentOutlineItemCapability.settled&&this._currentOutlineItemCapability.resolve(!1);this._currentOutlineItemCapability=null}_dispatchEvent(e){var t;this._currentOutlineItemCapability=(0,r.createPromiseCapability)();0===e||null!==(t=this._pdfDocument)&&void 0!==t&&t.loadingParams.disableAutoFetch?this._currentOutlineItemCapability.resolve(!1):null!==this._isPagesLoaded&&this._currentOutlineItemCapability.resolve(this._isPagesLoaded);this.eventBus.dispatch("outlineloaded",{source:this,outlineCount:e,currentOutlineItemPromise:this._currentOutlineItemCapability.promise})}_bindLink(e,t){let{url:i,newWindow:n,dest:r}=t;const{linkService:s}=this;if(i)s.addLinkAttributes(e,i,n);else{e.href=s.getDestinationHash(r);e.onclick=e=>{this._updateCurrentTreeItem(e.target.parentNode);r&&s.goToDestination(r);return!1}}}_setStyles(e,t){let{bold:i,italic:n}=t;i&&(e.style.fontWeight="bold");n&&(e.style.fontStyle="italic")}_addToggleButton(e,t){let{count:i,items:n}=t,r=!1;if(i<0){let e=n.length;if(e>0){const t=[...n];for(;t.length>0;){const{count:i,items:n}=t.shift();if(i>0&&n.length>0){e+=n.length;t.push(...n)}}}Math.abs(i)===e&&(r=!0)}super._addToggleButton(e,r)}_toggleAllTreeItems(){this._outline&&super._toggleAllTreeItems()}render(e){let{outline:t,pdfDocument:i}=e;this._outline&&this.reset();this._outline=t||null;this._pdfDocument=i||null;if(!t){this._dispatchEvent(0);return}const n=document.createDocumentFragment(),r=[{parent:n,items:t}];let s=0,a=!1;for(;r.length>0;){const e=r.shift();for(const t of e.items){const i=document.createElement("div");i.className="treeItem";const n=document.createElement("a");this._bindLink(n,t);this._setStyles(n,t);n.textContent=this._normalizeTextContent(t.title);i.append(n);if(t.items.length>0){a=!0;this._addToggleButton(i,t);const e=document.createElement("div");e.className="treeItems";i.append(e);r.push({parent:e,items:t.items})}e.parent.append(i);s++}}this._finishRendering(n,s,a)}async _currentOutlineItem(){if(!this._isPagesLoaded)throw new Error("_currentOutlineItem: All pages have not been loaded.");if(!this._outline||!this._pdfDocument)return;const e=await this._getPageNumberToDestHash(this._pdfDocument);if(e){this._updateCurrentTreeItem(null);if(this._sidebarView===s.SidebarView.OUTLINE)for(let t=this._currentPageNumber;t>0;t--){const i=e.get(t);if(!i)continue;const n=this.container.querySelector(`a[href="${i}"]`);if(n){this._scrollToCurrentTreeItem(n.parentNode);break}}}}async _getPageNumberToDestHash(e){if(this._pageNumberToDestHashCapability)return this._pageNumberToDestHashCapability.promise;this._pageNumberToDestHashCapability=(0,r.createPromiseCapability)();const t=new Map,i=new Map,n=[{nesting:0,items:this._outline}];for(;n.length>0;){const r=n.shift(),s=r.nesting;for(const{dest:a,items:o}of r.items){let r,l;if("string"==typeof a){r=await e.getDestination(a);if(e!==this._pdfDocument)return null}else r=a;if(Array.isArray(r)){const[n]=r;if("object"==typeof n&&null!==n){l=this.linkService._cachedPageNumber(n);if(!l)try{l=await e.getPageIndex(n)+1;if(e!==this._pdfDocument)return null;this.linkService.cachePageRef(l,n)}catch(e){}}else Number.isInteger(n)&&(l=n+1);if(Number.isInteger(l)&&(!t.has(l)||s>i.get(l))){const e=this.linkService.getDestinationHash(a);t.set(l,e);i.set(l,s)}}o.length>0&&n.push({nesting:s+1,items:o})}}this._pageNumberToDestHashCapability.resolve(t.size>0?t:null);return this._pageNumberToDestHashCapability.promise}}t.PDFOutlineViewer=PDFOutlineViewer},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPresentationMode=void 0;var n=i(1),r=i(5);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const s="pdfPresentationMode",a="pdfPresentationModeControls",o=Math.PI/6;var l=new WeakMap,c=new WeakMap,d=new WeakSet,h=new WeakSet,u=new WeakSet,p=new WeakSet,g=new WeakSet,f=new WeakSet,m=new WeakSet,v=new WeakSet,_=new WeakSet,b=new WeakSet,w=new WeakSet,y=new WeakSet,P=new WeakSet,S=new WeakSet,E=new WeakSet;t.PDFPresentationMode=class PDFPresentationMode{constructor(e){let{container:t,pdfViewer:i,eventBus:r}=e;_classPrivateMethodInitSpec(this,E);_classPrivateMethodInitSpec(this,S);_classPrivateMethodInitSpec(this,P);_classPrivateMethodInitSpec(this,y);_classPrivateMethodInitSpec(this,w);_classPrivateMethodInitSpec(this,b);_classPrivateMethodInitSpec(this,_);_classPrivateMethodInitSpec(this,v);_classPrivateMethodInitSpec(this,m);_classPrivateMethodInitSpec(this,f);_classPrivateMethodInitSpec(this,g);_classPrivateMethodInitSpec(this,p);_classPrivateMethodInitSpec(this,u);_classPrivateMethodInitSpec(this,h);_classPrivateMethodInitSpec(this,d);_classPrivateFieldInitSpec(this,l,{writable:!0,value:n.PresentationModeState.UNKNOWN});_classPrivateFieldInitSpec(this,c,{writable:!0,value:null});this.container=t;this.pdfViewer=i;this.eventBus=r;this.contextMenuOpen=!1;this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0;this.touchSwipeState=null}async request(){const{container:e,pdfViewer:t}=this;if(this.active||!t.pagesCount||!e.requestFullscreen)return!1;_classPrivateMethodGet(this,S,_addFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,h,_notifyStateChange2).call(this,n.PresentationModeState.CHANGING);const i=e.requestFullscreen();_classPrivateFieldSet(this,c,{pageNumber:t.currentPageNumber,scaleValue:t.currentScaleValue,scrollMode:t.scrollMode,spreadMode:null,annotationEditorMode:null});if(!(t.spreadMode===n.SpreadMode.NONE||t.pageViewsReady&&t.hasEqualPageSizes)){console.warn("Ignoring Spread modes when entering PresentationMode, since the document may contain varying page sizes.");_classPrivateFieldGet(this,c).spreadMode=t.spreadMode}t.annotationEditorMode!==r.AnnotationEditorType.DISABLE&&(_classPrivateFieldGet(this,c).annotationEditorMode=t.annotationEditorMode);try{await i;t.focus();return!0}catch(e){_classPrivateMethodGet(this,E,_removeFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,h,_notifyStateChange2).call(this,n.PresentationModeState.NORMAL)}return!1}get active(){return _classPrivateFieldGet(this,l)===n.PresentationModeState.CHANGING||_classPrivateFieldGet(this,l)===n.PresentationModeState.FULLSCREEN}_prepareFullscreenMode(){const e=document.getElementsByClassName("zoom")[0].parentElement,t=e.parentElement;this.ngxContainer=t;for(let i=0;i<t.childElementCount;i++)t.children.item(i)===e&&(this.ngxContainerIndex=i);t.removeChild(e);document.body.append(e);const i=document.body.children;for(let t=0;t<i.length;t++){const n=i.item(t);n!==e&&n instanceof HTMLElement&&n.classList.add("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.add("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.add("hidden-by-fullscreen")}_tidyUpFullscreenMode(){if(this.ngxContainer){const e=document.getElementsByClassName("zoom")[0].parentElement;document.body.removeChild(e);this.ngxContainerIndex>=this.ngxContainer.childElementCount?this.ngxContainer.append(e):this.ngxContainer.insertBefore(e,this.ngxContainer.children.item(this.ngxContainerIndex));this.ngxContainer=void 0;const t=document.body.children;for(let i=0;i<t.length;i++){const n=t.item(i);n!==e&&n instanceof HTMLElement&&n.classList.contains("hidden-by-fullscreen")&&n.classList.remove("hidden-by-fullscreen")}document.getElementById("sidebarContainer").classList.remove("hidden-by-fullscreen");document.getElementsByClassName("toolbar")[0].classList.remove("hidden-by-fullscreen")}}};function _mouseWheel2(e){if(!this.active)return;e.preventDefault();const t=(0,n.normalizeWheelEventDelta)(e),i=Date.now(),r=this.mouseScrollTimeStamp;if(!(i>r&&i-r<50)){(this.mouseScrollDelta>0&&t<0||this.mouseScrollDelta<0&&t>0)&&_classPrivateMethodGet(this,_,_resetMouseScrollState2).call(this);this.mouseScrollDelta+=t;if(Math.abs(this.mouseScrollDelta)>=.1){const e=this.mouseScrollDelta;_classPrivateMethodGet(this,_,_resetMouseScrollState2).call(this);(e>0?this.pdfViewer.previousPage():this.pdfViewer.nextPage())&&(this.mouseScrollTimeStamp=i)}}}function _notifyStateChange2(e){_classPrivateFieldSet(this,l,e);this.eventBus.dispatch("presentationmodechanged",{source:this,state:e})}function _enter2(){_classPrivateMethodGet(this,h,_notifyStateChange2).call(this,n.PresentationModeState.FULLSCREEN);this.container.classList.add(s);setTimeout((()=>{this.pdfViewer.scrollMode=n.ScrollMode.PAGE;null!==_classPrivateFieldGet(this,c).spreadMode&&(this.pdfViewer.spreadMode=n.SpreadMode.NONE);this.pdfViewer.currentPageNumber=_classPrivateFieldGet(this,c).pageNumber;this.pdfViewer.currentScaleValue="page-fit";null!==_classPrivateFieldGet(this,c).annotationEditorMode&&(this.pdfViewer.annotationEditorMode=r.AnnotationEditorType.NONE)}),0);_classPrivateMethodGet(this,w,_addWindowListeners2).call(this);_classPrivateMethodGet(this,m,_showControls2).call(this);this.contextMenuOpen=!1;window.getSelection().removeAllRanges()}function _exit2(){const e=this.pdfViewer.currentPageNumber;this.container.classList.remove(s);setTimeout((()=>{_classPrivateMethodGet(this,E,_removeFullscreenChangeListeners2).call(this);_classPrivateMethodGet(this,h,_notifyStateChange2).call(this,n.PresentationModeState.NORMAL);this.pdfViewer.scrollMode=_classPrivateFieldGet(this,c).scrollMode;null!==_classPrivateFieldGet(this,c).spreadMode&&(this.pdfViewer.spreadMode=_classPrivateFieldGet(this,c).spreadMode);this.pdfViewer.currentScaleValue=_classPrivateFieldGet(this,c).scaleValue;this.pdfViewer.currentPageNumber=e;null!==_classPrivateFieldGet(this,c).annotationEditorMode&&(this.pdfViewer.annotationEditorMode=_classPrivateFieldGet(this,c).annotationEditorMode);_classPrivateFieldSet(this,c,null)}),0);_classPrivateMethodGet(this,y,_removeWindowListeners2).call(this);_classPrivateMethodGet(this,v,_hideControls2).call(this);_classPrivateMethodGet(this,_,_resetMouseScrollState2).call(this);this.contextMenuOpen=!1}function _mouseDown2(e){if(this.contextMenuOpen){this.contextMenuOpen=!1;e.preventDefault()}else if(0===e.button){if(!(e.target.href&&e.target.classList.contains("internalLink"))){e.preventDefault();e.shiftKey?this.pdfViewer.previousPage():this.pdfViewer.nextPage()}}}function _contextMenu2(){this.contextMenuOpen=!0}function _showControls2(){this.controlsTimeout?clearTimeout(this.controlsTimeout):this.container.classList.add(a);this.controlsTimeout=setTimeout((()=>{this.container.classList.remove(a);delete this.controlsTimeout}),3e3)}function _hideControls2(){if(this.controlsTimeout){clearTimeout(this.controlsTimeout);this.container.classList.remove(a);delete this.controlsTimeout}}function _resetMouseScrollState2(){this.mouseScrollTimeStamp=0;this.mouseScrollDelta=0}function _touchSwipe2(e){if(this.active)if(e.touches.length>1)this.touchSwipeState=null;else switch(e.type){case"touchstart":this.touchSwipeState={startX:e.touches[0].pageX,startY:e.touches[0].pageY,endX:e.touches[0].pageX,endY:e.touches[0].pageY};break;case"touchmove":if(null===this.touchSwipeState)return;this.touchSwipeState.endX=e.touches[0].pageX;this.touchSwipeState.endY=e.touches[0].pageY;e.preventDefault();break;case"touchend":if(null===this.touchSwipeState)return;let t=0;const i=this.touchSwipeState.endX-this.touchSwipeState.startX,n=this.touchSwipeState.endY-this.touchSwipeState.startY,r=Math.abs(Math.atan2(n,i));Math.abs(i)>50&&(r<=o||r>=Math.PI-o)?t=i:Math.abs(n)>50&&Math.abs(r-Math.PI/2)<=o&&(t=n);t>0?this.pdfViewer.previousPage():t<0&&this.pdfViewer.nextPage()}}function _addWindowListeners2(){this.showControlsBind=_classPrivateMethodGet(this,m,_showControls2).bind(this);this.mouseDownBind=_classPrivateMethodGet(this,g,_mouseDown2).bind(this);this.mouseWheelBind=_classPrivateMethodGet(this,d,_mouseWheel2).bind(this);this.resetMouseScrollStateBind=_classPrivateMethodGet(this,_,_resetMouseScrollState2).bind(this);this.contextMenuBind=_classPrivateMethodGet(this,f,_contextMenu2).bind(this);this.touchSwipeBind=_classPrivateMethodGet(this,b,_touchSwipe2).bind(this);window.addEventListener("mousemove",this.showControlsBind);window.addEventListener("mousedown",this.mouseDownBind);window.addEventListener("wheel",this.mouseWheelBind,{passive:!1});window.addEventListener("keydown",this.resetMouseScrollStateBind);window.addEventListener("contextmenu",this.contextMenuBind);window.addEventListener("touchstart",this.touchSwipeBind);window.addEventListener("touchmove",this.touchSwipeBind);window.addEventListener("touchend",this.touchSwipeBind)}function _removeWindowListeners2(){window.removeEventListener("mousemove",this.showControlsBind);window.removeEventListener("mousedown",this.mouseDownBind);window.removeEventListener("wheel",this.mouseWheelBind,{passive:!1});window.removeEventListener("keydown",this.resetMouseScrollStateBind);window.removeEventListener("contextmenu",this.contextMenuBind);window.removeEventListener("touchstart",this.touchSwipeBind);window.removeEventListener("touchmove",this.touchSwipeBind);window.removeEventListener("touchend",this.touchSwipeBind);delete this.showControlsBind;delete this.mouseDownBind;delete this.mouseWheelBind;delete this.resetMouseScrollStateBind;delete this.contextMenuBind;delete this.touchSwipeBind}function _fullscreenChange2(){document.fullscreenElement?_classPrivateMethodGet(this,u,_enter2).call(this):_classPrivateMethodGet(this,p,_exit2).call(this)}function _addFullscreenChangeListeners2(){this.fullscreenChangeBind=_classPrivateMethodGet(this,P,_fullscreenChange2).bind(this);window.addEventListener("fullscreenchange",this.fullscreenChangeBind)}function _removeFullscreenChangeListeners2(){window.removeEventListener("fullscreenchange",this.fullscreenChangeBind);delete this.fullscreenChangeBind}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFRenderingQueue=void 0;var n=i(5),r=i(1);t.PDFRenderingQueue=class PDFRenderingQueue{constructor(){this.pdfViewer=null;this.pdfThumbnailViewer=null;this.onIdle=null;this.highestPriorityPage=null;this.idleTimeout=null;this.printing=!1;this.isThumbnailViewEnabled=!1}setViewer(e){this.pdfViewer=e}setThumbnailViewer(e){this.pdfThumbnailViewer=e}isHighestPriority(e){return this.highestPriorityPage===e.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(e){var t;if(this.idleTimeout){clearTimeout(this.idleTimeout);this.idleTimeout=null}this.pdfViewer.forceRendering(e)||this.isThumbnailViewEnabled&&null!==(t=this.pdfThumbnailViewer)&&void 0!==t&&t.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4))}getHighestPriority(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=e.views,s=r.length;if(0===s)return null;for(let e=0;e<s;e++){const t=r[e].view;if(!this.isViewFinished(t))return t}const a=e.first.id,o=e.last.id;if(o-a+1>s){const n=e.ids;for(let e=1,r=o-a;e<r;e++){const r=i?a+e:o-e;if(n.has(r))continue;const s=t[r-1];if(!this.isViewFinished(s))return s}}let l=i?o:a-2,c=t[l];if(c&&!this.isViewFinished(c))return c;if(n){l+=i?1:-1;c=t[l];if(c&&!this.isViewFinished(c))return c}return null}isViewFinished(e){return e.renderingState===r.RenderingStates.FINISHED}renderView(e){switch(e.renderingState){case r.RenderingStates.FINISHED:return!1;case r.RenderingStates.PAUSED:this.highestPriorityPage=e.renderingId;e.resume();break;case r.RenderingStates.RUNNING:this.highestPriorityPage=e.renderingId;break;case r.RenderingStates.INITIAL:this.highestPriorityPage=e.renderingId;e.draw().finally((()=>{this.renderHighestPriority()})).catch((e=>{e instanceof n.RenderingCancelledException||Window.ngxConsole.error(`renderView: "${e}"`)}))}return!0}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFScriptingManager=void 0;var n=i(1),r=i(5);t.PDFScriptingManager=class PDFScriptingManager{constructor(e){let{eventBus:t,sandboxBundleSrc:i=null,scriptingFactory:n=null,docPropertiesLookup:r=null}=e;this._pdfDocument=null;this._pdfViewer=null;this._closeCapability=null;this._destroyCapability=null;this._scripting=null;this._mouseState=Object.create(null);this._ready=!1;this._eventBus=t;this._sandboxBundleSrc=i;this._scriptingFactory=n;this._docPropertiesLookup=r}setViewer(e){this._pdfViewer=e}async setDocument(e){var t;this._pdfDocument&&await this._destroyScripting();this._pdfDocument=e;if(!e)return;const[i,n,r]=await Promise.all([e.getFieldObjects(),e.getCalculationOrderIds(),e.getJSActions()]);if(!i&&!r){await this._destroyScripting();return}if(e!==this._pdfDocument)return;try{this._scripting=this._createScripting()}catch(e){Window.ngxConsole.error(`PDFScriptingManager.setDocument: "${null==e?void 0:e.message}".`);await this._destroyScripting();return}this._internalEvents.set("updatefromsandbox",(e=>{(null==e?void 0:e.source)===window&&this._updateFromSandbox(e.detail)}));this._internalEvents.set("dispatcheventinsandbox",(e=>{var t;null===(t=this._scripting)||void 0===t||t.dispatchEventInSandbox(e.detail)}));this._internalEvents.set("pagechanging",(e=>{let{pageNumber:t,previous:i}=e;if(t!==i){this._dispatchPageClose(i);this._dispatchPageOpen(t)}}));this._internalEvents.set("pagerendered",(e=>{let{pageNumber:t}=e;this._pageOpenPending.has(t)&&t===this._pdfViewer.currentPageNumber&&this._dispatchPageOpen(t)}));this._internalEvents.set("pagesdestroy",(async e=>{var t,i;await this._dispatchPageClose(this._pdfViewer.currentPageNumber);await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillClose"}));null===(i=this._closeCapability)||void 0===i||i.resolve()}));this._domEvents.set("mousedown",(e=>{this._mouseState.isDown=!0}));this._domEvents.set("mouseup",(e=>{this._mouseState.isDown=!1}));for(const[e,t]of this._internalEvents)this._eventBus._on(e,t);const s=document.querySelector(".pdfViewer");for(const[e,t]of this._domEvents)s.addEventListener(e,t,!0);try{const t=await this._getDocProperties();if(e!==this._pdfDocument)return;await this._scripting.createSandbox({objects:i,calculationOrder:n,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...t,actions:r}});this._eventBus.dispatch("sandboxcreated",{source:this})}catch(e){Window.ngxConsole.error(`PDFScriptingManager.setDocument: "${null==e?void 0:e.message}".`);await this._destroyScripting();return}await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"Open"}));await this._dispatchPageOpen(this._pdfViewer.currentPageNumber,!0);Promise.resolve().then((()=>{e===this._pdfDocument&&(this._ready=!0)}))}async dispatchWillSave(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillSave"})}async dispatchDidSave(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidSave"})}async dispatchWillPrint(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"WillPrint"})}async dispatchDidPrint(e){var t;return null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"doc",name:"DidPrint"})}get mouseState(){return this._mouseState}get destroyPromise(){var e;return(null===(e=this._destroyCapability)||void 0===e?void 0:e.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,r.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,r.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,r.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,r.shadow)(this,"_visitedPages",new Map)}async _updateFromSandbox(e){const t=this._pdfViewer.isInPresentationMode||this._pdfViewer.isChangingPresentationMode,{id:i,siblings:r,command:s,value:a}=e;if(!i){switch(s){case"clear":Window.ngxConsole.clear();break;case"error":Window.ngxConsole.error(a);break;case"layout":if(t)return;const e=(0,n.apiPageLayoutToViewerModes)(a);this._pdfViewer.spreadMode=e.spreadMode;break;case"page-num":this._pdfViewer.currentPageNumber=a+1;break;case"print":await this._pdfViewer.pagesPromise;this._eventBus.dispatch("print",{source:this});break;case"println":Window.ngxConsole.log(a);break;case"zoom":if(t)return;this._pdfViewer.currentScaleValue=a;break;case"SaveAs":this._eventBus.dispatch("download",{source:this});break;case"FirstPage":this._pdfViewer.currentPageNumber=1;break;case"LastPage":this._pdfViewer.currentPageNumber=this._pdfViewer.pagesCount;break;case"NextPage":this._pdfViewer.nextPage();break;case"PrevPage":this._pdfViewer.previousPage();break;case"ZoomViewIn":if(t)return;this._pdfViewer.increaseScale();break;case"ZoomViewOut":if(t)return;this._pdfViewer.decreaseScale()}return}if(t&&e.focus)return;delete e.id;delete e.siblings;const o=r?[i,...r]:[i];for(const t of o){const i=document.querySelector(`[data-element-id="${t}"]`);if(i)i.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:e}));else{var l;null===(l=this._pdfDocument)||void 0===l||l.annotationStorage.setValue(t,void 0,e)}}}async _dispatchPageOpen(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._pdfDocument,s=this._visitedPages;t&&(this._closeCapability=(0,r.createPromiseCapability)());if(!this._closeCapability)return;const a=this._pdfViewer.getPageView(e-1);if((null==a?void 0:a.renderingState)!==n.RenderingStates.FINISHED){this._pageOpenPending.add(e);return}this._pageOpenPending.delete(e);const o=(async()=>{var t,n;const r=await(s.has(e)?null:null===(t=a.pdfPage)||void 0===t?void 0:t.getJSActions());i===this._pdfDocument&&await(null===(n=this._scripting)||void 0===n?void 0:n.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:e,actions:r}))})();s.set(e,o)}async _dispatchPageClose(e){var t;const i=this._pdfDocument,n=this._visitedPages;if(!this._closeCapability)return;if(this._pageOpenPending.has(e))return;const r=n.get(e);if(r){n.set(e,null);await r;i===this._pdfDocument&&await(null===(t=this._scripting)||void 0===t?void 0:t.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:e}))}}async _getDocProperties(){if(this._docPropertiesLookup)return this._docPropertiesLookup(this._pdfDocument);throw new Error("_getDocProperties: Unable to lookup properties.")}_createScripting(){this._destroyCapability=(0,r.createPromiseCapability)();if(this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});throw new Error("_createScripting: Cannot create scripting.")}async _destroyScripting(){var e;if(this._scripting){if(this._closeCapability){await Promise.race([this._closeCapability.promise,new Promise((e=>{setTimeout(e,1e3)}))]).catch((e=>{}));this._closeCapability=null}this._pdfDocument=null;try{await this._scripting.destroySandbox()}catch(e){}for(const[e,t]of this._internalEvents)this._eventBus._off(e,t);this._internalEvents.clear();for(const[e,t]of this._domEvents)window.removeEventListener(e,t,!0);this._domEvents.clear();this._pageOpenPending.clear();this._visitedPages.clear();this._scripting=null;delete this._mouseState.isDown;this._ready=!1;null===(e=this._destroyCapability)||void 0===e||e.resolve()}else{var t;this._pdfDocument=null;null===(t=this._destroyCapability)||void 0===t||t.resolve()}}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFSidebar=void 0;var n=i(1);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const r="pdfSidebarNotification";var s=new WeakSet,a=new WeakSet,o=new WeakSet,l=new WeakSet,c=new WeakSet,d=new WeakSet;t.PDFSidebar=class PDFSidebar{constructor(e){let{elements:t,pdfViewer:i,pdfThumbnailViewer:r,eventBus:h,l10n:u}=e;_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);_classPrivateMethodInitSpec(this,s);this.isOpen=!1;this.active=n.SidebarView.THUMBS;this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;this.onToggled=null;this.pdfViewer=i;this.pdfThumbnailViewer=r;this.outerContainer=t.outerContainer;this.sidebarContainer=t.sidebarContainer;this.toggleButton=t.toggleButton;this.thumbnailButton=t.thumbnailButton;this.outlineButton=t.outlineButton;this.attachmentsButton=t.attachmentsButton;this.layersButton=t.layersButton;this.thumbnailView=t.thumbnailView;this.outlineView=t.outlineView;this.attachmentsView=t.attachmentsView;this.layersView=t.layersView;this._outlineOptionsContainer=t.outlineOptionsContainer;this._currentOutlineItemButton=t.currentOutlineItemButton;this.eventBus=h;this.l10n=u;_classPrivateMethodGet(this,d,_addEventListeners2).call(this)}reset(){this.isInitialViewSet=!1;this.isInitialEventDispatched=!1;_classPrivateMethodGet(this,c,_hideUINotification2).call(this,!0);this.switchView(n.SidebarView.THUMBS);this.outlineButton.disabled=!1;this.attachmentsButton.disabled=!1;this.layersButton.disabled=!1;this.outlineButton.hidden=!1;this.attachmentsButton.hidden=!1;this.layersButton.hidden=!1;this._currentOutlineItemButton.disabled=!0}get visibleView(){return this.isOpen?this.active:n.SidebarView.NONE}setInitialView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.SidebarView.NONE;if(!this.isInitialViewSet){this.isInitialViewSet=!0;if(e!==n.SidebarView.NONE&&e!==n.SidebarView.UNKNOWN){this.switchView(e,!0);this.isInitialEventDispatched||_classPrivateMethodGet(this,s,_dispatchEvent2).call(this)}else _classPrivateMethodGet(this,s,_dispatchEvent2).call(this)}}switchView(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e!==this.active;let r=!1;switch(e){case n.SidebarView.NONE:this.isOpen&&this.close();return;case n.SidebarView.THUMBS:this.isOpen&&i&&(r=!0);break;case n.SidebarView.OUTLINE:if(this.outlineButton.disabled)return;break;case n.SidebarView.ATTACHMENTS:if(this.attachmentsButton.disabled)return;break;case n.SidebarView.LAYERS:if(this.layersButton.disabled)return;break;default:Window.ngxConsole.error(`PDFSidebar.switchView: "${e}" is not a valid view.`);return}this.active=e;const l=e===n.SidebarView.THUMBS,c=e===n.SidebarView.OUTLINE,d=e===n.SidebarView.ATTACHMENTS,h=e===n.SidebarView.LAYERS;this.thumbnailButton.classList.toggle("toggled",l);this.outlineButton.classList.toggle("toggled",c);this.attachmentsButton.classList.toggle("toggled",d);this.layersButton.classList.toggle("toggled",h);this.thumbnailButton.setAttribute("aria-checked",l);this.outlineButton.setAttribute("aria-checked",c);this.attachmentsButton.setAttribute("aria-checked",d);this.layersButton.setAttribute("aria-checked",h);this.thumbnailView.classList.toggle("hidden",!l);this.outlineView.classList.toggle("hidden",!c);this.attachmentsView.classList.toggle("hidden",!d);this.layersView.classList.toggle("hidden",!h);this._outlineOptionsContainer.classList.toggle("hidden",!c);if(!t||this.isOpen){if(r){_classPrivateMethodGet(this,o,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,a,_forceRendering2).call(this)}i&&_classPrivateMethodGet(this,s,_dispatchEvent2).call(this)}else this.open()}open(){if(!this.isOpen){this.isOpen=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.outerContainer.classList.add("sidebarMoving","sidebarOpen");this.active===n.SidebarView.THUMBS&&_classPrivateMethodGet(this,o,_updateThumbnailViewer2).call(this);_classPrivateMethodGet(this,a,_forceRendering2).call(this);_classPrivateMethodGet(this,s,_dispatchEvent2).call(this);_classPrivateMethodGet(this,c,_hideUINotification2).call(this)}}close(){if(this.isOpen){this.isOpen=!1;this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false");this.outerContainer.classList.add("sidebarMoving");this.outerContainer.classList.remove("sidebarOpen");_classPrivateMethodGet(this,a,_forceRendering2).call(this);_classPrivateMethodGet(this,s,_dispatchEvent2).call(this)}}toggle(){this.isOpen?this.close():this.open()}};function _dispatchEvent2(){this.isInitialViewSet&&!this.isInitialEventDispatched&&(this.isInitialEventDispatched=!0);this.eventBus.dispatch("sidebarviewchanged",{source:this,view:this.visibleView})}function _forceRendering2(){if(this.onToggled)this.onToggled();else{this.pdfViewer.forceRendering();this.pdfThumbnailViewer.forceRendering()}}function _updateThumbnailViewer2(){const{pdfViewer:e,pdfThumbnailViewer:t}=this,i=e.pagesCount;for(let r=0;r<i;r++){const i=e.getPageView(r);if((null==i?void 0:i.renderingState)===n.RenderingStates.FINISHED){t.getThumbnail(r).setImage(i)}}t.scrollThumbnailIntoView(e.currentPageNumber)}function _showUINotification2(){this.l10n.get("toggle_sidebar_notification2.title").then((e=>{this.toggleButton.title=e}));this.isOpen||this.toggleButton.classList.add(r)}function _hideUINotification2(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(this.isOpen||e)&&this.toggleButton.classList.remove(r);e&&this.l10n.get("toggle_sidebar.title").then((e=>{this.toggleButton.title=e}))}function _addEventListeners2(){this.sidebarContainer.addEventListener("transitionend",(e=>{e.target===this.sidebarContainer&&this.outerContainer.classList.remove("sidebarMoving")}));this.toggleButton.addEventListener("click",(()=>{this.toggle()}));this.thumbnailButton.addEventListener("click",(()=>{this.switchView(n.SidebarView.THUMBS)}));this.outlineButton.addEventListener("click",(()=>{this.switchView(n.SidebarView.OUTLINE)}));this.outlineButton.addEventListener("dblclick",(()=>{this.eventBus.dispatch("toggleoutlinetree",{source:this})}));this.attachmentsButton.addEventListener("click",(()=>{this.switchView(n.SidebarView.ATTACHMENTS)}));this.layersButton.addEventListener("click",(()=>{this.switchView(n.SidebarView.LAYERS)}));this.layersButton.addEventListener("dblclick",(()=>{this.eventBus.dispatch("resetlayers",{source:this})}));this._currentOutlineItemButton.addEventListener("click",(()=>{this.eventBus.dispatch("currentoutlineitem",{source:this})}));const onTreeLoaded=(e,t,i)=>{t.disabled=!e;t.hidden=!e;e?_classPrivateMethodGet(this,l,_showUINotification2).call(this):this.active===i&&this.switchView(n.SidebarView.THUMBS)};this.eventBus._on("outlineloaded",(e=>{onTreeLoaded(e.outlineCount,this.outlineButton,n.SidebarView.OUTLINE);e.enableCurrentOutlineItemButton&&e.currentOutlineItemPromise&&e.currentOutlineItemPromise.then((e=>{this.isInitialViewSet&&(this._currentOutlineItemButton.disabled=!e)}))}));this.eventBus._on("attachmentsloaded",(e=>{onTreeLoaded(e.attachmentsCount,this.attachmentsButton,n.SidebarView.ATTACHMENTS)}));this.eventBus._on("layersloaded",(e=>{onTreeLoaded(e.layersCount,this.layersButton,n.SidebarView.LAYERS)}));this.eventBus._on("presentationmodechanged",(e=>{e.state===n.PresentationModeState.NORMAL&&this.visibleView===n.SidebarView.THUMBS&&_classPrivateMethodGet(this,o,_updateThumbnailViewer2).call(this)}))}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFSidebarResizer=void 0;var n=i(1);const r="sidebarResizing";t.PDFSidebarResizer=class PDFSidebarResizer{constructor(e,t,i){this.isRTL=!1;this.sidebarOpen=!1;this._width=null;this._outerContainerWidth=null;this._boundEvents=Object.create(null);this.outerContainer=e.outerContainer;this.resizer=e.resizer;this.eventBus=t;i.getDirection().then((e=>{this.isRTL="rtl"===e}));this._addEventListeners()}get outerContainerWidth(){return this._outerContainerWidth||(this._outerContainerWidth=this.outerContainer.clientWidth)}_updateWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=Math.floor(this.outerContainerWidth/2);e>t&&(e=t);e<200&&(e=200);if(e===this._width)return!1;this._width=e;n.docStyle.setProperty("--sidebar-width",`${e}px`);return!0}_mouseMove(e){let t=e.clientX;this.isRTL&&(t=this.outerContainerWidth-t);this._updateWidth(t)}_mouseUp(e){this.outerContainer.classList.remove(r);this.eventBus.dispatch("resize",{source:this});const t=this._boundEvents;window.removeEventListener("mousemove",t.mouseMove);window.removeEventListener("mouseup",t.mouseUp)}_addEventListeners(){const e=this._boundEvents;e.mouseMove=this._mouseMove.bind(this);e.mouseUp=this._mouseUp.bind(this);this.resizer.addEventListener("mousedown",(t=>{if(0===t.button){this.outerContainer.classList.add(r);window.addEventListener("mousemove",e.mouseMove);window.addEventListener("mouseup",e.mouseUp)}}));this.eventBus._on("sidebarviewchanged",(e=>{this.sidebarOpen=!(null==e||!e.view)}));this.eventBus._on("resize",(e=>{if((null==e?void 0:e.source)!==window)return;this._outerContainerWidth=null;if(!this._width)return;if(!this.sidebarOpen){this._updateWidth(this._width);return}this.outerContainer.classList.add(r);const t=this._updateWidth(this._width);Promise.resolve().then((()=>{this.outerContainer.classList.remove(r);t&&this.eventBus.dispatch("resize",{source:this})}))}))}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFThumbnailViewer=void 0;var n=i(1),r=i(30);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}const s="selected";var a=new WeakSet,o=new WeakSet;t.PDFThumbnailViewer=class PDFThumbnailViewer{constructor(e){let{container:t,eventBus:i,linkService:r,renderingQueue:s,l10n:l,pageColors:c}=e;_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);this.container=t;this.linkService=r;this.renderingQueue=s;this.l10n=l;this.pageColors=c||null;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&Window.ngxConsole.warn("PDFThumbnailViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.scroll=(0,n.watchScroll)(this.container,this._scrollUpdated.bind(this));this._resetView()}_scrollUpdated(){this.renderingQueue.renderHighestPriority()}getThumbnail(e){return this._thumbnails[e]}_getVisibleThumbs(){return(0,n.getVisibleElements)({scrollEl:this.container,views:this._thumbnails})}scrollThumbnailIntoView(e){if(!this.pdfDocument)return;const t=this._thumbnails[e-1];if(!t){Window.ngxConsole.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.');return}if(e!==this._currentPageNumber){this._thumbnails[this._currentPageNumber-1].div.classList.remove(s);t.div.classList.add(s)}const{first:i,last:r,views:a}=this._getVisibleThumbs();if(a.length>0){let s=!1;if(e<=i.id||e>=r.id)s=!0;else for(const{id:t,percent:i}of a)if(t===e){s=i<100;break}s&&(0,n.scrollIntoView)(t.div,{top:-19})}this._currentPageNumber=e}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,n.isValidRotation)(e))throw new Error("Invalid thumbnails rotation angle.");if(!this.pdfDocument)return;if(this._pagesRotation===e)return;this._pagesRotation=e;const t={rotation:e};for(const e of this._thumbnails)e.update(t)}cleanup(){for(const e of this._thumbnails)e.renderingState!==n.RenderingStates.FINISHED&&e.reset();r.TempImageFactory.destroyCanvas()}_resetView(){this._thumbnails=[];this._currentPageNumber=1;this._pageLabels=null;this._pagesRotation=0;this.container.textContent=""}setDocument(e){this.initialized=!1;if(this.pdfDocument){this._cancelRendering();this._resetView()}this.pdfDocument=e;if(!e)return;if(this.initialized)return;this.initialized=!0;const t=e.getPage(1),i=e.getOptionalContentConfig();t.then((t=>{const n=e.numPages,a=t.getViewport({scale:1});for(let e=1;e<=n;++e){const t=new r.PDFThumbnailView({container:this.container,id:e,defaultViewport:a.clone(),optionalContentConfigPromise:i,linkService:this.linkService,renderingQueue:this.renderingQueue,l10n:this.l10n,pageColors:this.pageColors});this._thumbnails.push(t)}const o=this._thumbnails[0];o&&o.setPdfPage(t);this._thumbnails[this._currentPageNumber-1].div.classList.add(s)})).catch((e=>{Window.ngxConsole.error("Unable to initialize thumbnail viewer",e)}))}_cancelRendering(){for(const e of this._thumbnails)e.cancelRendering()}setPageLabels(e){if(this.pdfDocument){if(e)if(Array.isArray(e)&&this.pdfDocument.numPages===e.length)this._pageLabels=e;else{this._pageLabels=null;Window.ngxConsole.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(let e=0,n=this._thumbnails.length;e<n;e++){var t,i;this._thumbnails[e].setPageLabel(null!==(t=null===(i=this._pageLabels)||void 0===i?void 0:i[e])&&void 0!==t?t:null)}}}forceRendering(){const e=this._getVisibleThumbs(),t=_classPrivateMethodGet(this,o,_getScrollAhead2).call(this,e),i=this.renderingQueue.getHighestPriority(e,this._thumbnails,t);if(i){_classPrivateMethodGet(this,a,_ensurePdfPageLoaded2).call(this,i).then((()=>{this.renderingQueue.renderView(i)}));return!0}return!1}};async function _ensurePdfPageLoaded2(e){if(e.pdfPage)return e.pdfPage;try{const t=await this.pdfDocument.getPage(e.id);e.pdfPage||e.setPdfPage(t);return t}catch(e){Window.ngxConsole.error("Unable to get page for thumb view",e);return null}}function _getScrollAhead2(e){var t,i;return 1===(null===(t=e.first)||void 0===t?void 0:t.id)||(null===(i=e.last)||void 0===i?void 0:i.id)!==this._thumbnails.length&&this.scroll.down}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TempImageFactory=t.PDFThumbnailView=void 0;var n=i(1),r=i(5);function _classStaticPrivateFieldSpecSet(e,t,i,n){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(i,"set");!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,i,n);return n}function _classStaticPrivateFieldSpecGet(e,t,i){_classCheckPrivateStaticAccess(e,t);_classCheckPrivateStaticFieldDescriptor(i,"get");return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,i)}function _classCheckPrivateStaticFieldDescriptor(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}class TempImageFactory{static getCanvas(e,t){const i=_classStaticPrivateFieldSpecGet(this,TempImageFactory,s)||_classStaticPrivateFieldSpecSet(this,TempImageFactory,s,document.createElement("canvas"));i.width=e;i.height=t;const n=i.getContext("2d",{alpha:!1});n.save();n.fillStyle="rgb(255, 255, 255)";n.fillRect(0,0,e,t);n.restore();return[i,i.getContext("2d")]}static destroyCanvas(){const e=_classStaticPrivateFieldSpecGet(this,TempImageFactory,s);if(e){e.width=0;e.height=0}_classStaticPrivateFieldSpecSet(this,TempImageFactory,s,null)}}t.TempImageFactory=TempImageFactory;var s={writable:!0,value:null};t.PDFThumbnailView=class PDFThumbnailView{constructor(e){let{container:t,id:i,defaultViewport:r,optionalContentConfigPromise:s,linkService:a,renderingQueue:o,l10n:l,pageColors:c}=e;this.id=i;this.renderingId="thumbnail"+i;this.pageLabel=null;this.pdfPage=null;this.rotation=0;this.viewport=r;this.pdfPageRotate=r.rotation;this._optionalContentConfigPromise=s||null;this.pageColors=c||null;this.linkService=a;this.renderingQueue=o;this.renderTask=null;this.renderingState=n.RenderingStates.INITIAL;this.resume=null;const d=this.viewport.width,h=d/this.viewport.height;this.canvasWidth=98;this.canvasHeight=this.canvasWidth/h|0;this.scale=this.canvasWidth/d;this.l10n=l;window.pdfThumbnailGenerator?window.pdfThumbnailGenerator(this,a,i,t,this._thumbPageTitle):this.createThumbnail(this,a,i,t,this._thumbPageTitle)}createThumbnail(e,t,i,n,r){const s=document.createElement("a");s.href=t.getAnchorUrl("#page="+i);r.then((e=>{s.title=e}));s.onclick=function(){t.goToPage(i);return!1};e.anchor=s;const a=document.createElement("div");a.className="thumbnail";a.setAttribute("data-page-number",this.id);e.div=a;const o=document.createElement("div");o.className="thumbnailSelectionRing";o.style.width=this.canvasWidth+2+"px";o.style.height=this.canvasHeight+2+"px";e.ring=o;a.append(o);s.append(a);n.append(s)}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:1,rotation:t});this.reset()}reset(){this.cancelRendering();this.renderingState=n.RenderingStates.INITIAL;const e=this.viewport.width,t=e/this.viewport.height;this.canvasHeight=this.canvasWidth/t|0;this.scale=this.canvasWidth/e;this.div.removeAttribute("data-loaded");const i=this.ring;i.textContent="";i.style.width=this.canvasWidth+2+"px";i.style.height=this.canvasHeight+2+"px";if(this.canvas){this.canvas.width=0;this.canvas.height=0;delete this.canvas}if(this.image){this.image.removeAttribute("src");delete this.image}}update(e){let{rotation:t=null}=e;"number"==typeof t&&(this.rotation=t);const i=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:1,rotation:i});this.reset()}cancelRendering(){if(this.renderTask){this.renderTask.cancel();this.renderTask=null}this.resume=null}_getPageDrawContext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=document.createElement("canvas"),i=t.getContext("2d",{alpha:!1}),r=new n.OutputScale;t.width=e*this.canvasWidth*r.sx|0;t.height=e*this.canvasHeight*r.sy|0;return{ctx:i,canvas:t,transform:r.scaled?[r.sx,0,0,r.sy,0,0]:null}}_convertCanvasToImage(e){if(this.renderingState!==n.RenderingStates.FINISHED)throw new Error("_convertCanvasToImage: Rendering has not finished.");const t=this._reduceImage(e),i=document.createElement("img");i.className="thumbnailImage";this._thumbPageCanvas.then((e=>{i.setAttribute("aria-label",e)}));i.style.width=this.canvasWidth+"px";i.style.height=this.canvasHeight+"px";i.src=t.toDataURL();this.image=i;this.div.setAttribute("data-loaded",!0);this.ring.append(i);t.width=0;t.height=0}draw(){var e=this;if(this.renderingState!==n.RenderingStates.INITIAL){Window.ngxConsole.error("Must be in new state before drawing");return Promise.resolve()}const{pdfPage:t}=this;if(!t){this.renderingState=n.RenderingStates.FINISHED;return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=n.RenderingStates.RUNNING;const finishRenderTask=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l===e.renderTask&&(e.renderTask=null);if(!(t instanceof r.RenderingCancelledException)){e.renderingState=n.RenderingStates.FINISHED;e._convertCanvasToImage(s);if(t)throw t}},{ctx:i,canvas:s,transform:a}=this._getPageDrawContext(2),o={canvasContext:i,transform:a,viewport:this.viewport.clone({scale:2*this.scale}),optionalContentConfigPromise:this._optionalContentConfigPromise,background:PDFViewerApplicationOptions.get("pdfBackgroundColor"),pageColors:this.pageColors},l=this.renderTask=t.render(o);l.onContinue=e=>{if(this.renderingQueue.isHighestPriority(this))e();else{this.renderingState=n.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=n.RenderingStates.RUNNING;e()}}};const c=l.promise.then((function(){return finishRenderTask(null)}),(function(e){return finishRenderTask(e)}));c.finally((()=>{s.width=0;s.height=0;if(!this.linkService.isPageCached(this.id)){var e;null===(e=this.pdfPage)||void 0===e||e.cleanup()}}));return c}setImage(e){if(this.renderingState!==n.RenderingStates.INITIAL)return;const{thumbnailCanvas:t,pdfPage:i,scale:r}=e;if(t){this.pdfPage||this.setPdfPage(i);if(!(r<this.scale)){this.renderingState=n.RenderingStates.FINISHED;this._convertCanvasToImage(t)}}}_reduceImage(e){const{ctx:t,canvas:i}=this._getPageDrawContext();if(e.width<=2*i.width){t.drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height);return i}let n=i.width<<3,r=i.height<<3;const[s,a]=TempImageFactory.getCanvas(n,r);for(;n>e.width||r>e.height;){n>>=1;r>>=1}a.drawImage(e,0,0,e.width,e.height,0,0,n,r);for(;n>2*i.width;){a.drawImage(s,0,0,n,r,0,0,n>>1,r>>1);n>>=1;r>>=1}t.drawImage(s,0,0,n,r,0,0,i.width,i.height);return i}get _thumbPageTitle(){var e;return this.l10n.get("thumb_page_title",{page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})}get _thumbPageCanvas(){var e;return this.l10n.get("thumb_page_canvas",{page:null!==(e=this.pageLabel)&&void 0!==e?e:this.id})}setPageLabel(e){this.pageLabel="string"==typeof e?e:null;this._thumbPageTitle.then((e=>{this.anchor.title=e}));this.renderingState===n.RenderingStates.FINISHED&&this._thumbPageCanvas.then((e=>{var t;null===(t=this.image)||void 0===t||t.setAttribute("aria-label",e)}))}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFViewer=t.PDFSinglePageViewer=void 0;var n=i(1),r=i(32);class PDFViewer extends r.BaseViewer{}t.PDFViewer=PDFViewer;class PDFSinglePageViewer extends r.BaseViewer{_resetView(){super._resetView();this._scrollMode=n.ScrollMode.PAGE;this._spreadMode=n.SpreadMode.NONE}set scrollMode(e){}_updateScrollMode(){}set spreadMode(e){}_updateSpreadMode(){}}t.PDFSinglePageViewer=PDFSinglePageViewer},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PagesCountLimit=t.PDFPageViewBuffer=t.BaseViewer=void 0;var n=i(5),r=i(1),s=i(33),a=i(35),o=i(34),l=i(36),c=i(37),d=i(25),h=i(3),u=i(169),p=i(170),g=i(171),f=i(172);let m;function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}const v="enablePermissions",_={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};t.PagesCountLimit=_;function isValidAnnotationEditorMode(e){return Object.values(n.AnnotationEditorType).includes(e)&&e!==n.AnnotationEditorType.DISABLE}var b=new WeakMap,w=new WeakMap,y=new WeakSet;m=Symbol.iterator;class PDFPageViewBuffer{constructor(e){_classPrivateMethodInitSpec(this,y);_classPrivateFieldInitSpec(this,b,{writable:!0,value:new Set});_classPrivateFieldInitSpec(this,w,{writable:!0,value:0});_classPrivateFieldSet(this,w,e)}push(e){const t=_classPrivateFieldGet(this,b);t.has(e)&&t.delete(e);t.add(e);t.size>_classPrivateFieldGet(this,w)&&_classPrivateMethodGet(this,y,_destroyFirstView2).call(this)}resize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;_classPrivateFieldSet(this,w,e);const i=_classPrivateFieldGet(this,b);if(t){const e=i.size;let n=1;for(const r of i){if(t.has(r.id)){i.delete(r);i.add(r)}if(++n>e)break}}for(;i.size>_classPrivateFieldGet(this,w);)_classPrivateMethodGet(this,y,_destroyFirstView2).call(this)}has(e){return _classPrivateFieldGet(this,b).has(e)}[m](){return _classPrivateFieldGet(this,b).keys()}}t.PDFPageViewBuffer=PDFPageViewBuffer;function _destroyFirstView2(){const e=_classPrivateFieldGet(this,b).keys().next().value;null==e||e.destroy();_classPrivateFieldGet(this,b).delete(e)}var P=new WeakMap,S=new WeakMap,E=new WeakMap,A=new WeakMap,x=new WeakMap,C=new WeakMap,T=new WeakMap,M=new WeakMap,k=new WeakSet,I=new WeakSet,D=new WeakSet,L=new WeakSet,R=new WeakSet,O=new WeakSet,N=new WeakSet,B=new WeakSet,G=new WeakSet;class BaseViewer{constructor(e){var t,i,s,a,l;_classPrivateMethodInitSpec(this,G);_classPrivateMethodInitSpec(this,B);_classPrivateMethodInitSpec(this,N);_classPrivateMethodInitSpec(this,O);_classPrivateMethodInitSpec(this,R);_classPrivateMethodInitSpec(this,L);_classPrivateMethodInitSpec(this,D);_classPrivateMethodInitSpec(this,I);_classPrivateMethodInitSpec(this,k);_classPrivateFieldInitSpec(this,P,{writable:!0,value:null});_classPrivateFieldInitSpec(this,S,{writable:!0,value:n.AnnotationEditorType.DISABLE});_classPrivateFieldInitSpec(this,E,{writable:!0,value:null});_classPrivateFieldInitSpec(this,A,{writable:!0,value:n.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,x,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,C,{writable:!0,value:0});_classPrivateFieldInitSpec(this,T,{writable:!0,value:null});_classPrivateFieldInitSpec(this,M,{writable:!0,value:null});if(this.constructor===BaseViewer)throw new Error("Cannot initialize BaseViewer.");const c="2.16.446";if(n.version!==c)throw new Error(`The API version "${n.version}" does not match the Viewer version "2.16.446".`);this.container=e.container;this.viewer=e.viewer||e.container.firstElementChild;this.pageViewMode=e.pageViewMode||"multiple";if("DIV"!==(null===(t=this.container)||void 0===t?void 0:t.tagName.toUpperCase())||"DIV"!==(null===(i=this.viewer)||void 0===i?void 0:i.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=e.eventBus;this.linkService=e.linkService||new h.SimpleLinkService;this.downloadManager=e.downloadManager||null;this.findController=e.findController||null;this._scriptingManager=e.scriptingManager||null;this.removePageBorders=e.removePageBorders||!1;this.textLayerMode=null!==(s=e.textLayerMode)&&void 0!==s?s:r.TextLayerMode.ENABLE;_classPrivateFieldSet(this,A,null!==(a=e.annotationMode)&&void 0!==a?a:n.AnnotationMode.ENABLE_FORMS);_classPrivateFieldSet(this,S,null!==(l=e.annotationEditorMode)&&void 0!==l?l:n.AnnotationEditorType.DISABLE);this.imageResourcesPath=e.imageResourcesPath||"";this.enablePrintAutoRotate=e.enablePrintAutoRotate||!1;this.renderer=e.renderer||r.RendererType.CANVAS;this.useOnlyCssZoom=e.useOnlyCssZoom||!1;this.maxCanvasPixels=e.maxCanvasPixels;this.l10n=e.l10n||o.NullL10n;_classPrivateFieldSet(this,x,e.enablePermissions||!1);this.pageColors=e.pageColors||null;if(this.pageColors&&(!CSS.supports("color",this.pageColors.background)||!CSS.supports("color",this.pageColors.foreground))){(this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used.");this.pageColors=null}this.defaultRenderingQueue=!e.renderingQueue;if(this.defaultRenderingQueue){this.renderingQueue=new d.PDFRenderingQueue;this.renderingQueue.setViewer(this)}else this.renderingQueue=e.renderingQueue;this.scroll=(0,r.watchScroll)(this.container,this._scrollUpdate.bind(this));this.presentationModeState=r.PresentationModeState.UNKNOWN;this._onBeforeDraw=this._onAfterDraw=null;this._resetView();this.removePageBorders&&this.viewer.classList.add("removePageBorders");this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(e){return this._pages[e]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every((function(e){return null==e?void 0:e.pdfPage}))}get renderForms(){return _classPrivateFieldGet(this,A)===n.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(e){if(!Number.isInteger(e))throw new Error("Invalid page number.");if(!this.pdfDocument)return;const t=Math.abs(this._currentPageNumber-e)<2;this._setCurrentPageNumber(e,!0)||Window.ngxConsole.error(`currentPageNumber: "${e}" is not a valid page.`);if(this.pageFlip)if(t){Window.ngxConsole.log("Flip");this.pageFlip.flip(e-1)}else{Window.ngxConsole.log("turn to page");this.pageFlip.turnToPage(e-1)}}hidePagesDependingOnpageViewMode(){"book"===this.pageViewMode&&(this.pageFlip||setTimeout((()=>{if(!this.pageFlip){const e=this._pages[0].div,t=e.parentElement,i=t.parentElement;i.style.width=2*e.clientWidth+"px";i.style.overflow="hidden";i.style.marginLeft="auto";i.style.marginRight="auto";this.pageFlip=new l.PageFlip(t,{width:e.clientWidth,height:e.clientHeight,showCover:!0,size:"fixed"});this.pageFlip.loadFromHTML(document.querySelectorAll(".page"));this.ensureAdjecentPagesAreLoaded();this.pageFlip.on("flip",(e=>{this._currentPageNumber!==e.data+1&&this._setCurrentPageNumber(e.data+1,!1)}))}}),100))}_setCurrentPageNumber(e){var t,i;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._currentPageNumber===e){n&&_classPrivateMethodGet(this,O,_resetCurrentPageView2).call(this);return!0}if(!(0<e&&e<=this.pagesCount))return!1;const r=this._currentPageNumber;this._currentPageNumber=e;this.hidePagesDependingOnpageViewMode();if("book"===this.pageViewMode||"infinite-scroll"===this.pageViewMode){const e=this._pages[this.currentPageNumber-1];if(e.div.parentElement.classList.contains("spread"))e.div.parentElement.childNodes.forEach((e=>{const t=Number(e.getAttribute("data-page-number")),i=this._pages[t-1];_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,i).then((()=>{this.renderingQueue.renderView(i)}));e.style.display="inline-block"}));else{_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,e).then((()=>{this.renderingQueue.renderView(e)}));"book"===this.pageViewMode&&this.ensureAdjecentPagesAreLoaded()}}this.eventBus.dispatch("pagechanging",{source:this,pageNumber:e,pageLabel:null!==(t=null===(i=this._pageLabels)||void 0===i?void 0:i[e-1])&&void 0!==t?t:null,previous:r});n&&_classPrivateMethodGet(this,O,_resetCurrentPageView2).call(this);return!0}addPageToRenderQueue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e>=0&&e<=this._pages.length-1){const t=this._pages[e];if(t.div.querySelector(".loadingIcon")){_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}));return!0}}return!1}ensureAdjecentPagesAreLoaded(){if(!window.adjacentPagesLoader){window.adjacentPagesLoader=e=>{Window.ngxConsole.log("rendered",e);let t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber)];if(t){let e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+1)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 1 page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+2)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 2 page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.min(this._pages.length-1,this.currentPageNumber+3)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the next + 3 page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.max(0,this.currentPageNumber-1)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the current page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else{t=this._pages[Math.max(0,this.currentPageNumber-2)];e=t.div.querySelector(".loadingIcon");if(e){Window.ngxConsole.log("asking for the previous page");_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,t).then((()=>{this.renderingQueue.renderView(t)}))}else Window.ngxConsole.log("Finished preloading the pages")}}}}}}};this.eventBus._on("pagerendered",window.adjacentPagesLoader)}window.adjacentPagesLoader()}get currentPageLabel(){var e,t;return null!==(e=null===(t=this._pageLabels)||void 0===t?void 0:t[this._currentPageNumber-1])&&void 0!==e?e:null}set currentPageLabel(e){if(!this.pdfDocument)return;let t=0|e;if(this._pageLabels){const i=this._pageLabels.indexOf(e);i>=0&&(t=i+1)}this._setCurrentPageNumber(t,!0)||Window.ngxConsole.error(`currentPageLabel: "${e}" is not a valid page.`)}get currentScale(){return this._currentScale!==r.UNKNOWN_SCALE?this._currentScale:r.DEFAULT_SCALE}set currentScale(e){if(isNaN(e))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(e,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(e){this.pdfDocument&&this._setScale(e,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(e){if(!(0,r.isValidRotation)(e))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument)return;(e%=360)<0&&(e+=360);if(this._pagesRotation===e)return;this._pagesRotation=e;const t=this._currentPageNumber,i={rotation:e};for(const e of this._pages)e.update(i);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0);this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:e,pageNumber:t});this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(e){if(this.pdfDocument){this.eventBus.dispatch("pagesdestroy",{source:this});this._cancelRendering();this._resetView();this.findController&&this.findController.setDocument(null);this._scriptingManager&&this._scriptingManager.setDocument(null);if(_classPrivateFieldGet(this,E)){_classPrivateFieldGet(this,E).destroy();_classPrivateFieldSet(this,E,null)}}this.pdfDocument=e;if(!e)return;const t=e.isPureXfa,i=e.numPages,s=e.getPage(1),a=e.getOptionalContentConfig(),o=_classPrivateFieldGet(this,x)?e.getPermissions():Promise.resolve();if(i>_.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const e=this._scrollMode=r.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e})}this._pagesCapability.promise.then((()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:i})}),(()=>{}));this._onBeforeDraw=e=>{const t=this._pages[e.pageNumber-1];t&&_classPrivateFieldGet(this,P).push(t)};this.eventBus._on("pagerender",this._onBeforeDraw);this._onAfterDraw=e=>{if(!e.cssTransform&&!this._onePageRenderedCapability.settled){this._onePageRenderedCapability.resolve({timestamp:e.timestamp});this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null;if(_classPrivateFieldGet(this,M)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,M));_classPrivateFieldSet(this,M,null)}}};this.eventBus._on("pagerendered",this._onAfterDraw);Promise.all([s,o]).then((s=>{let[o,l]=s;if(e!==this.pdfDocument)return;this._firstPageCapability.resolve(o);this._optionalContentConfigPromise=a;const{annotationEditorMode:d,annotationMode:h,textLayerMode:u}=_classPrivateMethodGet(this,k,_initializePermissions2).call(this,l);if(d!==n.AnnotationEditorType.DISABLE){const e=d;if(t)console.warn("Warning: XFA-editing is not implemented.");else if(isValidAnnotationEditorMode(e)){_classPrivateFieldSet(this,E,new n.AnnotationEditorUIManager(this.container,this.eventBus));e!==n.AnnotationEditorType.NONE&&_classPrivateFieldGet(this,E).updateMode(e)}else console.error(`Invalid AnnotationEditor mode: ${e}`)}const p=this._scrollMode===r.ScrollMode.PAGE?null:this.viewer,g=this.currentScale,f=o.getViewport({scale:g*n.PixelsPerInch.PDF_TO_CSS_UNITS}),m=u===r.TextLayerMode.DISABLE||t?null:this,v=h!==n.AnnotationMode.DISABLE?this:null,b=t?this:null,w=_classPrivateFieldGet(this,E)?this:null;for(let e=1;e<=i;++e){const t=new c.PDFPageView({container:p,eventBus:this.eventBus,id:e,scale:g,defaultViewport:f.clone(),optionalContentConfigPromise:a,renderingQueue:this.renderingQueue,textLayerFactory:m,textLayerMode:u,annotationLayerFactory:v,annotationMode:h,xfaLayerFactory:b,annotationEditorLayerFactory:w,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,removePageBorders:this.removePageBorders,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(t)}const y=this._pages[0];if(y){y.setPdfPage(o);this.linkService.cachePageRef(1,o.ref)}this._scrollMode===r.ScrollMode.PAGE?_classPrivateMethodGet(this,D,_ensurePageViewVisible2).call(this):this._spreadMode!==r.SpreadMode.NONE&&this._updateSpreadMode();_classPrivateMethodGet(this,I,_onePageRenderedOrForceFetch2).call(this).then((async()=>{this.findController&&this.findController.setDocument(e);this._scriptingManager&&this._scriptingManager.setDocument(e);_classPrivateFieldGet(this,E)&&this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:_classPrivateFieldGet(this,S)});if(e.loadingParams.disableAutoFetch||i>_.FORCE_LAZY_PAGE_INIT){this._pagesCapability.resolve();return}let t=i-1;if(t<=0)this._pagesCapability.resolve();else for(let n=2;n<=i;++n){const i=e.getPage(n).then((e=>{const i=this._pages[n-1];i.pdfPage||i.setPdfPage(e);this.linkService.cachePageRef(n,e.ref);0==--t&&this._pagesCapability.resolve()}),(e=>{Window.ngxConsole.error(`Unable to get page ${n} to initialize viewer`,e);0==--t&&this._pagesCapability.resolve()}));n%_.PAUSE_EAGER_PAGE_INIT==0&&await i}}));this.hidePagesDependingOnpageViewMode();this.eventBus.dispatch("pagesinit",{source:this});e.getMetadata().then((t=>{let{info:i}=t;e===this.pdfDocument&&i.Language&&(this.viewer.lang=i.Language)}));this.defaultRenderingQueue&&this.update()})).catch((e=>{Window.ngxConsole.error("Unable to initialize viewer",e);this._pagesCapability.reject(e)}))}setPageLabels(e){if(this.pdfDocument){if(e)if(Array.isArray(e)&&this.pdfDocument.numPages===e.length)this._pageLabels=e;else{this._pageLabels=null;Window.ngxConsole.error("setPageLabels: Invalid page labels.")}else this._pageLabels=null;for(let e=0,n=this._pages.length;e<n;e++){var t,i;this._pages[e].setPageLabel(null!==(t=null===(i=this._pageLabels)||void 0===i?void 0:i[e])&&void 0!==t?t:null)}}}_resetView(){this._pages=[];this._currentPageNumber=1;this._currentScale=r.UNKNOWN_SCALE;this._currentScaleValue=null;this._pageLabels=null;const e=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10;_classPrivateFieldSet(this,P,new PDFPageViewBuffer(e));this._location=null;this._pagesRotation=0;this._optionalContentConfigPromise=null;this._firstPageCapability=(0,n.createPromiseCapability)();this._onePageRenderedCapability=(0,n.createPromiseCapability)();this._pagesCapability=(0,n.createPromiseCapability)();this._scrollMode=r.ScrollMode.VERTICAL;this._previousScrollMode=r.ScrollMode.UNKNOWN;this._spreadMode=r.SpreadMode.NONE;_classPrivateFieldSet(this,T,{previousPageNumber:1,scrollDown:!0,pages:[]});if(this._onBeforeDraw){this.eventBus._off("pagerender",this._onBeforeDraw);this._onBeforeDraw=null}if(this._onAfterDraw){this.eventBus._off("pagerendered",this._onAfterDraw);this._onAfterDraw=null}if(_classPrivateFieldGet(this,M)){document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,M));_classPrivateFieldSet(this,M,null)}this.viewer.textContent="";this._updateScrollMode();this.viewer.removeAttribute("lang");this.viewer.classList.remove(v)}_scrollUpdate(){0!==this.pagesCount&&this.update()}scrollPagePosIntoView(e,t){const i=this._pages[e-1].div;if(t){const s={...t};if("string"==typeof s.top&&s.top.endsWith("%")){var n;const e=Number(s.top.replace("%","")),t=null===(n=this.viewer.querySelector(".page"))||void 0===n?void 0:n.clientHeight;let r=i.clientHeight?i.clientHeight:t;const a=this.viewer.parentElement.clientHeight;r=Math.max(0,r-a);s.top=e*r/100}if("string"==typeof s.left&&s.left.endsWith("%")){var r;const e=Number(s.left.replace("%","")),t=null===(r=this.viewer.querySelector(".page"))||void 0===r?void 0:r.clientWidth,n=i.clientWidth?i.clientWidth:t;s.left=e*n/100}_classPrivateMethodGet(this,L,_scrollIntoView2).call(this,{div:i,id:e},s)}else _classPrivateMethodGet(this,L,_scrollIntoView2).call(this,{pageDiv:i,pageNumber:e})}_setScaleUpdatePages(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=isNaN(Number(this.currentScale))?void 0:Number(this.currentScale),o=this.currentScaleValue;this._currentScaleValue=t.toString();if(_classPrivateMethodGet(this,R,_isSameScale2).call(this,e)){s&&this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:t,previousScale:a,previousPresetValue:o});return}r.docStyle.setProperty("--scale-factor",e*n.PixelsPerInch.PDF_TO_CSS_UNITS);const l={scale:e};for(const e of this._pages)e.update(l);this._currentScale=e;if(!i){let e,t=this._currentPageNumber;if(this._location&&!this.isInPresentationMode&&!this.isChangingPresentationMode){t=this._location.pageNumber;e=[null,{name:"XYZ"},this._location.left,this._location.top,null]}this.scrollPageIntoView({pageNumber:t,destArray:e,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:e,presetValue:s?t:void 0,previousScale:a,previousPresetValue:o});this.defaultRenderingQueue&&this.update();this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL?2:1}_setScale(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||(e="auto");let i=parseFloat(e);if(this._currentScale!==i)if(i>0)this._setScaleUpdatePages(i,e,t,!1);else{const n=this._pages[this._currentPageNumber-1];if(!n)return;let s=r.SCROLLBAR_PADDING,a=r.VERTICAL_PADDING;this.isInPresentationMode?s=a=4:this.removePageBorders?s=a=0:this._scrollMode===r.ScrollMode.HORIZONTAL&&([s,a]=[a,s]);const o=(this.container.clientWidth-s)/n.width*n.scale/this._pageWidthScaleFactor,l=(this.container.clientHeight-a)/n.height*n.scale;switch(e){case"page-actual":i=1;break;case"page-width":i=o;break;case"page-height":i=l;break;case"page-fit":i=Math.min(o,l);break;case"auto":const t=(0,r.isPortraitOrientation)(n)?o:Math.min(l,o);i=Math.min(r.MAX_AUTO_SCALE,t);break;default:Window.ngxConsole.error(`_setScale: "${e}" is an unknown zoom value.`);return}this._setScaleUpdatePages(i,e,t,!0)}}pageLabelToPageNumber(e){if(!this._pageLabels)return null;const t=this._pageLabels.indexOf(e);return t<0?null:t+1}scrollPageIntoView(e){let{pageNumber:t,destArray:i=null,allowNegativeOffset:s=!1,ignoreDestinationZoom:a=!1}=e;if(!this.pdfDocument)return;const o=Number.isInteger(t)&&this._pages[t-1];if(!o){Window.ngxConsole.error(`scrollPageIntoView: "${t}" is not a valid pageNumber parameter.`);return}if(this.isInPresentationMode||!i){this._setCurrentPageNumber(t,!0);return}let l,c,d=0,h=0,u=0,p=0;const g=o.rotation%180!=0,f=(g?o.height:o.width)/o.scale/n.PixelsPerInch.PDF_TO_CSS_UNITS,m=(g?o.width:o.height)/o.scale/n.PixelsPerInch.PDF_TO_CSS_UNITS;let v=0;switch(i[1].name){case"XYZ":d=i[2];h=i[3];v=i[4];d=null!==d?d:0;h=null!==h?h:m;break;case"Fit":case"FitB":v="page-fit";break;case"FitH":case"FitBH":h=i[2];v="page-width";if(null===h&&this._location){d=this._location.left;h=this._location.top}else("number"!=typeof h||h<0)&&(h=m);break;case"FitV":case"FitBV":d=i[2];u=f;p=m;v="page-height";break;case"FitR":d=i[2];h=i[3];u=i[4]-d;p=i[5]-h;const e=this.removePageBorders?0:r.SCROLLBAR_PADDING,t=this.removePageBorders?0:r.VERTICAL_PADDING;l=(this.container.clientWidth-e)/u/n.PixelsPerInch.PDF_TO_CSS_UNITS;c=(this.container.clientHeight-t)/p/n.PixelsPerInch.PDF_TO_CSS_UNITS;v=Math.min(Math.abs(l),Math.abs(c));break;default:Window.ngxConsole.error(`scrollPageIntoView: "${i[1].name}" is not a valid destination type.`);return}a||(v&&v!==this._currentScale?this.currentScaleValue=v:this._currentScale===r.UNKNOWN_SCALE&&(this.currentScaleValue=r.DEFAULT_SCALE_VALUE));_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,o).then((()=>{this.renderingQueue.renderView(o);"single"===this.pageViewMode&&this.currentPageNumber!==t&&(this.currentPageNumber=t)}));if("page-fit"===v&&!i[4]){_classPrivateMethodGet(this,L,_scrollIntoView2).call(this,o);return}const _=[o.viewport.convertToViewportPoint(d,h),o.viewport.convertToViewportPoint(d+u,h+p)];let b=Math.min(_[0][0],_[1][0]),w=Math.min(_[0][1],_[1][1]);if(!s){b=Math.max(b,0);w=Math.max(w,0)}_classPrivateMethodGet(this,L,_scrollIntoView2).call(this,o,{left:b,top:w})}_updateLocation(e){const t=this._currentScale,i=this._currentScaleValue,n=parseFloat(i)===t?Math.round(1e4*t)/100:i,r=e.id,s=this._pages[r-1],a=this.container,o=s.getPagePoint(a.scrollLeft-e.x,a.scrollTop-e.y),l=Math.round(o[0]),c=Math.round(o[1]);let d=`#page=${r}`;this.isInPresentationMode||(d+=`&zoom=${n},${l},${c}`);this._location={pageNumber:r,scale:n,top:c,left:l,rotation:this._pagesRotation,pdfOpenParams:d}}update(){this.scrollMode===r.ScrollMode.PAGE?this.viewer.classList.add("singlePageView"):this.viewer.classList.remove("singlePageView");const e=this._getVisiblePages(),t=e.views,i=t.length;if(0===i)return;const n=Number(PDFViewerApplicationOptions.get("defaultCacheSize"))||10,s=Math.max(n,2*i+1);_classPrivateFieldGet(this,P).resize(s,e.ids);this.renderingQueue.renderHighestPriority(e);const a=this._spreadMode===r.SpreadMode.NONE&&(this._scrollMode===r.ScrollMode.PAGE||this._scrollMode===r.ScrollMode.VERTICAL),o=this._currentPageNumber;let l=!1;for(const e of t){if(e.percent<100)break;if(e.id===o&&a){l=!0;break}}this._setCurrentPageNumber(l?o:t[0].id);this._updateLocation(e.first);this.eventBus.dispatch("updateviewarea",{source:this,location:this._location});this.hidePagesDependingOnpageViewMode()}containsElement(e){return this.container.contains(e)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===r.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===r.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const e=this._scrollMode===r.ScrollMode.PAGE?_classPrivateFieldGet(this,T).pages:this._pages,t=this._scrollMode===r.ScrollMode.HORIZONTAL,i=t&&this._isContainerRtl;return(0,r.getVisibleElements)({scrollEl:this.container,views:e,sortByVisibility:!0,horizontal:t,rtl:i})}isPageVisible(e){if(!this.pdfDocument)return!1;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){Window.ngxConsole.error(`isPageVisible: "${e}" is not a valid page.`);return!1}return this._getVisiblePages().ids.has(e)}isPageCached(e){if(!this.pdfDocument)return!1;if(!(Number.isInteger(e)&&e>0&&e<=this.pagesCount)){Window.ngxConsole.error(`isPageCached: "${e}" is not a valid page.`);return!1}const t=this._pages[e-1];return _classPrivateFieldGet(this,P).has(t)}cleanup(){for(const e of this._pages)e.renderingState!==r.RenderingStates.FINISHED&&e.reset()}_cancelRendering(){for(const e of this._pages)e.cancelRendering()}forceRendering(e){const t=e||this._getVisiblePages(),i=_classPrivateMethodGet(this,B,_getScrollAhead2).call(this,t),n=this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL,s=this.renderingQueue.getHighestPriority(t,this._pages,i,n);_classPrivateMethodGet(this,G,_toggleLoadingIconSpinner2).call(this,t.ids);if(s){_classPrivateMethodGet(this,N,_ensurePdfPageLoaded2).call(this,s).then((()=>{this.renderingQueue.renderView(s)}));return!0}return!1}createTextLayerBuilder(e){let{textLayerDiv:t,pageIndex:i,viewport:n,enhanceTextSelection:r=!1,eventBus:s,highlighter:a,accessibilityManager:o=null}=e;return new g.TextLayerBuilder({textLayerDiv:t,eventBus:s,pageIndex:i,viewport:n,enhanceTextSelection:!this.isInPresentationMode&&r,highlighter:a,accessibilityManager:o})}createTextHighlighter(e){let{pageIndex:t,eventBus:i}=e;return new p.TextHighlighter({eventBus:i,pageIndex:t,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(e){var t,i,n,r;let{pageDiv:s,pdfPage:l,annotationStorage:c=(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage),imageResourcesPath:d="",renderForms:h=!0,l10n:u=o.NullL10n,enableScripting:p=this.enableScripting,hasJSActionsPromise:g=(null===(i=this.pdfDocument)||void 0===i?void 0:i.hasJSActions()),mouseState:f=(null===(n=this._scriptingManager)||void 0===n?void 0:n.mouseState),fieldObjectsPromise:m=(null===(r=this.pdfDocument)||void 0===r?void 0:r.getFieldObjects()),annotationCanvasMap:v=null,accessibilityManager:_=null}=e;return new a.AnnotationLayerBuilder({pageDiv:s,pdfPage:l,annotationStorage:c,imageResourcesPath:d,renderForms:h,linkService:this.linkService,downloadManager:this.downloadManager,l10n:u,enableScripting:p,hasJSActionsPromise:g,mouseState:f,fieldObjectsPromise:m,annotationCanvasMap:v,accessibilityManager:_})}createAnnotationEditorLayerBuilder(e){var t;let{uiManager:i=_classPrivateFieldGet(this,E),pageDiv:n,pdfPage:r,accessibilityManager:a=null,l10n:o,annotationStorage:l=(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage)}=e;return new s.AnnotationEditorLayerBuilder({uiManager:i,pageDiv:n,pdfPage:r,annotationStorage:l,accessibilityManager:a,l10n:o})}createXfaLayerBuilder(e){var t;let{pageDiv:i,pdfPage:n,annotationStorage:r=(null===(t=this.pdfDocument)||void 0===t?void 0:t.annotationStorage)}=e;return new f.XfaLayerBuilder({pageDiv:i,pdfPage:n,annotationStorage:r,linkService:this.linkService})}createStructTreeLayerBuilder(e){let{pdfPage:t}=e;return new u.StructTreeLayerBuilder({pdfPage:t})}get hasEqualPageSizes(){const e=this._pages[0];for(let t=1,i=this._pages.length;t<i;++t){const i=this._pages[t];if(i.width!==e.width||i.height!==e.height)return!1}return!0}getPagesOverview(){return this._pages.map((e=>{const t=e.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,r.isPortraitOrientation)(t)?{width:t.width,height:t.height,rotation:t.rotation}:{width:t.height,height:t.width,rotation:(t.rotation-90)%360}}))}get optionalContentConfigPromise(){if(!this.pdfDocument)return Promise.resolve(null);if(!this._optionalContentConfigPromise){console.error("optionalContentConfigPromise: Not initialized yet.");return this.pdfDocument.getOptionalContentConfig()}return this._optionalContentConfigPromise}set optionalContentConfigPromise(e){if(!(e instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${e}`);if(!this.pdfDocument)return;if(!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=e;const t={optionalContentConfigPromise:e};for(const e of this._pages)e.update(t);this.update();this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:e})}get scrollMode(){return this._scrollMode}set scrollMode(e){if(this._scrollMode!==e){if(!(0,r.isValidScrollMode)(e))throw new Error(`Invalid scroll mode: ${e}`);if(!(this.pagesCount>_.FORCE_SCROLL_MODE_PAGE)){this._previousScrollMode=this._scrollMode;this._scrollMode=e;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:e});this._updateScrollMode(this._currentPageNumber)}}}_updateScrollMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=this._scrollMode,i=this.viewer;i.classList.toggle("scrollHorizontal",t===r.ScrollMode.HORIZONTAL);i.classList.toggle("scrollWrapped",t===r.ScrollMode.WRAPPED);if(this.pdfDocument&&e){t===r.ScrollMode.PAGE?_classPrivateMethodGet(this,D,_ensurePageViewVisible2).call(this):this._previousScrollMode===r.ScrollMode.PAGE&&this._updateSpreadMode();this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(e,!0);this.update()}}get spreadMode(){return this._spreadMode}set spreadMode(e){if(this._spreadMode!==e){if(!(0,r.isValidSpreadMode)(e))throw new Error(`Invalid spread mode: ${e}`);this._spreadMode=e;this.eventBus.dispatch("spreadmodechanged",{source:this,mode:e});this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this.pdfDocument)return;const t=this.viewer,i=this._pages;if(this._scrollMode===r.ScrollMode.PAGE)_classPrivateMethodGet(this,D,_ensurePageViewVisible2).call(this);else{t.textContent="";if(this._spreadMode===r.SpreadMode.NONE)for(const e of this._pages)t.append(e.div);else{const e=this._spreadMode-1;let n=null;for(let r=0,s=i.length;r<s;++r){if(null===n){n=document.createElement("div");n.className="spread";t.append(n)}else if(r%2===e){n=n.cloneNode(!1);t.append(n)}n.append(i[r].div)}}}this.hidePagesDependingOnpageViewMode();if(e){this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0);this._setCurrentPageNumber(e,!0);this.update()}}_getPageAdvance(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(this._scrollMode){case r.ScrollMode.WRAPPED:{const{views:i}=this._getVisiblePages(),n=new Map;for(const{id:e,y:t,percent:r,widthPercent:s}of i){if(0===r||s<100)continue;let i=n.get(t);i||n.set(t,i||(i=[]));i.push(e)}for(const i of n.values()){const n=i.indexOf(e);if(-1===n)continue;const r=i.length;if(1===r)break;if(t)for(let t=n-1,r=0;t>=r;t--){const n=i[t],r=i[t+1]-1;if(n<r)return e-r}else for(let t=n+1,s=r;t<s;t++){const n=i[t],r=i[t-1]+1;if(n>r)return r-e}if(t){const t=i[0];if(t<e)return e-t+1}else{const t=i[r-1];if(t>e)return t-e+1}break}break}case r.ScrollMode.HORIZONTAL:break;case r.ScrollMode.PAGE:case r.ScrollMode.VERTICAL:{if(this._spreadMode===r.SpreadMode.NONE)break;const i=this._spreadMode-1;if(t&&e%2!==i)break;if(!t&&e%2===i)break;const{views:n}=this._getVisiblePages(),s=t?e-1:e+1;for(const{id:e,percent:t,widthPercent:i}of n)if(e===s){if(t>0&&100===i)return 2;break}break}}return 1}nextPage(){const e=this._currentPageNumber,t=this.pagesCount;if(e>=t)return!1;const i=this._getPageAdvance(e,!1)||1;this.currentPageNumber=Math.min(e+i,t);return!0}previousPage(){const e=this._currentPageNumber;if(e<=1)return!1;const t=this._getPageAdvance(e,!0)||1;this.currentPageNumber=Math.max(e-t,1);return!0}increaseScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._currentScale,i=Number(PDFViewerApplicationOptions.get("maxZoom"));i||(i=r.MAX_SCALE);do{t=(t*r.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.ceil(10*t)/10;t=Math.min(i,t)}while(--e>0&&t<i);this.currentScaleValue=t}decreaseScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this._currentScale,i=Number(PDFViewerApplicationOptions.get("minZoom"));i||(i=r.MIN_SCALE);do{t=(t/r.DEFAULT_SCALE_DELTA).toFixed(2);t=Math.floor(10*t)/10;t=Math.max(i,t)}while(--e>0&&t>i);this.currentScaleValue=t}updateContainerHeightCss(){const e=this.container.clientHeight;if(e!==_classPrivateFieldGet(this,C)){_classPrivateFieldSet(this,C,e);r.docStyle.setProperty("--viewer-container-height",`${e}px`)}}get annotationEditorMode(){return _classPrivateFieldGet(this,E)?_classPrivateFieldGet(this,S):n.AnnotationEditorType.DISABLE}set annotationEditorMode(e){if(!_classPrivateFieldGet(this,E))throw new Error("The AnnotationEditor is not enabled.");if(_classPrivateFieldGet(this,S)!==e){if(!isValidAnnotationEditorMode(e))throw new Error(`Invalid AnnotationEditor mode: ${e}`);if(this.pdfDocument){_classPrivateFieldSet(this,S,e);this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:e});_classPrivateFieldGet(this,E).updateMode(e)}}}set annotationEditorParams(e){let{type:t,value:i}=e;if(!_classPrivateFieldGet(this,E))throw new Error("The AnnotationEditor is not enabled.");_classPrivateFieldGet(this,E).updateParams(t,i)}refresh(){if(!this.pdfDocument)return;const e={};for(const t of this._pages)t.update(e);this.update()}}t.BaseViewer=BaseViewer;function _initializePermissions2(e){const t={annotationEditorMode:_classPrivateFieldGet(this,S),annotationMode:_classPrivateFieldGet(this,A),textLayerMode:this.textLayerMode};if(!e)return t;e.includes(n.PermissionFlag.COPY)||this.viewer.classList.add(v);e.includes(n.PermissionFlag.MODIFY_CONTENTS)||(t.annotationEditorMode=n.AnnotationEditorType.DISABLE);e.includes(n.PermissionFlag.MODIFY_ANNOTATIONS)||e.includes(n.PermissionFlag.FILL_INTERACTIVE_FORMS)||_classPrivateFieldGet(this,A)!==n.AnnotationMode.ENABLE_FORMS||(t.annotationMode=n.AnnotationMode.ENABLE);return t}function _onePageRenderedOrForceFetch2(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const e=new Promise((e=>{_classPrivateFieldSet(this,M,(()=>{if("hidden"===document.visibilityState){e();document.removeEventListener("visibilitychange",_classPrivateFieldGet(this,M));_classPrivateFieldSet(this,M,null)}}));document.addEventListener("visibilitychange",_classPrivateFieldGet(this,M))}));return Promise.race([this._onePageRenderedCapability.promise,e])}function _ensurePageViewVisible2(){if(this._scrollMode!==r.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const e=this._currentPageNumber,t=_classPrivateFieldGet(this,T),i=this.viewer;i.textContent="";t.pages.length=0;if(this._spreadMode!==r.SpreadMode.NONE||this.isInPresentationMode){const n=new Set,r=this._spreadMode-1;if(-1===r)n.add(e-1);else if(e%2!==r){n.add(e-1);n.add(e)}else{n.add(e-2);n.add(e-1)}const s=document.createElement("div");s.className="spread";if(this.isInPresentationMode){const e=document.createElement("div");e.className="dummyPage";s.append(e)}for(const e of n){const i=this._pages[e];if(i){s.append(i.div);t.pages.push(i)}}i.append(s)}else{const n=this._pages[e-1];i.append(n.div);t.pages.push(n)}t.scrollDown=e>=t.previousPageNumber;t.previousPageNumber=e}function _scrollIntoView2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return;const{div:i,id:n}=e;if(this._scrollMode===r.ScrollMode.PAGE){this._setCurrentPageNumber(n);_classPrivateMethodGet(this,D,_ensurePageViewVisible2).call(this);this.update()}if(!t&&!this.isInPresentationMode){const e=i.offsetLeft+i.clientLeft,n=e+i.clientWidth,{scrollLeft:s,clientWidth:a}=this.container;(this._scrollMode===r.ScrollMode.HORIZONTAL||e<s||n>s+a)&&(t={left:0,top:0})}(0,r.scrollIntoView)(i,t,!1,"infinite-scroll"===this.pageViewMode)}function _isSameScale2(e){return e===this._currentScale||Math.abs(e-this._currentScale)<1e-15}function _resetCurrentPageView2(){const e=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0);_classPrivateMethodGet(this,L,_scrollIntoView2).call(this,e)}async function _ensurePdfPageLoaded2(e){if(e.pdfPage)return e.pdfPage;try{var t,i;const n=await this.pdfDocument.getPage(e.id);e.pdfPage||e.setPdfPage(n);null!==(t=(i=this.linkService)._cachedPageNumber)&&void 0!==t&&t.call(i,n.ref)||this.linkService.cachePageRef(e.id,n.ref);return n}catch(e){Window.ngxConsole.error("Unable to get page for page view",e);return null}}function _getScrollAhead2(e){var t,i;if(1===(null===(t=e.first)||void 0===t?void 0:t.id))return!0;if((null===(i=e.last)||void 0===i?void 0:i.id)===this.pagesCount)return!1;switch(this._scrollMode){case r.ScrollMode.PAGE:return _classPrivateFieldGet(this,T).scrollDown;case r.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function _toggleLoadingIconSpinner2(e){for(const t of e){const e=this._pages[t-1];null==e||e.toggleLoadingIconSpinner(!0)}for(const t of _classPrivateFieldGet(this,P))e.has(t.id)||t.toggleLoadingIconSpinner(!1)}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationEditorLayerBuilder=void 0;var n=i(5),r=i(34);function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var s=new WeakMap;t.AnnotationEditorLayerBuilder=class AnnotationEditorLayerBuilder{constructor(e){_classPrivateFieldInitSpec(this,s,{writable:!0,value:void 0});this.pageDiv=e.pageDiv;this.pdfPage=e.pdfPage;this.annotationStorage=e.annotationStorage||null;this.accessibilityManager=e.accessibilityManager;this.l10n=e.l10n||r.NullL10n;this.annotationEditorLayer=null;this.div=null;this._cancelled=!1;_classPrivateFieldSet(this,s,e.uiManager)}async render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("display"!==t)return;if(this._cancelled)return;const i=e.clone({dontFlip:!0});if(this.div){this.annotationEditorLayer.update({viewport:i});this.show();return}this.div=document.createElement("div");this.div.className="annotationEditorLayer";this.div.tabIndex=0;this.pageDiv.append(this.div);this.annotationEditorLayer=new n.AnnotationEditorLayer({uiManager:(r=this,a=s,function _classApplyDescriptorGet(e,t){return t.get?t.get.call(e):t.value}(r,_classExtractFieldDescriptor(r,a,"get"))),div:this.div,annotationStorage:this.annotationStorage,accessibilityManager:this.accessibilityManager,pageIndex:this.pdfPage._pageIndex,l10n:this.l10n,viewport:i});var r,a;const o={viewport:i,div:this.div,annotations:null,intent:t};this.annotationEditorLayer.render(o)}cancel(){this._cancelled=!0;this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){if(this.div){this.pageDiv=null;this.annotationEditorLayer.destroy();this.div.remove()}}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NullL10n=void 0;t.fixupLangCode=function fixupLangCode(e){return n[null==e?void 0:e.toLowerCase()]||e};t.getL10nFallback=getL10nFallback;const i={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading…",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text…",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function getL10nFallback(e,t){switch(e){case"find_match_count":e=`find_match_count[${1===t.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===t.limit?"one":"other"}]`}return i[e]||""}const n={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};const r={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function formatL10nValue(e,t){return t?e.replace(/\{\{\s*(\w+)\s*\}\}/g,((e,i)=>i in t?t[i]:"{{"+i+"}}")):e}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:getL10nFallback(e,t),t)},async translate(e){}};t.NullL10n=r},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.AnnotationLayerBuilder=void 0;var n=i(5),r=i(34);t.AnnotationLayerBuilder=class AnnotationLayerBuilder{constructor(e){let{pageDiv:t,pdfPage:i,linkService:n,downloadManager:s,annotationStorage:a=null,imageResourcesPath:o="",renderForms:l=!0,l10n:c=r.NullL10n,enableScripting:d=!1,hasJSActionsPromise:h=null,fieldObjectsPromise:u=null,mouseState:p=null,annotationCanvasMap:g=null,accessibilityManager:f=null}=e;this.pageDiv=t;this.pdfPage=i;this.linkService=n;this.downloadManager=s;this.imageResourcesPath=o;this.renderForms=l;this.l10n=c;this.annotationStorage=a;this.enableScripting=d;this._hasJSActionsPromise=h;this._fieldObjectsPromise=u;this._mouseState=p;this._annotationCanvasMap=g;this._accessibilityManager=f;this.div=null;this._cancelled=!1}async render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";const[i,r=!1,s=null]=await Promise.all([this.pdfPage.getAnnotations({intent:t}),this._hasJSActionsPromise,this._fieldObjectsPromise]);if(this._cancelled||0===i.length)return;const a={viewport:e.clone({dontFlip:!0}),div:this.div,annotations:i,page:this.pdfPage,imageResourcesPath:this.imageResourcesPath,renderForms:this.renderForms,linkService:this.linkService,downloadManager:this.downloadManager,annotationStorage:this.annotationStorage,enableScripting:this.enableScripting,hasJSActions:r,fieldObjects:s,mouseState:this._mouseState,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager};if(this.div)n.AnnotationLayer.update(a);else{this.div=document.createElement("div");this.div.className="annotationLayer";this.pageDiv.append(this.div);a.div=this.div;n.AnnotationLayer.render(a);this.l10n.translate(this.div)}}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PageFlip=void 0;class Page{constructor(e,t){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0};this.createdDensity=t;this.nowDrawingDensity=this.createdDensity;this.render=e}setDensity(e){this.createdDensity=e;this.nowDrawingDensity=e}setDrawingDensity(e){this.nowDrawingDensity=e}setPosition(e){this.state.position=e}setAngle(e){this.state.angle=e}setArea(e){this.state.area=e}setHardDrawingAngle(e){this.state.hardDrawingAngle=e}setHardAngle(e){this.state.hardAngle=e;this.state.hardDrawingAngle=e}setOrientation(e){this.orientation=e}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class ImagePage extends Page{constructor(e,t,i){super(e,i);this.image=null;this.isLoad=!1;this.loadingAngle=0;this.image=new Image;this.image.src=t}draw(e){const t=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),n=this.render.getRect().pageWidth,r=this.render.getRect().height;t.save();t.translate(i.x,i.y);t.beginPath();for(let e of this.state.area)if(null!==e){e=this.render.convertToGlobal(e);t.lineTo(e.x-i.x,e.y-i.y)}t.rotate(this.state.angle);t.clip();this.isLoad?t.drawImage(this.image,0,0,n,r):this.drawLoader(t,{x:0,y:0},n,r);t.restore()}simpleDraw(e){const t=this.render.getRect(),i=this.render.getContext(),n=t.pageWidth,r=t.height,s=1===e?t.left+t.pageWidth:t.left,a=t.top;this.isLoad?i.drawImage(this.image,s,a,n,r):this.drawLoader(i,{x:s,y:a},n,r)}drawLoader(e,t,i,n){e.beginPath();e.strokeStyle="rgb(200, 200, 200)";e.fillStyle="rgb(255, 255, 255)";e.lineWidth=1;e.rect(t.x+1,t.y+1,i-1,n-1);e.stroke();e.fill();const r={x:t.x+i/2,y:t.y+n/2};e.beginPath();e.lineWidth=10;e.arc(r.x,r.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle);e.stroke();e.closePath();this.loadingAngle+=.07;this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class PageCollection{constructor(e,t){this.pages=[];this.currentPageIndex=0;this.currentSpreadIndex=0;this.landscapeSpread=[];this.portraitSpread=[];this.render=t;this.app=e;this.currentPageIndex=0;this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[];this.portraitSpread=[];for(let e=0;e<this.pages.length;e++)this.portraitSpread.push([e]);let e=0;if(this.isShowCover){this.pages[0].setDensity("hard");this.landscapeSpread.push([e]);e++}for(let t=e;t<this.pages.length;t+=2)if(t<this.pages.length-1)this.landscapeSpread.push([t,t+1]);else{this.landscapeSpread.push([t]);this.pages[t].setDensity("hard")}}getSpread(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(e){const t=this.getSpread();for(let i=0;i<t.length;i++)if(e===t[i][0]||e===t[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(e){if(e>=0&&e<this.pages.length)return this.pages[e];throw new Error("Invalid page number")}nextBy(e){const t=this.pages.indexOf(e);return t<this.pages.length-1?this.pages[t+1]:null}prevBy(e){const t=this.pages.indexOf(e);return t>0?this.pages[t-1]:null}getFlippingPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t].newTemporaryCopy():this.pages[t-1];{const i=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===i.length||0===e?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(e){const t=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===e?this.pages[t+1]:this.pages[t-1];{const i=0===e?this.getSpread()[t+1]:this.getSpread()[t-1];return 1===i.length?this.pages[i[0]]:0===e?this.pages[i[1]]:this.pages[i[0]]}}showNext(){if(this.currentSpreadIndex<this.getSpread().length){this.currentSpreadIndex++;this.showSpread()}}showPrev(){if(this.currentSpreadIndex>0){this.currentSpreadIndex--;this.showSpread()}}getCurrentPageIndex(){return this.currentPageIndex}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e&&(e=this.currentPageIndex);if(e<0||e>=this.pages.length)return;const t=this.getSpreadIndexByPage(e);if(null!==t){this.currentSpreadIndex=t;this.showSpread()}}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(e){if(!(e>=0&&e<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=e}showSpread(){const e=this.getSpread()[this.currentSpreadIndex];if(2===e.length){this.render.setLeftPage(this.pages[e[0]]);this.render.setRightPage(this.pages[e[1]])}else if("landscape"===this.render.getOrientation())if(e[0]===this.pages.length-1){this.render.setLeftPage(this.pages[e[0]]);this.render.setRightPage(null)}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[e[0]])}else{this.render.setLeftPage(null);this.render.setRightPage(this.pages[e[0]])}this.currentPageIndex=e[0];this.app.updatePageIndex(this.currentPageIndex)}}class ImagePageCollection extends PageCollection{constructor(e,t,i){super(e,t);this.imagesHref=i}load(){for(const e of this.imagesHref){const t=new ImagePage(this.render,e,"soft");t.load();this.pages.push(t)}this.createSpread()}}class Helper{static GetDistanceBetweenTwoPoint(e,t){return null===e||null===t?1/0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static GetSegmentLength(e){return Helper.GetDistanceBetweenTwoPoint(e[0],e[1])}static GetAngleBetweenTwoLine(e,t){const i=e[0].y-e[1].y,n=t[0].y-t[1].y,r=e[1].x-e[0].x,s=t[1].x-t[0].x;return Math.acos((i*n+r*s)/(Math.sqrt(i*i+r*r)*Math.sqrt(n*n+s*s)))}static PointInRect(e,t){return null===t?null:t.x>=e.left&&t.x<=e.width+e.left&&t.y>=e.top&&t.y<=e.top+e.height?t:null}static GetRotatedPoint(e,t,i){return{x:e.x*Math.cos(i)+e.y*Math.sin(i)+t.x,y:e.y*Math.cos(i)-e.x*Math.sin(i)+t.y}}static LimitPointToCircle(e,t,i){if(Helper.GetDistanceBetweenTwoPoint(e,i)<=t)return i;const n=e.x,r=e.y,s=i.x,a=i.y;let o=Math.sqrt(Math.pow(t,2)*Math.pow(n-s,2)/(Math.pow(n-s,2)+Math.pow(r-a,2)))+n;i.x<0&&(o*=-1);let l=(o-n)*(r-a)/(n-s)+r;n-s+r===0&&(l=t);return{x:o,y:l}}static GetIntersectBetweenTwoSegment(e,t,i){return Helper.PointInRect(e,Helper.GetIntersectBeetwenTwoLine(t,i))}static GetIntersectBeetwenTwoLine(e,t){const i=e[0].y-e[1].y,n=t[0].y-t[1].y,r=e[1].x-e[0].x,s=t[1].x-t[0].x,a=e[0].x*e[1].y-e[1].x*e[0].y,o=t[0].x*t[1].y-t[1].x*t[0].y,l=i*o-n*a,c=r*o-s*a,d=-(a*s-o*r)/(i*s-n*r),h=-(i*o-n*a)/(i*s-n*r);if(isFinite(d)&&isFinite(h))return{x:d,y:h};if(Math.abs(l-c)<.1)throw new Error("Segment included");return null}static GetCordsFromTwoPoint(e,t){const i=Math.abs(e.x-t.x),n=Math.abs(e.y-t.y),r=Math.max(i,n),s=[e];function getCord(e,t,i,n,r){return t>e?e+r*(i/n):t<e?e-r*(i/n):e}for(let a=1;a<=r;a+=1)s.push({x:getCord(e.x,t.x,i,r,a),y:getCord(e.y,t.y,n,r,a)});return s}}class HTMLPage extends Page{constructor(e,t,i){super(e,i);this.copiedElement=null;this.temporaryCopy=null;this.isLoad=!1;this.element=t;this.element.classList.add("stf__item");this.element.classList.add("--"+i)}newTemporaryCopy(){if("hard"===this.nowDrawingDensity)return this;if(null===this.temporaryCopy){this.copiedElement=this.element.cloneNode(!0);this.element.parentElement.appendChild(this.copiedElement);this.temporaryCopy=new HTMLPage(this.render,this.copiedElement,this.nowDrawingDensity)}return this.getTemporaryCopy()}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){if(null!==this.temporaryCopy){this.copiedElement.remove();this.copiedElement=null;this.temporaryCopy=null}}draw(e){const t=e||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),n=this.render.getRect().pageWidth,r=this.render.getRect().height;this.element.classList.remove("--simple");const s=`\n            position: absolute;\n            display: block;\n            z-index: ${this.element.style.zIndex};\n            left: 0;\n            top: 0;\n            width: ${n}px;\n            height: ${r}px;\n        `;"hard"===t?this.drawHard(s):this.drawSoft(i,s)}drawHard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,n=e+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0;\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0;\n                   transform: translate3d(${t}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=n}drawSoft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="polygon( ";for(const e of this.state.area)if(null!==e){let t=1===this.render.getDirection()?{x:-e.x+this.state.position.x,y:e.y-this.state.position.y}:{x:e.x-this.state.position.x,y:e.y-this.state.position.y};t=Helper.GetRotatedPoint(t,{x:0,y:0},this.state.angle);i+=t.x+"px "+t.y+"px, "}i=i.slice(0,-2);i+=")";const n=t+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${e.x}px, ${e.y}px);`:`transform: translate3d(${e.x}px, ${e.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=n}simpleDraw(e){const t=this.render.getRect(),i=t.pageWidth,n=t.height,r=1===e?t.left+t.pageWidth:t.left,s=t.top;this.element.classList.add("--simple");this.element.style.cssText=`\n            position: absolute;\n            display: block;\n            height: ${n}px;\n            left: ${r}px;\n            top: ${s}px;\n            width: ${i}px;\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(e){super.setOrientation(e);this.element.classList.remove("--left","--right");this.element.classList.add(1===e?"--right":"--left")}setDrawingDensity(e){this.element.classList.remove("--soft","--hard");this.element.classList.add("--"+e);super.setDrawingDensity(e)}}class HTMLPageCollection extends PageCollection{constructor(e,t,i,n){super(e,t);this.element=i;this.pagesElement=n}load(){for(const e of this.pagesElement){const t=new HTMLPage(this.render,e,"hard"===e.dataset.density?"hard":"soft");t.load();this.pages.push(t)}this.createSpread()}}class FlipCalculation{constructor(e,t,i,n){this.direction=e;this.corner=t;this.topIntersectPoint=null;this.sideIntersectPoint=null;this.bottomIntersectPoint=null;this.pageWidth=parseInt(i,10);this.pageHeight=parseInt(n,10)}calc(e){try{this.position=this.calcAngleAndPosition(e);this.calculateIntersectPoint(this.position);return!0}catch(e){return!1}}getFlippingClipArea(){const e=[];let t=!1;e.push(this.rect.topLeft);e.push(this.topIntersectPoint);if(null===this.sideIntersectPoint)t=!0;else{e.push(this.sideIntersectPoint);null===this.bottomIntersectPoint&&(t=!1)}e.push(this.bottomIntersectPoint);(t||"bottom"===this.corner)&&e.push(this.rect.bottomLeft);return e}getBottomClipArea(){const e=[];e.push(this.topIntersectPoint);if("top"===this.corner)e.push({x:this.pageWidth,y:0});else{null!==this.topIntersectPoint&&e.push({x:this.pageWidth,y:0});e.push({x:this.pageWidth,y:this.pageHeight})}null!==this.sideIntersectPoint?Helper.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&e.push(this.sideIntersectPoint):"top"===this.corner&&e.push({x:this.pageWidth,y:this.pageHeight});e.push(this.bottomIntersectPoint);e.push(this.topIntersectPoint);return e}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const e=Helper.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?e:Math.PI-e}calcAngleAndPosition(e){let t=e;this.updateAngleAndGeometry(t);t="top"===this.corner?this.checkPositionAtCenterLine(t,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(t,{x:0,y:this.pageHeight},{x:0,y:0});if(Math.abs(t.x-this.pageWidth)<1&&Math.abs(t.y)<1)throw new Error("Point is too small");return t}updateAngleAndGeometry(e){this.angle=this.calculateAngle(e);this.rect=this.getPageRect(e)}calculateAngle(e){const t=this.pageWidth-e.x+1,i="bottom"===this.corner?this.pageHeight-e.y:e.y;let n=2*Math.acos(t/Math.sqrt(i*i+t*t));i<0&&(n=-n);const r=Math.PI-n;if(!isFinite(n)||r>=0&&r<.003)throw new Error("The G point is too small");"bottom"===this.corner&&(n=-n);return n}getPageRect(e){return"top"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],e):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],e)}getRectFromBasePoint(e,t){return{topLeft:this.getRotatedPoint(e[0],t),topRight:this.getRotatedPoint(e[1],t),bottomLeft:this.getRotatedPoint(e[2],t),bottomRight:this.getRotatedPoint(e[3],t)}}getRotatedPoint(e,t){return{x:e.x*Math.cos(this.angle)+e.y*Math.sin(this.angle)+t.x,y:e.y*Math.cos(this.angle)-e.x*Math.sin(this.angle)+t.y}}calculateIntersectPoint(e){const t={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};if("top"===this.corner){this.topIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}else{this.topIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]);this.sideIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[e,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]);this.bottomIntersectPoint=Helper.GetIntersectBetweenTwoSegment(t,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])}}checkPositionAtCenterLine(e,t,i){let n=e;const r=Helper.LimitPointToCircle(t,this.pageWidth,n);if(n!==r){n=r;this.updateAngleAndGeometry(n)}const s=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let a=this.rect.bottomRight,o=this.rect.topLeft;if("bottom"===this.corner){a=this.rect.topRight;o=this.rect.bottomLeft}if(a.x<=0){const e=Helper.LimitPointToCircle(i,s,o);if(e!==n){n=e;this.updateAngleAndGeometry(n)}}return n}getSegmentToShadowLine(){const e=this.getShadowStartPoint();return[e,e!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class Flip{constructor(e,t){this.flippingPage=null;this.bottomPage=null;this.calc=null;this.state="read";this.render=e;this.app=t}fold(e){this.setState("user_fold");null===this.calc&&this.start(e);this.do(this.render.convertToPage(e))}flip(e){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(e))return;null!==this.calc&&this.render.finishAnimation();if(!this.start(e))return;const t=this.getBoundsRect();this.setState("flipping");const i=t.height/10,n="bottom"===this.calc.getCorner()?t.height-i:i,r="bottom"===this.calc.getCorner()?t.height:0;this.calc.calc({x:t.pageWidth-i,y:n});this.animateFlippingTo({x:t.pageWidth-i,y:n},{x:-t.pageWidth,y:r},!0)}start(e){this.reset();const t=this.render.convertToBook(e),i=this.getBoundsRect(),n=this.getDirectionByPoint(t),r=t.y>=i.height/2?"bottom":"top";if(!this.checkDirection(n))return!1;try{this.flippingPage=this.app.getPageCollection().getFlippingPage(n);this.bottomPage=this.app.getPageCollection().getBottomPage(n);if("landscape"===this.render.getOrientation())if(1===n){const e=this.app.getPageCollection().nextBy(this.flippingPage);if(null!==e&&this.flippingPage.getDensity()!==e.getDensity()){this.flippingPage.setDrawingDensity("hard");e.setDrawingDensity("hard")}}else{const e=this.app.getPageCollection().prevBy(this.flippingPage);if(null!==e&&this.flippingPage.getDensity()!==e.getDensity()){this.flippingPage.setDrawingDensity("hard");e.setDrawingDensity("hard")}}this.render.setDirection(n);this.calc=new FlipCalculation(n,r,i.pageWidth.toString(10),i.height.toString(10));return!0}catch(e){return!1}}do(e){if(null!==this.calc&&this.calc.calc(e)){const e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea());this.bottomPage.setPosition(this.calc.getBottomPagePosition());this.bottomPage.setAngle(0);this.bottomPage.setHardAngle(0);this.flippingPage.setArea(this.calc.getFlippingClipArea());this.flippingPage.setPosition(this.calc.getActiveCorner());this.flippingPage.setAngle(this.calc.getAngle());0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100);this.render.setPageRect(this.calc.getRect());this.render.setBottomPage(this.bottomPage);this.render.setFlippingPage(this.flippingPage);this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}flipToPage(e,t){const i=this.app.getPageCollection().getCurrentSpreadIndex(),n=this.app.getPageCollection().getSpreadIndexByPage(e);try{if(n>i){this.app.getPageCollection().setCurrentSpreadIndex(n-1);this.flipNext(t)}if(n<i){this.app.getPageCollection().setCurrentSpreadIndex(n+1);this.flipPrev(t)}}catch(e){}}flipNext(e){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===e?1:this.render.getRect().height-2})}flipPrev(e){this.flip({x:10,y:"top"===e?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const e=this.calc.getPosition(),t=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?t.height:0;e.x<=0?this.animateFlippingTo(e,{x:-t.pageWidth,y:i},!0):this.animateFlippingTo(e,{x:t.pageWidth,y:i},!1)}showCorner(e){if(!this.checkState("read","fold_corner"))return;const t=this.getBoundsRect(),i=t.pageWidth;if(this.isPointOnCorners(e))if(null===this.calc){if(!this.start(e))return;this.setState("fold_corner");this.calc.calc({x:i-1,y:1});const n=50,r="bottom"===this.calc.getCorner()?t.height-1:1,s="bottom"===this.calc.getCorner()?t.height-n:n;this.animateFlippingTo({x:i-1,y:r},{x:i-n,y:s},!1,!1)}else this.do(this.render.convertToPage(e));else{this.setState("read");this.render.finishAnimation();this.stopMove()}}animateFlippingTo(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=Helper.GetCordsFromTwoPoint(e,t),s=[];for(const e of r)s.push((()=>this.do(e)));const a=this.getAnimationDuration(r.length);this.render.startAnimation(s,a,(()=>{if(this.calc){i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage());if(n){this.render.setBottomPage(null);this.render.setFlippingPage(null);this.render.clearShadow();this.setState("read");this.reset()}}}))}getCalculation(){return this.calc}getState(){return this.state}setState(e){if(this.state!==e){this.app.updateState(e);this.state=e}}getDirectionByPoint(e){const t=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(e.x-t.pageWidth<=t.width/5)return 1}else if(e.x<t.width/2)return 1;return 0}getAnimationDuration(e){const t=this.app.getSettings().flippingTime;return e>=1e3?t:e/1e3*t}checkDirection(e){return 0===e?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null;this.flippingPage=null;this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(e){const t=this.getBoundsRect(),i=t.pageWidth,n=Math.sqrt(Math.pow(i,2)+Math.pow(t.height,2))/5,r=this.render.convertToBook(e);return r.x>0&&r.y>0&&r.x<t.width&&r.y<t.height&&(r.x<n||r.x>t.width-n)&&(r.y<n||r.y>t.height-n)}}class Render{constructor(e,t){this.leftPage=null;this.rightPage=null;this.flippingPage=null;this.bottomPage=null;this.direction=null;this.orientation=null;this.shadow=null;this.animation=null;this.pageRect=null;this.boundsRect=null;this.timer=0;this.safari=!1;this.setting=t;this.app=e;const i=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==i.exec(window.navigator.userAgent)}render(e){if(null!==this.animation){const t=Math.round((e-this.animation.startedAt)/this.animation.durationFrame);if(t<this.animation.frames.length)this.animation.frames[t]();else{this.animation.onAnimateEnd();this.animation=null}}this.timer=e;this.drawFrame()}start(){this.update();const loop=e=>{window.ngxZone.runOutsideAngular((()=>{this.render(e);requestAnimationFrame(loop)}))};window.ngxZone.runOutsideAngular((()=>{requestAnimationFrame(loop)}))}startAnimation(e,t,i){this.finishAnimation();this.animation={frames:e,duration:t,durationFrame:t/e.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){if(null!==this.animation){this.animation.frames[this.animation.frames.length-1]();null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()}this.animation=null}update(){this.boundsRect=null;const e=this.calculateBoundsRect();if(this.orientation!==e){this.orientation=e;this.app.updateOrientation(e)}}calculateBoundsRect(){let e="landscape";const t=this.getBlockWidth(),i=t/2,n=this.getBlockHeight()/2,r=this.setting.width/this.setting.height;let s=this.setting.width,a=this.setting.height,o=i-s;if("stretch"===this.setting.size){t<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(e="portrait");s="portrait"===e?this.getBlockWidth():this.getBlockWidth()/2;s>this.setting.maxWidth&&(s=this.setting.maxWidth);a=s/r;if(a>this.getBlockHeight()){a=this.getBlockHeight();s=a*r}o="portrait"===e?i-s/2-s:i-s}else if(t<2*s&&this.app.getSettings().usePortrait){e="portrait";o=i-s/2-s}this.boundsRect={left:o,top:n-a/2,width:2*s,height:a,pageWidth:s};return e}setShadowData(e,t,i,n){if(!this.app.getSettings().drawShadow)return;const r=100*this.getSettings().maxShadowOpacity;this.shadow={pos:e,angle:t,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*r/100/100,direction:n,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){null===this.boundsRect&&this.calculateBoundsRect();return this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(e){this.pageRect=e}setDirection(e){this.direction=e}setRightPage(e){null!==e&&e.setOrientation(1);this.rightPage=e}setLeftPage(e){null!==e&&e.setOrientation(0);this.leftPage=e}setBottomPage(e){null!==e&&e.setOrientation(1===this.direction?0:1);this.bottomPage=e}setFlippingPage(e){null!==e&&e.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1);this.flippingPage=e}convertToBook(e){const t=this.getRect();return{x:e.x-t.left,y:e.y-t.top}}isSafari(){return this.safari}convertToPage(e,t){t||(t=this.direction);const i=this.getRect();return{x:0===t?e.x-i.left-i.width/2:i.width/2-e.x+i.left,y:e.y-i.top}}convertToGlobal(e,t){t||(t=this.direction);if(null==e)return null;const i=this.getRect();return{x:0===t?e.x+i.left+i.width/2:i.width/2-e.x+i.left,y:e.y+i.top}}convertRectToGlobal(e,t){t||(t=this.direction);return{topLeft:this.convertToGlobal(e.topLeft,t),topRight:this.convertToGlobal(e.topRight,t),bottomLeft:this.convertToGlobal(e.bottomLeft,t),bottomRight:this.convertToGlobal(e.bottomRight,t)}}}class CanvasRender extends Render{constructor(e,t,i){super(e,t);this.canvas=i;this.ctx=i.getContext("2d")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear();"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0);null!=this.rightPage&&this.rightPage.simpleDraw(1);null!=this.bottomPage&&this.bottomPage.draw();this.drawBookShadow();null!=this.flippingPage&&this.flippingPage.draw();if(null!=this.shadow){this.drawOuterShadow();this.drawInnerShadow()}const e=this.getRect();if("portrait"===this.orientation){this.ctx.beginPath();this.ctx.rect(e.left+e.pageWidth,e.top,e.width,e.height);this.ctx.clip()}}drawBookShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();const t=e.width/20;this.ctx.rect(e.left,e.top,e.width,e.height);const i={x:e.left+e.width/2-t/2,y:0};this.ctx.translate(i.x,i.y);const n=this.ctx.createLinearGradient(0,0,t,0);n.addColorStop(0,"rgba(0, 0, 0, 0)");n.addColorStop(.4,"rgba(0, 0, 0, 0.2)");n.addColorStop(.49,"rgba(0, 0, 0, 0.1)");n.addColorStop(.5,"rgba(0, 0, 0, 0.5)");n.addColorStop(.51,"rgba(0, 0, 0, 0.4)");n.addColorStop(1,"rgba(0, 0, 0, 0)");this.ctx.clip();this.ctx.fillStyle=n;this.ctx.fillRect(0,0,t,2*e.height);this.ctx.restore()}drawOuterShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();this.ctx.rect(e.left,e.top,e.width,e.height);const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(t.x,t.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);if(0===this.shadow.direction){this.ctx.translate(0,-100);i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");i.addColorStop(1,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(-this.shadow.width,-100);i.addColorStop(0,"rgba(0, 0, 0, 0)");i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")}this.ctx.clip();this.ctx.fillStyle=i;this.ctx.fillRect(0,0,this.shadow.width,2*e.height);this.ctx.restore()}drawInnerShadow(){const e=this.getRect();this.ctx.save();this.ctx.beginPath();const t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y);this.ctx.lineTo(i.topRight.x,i.topRight.y);this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y);this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y);this.ctx.translate(t.x,t.y);this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const n=3*this.shadow.width/4,r=this.ctx.createLinearGradient(0,0,n,0);if(0===this.shadow.direction){this.ctx.translate(-n,-100);r.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")");r.addColorStop(.9,"rgba(0, 0, 0, 0.05)");r.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")");r.addColorStop(0,"rgba(0, 0, 0, 0)")}else{this.ctx.translate(0,-100);r.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")");r.addColorStop(.1,"rgba(0, 0, 0, 0.05)");r.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")");r.addColorStop(1,"rgba(0, 0, 0, 0)")}this.ctx.clip();this.ctx.fillStyle=r;this.ctx.fillRect(0,0,n,2*e.height);this.ctx.restore()}clear(){this.ctx.fillStyle="white";this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class UI{constructor(e,t,i){this.touchPoint=null;this.swipeTimeout=250;this.onResize=()=>{this.update()};this.onMouseDown=e=>{if(this.checkTarget(e.target)){const t=this.getMousePos(e.clientX,e.clientY);this.app.startUserTouch(t);e.preventDefault()}};this.onTouchStart=e=>{if(this.checkTarget(e.target)&&e.changedTouches.length>0){const t=e.changedTouches[0],i=this.getMousePos(t.clientX,t.clientY);this.touchPoint={point:i,time:Date.now()};setTimeout((()=>{null!==this.touchPoint&&this.app.startUserTouch(i)}),this.swipeTimeout);this.app.getSettings().mobileScrollSupport||e.preventDefault()}};this.onMouseUp=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userStop(t)};this.onMouseMove=e=>{const t=this.getMousePos(e.clientX,e.clientY);this.app.userMove(t,!1)};this.onTouchMove=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],i=this.getMousePos(t.clientX,t.clientY);if(this.app.getSettings().mobileScrollSupport){null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||"read"!==this.app.getState())&&e.cancelable&&this.app.userMove(i,!0);"read"!==this.app.getState()&&e.preventDefault()}else this.app.userMove(i,!0)}};this.onTouchEnd=e=>{if(e.changedTouches.length>0){const t=e.changedTouches[0],i=this.getMousePos(t.clientX,t.clientY);let n=!1;if(null!==this.touchPoint){const e=i.x-this.touchPoint.point.x,t=Math.abs(i.y-this.touchPoint.point.y);if(Math.abs(e)>this.swipeDistance&&t<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout){e>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?"top":"bottom");n=!0}this.touchPoint=null}this.app.userStop(i,n)}};this.parentElement=e;e.classList.add("stf__parent");e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>');this.wrapper=e.querySelector(".stf__wrapper");this.app=t;const n=this.app.getSettings().usePortrait?1:2;e.style.minWidth=i.minWidth*n+"px";e.style.minHeight=i.minHeight+"px";if("fixed"===i.size){e.style.minWidth=i.width*n+"px";e.style.minHeight=i.height+"px"}if(i.autoSize){e.style.width="100%";e.style.maxWidth=2*i.maxWidth+"px"}e.style.display="block";window.addEventListener("resize",this.onResize,!1);this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers();this.distElement.remove();this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(e){this.wrapper.classList.remove("--portrait","--landscape");if("portrait"===e){this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%");this.wrapper.classList.add("--portrait")}else{this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%");this.wrapper.classList.add("--landscape")}this.update()}removeHandlers(){window.removeEventListener("resize",this.onResize);this.distElement.removeEventListener("mousedown",this.onMouseDown);this.distElement.removeEventListener("touchstart",this.onTouchStart);window.removeEventListener("mousemove",this.onMouseMove);window.removeEventListener("touchmove",this.onTouchMove);window.removeEventListener("mouseup",this.onMouseUp);window.removeEventListener("touchend",this.onTouchEnd)}setHandlers(){window.addEventListener("resize",this.onResize,!1);if(this.app.getSettings().useMouseEvents){this.distElement.addEventListener("mousedown",this.onMouseDown);this.distElement.addEventListener("touchstart",this.onTouchStart);window.addEventListener("mousemove",this.onMouseMove);window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport});window.addEventListener("mouseup",this.onMouseUp);window.addEventListener("touchend",this.onTouchEnd)}}getMousePos(e,t){const i=this.distElement.getBoundingClientRect();return{x:e-i.left,y:t-i.top}}checkTarget(e){return!this.app.getSettings().clickEventForward||!["a","button"].includes(e.tagName.toLowerCase())}}class HTMLUI extends UI{constructor(e,t,i,n){super(e,t,i);this.wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>');this.distElement=e.querySelector(".stf__block");this.items=n;for(const e of n)this.distElement.appendChild(e);this.setHandlers()}clear(){for(const e of this.items)this.parentElement.appendChild(e)}updateItems(e){this.removeHandlers();this.distElement.innerHTML="";for(const t of e)this.distElement.appendChild(t);this.items=e;this.setHandlers()}update(){this.app.getRender().update()}}class CanvasUI extends UI{constructor(e,t,i){super(e,t,i);this.wrapper.innerHTML='<canvas class="stf__canvas"></canvas>';this.canvas=e.querySelectorAll("canvas")[0];this.distElement=this.canvas;this.resizeCanvas();this.setHandlers()}resizeCanvas(){const e=getComputedStyle(this.canvas),t=parseInt(e.getPropertyValue("width"),10),i=parseInt(e.getPropertyValue("height"),10);this.canvas.width=t;this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas();this.app.getRender().update()}}class HTMLRender extends Render{constructor(e,t,i){super(e,t);this.outerShadow=null;this.innerShadow=null;this.hardShadow=null;this.hardInnerShadow=null;this.element=i;this.createShadows()}createShadows(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>');this.outerShadow=this.element.querySelector(".stf__outerShadow");this.innerShadow=this.element.querySelector(".stf__innerShadow");this.hardShadow=this.element.querySelector(".stf__hardShadow");this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}clearShadow(){super.clearShadow();this.outerShadow.style.cssText="display: none";this.innerShadow.style.cssText="display: none";this.hardShadow.style.cssText="display: none";this.hardInnerShadow.style.cssText="display: none"}reload(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}drawHardInnerShadow(){const e=this.getRect(),t=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-t)*(2.5*e.pageWidth)/100+20;i>e.pageWidth&&(i=e.pageWidth);let n=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\n            width: ${i}px;\n            height: ${e.height}px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ${this.shadow.opacity*t/100}) 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ${e.left+e.width/2}px;\n            transform-origin: 0 0;\n        `;n+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);";this.hardInnerShadow.style.cssText=n}drawHardOuterShadow(){const e=this.getRect();let t=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*e.pageWidth)/100+20;t>e.pageWidth&&(t=e.pageWidth);let i=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\n            width: ${t}px;\n            height: ${e.height}px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\n            left: ${e.left+e.width/2}px;\n            transform-origin: 0 0;\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);";this.hardShadow.style.cssText=i}drawInnerShadow(){const e=this.getRect(),t=3*this.shadow.width/4,i=0===this.getDirection()?t:0,n=0===this.getDirection()?"to left":"to right",r=this.convertToGlobal(this.shadow.pos),s=this.shadow.angle+3*Math.PI/2,a=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let o="polygon( ";for(const e of a){let t=1===this.getDirection()?{x:-e.x+this.shadow.pos.x,y:e.y-this.shadow.pos.y}:{x:e.x-this.shadow.pos.x,y:e.y-this.shadow.pos.y};t=Helper.GetRotatedPoint(t,{x:i,y:100},s);o+=t.x+"px "+t.y+"px, "}o=o.slice(0,-2);o+=")";const l=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${t}px;\n            height: ${2*e.height}px;\n            background: linear-gradient(${n},\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ${i}px 100px;\n            transform: translate3d(${r.x-i}px, ${r.y-100}px, 0) rotate(${s}rad);\n            clip-path: ${o};\n            -webkit-clip-path: ${o};\n        `;this.innerShadow.style.cssText=l}drawOuterShadow(){const e=this.getRect(),t=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,n=1===this.getDirection()?this.shadow.width:0,r=0===this.getDirection()?"to right":"to left",s=[{x:0,y:0},{x:e.pageWidth,y:0},{x:e.pageWidth,y:e.height},{x:0,y:e.height}];let a="polygon( ";for(const e of s)if(null!==e){let t=1===this.getDirection()?{x:-e.x+this.shadow.pos.x,y:e.y-this.shadow.pos.y}:{x:e.x-this.shadow.pos.x,y:e.y-this.shadow.pos.y};t=Helper.GetRotatedPoint(t,{x:n,y:100},i);a+=t.x+"px "+t.y+"px, "}a=a.slice(0,-2);a+=")";const o=`\n            display: block;\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\n            width: ${this.shadow.width}px;\n            height: ${2*e.height}px;\n            background: linear-gradient(${r}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\n            transform-origin: ${n}px 100px;\n            transform: translate3d(${t.x-n}px, ${t.y-100}px, 0) rotate(${i}rad);\n            clip-path: ${a};\n            -webkit-clip-path: ${a};\n        `;this.outerShadow.style.cssText=o}drawLeftPage(){if("portrait"!==this.orientation&&null!==this.leftPage)if(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()<-90){this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.leftPage.draw(this.flippingPage.getDrawingDensity())}else this.leftPage.getElement().style.display="none"}else this.leftPage.simpleDraw(0)}drawRightPage(){if(null!==this.rightPage)if(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()){if(this.flippingPage.getHardAngle()>90){this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle());this.rightPage.draw(this.flippingPage.getDrawingDensity())}else this.rightPage.getElement().style.display="none"}else this.rightPage.simpleDraw(1)}drawBottomPage(){if(null===this.bottomPage)return;const e=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;if("portrait"!==this.orientation||1!==this.direction){this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10);this.bottomPage.draw(e)}}drawFrame(){if(null!==this.flippingPage){if(this.flippingPage.getHardAngle()===this.lastAngle)return;this.lastAngle=this.flippingPage.getHardAngle()}else this.lastAngle=-1234;this.clear();this.drawLeftPage();this.drawRightPage();this.drawBottomPage();if(null!=this.flippingPage){if(this.flippingPage.state.hardDrawingAngle<=90){this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10);this.flippingPage.draw()}else this.flippingPage.getElement().style.display="none"}if(null!=this.shadow&&null!==this.flippingPage)if("soft"===this.flippingPage.getDrawingDensity()){this.drawOuterShadow();this.drawInnerShadow()}else{this.drawHardOuterShadow();this.drawHardInnerShadow()}}clear(){for(const e of this.app.getPageCollection().getPages()){if(e!==this.leftPage&&e!==this.rightPage&&e!==this.flippingPage&&e!==this.bottomPage){const t=e.getElement().style;"none"!==t.display&&(t.cssText="display: none")}e.getTemporaryCopy()!==this.flippingPage&&e.hideTemporaryCopy()}}update(){super.update();null!==this.rightPage&&this.rightPage.setOrientation(1);null!==this.leftPage&&this.leftPage.setOrientation(0)}}class Settings{constructor(){this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(e){const t=this._default;Object.assign(t,e);if("stretch"!==t.size&&"fixed"!==t.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(t.width<=0||t.height<=0)throw new Error("Invalid width or height");if(t.flippingTime<=0)throw new Error("Invalid flipping time");if("stretch"===t.size){t.minWidth<=0&&(t.minWidth=100);t.maxWidth<t.minWidth&&(t.maxWidth=2e3);t.minHeight<=0&&(t.minHeight=100);t.maxHeight<t.minHeight&&(t.maxHeight=2e3)}else{t.minWidth=t.width;t.maxWidth=t.width;t.minHeight=t.height;t.maxHeight=t.height}return t}}!function styleInject(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css";"top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r);r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}");t.PageFlip=class PageFlip extends class EventObject{constructor(){this.events=new Map}on(e,t){this.events.has(e)?this.events.get(e).push(t):this.events.set(e,[t]);return this}off(e){this.events.delete(e)}trigger(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(e))for(const n of this.events.get(e))n({data:i,object:t})}}{constructor(e,t){super();this.isUserTouch=!1;this.isUserMove=!1;this.setting=null;this.pages=null;this.setting=(new Settings).getSettings(t);this.block=e}destroy(){this.ui.destroy();this.block.remove()}update(){this.render.update();this.pages.show()}loadFromImages(e){this.ui=new CanvasUI(this.block,this,this.setting);const t=this.ui.getCanvas();this.render=new CanvasRender(this,this.setting,t);this.flipController=new Flip(this.render,this);this.pages=new ImagePageCollection(this,this.render,e);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((()=>{this.ui.update();this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}loadFromHTML(e){this.ui=new HTMLUI(this.block,this,this.setting,e);this.render=new HTMLRender(this,this.setting,this.ui.getDistElement());this.flipController=new Flip(this.render,this);this.pages=new HTMLPageCollection(this,this.render,this.ui.getDistElement(),e);this.pages.load();this.render.start();this.pages.show(this.setting.startPage);setTimeout((()=>{this.ui.update();this.trigger("init",this,{page:this.setting.startPage,mode:this.render.getOrientation()})}),1)}updateFromImages(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new ImagePageCollection(this,this.render,e);this.pages.load();this.pages.show(t);this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}updateFromHtml(e){const t=this.pages.getCurrentPageIndex();this.pages.destroy();this.pages=new HTMLPageCollection(this,this.render,this.ui.getDistElement(),e);this.pages.load();this.ui.updateItems(e);this.render.reload();this.pages.show(t);this.trigger("update",this,{page:t,mode:this.render.getOrientation()})}clear(){this.pages.destroy();this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(e){this.pages.show(e)}flipNext(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(e)}flipPrev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(e)}flip(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(e,t)}updateState(e){this.trigger("changeState",this,e)}updatePageIndex(e){this.trigger("flip",this,e)}updateOrientation(e){this.ui.setOrientationStyle(e);this.update();this.trigger("changeOrientation",this,e)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(e){return this.pages.getPage(e)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(e){this.mousePosition=e;this.isUserTouch=!0;this.isUserMove=!1}userMove(e,t){if(this.isUserTouch||t||!this.setting.showPageCorners){if(this.isUserTouch&&Helper.GetDistanceBetweenTwoPoint(this.mousePosition,e)>5){this.isUserMove=!0;this.flipController.fold(e)}}else this.flipController.showCorner(e)}userStop(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.isUserTouch){this.isUserTouch=!1;t||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(e))}}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPageView=void 0;var n=i(5),r=i(1),s=i(2),a=i(34),o=i(38),l=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(i(39)),c=i(40);function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}const d=s.compatibilityParams.maxCanvasPixels||16777216;var h=new WeakMap,u=new WeakMap;t.PDFPageView=class PDFPageView{constructor(e){var t,i,s,o;_classPrivateFieldInitSpec(this,h,{writable:!0,value:n.AnnotationMode.ENABLE_FORMS});_classPrivateFieldInitSpec(this,u,{writable:!0,value:{initialOptionalContent:!0,regularAnnotations:!0}});const l=e.container,c=e.defaultViewport;this.id=e.id;this.renderingId="page"+this.id;this.pdfPage=null;this.pageLabel=null;this.rotation=0;this.scale=e.scale||r.DEFAULT_SCALE;this.viewport=c;this.pdfPageRotate=c.rotation;this._optionalContentConfigPromise=e.optionalContentConfigPromise||null;this.hasRestrictedScaling=!1;this.textLayerMode=null!==(t=e.textLayerMode)&&void 0!==t?t:r.TextLayerMode.ENABLE;_classPrivateFieldSet(this,h,null!==(i=e.annotationMode)&&void 0!==i?i:n.AnnotationMode.ENABLE_FORMS);this.imageResourcesPath=e.imageResourcesPath||"";this.useOnlyCssZoom=e.useOnlyCssZoom||!1;this.maxCanvasPixels=e.maxCanvasPixels||d;this.pageColors=e.pageColors||null;this.eventBus=e.eventBus;this.renderingQueue=e.renderingQueue;this.textLayerFactory=e.textLayerFactory;this.annotationLayerFactory=e.annotationLayerFactory;this.annotationEditorLayerFactory=e.annotationEditorLayerFactory;this.xfaLayerFactory=e.xfaLayerFactory;this.textHighlighter=null===(s=e.textHighlighterFactory)||void 0===s?void 0:s.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus});this.structTreeLayerFactory=e.structTreeLayerFactory;this.renderer=e.renderer||r.RendererType.CANVAS;this.l10n=e.l10n||a.NullL10n;this.paintTask=null;this.paintedViewportMap=new WeakMap;this.renderingState=r.RenderingStates.INITIAL;this.resume=null;this._renderError=null;this._isStandalone=!(null!==(o=this.renderingQueue)&&void 0!==o&&o.hasViewer());this._annotationCanvasMap=null;this.annotationLayer=null;this.annotationEditorLayer=null;this.textLayer=null;this.zoomLayer=null;this.xfaLayer=null;this.structTreeLayer=null;const p=document.createElement("div");p.className="page";p.style.width=Math.floor(this.viewport.width)+"px";p.style.height=Math.floor(this.viewport.height)+"px";p.setAttribute("data-page-number",this.id);p.setAttribute("role","region");this.l10n.get("page_landmark",{page:this.id}).then((e=>{p.setAttribute("aria-label",e)}));this.div=p;null==l||l.append(p);if(this._isStandalone){const{optionalContentConfigPromise:t}=e;t&&t.then((e=>{t===this._optionalContentConfigPromise&&(_classPrivateFieldGet(this,u).initialOptionalContent=e.hasInitialVisibility)}))}}setPdfPage(e){this.pdfPage=e;this.pdfPageRotate=e.rotate;const t=(this.rotation+this.pdfPageRotate)%360;this.viewport=e.getViewport({scale:this.scale*n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:t});this.reset()}destroy(){this.reset();this.pdfPage&&this.pdfPage.cleanup()}async _renderAnnotationLayer(){let e=null;try{await this.annotationLayer.render(this.viewport,"display")}catch(t){console.error(`_renderAnnotationLayer: "${t}".`);e=t}finally{this.eventBus.dispatch("annotationlayerrendered",{source:this,pageNumber:this.id,error:e})}}async _renderAnnotationEditorLayer(){let e=null;try{await this.annotationEditorLayer.render(this.viewport,"display")}catch(t){console.error(`_renderAnnotationEditorLayer: "${t}".`);e=t}finally{this.eventBus.dispatch("annotationeditorlayerrendered",{source:this,pageNumber:this.id,error:e})}}async _renderXfaLayer(){let e=null;try{const t=await this.xfaLayer.render(this.viewport,"display");this.textHighlighter&&this._buildXfaTextContentItems(t.textDivs)}catch(t){console.error(`_renderXfaLayer: "${t}".`);e=t}finally{this.eventBus.dispatch("xfalayerrendered",{source:this,pageNumber:this.id,error:e})}}async _buildXfaTextContentItems(e){const t=await this.pdfPage.getTextContent(),i=[];for(const e of t.items)i.push(e.str);this.textHighlighter.setTextMapping(e,i);this.textHighlighter.enable()}_resetZoomLayer(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.zoomLayer)return;const t=this.zoomLayer.firstChild;this.paintedViewportMap.delete(t);t.width=0;t.height=0;e&&this.zoomLayer.remove();this.zoomLayer=null}reset(){var e,t,i;let{keepZoomLayer:n=!1,keepAnnotationLayer:s=!1,keepAnnotationEditorLayer:a=!1,keepXfaLayer:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.cancelRendering({keepAnnotationLayer:s,keepAnnotationEditorLayer:a,keepXfaLayer:o});this.renderingState=r.RenderingStates.INITIAL;const l=this.div;l.style.width=Math.floor(this.viewport.width)+"px";l.style.height=Math.floor(this.viewport.height)+"px";const c=l.childNodes,d=n&&this.zoomLayer||null,h=s&&(null===(e=this.annotationLayer)||void 0===e?void 0:e.div)||null,u=a&&(null===(t=this.annotationEditorLayer)||void 0===t?void 0:t.div)||null,p=o&&(null===(i=this.xfaLayer)||void 0===i?void 0:i.div)||null;for(let e=c.length-1;e>=0;e--){const t=c[e];switch(t){case d:case h:case u:case p:continue}t.remove()}l.removeAttribute("data-loaded");h&&this.annotationLayer.hide();if(u)this.annotationEditorLayer.hide();else{var g;null===(g=this.annotationEditorLayer)||void 0===g||g.destroy()}p&&this.xfaLayer.hide();if(!d){if(this.canvas){this.paintedViewportMap.delete(this.canvas);this.canvas.width=0;this.canvas.height=0;delete this.canvas}this._resetZoomLayer()}if(this.svg){this.paintedViewportMap.delete(this.svg);delete this.svg}this.loadingIconDiv=document.createElement("div");this.loadingIconDiv.className="loadingIcon notVisible";this._isStandalone&&this.toggleLoadingIconSpinner(!0);this.loadingIconDiv.setAttribute("role","img");this.l10n.get("loading").then((e=>{var t;null===(t=this.loadingIconDiv)||void 0===t||t.setAttribute("aria-label",e)}));l.append(this.loadingIconDiv)}update(e){let{scale:t=0,rotation:i=null,optionalContentConfigPromise:s=null}=e;this.scale=t||this.scale;"number"==typeof i&&(this.rotation=i);if(s instanceof Promise){this._optionalContentConfigPromise=s;s.then((e=>{s===this._optionalContentConfigPromise&&(_classPrivateFieldGet(this,u).initialOptionalContent=e.hasInitialVisibility)}))}const a=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*n.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:a});this._isStandalone&&r.docStyle.setProperty("--scale-factor",this.viewport.scale);if(this.svg){this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}let o=!1;if(this.canvas&&this.maxCanvasPixels>0){const e=this.outputScale;(Math.floor(this.viewport.width)*e.sx|0)*(Math.floor(this.viewport.height)*e.sy|0)>this.maxCanvasPixels&&(o=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&o){this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0});this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});return}if(!this.zoomLayer&&!this.canvas.hidden){this.zoomLayer=this.canvas.parentNode;this.zoomLayer.style.position="absolute"}}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild});this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering(){let{keepAnnotationLayer:e=!1,keepAnnotationEditorLayer:t=!1,keepXfaLayer:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.paintTask){this.paintTask.cancel();this.paintTask=null}this.resume=null;if(this.textLayer){this.textLayer.cancel();this.textLayer=null}if(this.annotationLayer&&(!e||!this.annotationLayer.div)){this.annotationLayer.cancel();this.annotationLayer=null;this._annotationCanvasMap=null}if(this.annotationEditorLayer&&(!t||!this.annotationEditorLayer.div)){this.annotationEditorLayer.cancel();this.annotationEditorLayer=null}if(this.xfaLayer&&(!i||!this.xfaLayer.div)){var n;this.xfaLayer.cancel();this.xfaLayer=null;null===(n=this.textHighlighter)||void 0===n||n.disable()}if(this._onTextLayerRendered){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null}}cssTransform(e){let{target:t,redrawAnnotationLayer:i=!1,redrawAnnotationEditorLayer:n=!1,redrawXfaLayer:r=!1}=e;const s=this.viewport.width,a=this.viewport.height,o=this.div;t.style.width=t.parentNode.style.width=o.style.width=Math.floor(s)+"px";t.style.height=t.parentNode.style.height=o.style.height=Math.floor(a)+"px";const l=this.viewport.rotation-this.paintedViewportMap.get(t).rotation,c=Math.abs(l);let d=1,h=1;if(90===c||270===c){d=a/s;h=s/a}t.style.transform=`rotate(${l}deg) scale(${d}, ${h})`;if(this.textLayer){const e=this.textLayer.viewport,t=this.viewport.rotation-e.rotation,i=Math.abs(t);let n=s/e.width;90!==i&&270!==i||(n=s/e.height);const r=this.textLayer.textLayerDiv;let a,o;switch(i){case 0:a=o=0;break;case 90:a=0;o="-"+r.style.height;break;case 180:a="-"+r.style.width;o="-"+r.style.height;break;case 270:a="-"+r.style.width;o=0;break;default:Window.ngxConsole.error("Bad rotation value.")}r.style.transform=`rotate(${i}deg) scale(${n}) translate(${a}, ${o})`;r.style.transformOrigin="0% 0%"}i&&this.annotationLayer&&this._renderAnnotationLayer();n&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer();r&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(e,t){return this.viewport.convertToPdfPoint(e,t)}toggleLoadingIconSpinner(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this.loadingIconDiv)||void 0===e||e.classList.toggle("notVisible",!t)}draw(){var e,t,i,s=this;if(this.renderingState!==r.RenderingStates.INITIAL){Window.ngxConsole.error("Must be in new state before drawing");this.reset()}const{div:a,pdfPage:l}=this;if(!l){this.renderingState=r.RenderingStates.FINISHED;if(this.loadingIconDiv){this.loadingIconDiv.remove();delete this.loadingIconDiv}return Promise.reject(new Error("pdfPage is not loaded"))}this.renderingState=r.RenderingStates.RUNNING;const c=document.createElement("div");c.style.width=a.style.width;c.style.height=a.style.height;c.classList.add("canvasWrapper");const d=(null===(e=this.annotationLayer)||void 0===e?void 0:e.div)||(null===(t=this.annotationEditorLayer)||void 0===t?void 0:t.div);d?d.before(c):a.append(c);let p=null;if(this.textLayerMode!==r.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||(this._accessibilityManager=new o.TextAccessibilityManager);const e=document.createElement("div");e.className="textLayer";e.style.width=c.style.width;e.style.height=c.style.height;d?d.before(e):a.append(e);p=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:e,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===r.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=p;if(_classPrivateFieldGet(this,h)!==n.AnnotationMode.DISABLE&&this.annotationLayerFactory){this._annotationCanvasMap||(this._annotationCanvasMap=new Map);this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:a,pdfPage:l,imageResourcesPath:this.imageResourcesPath,renderForms:_classPrivateFieldGet(this,h)===n.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager}))}null!==(i=this.xfaLayer)&&void 0!==i&&i.div&&a.append(this.xfaLayer.div);let g=null;this.renderingQueue&&(g=e=>{if(this.renderingQueue.isHighestPriority(this))e();else{this.renderingState=r.RenderingStates.PAUSED;this.resume=()=>{this.renderingState=r.RenderingStates.RUNNING;e()}}});const finishPaintTask=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;f===s.paintTask&&(s.paintTask=null);if(e instanceof n.RenderingCancelledException)s._renderError=null;else{s._renderError=e;s.renderingState=r.RenderingStates.FINISHED;if(s.loadingIconDiv){s.loadingIconDiv.remove();delete s.loadingIconDiv}s._resetZoomLayer(!0);_classPrivateFieldGet(s,u).regularAnnotations=!f.separateAnnots;s.eventBus.dispatch("pagerendered",{source:s,pageNumber:s.id,cssTransform:!1,timestamp:performance.now(),error:s._renderError});if(e)throw e}},f=this.renderer===r.RendererType.SVG?this.paintOnSvg(c):this.paintOnCanvas(c);f.onRenderContinue=g;this.paintTask=f;const m=f.promise.then((()=>finishPaintTask(null).then((()=>{if(p){const e=l.streamTextContent({includeMarkedContent:!0});p.setTextContentStream(e);p.render()}this.annotationLayer&&this._renderAnnotationLayer().then((()=>{if(this.annotationEditorLayerFactory){this.annotationEditorLayer||(this.annotationEditorLayer=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:a,pdfPage:l,l10n:this.l10n,accessibilityManager:this._accessibilityManager}));this._renderAnnotationEditorLayer()}}))}))),(function(e){return finishPaintTask(e)}));if(this.xfaLayerFactory){this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:a,pdfPage:l}));this._renderXfaLayer()}if(this.structTreeLayerFactory&&this.textLayer&&this.canvas){this._onTextLayerRendered=e=>{if(e.pageNumber===this.id){this.eventBus._off("textlayerrendered",this._onTextLayerRendered);this._onTextLayerRendered=null;this.canvas&&this.pdfPage.getStructTree().then((e=>{if(!e)return;if(!this.canvas)return;const t=this.structTreeLayer.render(e);t.classList.add("structTree");this.canvas.append(t)}))}};this.eventBus._on("textlayerrendered",this._onTextLayerRendered);this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:l})}a.setAttribute("data-loaded",!0);this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id});return m}paintOnCanvas(e){const t=(0,n.createPromiseCapability)(),i={promise:t.promise,onRenderContinue(e){e()},cancel(){P.cancel()},get separateAnnots(){return P.separateAnnots}},s=this.viewport,a=document.createElement("canvas");a.setAttribute("role","presentation");a.hidden=!0;let o=!0;const showCanvas=function(){if(o){a.hidden=!1;o=!1}};e.append(a);this.canvas=a;const d=a.getContext("2d",{alpha:!1}),u=this.outputScale=new r.OutputScale;if(this.useOnlyCssZoom){const e=s.clone({scale:n.PixelsPerInch.PDF_TO_CSS_UNITS});u.sx*=e.width/s.width;u.sy*=e.height/s.height}if(this.maxCanvasPixels>0){const e=s.width*s.height,t=Math.sqrt(this.maxCanvasPixels/e);if(u.sx>t||u.sy>t){u.sx=t;u.sy=t;this.hasRestrictedScaling=!0}else this.hasRestrictedScaling=!1}const p=(0,r.approximateFraction)(u.sx),g=(0,r.approximateFraction)(u.sy),f=(0,r.roundToDivide)(s.width*u.sx,p[0]),m=(0,r.roundToDivide)(s.height*u.sy,g[0]);let v=1;if((f>=4096||m>=4096)&&(this.maxWidth||!l.default.test({width:f,height:m}))){const e=this.determineMaxDimensions();v=Math.max(f/e,m/e);if(v>1){const e=Math.floor(100*this.scale/v)/100;v=this.scale/e;s.width/=v;s.height/=v;(0,c.warn)(`Page ${this.id}: Reduced the maximum zoom to ${e} because the browser can't render larger canvases.`)}else v=1}a.width=(0,r.roundToDivide)(s.width*u.sx,p[0]);a.height=(0,r.roundToDivide)(s.height*u.sy,g[0]);a.style.width=(0,r.roundToDivide)(s.width*v,p[1])+"px";a.style.height=(0,r.roundToDivide)(s.height*v,g[1])+"px";this.paintedViewportMap.set(a,s);const _=u.scaled?[u.sx,0,0,u.sy,0,0]:null;let b=PDFViewerApplicationOptions.get("pdfBackgroundColor");if("function"==typeof b){const e=b({pageNumber:this.id,pageLabel:this.pageLabel});e&&(b=e)}let w=b?PDFViewerApplicationOptions.get("pdfBackgroundColorToReplace"):null;if("function"==typeof w){const e=w({pageNumber:this.id,pageLabel:this.pageLabel});e&&(w=e)}const y={canvasContext:d,transform:_,viewport:this.viewport,annotationMode:_classPrivateFieldGet(this,h),optionalContentConfigPromise:this._optionalContentConfigPromise,background:b,backgroundColorToReplace:w,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},P=this.pdfPage.render(y);P.onContinue=function(e){showCanvas();i.onRenderContinue?i.onRenderContinue(e):e()};P.promise.then((function(){showCanvas();t.resolve()}),(function(e){showCanvas();t.reject(e)}));return i}paintOnSvg(e){let t=!1;const ensureNotCancelled=()=>{if(t)throw new n.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,s=this.viewport.clone({scale:n.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:_classPrivateFieldGet(this,h)}).then((t=>{ensureNotCancelled();return new n.SVGGraphics(i.commonObjs,i.objs).getSVG(t,s).then((t=>{ensureNotCancelled();this.svg=t;this.paintedViewportMap.set(t,s);t.style.width=e.style.width;t.style.height=e.style.height;this.renderingState=r.RenderingStates.FINISHED;e.append(t)}))})),onRenderContinue(e){e()},cancel(){t=!0},get separateAnnots(){return!1}}}setPageLabel(e){this.pageLabel="string"==typeof e?e:null;null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}determineMaxDimensions(){if(this.maxWidth)return this.maxWidth;const e=[4096,8192,10836,11180,11402,14188,16384];for(const t of e)if(!l.default.test({width:t+1,height:t+1})){this.maxWidth=t;return this.maxWidth}return 16384}get thumbnailCanvas(){const{initialOptionalContent:e,regularAnnotations:t}=_classPrivateFieldGet(this,u);return e&&t?this.canvas:null}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextAccessibilityManager=void 0;var n=i(1);function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function _classStaticPrivateMethodGet(e,t,i){!function _classCheckPrivateStaticAccess(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t);return i}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var r=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakMap,l=new WeakSet;class TextAccessibilityManager{constructor(){!function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}(this,l);_classPrivateFieldInitSpec(this,r,{writable:!0,value:!1});_classPrivateFieldInitSpec(this,s,{writable:!0,value:null});_classPrivateFieldInitSpec(this,a,{writable:!0,value:new Map});_classPrivateFieldInitSpec(this,o,{writable:!0,value:new Map})}setTextMapping(e){_classPrivateFieldSet(this,s,e)}enable(){if(_classPrivateFieldGet(this,r))throw new Error("TextAccessibilityManager is already enabled.");if(!_classPrivateFieldGet(this,s))throw new Error("Text divs and strings have not been set.");_classPrivateFieldSet(this,r,!0);_classPrivateFieldSet(this,s,_classPrivateFieldGet(this,s).slice());_classPrivateFieldGet(this,s).sort(_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions));if(_classPrivateFieldGet(this,a).size>0){const e=_classPrivateFieldGet(this,s);for(const[t,i]of _classPrivateFieldGet(this,a)){document.getElementById(t)?_classPrivateMethodGet(this,l,_addIdToAriaOwns2).call(this,t,e[i]):_classPrivateFieldGet(this,a).delete(t)}}for(const[e,t]of _classPrivateFieldGet(this,o))this.addPointerInTextLayer(e,t);_classPrivateFieldGet(this,o).clear()}disable(){if(_classPrivateFieldGet(this,r)){_classPrivateFieldGet(this,o).clear();_classPrivateFieldSet(this,s,null);_classPrivateFieldSet(this,r,!1)}}removePointerInTextLayer(e){var t;if(!_classPrivateFieldGet(this,r)){_classPrivateFieldGet(this,o).delete(e);return}const i=_classPrivateFieldGet(this,s);if(!i||0===i.length)return;const{id:n}=e,l=_classPrivateFieldGet(this,a).get(n);if(void 0===l)return;const c=i[l];_classPrivateFieldGet(this,a).delete(n);let d=c.getAttribute("aria-owns");if(null!==(t=d)&&void 0!==t&&t.includes(n)){d=d.split(" ").filter((e=>e!==n)).join(" ");if(d)c.setAttribute("aria-owns",d);else{c.removeAttribute("aria-owns");c.setAttribute("role","presentation")}}}addPointerInTextLayer(e,t){const{id:i}=e;if(!i)return;if(!_classPrivateFieldGet(this,r)){_classPrivateFieldGet(this,o).set(e,t);return}t&&this.removePointerInTextLayer(e);const c=_classPrivateFieldGet(this,s);if(!c||0===c.length)return;const d=(0,n.binarySearchFirstItem)(c,(t=>_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,e,t)<0)),h=Math.max(0,d-1);_classPrivateMethodGet(this,l,_addIdToAriaOwns2).call(this,i,c[h]);_classPrivateFieldGet(this,a).set(i,h)}moveElementInDOM(e,t,i,r){this.addPointerInTextLayer(i,r);if(!e.hasChildNodes()){e.append(t);return}const s=Array.from(e.childNodes).filter((e=>e!==t));if(0===s.length)return;const a=i||t,o=(0,n.binarySearchFirstItem)(s,(e=>_classStaticPrivateMethodGet(TextAccessibilityManager,TextAccessibilityManager,_compareElementPositions).call(TextAccessibilityManager,a,e)<0));0===o?s[0].before(t):s[o-1].after(t)}}t.TextAccessibilityManager=TextAccessibilityManager;function _compareElementPositions(e,t){const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();if(0===i.width&&0===i.height)return 1;if(0===n.width&&0===n.height)return-1;const r=i.y,s=i.y+i.height,a=i.y+i.height/2,o=n.y,l=n.y+n.height,c=n.y+n.height/2;if(a<=o&&c>=s)return-1;if(c<=r&&a>=l)return 1;return i.x+i.width/2-(n.x+n.width/2)}function _addIdToAriaOwns2(e,t){const i=t.getAttribute("aria-owns");null!=i&&i.includes(e)||t.setAttribute("aria-owns",i?`${i} ${e}`:e);t.removeAttribute("role")}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=void 0;function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})));i.push.apply(i,n)}return i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach((function(t){_defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _defineProperty(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e}function _objectWithoutProperties(e,t){if(null==e)return{};var i,n,r=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++){i=s[n];t.indexOf(i)>=0||(r[i]=e[i])}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++){i=s[n];t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}}return r}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,s=[],a=!0,o=!1;try{for(i=i.call(e);!(a=(n=i.next()).done);a=!0){s.push(n.value);if(t&&s.length===t)break}}catch(e){o=!0;r=e}finally{try{a||null==i.return||i.return()}finally{if(o)throw r}}return s}(e,t)||_unsupportedIterableToArray(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}(e)||function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_unsupportedIterableToArray(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);return"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function canvasTest(e){var t,i,n=e.sizes.shift(),r=Math.max(Math.ceil(n[0]),1),s=Math.max(Math.ceil(n[1]),1),a=[r-1,s-1,1,1],o=Date.now(),l="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;if(l){t=new OffscreenCanvas(1,1);i=new OffscreenCanvas(r,s)}else{(t=document.createElement("canvas")).width=1;t.height=1;(i=document.createElement("canvas")).width=r;i.height=s}var c=t.getContext("2d"),d=i.getContext("2d");if(d){d.fillRect.apply(d,a);c.drawImage(i,r-1,s-1,1,1,0,0,1,1)}var h=c&&0!==c.getImageData(0,0,1,1).data[3],u=Date.now()-o;if(l){postMessage({width:r,height:s,benchmark:u,isTestPass:h});!h&&e.sizes.length&&canvasTest(e)}else if(h)e.onSuccess(r,s,u);else{e.onError(r,s,u);e.sizes.length&&canvasTest(e)}return h}var i=[16384,14188,11402,11180,10836,8192,4096,1],n=[8388607,65535,32767,16384,8192,4096,1],r=[4194303,65535,32767,16384,8192,4096,1],s=["onError","onSuccess"],a={max:null,min:1,sizes:[],step:1024,usePromise:!1,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},o={};function createSizesArray(e){var t=e.width===e.height,i=1===e.height,n=1===e.width,r=[];if(e.width&&e.height)for(var s=e.min||a.min,o=e.step||a.step,l=Math.max(e.width,e.height);l>=s;){var c=t||i?l:1,d=t||n?l:1;r.push([c,d]);l-=o}else e.sizes.forEach((function(e){var s=t||i?e:1,a=t||n?e:1;r.push([s,a])}));return r}function handleMethod(e){var t=window&&"HTMLCanvasElement"in window,i=window&&"OffscreenCanvas"in window,n=Date.now(),r=e.onError,a=e.onSuccess,l=_objectWithoutProperties(e,s),c=null;if(!t)return!1;if(e.useWorker&&i){var d="\n            var canvasTest = ".concat(canvasTest.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),h=new Blob([d],{type:"application/javascript"}),u=URL.createObjectURL(h);c=new Worker(u);URL.revokeObjectURL(u);c.onmessage=function(e){var t=e.data,i=t.width,r=t.height,s=t.benchmark;if(t.isTestPass){o[n].onSuccess(i,r,s);delete o[n]}else o[n].onError(i,r,s)}}if(e.usePromise)return new Promise((function(t,i){var s=_objectSpread2(_objectSpread2({},e),{},{onError:function onError(t,n,s){var a;if(0===e.sizes.length)a=!0;else{var o=_slicedToArray(e.sizes.slice(-1),1),l=_slicedToArray(o[0],2),c=l[0],d=l[1];a=t===c&&n===d}r(t,n,s);a&&i({width:t,height:n,benchmark:s})},onSuccess:function onSuccess(e,i,n){a(e,i,n);t({width:e,height:i,benchmark:n})}});if(c){var d=s.onError,h=s.onSuccess;o[n]={onError:d,onSuccess:h};c.postMessage(l)}else canvasTest(s)}));if(!c)return canvasTest(e);o[n]={onError:r,onSuccess:a};c.postMessage(l)}var l={maxArea:function maxArea(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:e.max,height:e.max,min:e.min,step:e.step,sizes:_toConsumableArray(i)}),n=_objectSpread2(_objectSpread2(_objectSpread2({},a),e),{},{sizes:t});return handleMethod(n)},maxHeight:function maxHeight(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:1,height:e.max,min:e.min,step:e.step,sizes:_toConsumableArray(n)}),i=_objectSpread2(_objectSpread2(_objectSpread2({},a),e),{},{sizes:t});return handleMethod(i)},maxWidth:function maxWidth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=createSizesArray({width:e.max,height:1,min:e.min,step:e.step,sizes:_toConsumableArray(r)}),i=_objectSpread2(_objectSpread2(_objectSpread2({},a),e),{},{sizes:t});return handleMethod(i)},test:function test(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_objectSpread2(_objectSpread2({},a),e);t.sizes=_toConsumableArray(t.sizes);t.width&&t.height&&(t.sizes=[[t.width,t.height]]);return handleMethod(t)}};t.default=l},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0;t.arrayByteLength=arrayByteLength;t.arraysToBytes=function arraysToBytes(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let i=0;for(let n=0;n<t;n++)i+=arrayByteLength(e[n]);let n=0;const r=new Uint8Array(i);for(let i=0;i<t;i++){let t=e[i];t instanceof Uint8Array||(t="string"==typeof t?stringToBytes(t):new Uint8Array(t));const s=t.byteLength;r.set(t,n);n+=s}return r};t.assert=function assert(e,t){e||unreachable(t)};t.bytesToString=function bytesToString(e){"object"==typeof e&&null!==e&&void 0!==e.length||unreachable("Invalid argument for bytesToString");const t=e.length,i=8192;if(t<i)return String.fromCharCode.apply(null,e);const n=[];for(let r=0;r<t;r+=i){const s=Math.min(r+i,t),a=e.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")};t.createPromiseCapability=function createPromiseCapability(){const e=Object.create(null);let t=!1;Object.defineProperty(e,"settled",{get:()=>t});e.promise=new Promise((function(i,n){e.resolve=function(e){t=!0;i(e)};e.reject=function(e){t=!0;n(e)}}));return e};t.createValidAbsoluteUrl=function createValidAbsoluteUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(i&&"string"==typeof e){if(i.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e=`http://${e}`)}if(i.tryConvertEncoding)try{e=stringToUTF8String(e)}catch(e){}}const n=t?new URL(e,t):new URL(e);if(_isValidProtocol(n))return n}catch(e){}return null};t.escapeString=function escapeString(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))};t.getModificationDate=function getModificationDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")};t.getVerbosityLevel=function getVerbosityLevel(){return r};t.info=function info(e){r>=n.INFOS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log(`Info: ${e}`):Window&&Window.ngxConsole?Window.ngxConsole.log(`Info: ${e}`):console.log(`Info: ${e}`))};t.isArrayBuffer=function isArrayBuffer(e){return"object"==typeof e&&null!==e&&void 0!==e.byteLength};t.isArrayEqual=function isArrayEqual(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0};t.isAscii=function isAscii(e){return/^[\x00-\x7F]*$/.test(e)};t.objectFromMap=function objectFromMap(e){const t=Object.create(null);for(const[i,n]of e)t[i]=n;return t};t.objectSize=function objectSize(e){return Object.keys(e).length};t.setVerbosityLevel=function setVerbosityLevel(e){Number.isInteger(e)&&(r=e)};t.shadow=shadow;t.string32=function string32(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)};t.stringToBytes=stringToBytes;t.stringToPDFString=function stringToPDFString(e){if(e[0]>="ï"){let t;"þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8");if(t)try{const i=new TextDecoder(t,{fatal:!0}),n=stringToBytes(e);return i.decode(n)}catch(e){warn(`stringToPDFString: "${e}".`)}}const t=[];for(let i=0,n=e.length;i<n;i++){const n=o[e.charCodeAt(i)];t.push(n?String.fromCharCode(n):e.charAt(i))}return t.join("")};t.stringToUTF16BEString=function stringToUTF16BEString(e){const t=["þÿ"];for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);t.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return t.join("")};t.stringToUTF8String=stringToUTF8String;t.unreachable=unreachable;t.utf8StringToString=function utf8StringToString(e){return unescape(encodeURIComponent(e))};t.warn=warn;i(41);t.IDENTITY_MATRIX=[1,0,0,1,0,0];t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0];t.LINE_FACTOR=1.35;t.LINE_DESCENT_FACTOR=.35;t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationEditorPrefix="pdfjs_internal_editor_";t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"};t.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReplyType={GROUP:"Group",REPLY:"R"};t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.PageActionEventType={O:"PageOpen",C:"PageClose"};t.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const n={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=n;t.CMapCompressionType={NONE:0,BINARY:1,STREAM:2};t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=n.WARNINGS;function warn(e){r>=n.WARNINGS&&("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?console.log(`Warning: ${e}`):Window&&Window.ngxConsole?Window.ngxConsole.log(`Warning: ${e}`):console.log(`Warning: ${e}`))}function unreachable(e){throw new Error(e)}function _isValidProtocol(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":case"capacitor":return!0;default:return!1}}function shadow(e,t,i){Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!1});return i}const s=function BaseExceptionClosure(){function BaseException(e,t){this.constructor===BaseException&&unreachable("Cannot initialize BaseException.");this.message=e;this.name=t}BaseException.prototype=new Error;BaseException.constructor=BaseException;return BaseException}();t.BaseException=s;t.PasswordException=class PasswordException extends s{constructor(e,t){super(e,"PasswordException");this.code=t}};t.UnknownErrorException=class UnknownErrorException extends s{constructor(e,t){super(e,"UnknownErrorException");this.details=t}};t.InvalidPDFException=class InvalidPDFException extends s{constructor(e){super(e,"InvalidPDFException")}};t.MissingPDFException=class MissingPDFException extends s{constructor(e){super(e,"MissingPDFException")}};t.UnexpectedResponseException=class UnexpectedResponseException extends s{constructor(e,t){super(e,"UnexpectedResponseException");this.status=t}};t.FormatError=class FormatError extends s{constructor(e){super(e,"FormatError")}};t.AbortException=class AbortException extends s{constructor(e){super(e,"AbortException")}};function stringToBytes(e){"string"!=typeof e&&unreachable("Invalid argument for stringToBytes");const t=e.length,i=new Uint8Array(t);for(let n=0;n<t;++n)i[n]=255&e.charCodeAt(n);return i}function arrayByteLength(e){if(void 0!==e.length)return e.length;if(void 0!==e.byteLength)return e.byteLength;unreachable("Invalid argument for arrayByteLength")}t.FeatureTest=class FeatureTest{static get isLittleEndian(){return shadow(this,"isLittleEndian",function isLittleEndian(){const e=new Uint8Array(4);e[0]=1;return 1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return shadow(this,"isEvalSupported",function isEvalSupported(){try{new Function("");return!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return shadow(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const a=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class Util{static makeHexColor(e,t,i){return`#${a[e]}${a[t]}${a[i]}`}static scaleMinMax(e,t){let i;if(e[0]){if(e[0]<0){i=t[0];t[0]=t[1];t[1]=i}t[0]*=e[0];t[1]*=e[0];if(e[3]<0){i=t[2];t[2]=t[3];t[3]=i}t[2]*=e[3];t[3]*=e[3]}else{i=t[0];t[0]=t[2];t[2]=i;i=t[1];t[1]=t[3];t[3]=i;if(e[1]<0){i=t[2];t[2]=t[3];t[3]=i}t[2]*=e[1];t[3]*=e[1];if(e[2]<0){i=t[0];t[0]=t[1];t[1]=i}t[0]*=e[2];t[1]*=e[2]}t[0]+=e[4];t[1]+=e[4];t[2]+=e[5];t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i]}static getAxialAlignedBoundingBox(e,t){const i=Util.applyTransform(e,t),n=Util.applyTransform(e.slice(2,4),t),r=Util.applyTransform([e[0],e[3]],t),s=Util.applyTransform([e[2],e[1]],t);return[Math.min(i[0],n[0],r[0],s[0]),Math.min(i[1],n[1],r[1],s[1]),Math.max(i[0],n[0],r[0],s[0]),Math.max(i[1],n[1],r[1],s[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],s=e[2]*t[1]+e[3]*t[3],a=(i+s)/2,o=Math.sqrt((i+s)**2-4*(i*s-r*n))/2,l=a+o||1,c=a-o||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);if(e[0]>e[2]){t[0]=e[2];t[2]=e[0]}if(e[1]>e[3]){t[1]=e[3];t[3]=e[1]}return t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>n)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>s?null:[i,r,n,s]}static bezierBoundingBox(e,t,i,n,r,s,a,o){const l=[],c=[[],[]];let d,h,u,p,g,f,m,v;for(let c=0;c<2;++c){if(0===c){h=6*e-12*i+6*r;d=-3*e+9*i-9*r+3*a;u=3*i-3*e}else{h=6*t-12*n+6*s;d=-3*t+9*n-9*s+3*o;u=3*n-3*t}if(Math.abs(d)<1e-12){if(Math.abs(h)<1e-12)continue;p=-u/h;0<p&&p<1&&l.push(p)}else{m=h*h-4*u*d;v=Math.sqrt(m);if(!(m<0)){g=(-h+v)/(2*d);0<g&&g<1&&l.push(g);f=(-h-v)/(2*d);0<f&&f<1&&l.push(f)}}}let _,b=l.length;const w=b;for(;b--;){p=l[b];_=1-p;c[0][b]=_*_*_*e+3*_*_*p*i+3*_*p*p*r+p*p*p*a;c[1][b]=_*_*_*t+3*_*_*p*n+3*_*p*p*s+p*p*p*o}c[0][w]=e;c[1][w]=t;c[0][w+1]=a;c[1][w+1]=o;c[0].length=c[1].length=w+2;return[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}}t.Util=Util;const o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function stringToUTF8String(e){return decodeURIComponent(escape(e))}},(e,t,i)=>{"use strict";if(!globalThis._pdfjsCompatibilityChecked){globalThis._pdfjsCompatibilityChecked=!0;!function checkNodeBtoa(){globalThis.btoa}();!function checkNodeAtob(){globalThis.atob}();!function checkDOMMatrix(){globalThis.DOMMatrix}();!function checkReadableStream(){globalThis.ReadableStream}();!function checkArrayAt(){Array.prototype.at||i(42)}();!function checkTypedArrayAt(){Uint8Array.prototype.at||i(115)}();!function checkStructuredClone(){globalThis.structuredClone||i(125)}()}},(e,t,i)=>{i(43);var n=i(114);e.exports=n("Array","at")},(e,t,i)=>{"use strict";var n=i(44),r=i(80),s=i(104),a=i(102),o=i(109);n({target:"Array",proto:!0},{at:function at(e){var t=r(this),i=s(t),n=a(e),o=n>=0?n:i+n;return o<0||o>=i?void 0:t[o]}});o("at")},(e,t,i)=>{var n=i(45),r=i(46).f,s=i(84),a=i(88),o=i(78),l=i(96),c=i(108);e.exports=function(e,t){var i,d,h,u,p,g=e.target,f=e.global,m=e.stat;if(i=f?n:m?n[g]||o(g,{}):(n[g]||{}).prototype)for(d in t){u=t[d];h=e.dontCallGetSet?(p=r(i,d))&&p.value:i[d];if(!c(f?d:g+(m?".":"#")+d,e.forced)&&void 0!==h){if(typeof u==typeof h)continue;l(u,h)}(e.sham||h&&h.sham)&&s(u,"sham",!0);a(i,d,u,e)}}},e=>{var check=function(e){return e&&e.Math==Math&&e};e.exports=check("object"==typeof globalThis&&globalThis)||check("object"==typeof window&&window)||check("object"==typeof self&&self)||check("object"==typeof global&&global)||function(){return this}()||Function("return this")()},(e,t,i)=>{var n=i(47),r=i(49),s=i(51),a=i(52),o=i(53),l=i(59),c=i(79),d=i(82),h=Object.getOwnPropertyDescriptor;t.f=n?h:function getOwnPropertyDescriptor(e,t){e=o(e);t=l(t);if(d)try{return h(e,t)}catch(e){}if(c(e,t))return a(!r(s.f,e,t),e[t])}},(e,t,i)=>{var n=i(48);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,i)=>{var n=i(50),r=Function.prototype.call;e.exports=n?r.bind(r):function(){return r.apply(r,arguments)}},(e,t,i)=>{var n=i(48);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},(e,t)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,r=n&&!i.call({1:2},1);t.f=r?function propertyIsEnumerable(e){var t=n(this,e);return!!t&&t.enumerable}:i},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,i)=>{var n=i(54),r=i(57);e.exports=function(e){return n(r(e))}},(e,t,i)=>{var n=i(55),r=i(48),s=i(56),a=Object,o=n("".split);e.exports=r((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?o(e,""):a(e)}:a},(e,t,i)=>{var n=i(50),r=Function.prototype,s=r.bind,a=r.call,o=n&&s.bind(a,a);e.exports=n?function(e){return e&&o(e)}:function(e){return e&&function(){return a.apply(e,arguments)}}},(e,t,i)=>{var n=i(55),r=n({}.toString),s=n("".slice);e.exports=function(e){return s(r(e),8,-1)}},(e,t,i)=>{var n=i(58),r=TypeError;e.exports=function(e){if(n(e))throw r("Can't call method on "+e);return e}},e=>{e.exports=function(e){return null==e}},(e,t,i)=>{var n=i(60),r=i(63);e.exports=function(e){var t=n(e,"string");return r(t)?t:t+""}},(e,t,i)=>{var n=i(49),r=i(61),s=i(63),a=i(70),o=i(73),l=i(74),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var i,l=a(e,d);if(l){void 0===t&&(t="default");i=n(l,e,t);if(!r(i)||s(i))return i;throw c("Can't convert object to primitive value")}void 0===t&&(t="number");return o(e,t)}},(e,t,i)=>{var n=i(62),r="object"==typeof document&&document.all,s=void 0===r&&void 0!==r;e.exports=s?function(e){return"object"==typeof e?null!==e:n(e)||e===r}:function(e){return"object"==typeof e?null!==e:n(e)}},e=>{e.exports=function(e){return"function"==typeof e}},(e,t,i)=>{var n=i(64),r=i(62),s=i(65),a=i(66),o=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return r(t)&&s(t.prototype,o(e))}},(e,t,i)=>{var n=i(45),r=i(62),aFunction=function(e){return r(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?aFunction(n[e]):n[e]&&n[e][t]}},(e,t,i)=>{var n=i(55);e.exports=n({}.isPrototypeOf)},(e,t,i)=>{var n=i(67);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,i)=>{var n=i(68),r=i(48);e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},(e,t,i)=>{var n,r,s=i(45),a=i(69),o=s.process,l=s.Deno,c=o&&o.versions||l&&l.version,d=c&&c.v8;d&&(r=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1]));!r&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(r=+n[1]);e.exports=r},(e,t,i)=>{var n=i(64);e.exports=n("navigator","userAgent")||""},(e,t,i)=>{var n=i(71),r=i(58);e.exports=function(e,t){var i=e[t];return r(i)?void 0:n(i)}},(e,t,i)=>{var n=i(62),r=i(72),s=TypeError;e.exports=function(e){if(n(e))return e;throw s(r(e)+" is not a function")}},e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},(e,t,i)=>{var n=i(49),r=i(62),s=i(61),a=TypeError;e.exports=function(e,t){var i,o;if("string"===t&&r(i=e.toString)&&!s(o=n(i,e)))return o;if(r(i=e.valueOf)&&!s(o=n(i,e)))return o;if("string"!==t&&r(i=e.toString)&&!s(o=n(i,e)))return o;throw a("Can't convert object to primitive value")}},(e,t,i)=>{var n=i(45),r=i(75),s=i(79),a=i(81),o=i(67),l=i(66),c=r("wks"),d=n.Symbol,h=d&&d.for,u=l?d:d&&d.withoutSetter||a;e.exports=function(e){if(!s(c,e)||!o&&"string"!=typeof c[e]){var t="Symbol."+e;o&&s(d,e)?c[e]=d[e]:c[e]=l&&h?h(t):u(t)}return c[e]}},(e,t,i)=>{var n=i(76),r=i(77);(e.exports=function(e,t){return r[e]||(r[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.25.1",mode:n?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.25.1/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,i)=>{var n=i(45),r=i(78),s="__core-js_shared__",a=n[s]||r(s,{});e.exports=a},(e,t,i)=>{var n=i(45),r=Object.defineProperty;e.exports=function(e,t){try{r(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},(e,t,i)=>{var n=i(55),r=i(80),s=n({}.hasOwnProperty);e.exports=Object.hasOwn||function hasOwn(e,t){return s(r(e),t)}},(e,t,i)=>{var n=i(57),r=Object;e.exports=function(e){return r(n(e))}},(e,t,i)=>{var n=i(55),r=0,s=Math.random(),a=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++r+s,36)}},(e,t,i)=>{var n=i(47),r=i(48),s=i(83);e.exports=!n&&!r((function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},(e,t,i)=>{var n=i(45),r=i(61),s=n.document,a=r(s)&&r(s.createElement);e.exports=function(e){return a?s.createElement(e):{}}},(e,t,i)=>{var n=i(47),r=i(85),s=i(52);e.exports=n?function(e,t,i){return r.f(e,t,s(1,i))}:function(e,t,i){e[t]=i;return e}},(e,t,i)=>{var n=i(47),r=i(82),s=i(86),a=i(87),o=i(59),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",u="configurable",p="writable";t.f=n?s?function defineProperty(e,t,i){a(e);t=o(t);a(i);if("function"==typeof e&&"prototype"===t&&"value"in i&&p in i&&!i.writable){var n=d(e,t);if(n&&n.writable){e[t]=i.value;i={configurable:u in i?i.configurable:n.configurable,enumerable:h in i?i.enumerable:n.enumerable,writable:!1}}}return c(e,t,i)}:c:function defineProperty(e,t,i){a(e);t=o(t);a(i);if(r)try{return c(e,t,i)}catch(e){}if("get"in i||"set"in i)throw l("Accessors not supported");"value"in i&&(e[t]=i.value);return e}},(e,t,i)=>{var n=i(47),r=i(48);e.exports=n&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},(e,t,i)=>{var n=i(61),r=String,s=TypeError;e.exports=function(e){if(n(e))return e;throw s(r(e)+" is not an object")}},(e,t,i)=>{var n=i(62),r=i(85),s=i(89),a=i(78);e.exports=function(e,t,i,o){o||(o={});var l=o.enumerable,c=void 0!==o.name?o.name:t;n(i)&&s(i,c,o);if(o.global)l?e[t]=i:a(t,i);else{try{o.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:r.f(e,t,{value:i,enumerable:!1,configurable:!o.nonConfigurable,writable:!o.nonWritable})}return e}},(e,t,i)=>{var n=i(48),r=i(62),s=i(79),a=i(47),o=i(90).CONFIGURABLE,l=i(91),c=i(92),d=c.enforce,h=c.get,u=Object.defineProperty,p=a&&!n((function(){return 8!==u((function(){}),"length",{value:8}).length})),g=String(String).split("String"),f=e.exports=function(e,t,i){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]");i&&i.getter&&(t="get "+t);i&&i.setter&&(t="set "+t);(!s(e,"name")||o&&e.name!==t)&&(a?u(e,"name",{value:t,configurable:!0}):e.name=t);p&&i&&s(i,"arity")&&e.length!==i.arity&&u(e,"length",{value:i.arity});try{i&&s(i,"constructor")&&i.constructor?a&&u(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);s(n,"source")||(n.source=g.join("string"==typeof t?t:""));return e};Function.prototype.toString=f((function toString(){return r(this)&&h(this).source||l(this)}),"toString")},(e,t,i)=>{var n=i(47),r=i(79),s=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,o=r(s,"name"),l=o&&"something"===function something(){}.name,c=o&&(!n||n&&a(s,"name").configurable);e.exports={EXISTS:o,PROPER:l,CONFIGURABLE:c}},(e,t,i)=>{var n=i(55),r=i(62),s=i(77),a=n(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return a(e)});e.exports=s.inspectSource},(e,t,i)=>{var n,r,s,a=i(93),o=i(45),l=i(55),c=i(61),d=i(84),h=i(79),u=i(77),p=i(94),g=i(95),f="Object already initialized",m=o.TypeError,v=o.WeakMap;if(a||u.state){var _=u.state||(u.state=new v),b=l(_.get),w=l(_.has),y=l(_.set);n=function(e,t){if(w(_,e))throw m(f);t.facade=e;y(_,e,t);return t};r=function(e){return b(_,e)||{}};s=function(e){return w(_,e)}}else{var P=p("state");g[P]=!0;n=function(e,t){if(h(e,P))throw m(f);t.facade=e;d(e,P,t);return t};r=function(e){return h(e,P)?e[P]:{}};s=function(e){return h(e,P)}}e.exports={set:n,get:r,has:s,enforce:function(e){return s(e)?r(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!c(t)||(i=r(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return i}}}},(e,t,i)=>{var n=i(45),r=i(62),s=n.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},(e,t,i)=>{var n=i(75),r=i(81),s=n("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},e=>{e.exports={}},(e,t,i)=>{var n=i(79),r=i(97),s=i(46),a=i(85);e.exports=function(e,t,i){for(var o=r(t),l=a.f,c=s.f,d=0;d<o.length;d++){var h=o[d];n(e,h)||i&&n(i,h)||l(e,h,c(t,h))}}},(e,t,i)=>{var n=i(64),r=i(55),s=i(98),a=i(107),o=i(87),l=r([].concat);e.exports=n("Reflect","ownKeys")||function ownKeys(e){var t=s.f(o(e)),i=a.f;return i?l(t,i(e)):t}},(e,t,i)=>{var n=i(99),r=i(106).concat("length","prototype");t.f=Object.getOwnPropertyNames||function getOwnPropertyNames(e){return n(e,r)}},(e,t,i)=>{var n=i(55),r=i(79),s=i(53),a=i(100).indexOf,o=i(95),l=n([].push);e.exports=function(e,t){var i,n=s(e),c=0,d=[];for(i in n)!r(o,i)&&r(n,i)&&l(d,i);for(;t.length>c;)r(n,i=t[c++])&&(~a(d,i)||l(d,i));return d}},(e,t,i)=>{var n=i(53),r=i(101),s=i(104),createMethod=function(e){return function(t,i,a){var o,l=n(t),c=s(l),d=r(a,c);if(e&&i!=i){for(;c>d;)if((o=l[d++])!=o)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}};e.exports={includes:createMethod(!0),indexOf:createMethod(!1)}},(e,t,i)=>{var n=i(102),r=Math.max,s=Math.min;e.exports=function(e,t){var i=n(e);return i<0?r(i+t,0):s(i,t)}},(e,t,i)=>{var n=i(103);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},e=>{var t=Math.ceil,i=Math.floor;e.exports=Math.trunc||function trunc(e){var n=+e;return(n>0?i:t)(n)}},(e,t,i)=>{var n=i(105);e.exports=function(e){return n(e.length)}},(e,t,i)=>{var n=i(102),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,i)=>{var n=i(48),r=i(62),s=/#|\.prototype\./,isForced=function(e,t){var i=o[a(e)];return i==c||i!=l&&(r(t)?n(t):!!t)},a=isForced.normalize=function(e){return String(e).replace(s,".").toLowerCase()},o=isForced.data={},l=isForced.NATIVE="N",c=isForced.POLYFILL="P";e.exports=isForced},(e,t,i)=>{var n=i(74),r=i(110),s=i(85).f,a=n("unscopables"),o=Array.prototype;null==o[a]&&s(o,a,{configurable:!0,value:r(null)});e.exports=function(e){o[a][e]=!0}},(e,t,i)=>{var n,r=i(87),s=i(111),a=i(106),o=i(95),l=i(113),c=i(83),d=i(94),h=d("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(e){return"<script>"+e+"</"+"script>"},NullProtoObjectViaActiveX=function(e){e.write(scriptTag(""));e.close();var t=e.parentWindow.Object;e=null;return t},NullProtoObject=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}NullProtoObject="undefined"!=typeof document?document.domain&&n?NullProtoObjectViaActiveX(n):function(){var e,t=c("iframe");t.style.display="none";l.appendChild(t);t.src=String("javascript:");(e=t.contentWindow.document).open();e.write(scriptTag("document.F=Object"));e.close();return e.F}():NullProtoObjectViaActiveX(n);for(var e=a.length;e--;)delete NullProtoObject.prototype[a[e]];return NullProtoObject()};o[h]=!0;e.exports=Object.create||function create(e,t){var i;if(null!==e){EmptyConstructor.prototype=r(e);i=new EmptyConstructor;EmptyConstructor.prototype=null;i[h]=e}else i=NullProtoObject();return void 0===t?i:s.f(i,t)}},(e,t,i)=>{var n=i(47),r=i(86),s=i(85),a=i(87),o=i(53),l=i(112);t.f=n&&!r?Object.defineProperties:function defineProperties(e,t){a(e);for(var i,n=o(t),r=l(t),c=r.length,d=0;c>d;)s.f(e,i=r[d++],n[i]);return e}},(e,t,i)=>{var n=i(99),r=i(106);e.exports=Object.keys||function keys(e){return n(e,r)}},(e,t,i)=>{var n=i(64);e.exports=n("document","documentElement")},(e,t,i)=>{var n=i(45),r=i(55);e.exports=function(e,t){return r(n[e].prototype[t])}},(e,t,i)=>{i(116)},(e,t,i)=>{"use strict";var n=i(117),r=i(104),s=i(102),a=n.aTypedArray;(0,n.exportTypedArrayMethod)("at",(function at(e){var t=a(this),i=r(t),n=s(e),o=n>=0?n:i+n;return o<0||o>=i?void 0:t[o]}))},(e,t,i)=>{"use strict";var n,r,s,a=i(118),o=i(47),l=i(45),c=i(62),d=i(61),h=i(79),u=i(119),p=i(72),g=i(84),f=i(88),m=i(85).f,v=i(65),_=i(121),b=i(123),w=i(74),y=i(81),P=i(92),S=P.enforce,E=P.get,A=l.Int8Array,x=A&&A.prototype,C=l.Uint8ClampedArray,T=C&&C.prototype,M=A&&_(A),k=x&&_(x),I=Object.prototype,D=l.TypeError,L=w("toStringTag"),R=y("TYPED_ARRAY_TAG"),O="TypedArrayConstructor",N=a&&!!b&&"Opera"!==u(l.opera),B=!1,G={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},getTypedArrayConstructor=function(e){var t=_(e);if(d(t)){var i=E(t);return i&&h(i,O)?i.TypedArrayConstructor:getTypedArrayConstructor(t)}},isTypedArray=function(e){if(!d(e))return!1;var t=u(e);return h(G,t)||h(V,t)};for(n in G)(s=(r=l[n])&&r.prototype)?S(s).TypedArrayConstructor=r:N=!1;for(n in V)(s=(r=l[n])&&r.prototype)&&(S(s).TypedArrayConstructor=r);if(!N||!c(M)||M===Function.prototype){M=function TypedArray(){throw D("Incorrect invocation")};if(N)for(n in G)l[n]&&b(l[n],M)}if(!N||!k||k===I){k=M.prototype;if(N)for(n in G)l[n]&&b(l[n].prototype,k)}N&&_(T)!==k&&b(T,k);if(o&&!h(k,L)){B=!0;m(k,L,{get:function(){return d(this)?this[R]:void 0}});for(n in G)l[n]&&g(l[n],R,n)}e.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:B&&R,aTypedArray:function(e){if(isTypedArray(e))return e;throw D("Target is not a typed array")},aTypedArrayConstructor:function(e){if(c(e)&&(!b||v(M,e)))return e;throw D(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i,n){if(o){if(i)for(var r in G){var s=l[r];if(s&&h(s.prototype,e))try{delete s.prototype[e]}catch(i){try{s.prototype[e]=t}catch(e){}}}k[e]&&!i||f(k,e,i?t:N&&x[e]||t,n)}},exportTypedArrayStaticMethod:function(e,t,i){var n,r;if(o){if(b){if(i)for(n in G)if((r=l[n])&&h(r,e))try{delete r[e]}catch(e){}if(M[e]&&!i)return;try{return f(M,e,i?t:N&&M[e]||t)}catch(e){}}for(n in G)!(r=l[n])||r[e]&&!i||f(r,e,t)}},getTypedArrayConstructor:getTypedArrayConstructor,isView:function isView(e){if(!d(e))return!1;var t=u(e);return"DataView"===t||h(G,t)||h(V,t)},isTypedArray:isTypedArray,TypedArray:M,TypedArrayPrototype:k}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,i)=>{var n=i(120),r=i(62),s=i(56),a=i(74)("toStringTag"),o=Object,l="Arguments"==s(function(){return arguments}());e.exports=n?s:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=o(e),a))?i:l?s(t):"Object"==(n=s(t))&&r(t.callee)?"Arguments":n}},(e,t,i)=>{var n={};n[i(74)("toStringTag")]="z";e.exports="[object z]"===String(n)},(e,t,i)=>{var n=i(79),r=i(62),s=i(80),a=i(94),o=i(122),l=a("IE_PROTO"),c=Object,d=c.prototype;e.exports=o?c.getPrototypeOf:function(e){var t=s(e);if(n(t,l))return t[l];var i=t.constructor;return r(i)&&t instanceof i?i.prototype:t instanceof c?d:null}},(e,t,i)=>{var n=i(48);e.exports=!n((function(){function F(){}F.prototype.constructor=null;return Object.getPrototypeOf(new F)!==F.prototype}))},(e,t,i)=>{var n=i(55),r=i(87),s=i(124);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(i,[]);t=i instanceof Array}catch(e){}return function setPrototypeOf(i,n){r(i);s(n);t?e(i,n):i.__proto__=n;return i}}():void 0)},(e,t,i)=>{var n=i(62),r=String,s=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw s("Can't set "+r(e)+" as a prototype")}},(e,t,i)=>{i(126);i(133);i(135);i(157);i(159);var n=i(168);e.exports=n.structuredClone},(e,t,i)=>{"use strict";var n=i(53),r=i(109),s=i(127),a=i(92),o=i(85).f,l=i(128),c=i(132),d=i(76),h=i(47),u="Array Iterator",p=a.set,g=a.getterFor(u);e.exports=l(Array,"Array",(function(e,t){p(this,{type:u,target:n(e),index:0,kind:t})}),(function(){var e=g(this),t=e.target,i=e.kind,n=e.index++;if(!t||n>=t.length){e.target=void 0;return c(void 0,!0)}return c("keys"==i?n:"values"==i?t[n]:[n,t[n]],!1)}),"values");var f=s.Arguments=s.Array;r("keys");r("values");r("entries");if(!d&&h&&"values"!==f.name)try{o(f,"name",{value:"values"})}catch(e){}},e=>{e.exports={}},(e,t,i)=>{"use strict";var n=i(44),r=i(49),s=i(76),a=i(90),o=i(62),l=i(129),c=i(121),d=i(123),h=i(131),u=i(84),p=i(88),g=i(74),f=i(127),m=i(130),v=a.PROPER,_=a.CONFIGURABLE,b=m.IteratorPrototype,w=m.BUGGY_SAFARI_ITERATORS,y=g("iterator"),P="keys",S="values",E="entries",returnThis=function(){return this};e.exports=function(e,t,i,a,g,m,A){l(i,t,a);var x,C,T,getIterationMethod=function(e){if(e===g&&L)return L;if(!w&&e in I)return I[e];switch(e){case P:return function keys(){return new i(this,e)};case S:return function values(){return new i(this,e)};case E:return function entries(){return new i(this,e)}}return function(){return new i(this)}},M=t+" Iterator",k=!1,I=e.prototype,D=I[y]||I["@@iterator"]||g&&I[g],L=!w&&D||getIterationMethod(g),R="Array"==t&&I.entries||D;if(R&&(x=c(R.call(new e)))!==Object.prototype&&x.next){s||c(x)===b||(d?d(x,b):o(x[y])||p(x,y,returnThis));h(x,M,!0,!0);s&&(f[M]=returnThis)}if(v&&g==S&&D&&D.name!==S)if(!s&&_)u(I,"name",S);else{k=!0;L=function values(){return r(D,this)}}if(g){C={values:getIterationMethod(S),keys:m?L:getIterationMethod(P),entries:getIterationMethod(E)};if(A)for(T in C)(w||k||!(T in I))&&p(I,T,C[T]);else n({target:t,proto:!0,forced:w||k},C)}s&&!A||I[y]===L||p(I,y,L,{name:g});f[t]=L;return C}},(e,t,i)=>{"use strict";var n=i(130).IteratorPrototype,r=i(110),s=i(52),a=i(131),o=i(127),returnThis=function(){return this};e.exports=function(e,t,i,l){var c=t+" Iterator";e.prototype=r(n,{next:s(+!l,i)});a(e,c,!1,!0);o[c]=returnThis;return e}},(e,t,i)=>{"use strict";var n,r,s,a=i(48),o=i(62),l=i(61),c=i(110),d=i(121),h=i(88),u=i(74),p=i(76),g=u("iterator"),f=!1;[].keys&&("next"in(s=[].keys())?(r=d(d(s)))!==Object.prototype&&(n=r):f=!0);!l(n)||a((function(){var e={};return n[g].call(e)!==e}))?n={}:p&&(n=c(n));o(n[g])||h(n,g,(function(){return this}));e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:f}},(e,t,i)=>{var n=i(85).f,r=i(79),s=i(74)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype);e&&!r(e,s)&&n(e,s,{configurable:!0,value:t})}},e=>{e.exports=function(e,t){return{value:e,done:t}}},(e,t,i)=>{var n=i(120),r=i(88),s=i(134);n||r(Object.prototype,"toString",s,{unsafe:!0})},(e,t,i)=>{"use strict";var n=i(120),r=i(119);e.exports=n?{}.toString:function toString(){return"[object "+r(this)+"]"}},(e,t,i)=>{i(136)},(e,t,i)=>{"use strict";i(137)("Map",(function(e){return function Map(){return e(this,arguments.length?arguments[0]:void 0)}}),i(154))},(e,t,i)=>{"use strict";var n=i(44),r=i(45),s=i(55),a=i(108),o=i(88),l=i(138),c=i(145),d=i(151),h=i(62),u=i(58),p=i(61),g=i(48),f=i(152),m=i(131),v=i(153);e.exports=function(e,t,i){var _=-1!==e.indexOf("Map"),b=-1!==e.indexOf("Weak"),w=_?"set":"add",y=r[e],P=y&&y.prototype,S=y,E={},fixMethod=function(e){var t=s(P[e]);o(P,e,"add"==e?function add(e){t(this,0===e?0:e);return this}:"delete"==e?function(e){return!(b&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function get(e){return b&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function has(e){return!(b&&!p(e))&&t(this,0===e?0:e)}:function set(e,i){t(this,0===e?0:e,i);return this})};if(a(e,!h(y)||!(b||P.forEach&&!g((function(){(new y).entries().next()}))))){S=i.getConstructor(t,e,_,w);l.enable()}else if(a(e,!0)){var A=new S,x=A[w](b?{}:-0,1)!=A,C=g((function(){A.has(1)})),T=f((function(e){new y(e)})),M=!b&&g((function(){for(var e=new y,t=5;t--;)e[w](t,t);return!e.has(-0)}));if(!T){(S=t((function(e,t){d(e,P);var i=v(new y,e,S);u(t)||c(t,i[w],{that:i,AS_ENTRIES:_});return i}))).prototype=P;P.constructor=S}if(C||M){fixMethod("delete");fixMethod("has");_&&fixMethod("get")}(M||x)&&fixMethod(w);b&&P.clear&&delete P.clear}E[e]=S;n({global:!0,constructor:!0,forced:S!=y},E);m(S,e);b||i.setStrong(S,e,_);return S}},(e,t,i)=>{var n=i(44),r=i(55),s=i(95),a=i(61),o=i(79),l=i(85).f,c=i(98),d=i(139),h=i(142),u=i(81),p=i(144),g=!1,f=u("meta"),m=0,setMetadata=function(e){l(e,f,{value:{objectID:"O"+m++,weakData:{}}})},v=e.exports={enable:function(){v.enable=function(){};g=!0;var e=c.f,t=r([].splice),i={};i[f]=1;if(e(i).length){c.f=function(i){for(var n=e(i),r=0,s=n.length;r<s;r++)if(n[r]===f){t(n,r,1);break}return n};n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f})}},fastKey:function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,f)){if(!h(e))return"F";if(!t)return"E";setMetadata(e)}return e[f].objectID},getWeakData:function(e,t){if(!o(e,f)){if(!h(e))return!0;if(!t)return!1;setMetadata(e)}return e[f].weakData},onFreeze:function(e){p&&g&&h(e)&&!o(e,f)&&setMetadata(e);return e}};s[f]=!0},(e,t,i)=>{var n=i(56),r=i(53),s=i(98).f,a=i(140),o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function getOwnPropertyNames(e){return o&&"Window"==n(e)?function(e){try{return s(e)}catch(e){return a(o)}}(e):s(r(e))}},(e,t,i)=>{var n=i(101),r=i(104),s=i(141),a=Array,o=Math.max;e.exports=function(e,t,i){for(var l=r(e),c=n(t,l),d=n(void 0===i?l:i,l),h=a(o(d-c,0)),u=0;c<d;c++,u++)s(h,u,e[c]);h.length=u;return h}},(e,t,i)=>{"use strict";var n=i(59),r=i(85),s=i(52);e.exports=function(e,t,i){var a=n(t);a in e?r.f(e,a,s(0,i)):e[a]=i}},(e,t,i)=>{var n=i(48),r=i(61),s=i(56),a=i(143),o=Object.isExtensible,l=n((function(){o(1)}));e.exports=l||a?function isExtensible(e){return!!r(e)&&((!a||"ArrayBuffer"!=s(e))&&(!o||o(e)))}:o},(e,t,i)=>{var n=i(48);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},(e,t,i)=>{var n=i(48);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},(e,t,i)=>{var n=i(146),r=i(49),s=i(87),a=i(72),o=i(147),l=i(104),c=i(65),d=i(148),h=i(149),u=i(150),p=TypeError,Result=function(e,t){this.stopped=e;this.result=t},g=Result.prototype;e.exports=function(e,t,i){var f,m,v,_,b,w,y,P=i&&i.that,S=!(!i||!i.AS_ENTRIES),E=!(!i||!i.IS_RECORD),A=!(!i||!i.IS_ITERATOR),x=!(!i||!i.INTERRUPTED),C=n(t,P),stop=function(e){f&&u(f,"normal",e);return new Result(!0,e)},callFn=function(e){if(S){s(e);return x?C(e[0],e[1],stop):C(e[0],e[1])}return x?C(e,stop):C(e)};if(E)f=e.iterator;else if(A)f=e;else{if(!(m=h(e)))throw p(a(e)+" is not iterable");if(o(m)){for(v=0,_=l(e);_>v;v++)if((b=callFn(e[v]))&&c(g,b))return b;return new Result(!1)}f=d(e,m)}w=E?e.next:f.next;for(;!(y=r(w,f)).done;){try{b=callFn(y.value)}catch(e){u(f,"throw",e)}if("object"==typeof b&&b&&c(g,b))return b}return new Result(!1)}},(e,t,i)=>{var n=i(55),r=i(71),s=i(50),a=n(n.bind);e.exports=function(e,t){r(e);return void 0===t?e:s?a(e,t):function(){return e.apply(t,arguments)}}},(e,t,i)=>{var n=i(74),r=i(127),s=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[s]===e)}},(e,t,i)=>{var n=i(49),r=i(71),s=i(87),a=i(72),o=i(149),l=TypeError;e.exports=function(e,t){var i=arguments.length<2?o(e):t;if(r(i))return s(n(i,e));throw l(a(e)+" is not iterable")}},(e,t,i)=>{var n=i(119),r=i(70),s=i(58),a=i(127),o=i(74)("iterator");e.exports=function(e){if(!s(e))return r(e,o)||r(e,"@@iterator")||a[n(e)]}},(e,t,i)=>{var n=i(49),r=i(87),s=i(70);e.exports=function(e,t,i){var a,o;r(e);try{if(!(a=s(e,"return"))){if("throw"===t)throw i;return i}a=n(a,e)}catch(e){o=!0;a=e}if("throw"===t)throw i;if(o)throw a;r(a);return i}},(e,t,i)=>{var n=i(65),r=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw r("Incorrect invocation")}},(e,t,i)=>{var n=i(74)("iterator"),r=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){r=!0}};a[n]=function(){return this};Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var i=!1;try{var s={};s[n]=function(){return{next:function(){return{done:i=!0}}}};e(s)}catch(e){}return i}},(e,t,i)=>{var n=i(62),r=i(61),s=i(123);e.exports=function(e,t,i){var a,o;s&&n(a=t.constructor)&&a!==i&&r(o=a.prototype)&&o!==i.prototype&&s(e,o);return e}},(e,t,i)=>{"use strict";var n=i(85).f,r=i(110),s=i(155),a=i(146),o=i(151),l=i(58),c=i(145),d=i(128),h=i(132),u=i(156),p=i(47),g=i(138).fastKey,f=i(92),m=f.set,v=f.getterFor;e.exports={getConstructor:function(e,t,i,d){var h=e((function(e,n){o(e,u);m(e,{type:t,index:r(null),first:void 0,last:void 0,size:0});p||(e.size=0);l(n)||c(n,e[d],{that:e,AS_ENTRIES:i})})),u=h.prototype,f=v(t),define=function(e,t,i){var n,r,s=f(e),a=getEntry(e,t);if(a)a.value=i;else{s.last=a={index:r=g(t,!0),key:t,value:i,previous:n=s.last,next:void 0,removed:!1};s.first||(s.first=a);n&&(n.next=a);p?s.size++:e.size++;"F"!==r&&(s.index[r]=a)}return e},getEntry=function(e,t){var i,n=f(e),r=g(t);if("F"!==r)return n.index[r];for(i=n.first;i;i=i.next)if(i.key==t)return i};s(u,{clear:function clear(){for(var e=f(this),t=e.index,i=e.first;i;){i.removed=!0;i.previous&&(i.previous=i.previous.next=void 0);delete t[i.index];i=i.next}e.first=e.last=void 0;p?e.size=0:this.size=0},delete:function(e){var t=this,i=f(t),n=getEntry(t,e);if(n){var r=n.next,s=n.previous;delete i.index[n.index];n.removed=!0;s&&(s.next=r);r&&(r.previous=s);i.first==n&&(i.first=r);i.last==n&&(i.last=s);p?i.size--:t.size--}return!!n},forEach:function forEach(e){for(var t,i=f(this),n=a(e,arguments.length>1?arguments[1]:void 0);t=t?t.next:i.first;){n(t.value,t.key,this);for(;t&&t.removed;)t=t.previous}},has:function has(e){return!!getEntry(this,e)}});s(u,i?{get:function get(e){var t=getEntry(this,e);return t&&t.value},set:function set(e,t){return define(this,0===e?0:e,t)}}:{add:function add(e){return define(this,e=0===e?0:e,e)}});p&&n(u,"size",{get:function(){return f(this).size}});return h},setStrong:function(e,t,i){var n=t+" Iterator",r=v(t),s=v(n);d(e,t,(function(e,t){m(this,{type:n,target:e,state:r(e),kind:t,last:void 0})}),(function(){for(var e=s(this),t=e.kind,i=e.last;i&&i.removed;)i=i.previous;if(!e.target||!(e.last=i=i?i.next:e.state.first)){e.target=void 0;return h(void 0,!0)}return h("keys"==t?i.key:"values"==t?i.value:[i.key,i.value],!1)}),i?"entries":"values",!i,!0);u(t)}}},(e,t,i)=>{var n=i(88);e.exports=function(e,t,i){for(var r in t)n(e,r,t[r],i);return e}},(e,t,i)=>{"use strict";var n=i(64),r=i(85),s=i(74),a=i(47),o=s("species");e.exports=function(e){var t=n(e),i=r.f;a&&t&&!t[o]&&i(t,o,{configurable:!0,get:function(){return this}})}},(e,t,i)=>{i(158)},(e,t,i)=>{"use strict";i(137)("Set",(function(e){return function Set(){return e(this,arguments.length?arguments[0]:void 0)}}),i(154))},(e,t,i)=>{var n,r=i(76),s=i(44),a=i(45),o=i(64),l=i(55),c=i(48),d=i(81),h=i(62),u=i(160),p=i(58),g=i(61),f=i(63),m=i(145),v=i(87),_=i(119),b=i(79),w=i(141),y=i(84),P=i(104),S=i(161),E=i(162),A=i(164),x=i(68),C=i(165),T=i(166),M=i(167),k=a.Object,I=a.Date,D=a.Error,L=a.EvalError,R=a.RangeError,O=a.ReferenceError,N=a.SyntaxError,B=a.TypeError,G=a.URIError,V=a.PerformanceMark,W=a.WebAssembly,U=W&&W.CompileError||D,j=W&&W.LinkError||D,H=W&&W.RuntimeError||D,z=o("DOMException"),q=o("Set"),$=o("Map"),X=$.prototype,K=l(X.has),Y=l(X.get),Q=l(X.set),Z=l(q.prototype.add),J=o("Object","keys"),ee=l([].push),te=l((!0).valueOf),ie=l(1..valueOf),ne=l("".valueOf),re=l(I.prototype.getTime),se=d("structuredClone"),ae="DataCloneError",oe="Transferring",checkBasicSemantic=function(e){return!c((function(){var t=new a.Set([7]),i=e(t),n=e(k(7));return i==t||!i.has(7)||"object"!=typeof n||7!=n}))&&e},checkErrorsCloning=function(e,t){return!c((function(){var i=new t,n=e({a:i,b:i});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===i.stack)}))},le=a.structuredClone,ce=r||!checkErrorsCloning(le,D)||!checkErrorsCloning(le,z)||!(n=le,!c((function(){var e=n(new a.AggregateError([1],se,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=se||3!=e.cause}))),de=!le&&checkBasicSemantic((function(e){return new V(se,{detail:e}).detail})),he=checkBasicSemantic(le)||de,throwUncloneable=function(e){throw new z("Uncloneable type: "+e,ae)},throwUnpolyfillable=function(e,t){throw new z((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ae)},structuredCloneInternal=function(e,t){f(e)&&throwUncloneable("Symbol");if(!g(e))return e;if(t){if(K(t,e))return Y(t,e)}else t=new $;var i,n,r,s,l,c,d,u,p,m,v=_(e),S=!1;switch(v){case"Array":r=[];S=!0;break;case"Object":r={};S=!0;break;case"Map":r=new $;S=!0;break;case"Set":r=new q;S=!0;break;case"RegExp":r=new RegExp(e.source,E(e));break;case"Error":switch(n=e.name){case"AggregateError":r=o("AggregateError")([]);break;case"EvalError":r=L();break;case"RangeError":r=R();break;case"ReferenceError":r=O();break;case"SyntaxError":r=N();break;case"TypeError":r=B();break;case"URIError":r=G();break;case"CompileError":r=U();break;case"LinkError":r=j();break;case"RuntimeError":r=H();break;default:r=D()}S=!0;break;case"DOMException":r=new z(e.message,e.name);S=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=a[v];g(i)||throwUnpolyfillable(v);r=new i(structuredCloneInternal(e.buffer,t),e.byteOffset,"DataView"===v?e.byteLength:e.length);break;case"DOMQuad":try{r=new DOMQuad(structuredCloneInternal(e.p1,t),structuredCloneInternal(e.p2,t),structuredCloneInternal(e.p3,t),structuredCloneInternal(e.p4,t))}catch(t){he?r=he(e):throwUnpolyfillable(v)}break;case"FileList":if(s=function(){var e;try{e=new a.DataTransfer}catch(t){try{e=new a.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null}()){for(l=0,c=P(e);l<c;l++)s.items.add(structuredCloneInternal(e[l],t));r=s.files}else he?r=he(e):throwUnpolyfillable(v);break;case"ImageData":try{r=new ImageData(structuredCloneInternal(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){he?r=he(e):throwUnpolyfillable(v)}break;default:if(he)r=he(e);else switch(v){case"BigInt":r=k(e.valueOf());break;case"Boolean":r=k(te(e));break;case"Number":r=k(ie(e));break;case"String":r=k(ne(e));break;case"Date":r=new I(re(e));break;case"ArrayBuffer":(i=a.DataView)||"function"==typeof e.slice||throwUnpolyfillable(v);try{if("function"==typeof e.slice)r=e.slice(0);else{c=e.byteLength;r=new ArrayBuffer(c);p=new i(e);m=new i(r);for(l=0;l<c;l++)m.setUint8(l,p.getUint8(l))}}catch(e){throw new z("ArrayBuffer is detached",ae)}break;case"SharedArrayBuffer":r=e;break;case"Blob":try{r=e.slice(0,e.size,e.type)}catch(e){throwUnpolyfillable(v)}break;case"DOMPoint":case"DOMPointReadOnly":i=a[v];try{r=i.fromPoint?i.fromPoint(e):new i(e.x,e.y,e.z,e.w)}catch(e){throwUnpolyfillable(v)}break;case"DOMRect":case"DOMRectReadOnly":i=a[v];try{r=i.fromRect?i.fromRect(e):new i(e.x,e.y,e.width,e.height)}catch(e){throwUnpolyfillable(v)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=a[v];try{r=i.fromMatrix?i.fromMatrix(e):new i(e)}catch(e){throwUnpolyfillable(v)}break;case"AudioData":case"VideoFrame":h(e.clone)||throwUnpolyfillable(v);try{r=e.clone()}catch(e){throwUncloneable(v)}break;case"File":try{r=new File([e],e.name,e)}catch(e){throwUnpolyfillable(v)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":throwUnpolyfillable(v);default:throwUncloneable(v)}}Q(t,e,r);if(S)switch(v){case"Array":case"Object":d=J(e);for(l=0,c=P(d);l<c;l++){u=d[l];w(r,u,structuredCloneInternal(e[u],t))}break;case"Map":e.forEach((function(e,i){Q(r,structuredCloneInternal(i,t),structuredCloneInternal(e,t))}));break;case"Set":e.forEach((function(e){Z(r,structuredCloneInternal(e,t))}));break;case"Error":y(r,"message",structuredCloneInternal(e.message,t));b(e,"cause")&&y(r,"cause",structuredCloneInternal(e.cause,t));"AggregateError"==n&&(r.errors=structuredCloneInternal(e.errors,t));case"DOMException":A&&y(r,"stack",structuredCloneInternal(e.stack,t))}return r},ue=le&&!c((function(){if(T&&x>92||M&&x>94||C&&x>97)return!1;var e=new ArrayBuffer(8),t=le(e,{transfer:[e]});return 0!=e.byteLength||8!=t.byteLength})),tryToTransfer=function(e,t){if(!g(e))throw B("Transfer option cannot be converted to a sequence");var i=[];m(e,(function(e){ee(i,v(e))}));var n,r,s,o,l,c,d=0,p=P(i);if(ue){o=le(i,{transfer:i});for(;d<p;)Q(t,i[d],o[d++])}else for(;d<p;){n=i[d++];if(K(t,n))throw new z("Duplicate transferable",ae);switch(r=_(n)){case"ImageBitmap":s=a.OffscreenCanvas;u(s)||throwUnpolyfillable(r,oe);try{(c=new s(n.width,n.height)).getContext("bitmaprenderer").transferFromImageBitmap(n);l=c.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":h(n.clone)&&h(n.close)||throwUnpolyfillable(r,oe);try{l=n.clone();n.close()}catch(e){}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":throwUnpolyfillable(r,oe)}if(void 0===l)throw new z("This object cannot be transferred: "+r,ae);Q(t,n,l)}};s({global:!0,enumerable:!0,sham:!ue,forced:ce},{structuredClone:function structuredClone(e){var t,i=S(arguments.length,1)>1&&!p(arguments[1])?v(arguments[1]):void 0,n=i?i.transfer:void 0;if(void 0!==n){t=new $;tryToTransfer(n,t)}return structuredCloneInternal(e,t)}})},(e,t,i)=>{var n=i(55),r=i(48),s=i(62),a=i(119),o=i(64),l=i(91),noop=function(){},c=[],d=o("Reflect","construct"),h=/^\s*(?:class|function)\b/,u=n(h.exec),p=!h.exec(noop),g=function isConstructor(e){if(!s(e))return!1;try{d(noop,c,e);return!0}catch(e){return!1}},f=function isConstructor(e){if(!s(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return p||!!u(h,l(e))}catch(e){return!0}};f.sham=!0;e.exports=!d||r((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?f:g},e=>{var t=TypeError;e.exports=function(e,i){if(e<i)throw t("Not enough arguments");return e}},(e,t,i)=>{var n=i(49),r=i(79),s=i(65),a=i(163),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in o||r(e,"flags")||!s(o,e)?t:n(a,e)}},(e,t,i)=>{"use strict";var n=i(87);e.exports=function(){var e=n(this),t="";e.hasIndices&&(t+="d");e.global&&(t+="g");e.ignoreCase&&(t+="i");e.multiline&&(t+="m");e.dotAll&&(t+="s");e.unicode&&(t+="u");e.unicodeSets&&(t+="v");e.sticky&&(t+="y");return t}},(e,t,i)=>{var n=i(48),r=i(52);e.exports=!n((function(){var e=Error("a");if(!("stack"in e))return!0;Object.defineProperty(e,"stack",r(1,7));return 7!==e.stack}))},(e,t,i)=>{var n=i(166),r=i(167);e.exports=!n&&!r&&"object"==typeof window&&"object"==typeof document},e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(e,t,i)=>{var n=i(56),r=i(45);e.exports="process"==n(r.process)},(e,t,i)=>{var n=i(45);e.exports=n},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.StructTreeLayerBuilder=void 0;const i={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},n=/^H(\d+)$/;t.StructTreeLayerBuilder=class StructTreeLayerBuilder{constructor(e){let{pdfPage:t}=e;this.pdfPage=t}render(e){return this._walk(e)}_setAttributes(e,t){void 0!==e.alt&&t.setAttribute("aria-label",e.alt);void 0!==e.id&&t.setAttribute("aria-owns",e.id);void 0!==e.lang&&t.setAttribute("lang",e.lang)}_walk(e){if(!e)return null;const t=document.createElement("span");if("role"in e){const{role:r}=e,s=r.match(n);if(s){t.setAttribute("role","heading");t.setAttribute("aria-level",s[1])}else i[r]&&t.setAttribute("role",i[r])}this._setAttributes(e,t);if(e.children)if(1===e.children.length&&"id"in e.children[0])this._setAttributes(e.children[0],t);else for(const i of e.children)t.append(this._walk(i));return t}}},(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextHighlighter=void 0;t.TextHighlighter=class TextHighlighter{constructor(e){let{findController:t,eventBus:i,pageIndex:n}=e;this.findController=t;this.matches=[];this.eventBus=i;this.pageIdx=n;this._onUpdateTextLayerMatches=null;this.textDivs=null;this.textContentItemsStr=null;this.enabled=!1}setTextMapping(e,t){this.textDivs=e;this.textContentItemsStr=t}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(!this.enabled){this.enabled=!0;if(!this._onUpdateTextLayerMatches){this._onUpdateTextLayerMatches=e=>{e.pageIndex!==this.pageIdx&&-1!==e.pageIndex||this._updateMatches()};this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)}this._updateMatches()}}disable(){if(this.enabled){this.enabled=!1;if(this._onUpdateTextLayerMatches){this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches);this._onUpdateTextLayerMatches=null}}}_convertMatches(e,t,i){if(!e)return[];const{textContentItemsStr:n}=this;let r=0,s=0;const a=n.length-1,o=[];for(let l=0,c=e.length;l<c;l++){let c=e[l];for(;r!==a&&c>=s+n[r].length;){s+=n[r].length;r++}r===n.length&&Window.ngxConsole.error("Could not find a matching mapping");const d={color:i?i[l]:0,begin:{divIdx:r,offset:c-s}};c+=t[l];for(;r!==a&&c>s+n[r].length;){s+=n[r].length;r++}d.end={divIdx:r,offset:c-s};o.push(d)}return o}_renderMatches(e){if(0===e.length)return;const{findController:t,pageIdx:i}=this,{textContentItemsStr:n,textDivs:r}=this,s=i===t.selected.pageIdx,a=t.selected.matchIdx;let o=null;const l={divIdx:-1,offset:void 0};function beginText(e,t){const i=e.divIdx;r[i].textContent="";return appendTextToDiv(i,0,e.offset,t)}function appendTextToDiv(e,t,i,s){let a=r[e];if(a.nodeType===Node.TEXT_NODE){const t=document.createElement("span");a.before(t);t.append(a);r[e]=t;a=t}const o=n[e].substring(t,i),l=document.createTextNode(o);if(s){const e=document.createElement("span");e.className=`${s} appended`;e.append(l);a.append(e);return s.includes("selected")?e.offsetLeft:0}a.append(l);return 0}let c=a,d=c+1;if(t.state.highlightAll){c=0;d=e.length}else if(!s)return;for(let n=c;n<d;n++){const c=e[n],d=c.begin,h=c.end,u=s&&n===a,p=(u?" selected":"")+" color"+c.color;let g=0;if(o&&d.divIdx===o.divIdx)appendTextToDiv(o.divIdx,o.offset,d.offset);else{null!==o&&appendTextToDiv(o.divIdx,o.offset,l.offset);beginText(d)}if(d.divIdx===h.divIdx)g=appendTextToDiv(d.divIdx,d.offset,h.offset,"highlight"+p);else{g=appendTextToDiv(d.divIdx,d.offset,l.offset,"highlight begin"+p);for(let e=d.divIdx+1,t=h.divIdx;e<t;e++)r[e].className="highlight middle"+p;beginText(h,"highlight end"+p)}o=h;u&&t.scrollMatchIntoView({element:r[d.divIdx],selectedLeft:g,pageIndex:i,matchIndex:a})}o&&appendTextToDiv(o.divIdx,o.offset,l.offset)}_updateMatches(){if(!this.enabled)return;const{findController:e,matches:t,pageIdx:i}=this,{textContentItemsStr:n,textDivs:r}=this;let s=-1;for(let e=0,i=t.length;e<i;e++){const i=t[e];for(let e=Math.max(s,i.begin.divIdx),t=i.end.divIdx;e<=t;e++){const t=r[e];t.textContent=n[e];t.className=""}s=i.end.divIdx+1}if(null==e||!e.highlightMatches)return;const a=e.pageMatches[i]||null,o=e.pageMatchesLength[i]||null,l=e.pageMatchesColor[i]||null;this.matches=this._convertMatches(a,o,l);this._renderMatches(this.matches)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextLayerBuilder=void 0;var n=i(5);t.TextLayerBuilder=class TextLayerBuilder{constructor(e){let{textLayerDiv:t,eventBus:i,pageIndex:n,viewport:r,highlighter:s=null,enhanceTextSelection:a=!1,accessibilityManager:o=null}=e;this.textLayerDiv=t;this.eventBus=i;this.textContent=null;this.textContentItemsStr=[];this.textContentStream=null;this.renderingDone=!1;this.pageNumber=n+1;this.viewport=r;this.textDivs=[];this.textLayerRenderTask=null;this.highlighter=s;this.enhanceTextSelection=a;this.accessibilityManager=o;this._bindMouse()}_finishRendering(){this.renderingDone=!0;if(!this.enhanceTextSelection){const e=document.createElement("div");e.className="endOfContent";this.textLayerDiv.append(e)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(){var e,t;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel();this.textDivs.length=0;null===(e=this.highlighter)||void 0===e||e.setTextMapping(this.textDivs,this.textContentItemsStr);null===(t=this.accessibilityManager)||void 0===t||t.setTextMapping(this.textDivs);const r=document.createDocumentFragment();this.textLayerRenderTask=(0,n.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:r,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:i,enhanceTextSelection:this.enhanceTextSelection});this.textLayerRenderTask.promise.then((()=>{var e,t;this.textLayerDiv.append(r);this._finishRendering();null===(e=this.highlighter)||void 0===e||e.enable();null===(t=this.accessibilityManager)||void 0===t||t.enable()}),(function(e){}))}cancel(){var e,t;if(this.textLayerRenderTask){this.textLayerRenderTask.cancel();this.textLayerRenderTask=null}null===(e=this.highlighter)||void 0===e||e.disable();null===(t=this.accessibilityManager)||void 0===t||t.disable()}setTextContentStream(e){this.cancel();this.textContentStream=e}setTextContent(e){this.cancel();this.textContent=e}_bindMouse(){const e=this.textLayerDiv;let t=null;e.addEventListener("mousedown",(i=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){this.textLayerRenderTask.expandTextDivs(!0);if(t){clearTimeout(t);t=null}return}const n=e.querySelector(".endOfContent");if(!n)return;let r=i.target!==e;r=r&&"none"!==window.getComputedStyle(n).getPropertyValue("-moz-user-select");if(r){const t=e.getBoundingClientRect(),r=Math.max(0,(i.pageY-t.top)/t.height);n.style.top=(100*r).toFixed(2)+"%"}n.classList.add("active")}));e.addEventListener("mouseup",(()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask){t=setTimeout((()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1);t=null}),300);return}const i=e.querySelector(".endOfContent");if(i){i.style.top="";i.classList.remove("active")}}))}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.XfaLayerBuilder=void 0;var n=i(5);t.XfaLayerBuilder=class XfaLayerBuilder{constructor(e){let{pageDiv:t,pdfPage:i,annotationStorage:n=null,linkService:r,xfaHtml:s=null}=e;this.pageDiv=t;this.pdfPage=i;this.annotationStorage=n;this.linkService=r;this.xfaHtml=s;this.div=null;this._cancelled=!1}render(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";if("print"===t){const i={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t},r=document.createElement("div");this.pageDiv.append(r);i.div=r;const s=n.XfaLayer.render(i);return Promise.resolve(s)}return this.pdfPage.getXfa().then((i=>{if(this._cancelled||!i)return{textDivs:[]};const r={viewport:e.clone({dontFlip:!0}),div:this.div,xfaHtml:i,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:t};if(this.div)return n.XfaLayer.update(r);this.div=document.createElement("div");this.pageDiv.append(this.div);r.div=this.div;return n.XfaLayer.render(r)})).catch((e=>{Window.ngxConsole.error(e)}))}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SecondaryToolbar=void 0;var n=i(1),r=i(7),s=i(32);function _classPrivateMethodInitSpec(e,t){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.add(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var a=new WeakSet,o=new WeakSet,l=new WeakSet,c=new WeakSet,d=new WeakSet;t.SecondaryToolbar=class SecondaryToolbar{constructor(e,t){_classPrivateMethodInitSpec(this,d);_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);this.toolbar=e.toolbar;this.toggleButton=e.toggleButton;this.buttons=[{element:e.presentationModeButton,eventName:"presentationmode",close:!0},{element:e.printButton,eventName:"print",close:!0},{element:e.downloadButton,eventName:"download",close:!0},{element:e.viewBookmarkButton,eventName:null,close:!0},{element:e.firstPageButton,eventName:"firstpage",close:!0},{element:e.lastPageButton,eventName:"lastpage",close:!0},{element:e.pageRotateCwButton,eventName:"rotatecw",close:!1},{element:e.pageRotateCcwButton,eventName:"rotateccw",close:!1},{element:e.cursorSelectToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.SELECT},close:!0},{element:e.cursorHandToolButton,eventName:"switchcursortool",eventDetails:{tool:r.CursorTool.HAND},close:!0},{element:e.scrollPageButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.PAGE},close:!0},{element:e.scrollVerticalButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.VERTICAL},close:!0},{element:e.scrollHorizontalButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.HORIZONTAL},close:!0},{element:e.scrollWrappedButton,eventName:"switchscrollmode",eventDetails:{mode:n.ScrollMode.WRAPPED},close:!0},{element:e.spreadNoneButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.NONE},close:!0},{element:e.spreadOddButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.ODD},close:!0},{element:e.spreadEvenButton,eventName:"switchspreadmode",eventDetails:{mode:n.SpreadMode.EVEN},close:!0},{element:e.documentPropertiesButton,eventName:"documentproperties",close:!0}];this.buttons.push({element:e.openFileButton,eventName:"openfile",close:!0});this.items={firstPage:e.firstPageButton,lastPage:e.lastPageButton,pageRotateCw:e.pageRotateCwButton,pageRotateCcw:e.pageRotateCcwButton};this.eventBus=t;this.opened=!1;_classPrivateMethodGet(this,o,_bindClickListeners2).call(this);_classPrivateMethodGet(this,l,_bindCursorToolsListener2).call(this,e);_classPrivateMethodGet(this,c,_bindScrollModeListener2).call(this,e);_classPrivateMethodGet(this,d,_bindSpreadModeListener2).call(this,e);this.reset()}get isOpen(){return this.opened}setPageNumber(e){this.pageNumber=e;_classPrivateMethodGet(this,a,_updateUIState2).call(this)}setPagesCount(e){this.pagesCount=e;_classPrivateMethodGet(this,a,_updateUIState2).call(this)}reset(){this.pageNumber=0;this.pagesCount=0;_classPrivateMethodGet(this,a,_updateUIState2).call(this);this.eventBus.dispatch("secondarytoolbarreset",{source:this})}open(){if(!this.opened){this.opened=!0;this.toggleButton.classList.add("toggled");this.toggleButton.setAttribute("aria-expanded","true");this.toolbar.classList.remove("hidden")}}close(){if(this.opened){this.opened=!1;this.toolbar.classList.add("hidden");this.toggleButton.classList.remove("toggled");this.toggleButton.setAttribute("aria-expanded","false")}}toggle(){this.opened?this.close():this.open()}};function _updateUIState2(){this.items.firstPage.disabled=this.pageNumber<=1;document.getElementById("previousPage")&&(document.getElementById("previousPage").disabled=this.pageNumber<=1);this.items.lastPage.disabled=this.pageNumber>=this.pagesCount;document.getElementById("nextPage")&&(document.getElementById("nextPage").disabled=this.pageNumber>=this.pagesCount);this.items.pageRotateCw.disabled=0===this.pagesCount;this.items.pageRotateCcw.disabled=0===this.pagesCount;this.eventBus.dispatch("updateuistate",{source:this,widget:"SecondaryToolbar",pageNumber:this.pageNumber,pagesCount:this.pagesCount})}function _bindClickListeners2(){this.toggleButton.addEventListener("click",this.toggle.bind(this));for(const{element:e,eventName:t,close:i,eventDetails:n}of this.buttons)null==e||e.addEventListener("click",(e=>{if(null!==t){const e={source:this};for(const t in n)e[t]=n[t];this.eventBus.dispatch(t,e)}i&&this.close()}))}function _bindCursorToolsListener2(e){let{cursorSelectToolButton:t,cursorHandToolButton:i}=e;this.eventBus._on("cursortoolchanged",(function(e){let{tool:n}=e;const s=n===r.CursorTool.SELECT,a=n===r.CursorTool.HAND;t.classList.toggle("toggled",s);i.classList.toggle("toggled",a);t.setAttribute("aria-checked",s);i.setAttribute("aria-checked",a)}))}function _bindScrollModeListener2(e){let{scrollPageButton:t,scrollVerticalButton:i,scrollHorizontalButton:r,scrollWrappedButton:a,spreadNoneButton:o,spreadOddButton:l,spreadEvenButton:c}=e;const scrollModeChanged=e=>{let{mode:d}=e;const h=d===n.ScrollMode.PAGE,u=d===n.ScrollMode.VERTICAL,p=d===n.ScrollMode.HORIZONTAL,g=d===n.ScrollMode.WRAPPED;t.classList.toggle("toggled",h);i.classList.toggle("toggled",u);r.classList.toggle("toggled",p);a.classList.toggle("toggled",g);t.setAttribute("aria-checked",h);i.setAttribute("aria-checked",u);r.setAttribute("aria-checked",p);a.setAttribute("aria-checked",g);const f=this.pagesCount>s.PagesCountLimit.FORCE_SCROLL_MODE_PAGE;t.disabled=f;i.disabled=f;r.disabled=f;a.disabled=f;o.disabled=p;l.disabled=p;c.disabled=p};this.eventBus._on("scrollmodechanged",scrollModeChanged);this.eventBus._on("secondarytoolbarreset",(e=>{e.source===this&&scrollModeChanged({mode:n.ScrollMode.VERTICAL})}))}function _bindSpreadModeListener2(e){let{spreadNoneButton:t,spreadOddButton:i,spreadEvenButton:r}=e;function spreadModeChanged(e){let{mode:s}=e;const a=s===n.SpreadMode.NONE,o=s===n.SpreadMode.ODD,l=s===n.SpreadMode.EVEN;t.classList.toggle("toggled",a);i.classList.toggle("toggled",o);r.classList.toggle("toggled",l);t.setAttribute("aria-checked",a);i.setAttribute("aria-checked",o);r.setAttribute("aria-checked",l)}this.eventBus._on("spreadmodechanged",spreadModeChanged);this.eventBus._on("secondarytoolbarreset",(e=>{e.source===this&&spreadModeChanged({mode:n.SpreadMode.NONE})}))}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Toolbar=void 0;var n=i(1),r=i(5);function _classPrivateMethodInitSpec(e,t){_checkPrivateRedeclaration(e,t);t.add(e)}function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function _classPrivateMethodGet(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var s=new WeakMap,a=new WeakSet,o=new WeakSet,l=new WeakSet,c=new WeakSet;t.Toolbar=class Toolbar{constructor(e,t,i){_classPrivateMethodInitSpec(this,c);_classPrivateMethodInitSpec(this,l);_classPrivateMethodInitSpec(this,o);_classPrivateMethodInitSpec(this,a);!function _classPrivateFieldInitSpec(e,t,i){_checkPrivateRedeclaration(e,t);t.set(e,i)}(this,s,{writable:!0,value:!1});this.toolbar=e.container;this.eventBus=t;this.l10n=i;this.buttons=[{element:e.previous,eventName:"previouspage"},{element:e.next,eventName:"nextpage"},{element:e.zoomIn,eventName:"zoomin"},{element:e.zoomOut,eventName:"zoomout"},{element:e.print,eventName:"print"},{element:e.presentationModeButton,eventName:"presentationmode"},{element:e.download,eventName:"download"},{element:e.viewBookmark,eventName:null},{element:e.editorFreeTextButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:t}=e.editorFreeTextButton;return t.contains("toggled")?r.AnnotationEditorType.NONE:r.AnnotationEditorType.FREETEXT}}},{element:e.editorInkButton,eventName:"switchannotationeditormode",eventDetails:{get mode(){const{classList:t}=e.editorInkButton;return t.contains("toggled")?r.AnnotationEditorType.NONE:r.AnnotationEditorType.INK}}}];this.buttons.push({element:e.openFile,eventName:"openfile"});this.items={numPages:e.numPages,pageNumber:e.pageNumber,scaleSelect:e.scaleSelect,customScaleOption:e.customScaleOption,previous:e.previous,next:e.next,zoomIn:e.zoomIn,zoomOut:e.zoomOut};_classPrivateMethodGet(this,a,_bindListeners2).call(this,e);this.reset()}setPageNumber(e,t){this.pageNumber=e;this.pageLabel=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this,!1)}setPagesCount(e,t){this.pagesCount=e;this.hasPageLabels=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this,!0)}setPageScale(e,t){this.pageScaleValue=(e||t).toString();this.pageScale=t;_classPrivateMethodGet(this,l,_updateUIState2).call(this,!1)}reset(){this.pageNumber=0;this.pageLabel=null;this.hasPageLabels=!1;this.pagesCount=0;const e=PDFViewerApplicationOptions.get("defaultZoomValue");if(e){this.pageScaleValue=e;Number(e)&&(this.pageScale=Number(e))}else{this.pageScaleValue=n.DEFAULT_SCALE_VALUE;this.pageScale=n.DEFAULT_SCALE}_classPrivateMethodGet(this,l,_updateUIState2).call(this,!0);this.updateLoadingIndicatorState();this.eventBus.dispatch("toolbarreset",{source:this})}updateLoadingIndicatorState(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{pageNumber:t}=this.items;t.classList.toggle("visiblePageIsLoading",e)}};function _bindListeners2(e){const{pageNumber:t,scaleSelect:i}=this.items,r=this;for(const{element:e,eventName:t,eventDetails:i}of this.buttons)null==e||e.addEventListener("click",(e=>{if(null!==t){const e={source:this};if(i)for(const t in i)e[t]=i[t];this.eventBus.dispatch(t,e)}}));t.addEventListener("click",(function(){this.select()}));t.addEventListener("change",(function(){r.eventBus.dispatch("pagenumberchanged",{source:r,value:this.value})}));i.addEventListener("change",(function(){"custom"!==this.value&&r.eventBus.dispatch("scalechanged",{source:r,value:this.value})}));i.addEventListener("click",(function(e){const t=e.target;this.value===r.pageScaleValue&&"OPTION"===t.tagName.toUpperCase()&&this.blur()}));i.oncontextmenu=n.noContextMenuHandler;this.eventBus._on("localized",(()=>{_classPrivateFieldSet(this,s,!0);_classPrivateMethodGet(this,c,_adjustScaleWidth2).call(this);_classPrivateMethodGet(this,l,_updateUIState2).call(this,!0)}));_classPrivateMethodGet(this,o,_bindEditorToolsListener2).call(this,e)}function _bindEditorToolsListener2(e){let{editorFreeTextButton:t,editorFreeTextParamsToolbar:i,editorInkButton:n,editorInkParamsToolbar:s}=e;const editorModeChanged=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=[{mode:r.AnnotationEditorType.FREETEXT,button:t,toolbar:i},{mode:r.AnnotationEditorType.INK,button:n,toolbar:s}];for(const{mode:t,button:i,toolbar:n}of o){const r=t===e.mode;i.classList.toggle("toggled",r);i.setAttribute("aria-checked",r);i.disabled=a;null==n||n.classList.toggle("hidden",!r)}};this.eventBus._on("annotationeditormodechanged",editorModeChanged);this.eventBus._on("toolbarreset",(e=>{e.source===this&&editorModeChanged({mode:r.AnnotationEditorType.NONE},!0)}))}function _updateUIState2(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!_classPrivateFieldGet(this,s))return;const{pageNumber:t,pagesCount:i,pageScaleValue:r,pageScale:a,items:o}=this;if(e){if(this.hasPageLabels)o.pageNumber.type="text";else{o.pageNumber.type="number";this.l10n.get("of_pages",{pagesCount:i}).then((e=>{o.numPages.textContent=e}))}o.pageNumber.max=i}if(this.hasPageLabels){o.pageNumber.value=this.pageLabel;this.l10n.get("page_of_pages",{pageNumber:t,pagesCount:i}).then((e=>{o.numPages.textContent=e}))}else o.pageNumber.value=t;o.previous.disabled=t<=1;o.next.disabled=t>=i;o.zoomOut.disabled=a<=n.MIN_SCALE;o.zoomIn.disabled=a>=n.MAX_SCALE;this.l10n.get("page_scale_percent",{scale:Math.round(1e4*a)/100}).then((e=>{let t=!1;if(o.scaleSelect.options)for(const e of o.scaleSelect.options)if(e.value===r){e.selected=!0;t=!0}else e.selected=!1;if(!t){o.customScaleOption.textContent=e;o.customScaleOption.selected=!0}}));this.eventBus.dispatch("updateuistate",{source:this,widget:"Toolbar",pageNumber:t,pagesCount:i,pageScaleValue:r,pageScale:a})}async function _adjustScaleWidth2(){const{items:e,l10n:t}=this,i=Promise.all([t.get("page_scale_auto"),t.get("page_scale_actual"),t.get("page_scale_fit"),t.get("page_scale_width")]);await n.animationStarted;const r=getComputedStyle(e.scaleSelect),s=parseInt(r.getPropertyValue("--scale-select-container-width"),10),a=parseInt(r.getPropertyValue("--scale-select-overflow"),10),o=document.createElement("canvas"),l=o.getContext("2d",{alpha:!1});l.font=`${r.fontSize} ${r.fontFamily}`;let c=0;for(const e of await i)try{const{width:t}=l.measureText(e);t>c&&(c=t)}catch(e){}c+=2*a;c>s&&n.docStyle.setProperty("--scale-select-container-width",`${c}px`);o.width=0;o.height=0}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewHistory=void 0;var n=i(2);t.ViewHistory=class ViewHistory{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;this.fingerprint=e;this.cacheSize=t;this._initializedPromise=this._readFromStorage().then((e=>{const t=JSON.parse(e||"{}");let i=-1;if(Array.isArray(t.files)){for(;t.files.length>=this.cacheSize;)t.files.shift();for(let e=0,n=t.files.length;e<n;e++){if(t.files[e].fingerprint===this.fingerprint){i=e;break}}}else t.files=[];-1===i&&(i=t.files.push({fingerprint:this.fingerprint})-1);this.file=t.files[i];this.database=t}))}async _writeToStorage(){if(n.AppOptions.get("disableHistory"))return;const e=JSON.stringify(this.database);try{localStorage.setItem("pdfjs.history",e)}catch(e){}}async _readFromStorage(){if(!n.AppOptions.get("disableHistory"))try{return localStorage.getItem("pdfjs.history")}catch(e){return}}async set(e,t){await this._initializedPromise;this.file[e]=t;return this._writeToStorage()}async setMultiple(e){await this._initializedPromise;for(const t in e)this.file[t]=e[t];return this._writeToStorage()}async get(e,t){await this._initializedPromise;const i=this.file[e];return void 0!==i?i:t}async getMultiple(e){await this._initializedPromise;const t=Object.create(null);for(const i in e){const n=this.file[i];t[i]=void 0!==n?n:e[i]}return t}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericCom=void 0;var n=i(4),r=i(177),s=i(178),a=i(179),o=i(181);t.GenericCom={};class GenericPreferences extends r.BasePreferences{async _writeToStorage(e){try{localStorage.setItem("pdfjs.preferences",JSON.stringify(e))}catch(e){}}async _readFromStorage(e){try{return JSON.parse(localStorage.getItem("pdfjs.preferences"))}catch(e){return{}}}}class GenericExternalServices extends n.DefaultExternalServices{static createDownloadManager(e){return new s.DownloadManager}static createPreferences(){return new GenericPreferences}static createL10n(e){let{locale:t="en-US"}=e;return new a.GenericL10n(t)}static createScripting(e){let{sandboxBundleSrc:t}=e;return new o.GenericScripting(t)}}n.PDFViewerApplication.externalServices=GenericExternalServices},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BasePreferences=void 0;i(2);function _classPrivateFieldInitSpec(e,t,i){!function _checkPrivateRedeclaration(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t);t.set(e,i)}function _classPrivateFieldGet(e,t){return function _classApplyDescriptorGet(e,t){if(t.get)return t.get.call(e);return t.value}(e,_classExtractFieldDescriptor(e,t,"get"))}function _classPrivateFieldSet(e,t,i){!function _classApplyDescriptorSet(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_classExtractFieldDescriptor(e,t,"set"),i);return i}function _classExtractFieldDescriptor(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var n=new WeakMap,r=new WeakMap,s=new WeakMap;class BasePreferences{constructor(){_classPrivateFieldInitSpec(this,n,{writable:!0,value:Object.freeze({annotationEditorMode:-1,annotationMode:2,cursorToolOnLoad:0,defaultZoomValue:"",disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!0,enableScripting:!0,externalLinkTarget:0,historyUpdateUrl:!1,ignoreDestinationZoom:!1,forcePageColors:!1,pageColorsBackground:"Canvas",pageColorsForeground:"CanvasText",pdfBugEnabled:!1,removePageBorders:!1,sidebarViewOnLoad:-1,scrollModeOnLoad:-1,spreadModeOnLoad:-1,textLayerMode:1,useOnlyCssZoom:!1,viewerCssTheme:0,viewOnLoad:0,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,enableXfa:!0,renderer:"canvas"})});_classPrivateFieldInitSpec(this,r,{writable:!0,value:Object.create(null)});_classPrivateFieldInitSpec(this,s,{writable:!0,value:null});if(this.constructor===BasePreferences)throw new Error("Cannot initialize BasePreferences.");_classPrivateFieldSet(this,s,this._readFromStorage(_classPrivateFieldGet(this,n)).then((e=>{for(const t in _classPrivateFieldGet(this,n)){const i=null==e?void 0:e[t];typeof i==typeof _classPrivateFieldGet(this,n)[t]&&(_classPrivateFieldGet(this,r)[t]=i)}})))}async _writeToStorage(e){throw new Error("Not implemented: _writeToStorage")}async _readFromStorage(e){throw new Error("Not implemented: _readFromStorage")}async reset(){await _classPrivateFieldGet(this,s);const e=_classPrivateFieldGet(this,r);_classPrivateFieldSet(this,r,Object.create(null));return this._writeToStorage(_classPrivateFieldGet(this,n)).catch((t=>{_classPrivateFieldSet(this,r,e);throw t}))}async set(e,t){await _classPrivateFieldGet(this,s);const i=_classPrivateFieldGet(this,n)[e],a=_classPrivateFieldGet(this,r);if(void 0===i)throw new Error(`Set preference: "${e}" is undefined.`);if(void 0===t)throw new Error("Set preference: no value is specified.");const o=typeof t,l=typeof i;if(o!==l){if("number"!==o||"string"!==l)throw new Error(`Set preference: "${t}" is a ${o}, expected a ${l}.`);t=t.toString()}else if("number"===o&&!Number.isInteger(t))throw new Error(`Set preference: "${t}" must be an integer.`);_classPrivateFieldGet(this,r)[e]=t;return this._writeToStorage(_classPrivateFieldGet(this,r)).catch((e=>{_classPrivateFieldSet(this,r,a);throw e}))}async get(e){var t;await _classPrivateFieldGet(this,s);const i=_classPrivateFieldGet(this,n)[e];if(void 0===i)throw new Error(`Get preference: "${e}" is undefined.`);return null!==(t=_classPrivateFieldGet(this,r)[e])&&void 0!==t?t:i}async getAll(){await _classPrivateFieldGet(this,s);const e=Object.create(null);for(const i in _classPrivateFieldGet(this,n)){var t;e[i]=null!==(t=_classPrivateFieldGet(this,r)[i])&&void 0!==t?t:_classPrivateFieldGet(this,n)[i]}return e}}t.BasePreferences=BasePreferences},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DownloadManager=void 0;var n=i(5);function download(e,t){const i=document.createElement("a");if(!i.click)throw new Error('DownloadManager: "a.click()" is not supported.');i.href=e;i.target="_parent";"download"in i&&(i.download=t);(document.body||document.documentElement).append(i);i.click();i.remove()}t.DownloadManager=class DownloadManager{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(e,t){(0,n.createValidAbsoluteUrl)(e,"http://example.com")?download(e+"#pdfjs.action=download",t):Window.ngxConsole.error(`downloadUrl - not a valid URL: ${e}`)}downloadData(e,t,i){download(URL.createObjectURL(new Blob([e],{type:i})),t)}openOrDownloadData(e,t,i){const r=(0,n.isPdfFile)(i),s=r?"application/pdf":"";if(r){let n,r=this._openBlobUrls.get(e);if(!r){r=URL.createObjectURL(new Blob([t],{type:s}));this._openBlobUrls.set(e,r)}n="?file="+encodeURIComponent(r+"#"+i);try{window.open(n);return!0}catch(t){Window.ngxConsole.error(`openOrDownloadData: ${t}`);URL.revokeObjectURL(r);this._openBlobUrls.delete(e)}}this.downloadData(t,i,s);return!1}download(e,t,i){download(URL.createObjectURL(e),i)}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericL10n=void 0;i(180);var n=i(34);const r=document.webL10n;t.GenericL10n=class GenericL10n{constructor(e){this._lang=e;this._ready=new Promise(((t,i)=>{r.setLanguage((0,n.fixupLangCode)(e),(()=>{t(r)}))}))}async getLanguage(){return(await this._ready).getLanguage()}async getDirection(){return(await this._ready).getDirection()}async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,n.getL10nFallback)(e,t);return(await this._ready).get(e,t,i)}async translate(e){return(await this._ready).translate(e)}}},()=>{"use strict";document.webL10n=function(e,t,i){var n={},r="",s="textContent",a="",o={},l="loading";function fireL10nReadyEvent(e){var i=t.createEvent("Event");i.initEvent("localized",!0,!1);i.language=e;t.dispatchEvent(i)}function xhrLoadText(e,t,i){t=t||function _onSuccess(e){};i=i||function _onFailure(){};var n=new XMLHttpRequest;n.open("GET",e,true);n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8");n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0===n.status?t(n.responseText):i())};n.onerror=i;n.ontimeout=i;try{n.send(null)}catch(e){i()}}function parseResource(t,i,a,o){var l=t.replace(/[^\/]*$/,"")||"./";function evalString(e){return e.lastIndexOf("\\")<0?e:e.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}xhrLoadText(t,(function(t){r+=t;!function parseProperties(t,n){var r={},s=/^\s*|\s*$/,a=/^\s*#|^\s*$/,o=/^\s*\[(.*)\]\s*$/,c=/^\s*@import\s+url\((.*)\)\s*$/i,d=/^([^=\s]*)\s*=\s*(.+)$/;function parseRawLines(e,t,n){var h=e.replace(s,"").split(/[\r\n]+/),u="*",p=i.split("-",1)[0],g=!1,f="",m=!1;!function nextEntry(){for(var e=void 0;;){if(!h.length&&e){m?nextEntry():loadImport(e,nextEntry);return}if(!h.length){n();return}var s=h.shift();if(!a.test(s)){if(t){if(f=o.exec(s)){u=f[1].toLowerCase();g="*"!==u&&u!==i&&u!==p;continue}if(g)continue;if(f=c.exec(s)){if("*"===u||u===i){loadImport(l+f[1],nextEntry);m=!0;return}e=l+f[1]}}var v=s.match(d);v&&3==v.length&&(r[v[1]]=evalString(v[2]))}}}()}function loadImport(t,i){xhrLoadText(t,(function(e){parseRawLines(e,!1,i)}),(function(){const n=e.PDFViewerApplicationOptions;(!n||n.get("verbosity")>0)&&Window.ngxConsole.warn(t+" not found.");i()}))}parseRawLines(t,!0,(function(){n(r)}))}(t,(function(e){for(var t in e){var i,r,o=t.lastIndexOf(".");if(o>0){i=t.substring(0,o);r=t.substring(o+1)}else{i=t;r=s}n[i]||(n[i]={});n[i][r]=e[t]}a&&a()}))}),o)}function loadLocale(i,s){let o=i;i&&(i=i.toLowerCase());s=s||function _callback(){};!function clear(){n={};r="";a=""}();a=i;var c=function getL10nResourceLinks(){return t.querySelectorAll('link[type="application/l10n"]')}(),d=c.length;if(0!==d){var h,u=0;h=function(){if(++u>=d){s();fireL10nReadyEvent(i);l="complete"}};for(var p=0;p<d;p++){new L10nResourceLink(c[p]).load(i,h)}}else{var g=function getL10nDictionary(){var e=t.querySelector('script[type="application/l10n"]');return e?JSON.parse(e.innerHTML):null}();if(g&&g.locales&&g.default_locale){Window.ngxConsole.log("The PDF viewer uses the pre-compiled language bundle stored in the HTML page.");if(!(n=g.locales[o])){var f=g.default_locale.toLowerCase();for(var m in g.locales){o=m;if((m=m.toLowerCase())===i){n=g.locales[o];break}m===f&&(n=g.locales[o])}}s()}else Window.ngxConsole.log("Could not load the translation files for the PDF viewer. Check the flag useBrowserLocale, check the locales subfolder of the assets folder, or add the locale definition to the index.html");fireL10nReadyEvent(i);l="complete"}function L10nResourceLink(t){var i=t.href;this.load=function(t,n){parseResource(i,t,n,(function(){const r=e.PDFViewerApplicationOptions;if(!r||r.get("verbosity")>0){Window.ngxConsole.warn(i+" not found.");Window.ngxConsole.warn('"'+t+'" resource not found')}a="";n()}))}}}o.plural=function(t,i,r,l){var c=parseFloat(i);if(isNaN(c))return t;if(l!=s)return t;o._pluralRules||(o._pluralRules=function getPluralRules(t){function isIn(e,t){return-1!==t.indexOf(e)}function isBetween(e,t,i){return t<=e&&e<=i}var i={0:function(e){return"other"},1:function(e){return isBetween(e%100,3,10)?"few":0===e?"zero":isBetween(e%100,11,99)?"many":2==e?"two":1==e?"one":"other"},2:function(e){return 0!==e&&e%10==0?"many":2==e?"two":1==e?"one":"other"},3:function(e){return 1==e?"one":"other"},4:function(e){return isBetween(e,0,1)?"one":"other"},5:function(e){return isBetween(e,0,2)&&2!=e?"one":"other"},6:function(e){return 0===e?"zero":e%10==1&&e%100!=11?"one":"other"},7:function(e){return 2==e?"two":1==e?"one":"other"},8:function(e){return isBetween(e,3,6)?"few":isBetween(e,7,10)?"many":2==e?"two":1==e?"one":"other"},9:function(e){return 0===e||1!=e&&isBetween(e%100,1,19)?"few":1==e?"one":"other"},10:function(e){return isBetween(e%10,2,9)&&!isBetween(e%100,11,19)?"few":e%10!=1||isBetween(e%100,11,19)?"other":"one"},11:function(e){return isBetween(e%10,2,4)&&!isBetween(e%100,12,14)?"few":e%10==0||isBetween(e%10,5,9)||isBetween(e%100,11,14)?"many":e%10==1&&e%100!=11?"one":"other"},12:function(e){return isBetween(e,2,4)?"few":1==e?"one":"other"},13:function(e){return isBetween(e%10,2,4)&&!isBetween(e%100,12,14)?"few":1!=e&&isBetween(e%10,0,1)||isBetween(e%10,5,9)||isBetween(e%100,12,14)?"many":1==e?"one":"other"},14:function(e){return isBetween(e%100,3,4)?"few":e%100==2?"two":e%100==1?"one":"other"},15:function(e){return 0===e||isBetween(e%100,2,10)?"few":isBetween(e%100,11,19)?"many":1==e?"one":"other"},16:function(e){return e%10==1&&11!=e?"one":"other"},17:function(e){return 3==e?"few":0===e?"zero":6==e?"many":2==e?"two":1==e?"one":"other"},18:function(e){return 0===e?"zero":isBetween(e,0,2)&&0!==e&&2!=e?"one":"other"},19:function(e){return isBetween(e,2,10)?"few":isBetween(e,0,1)?"one":"other"},20:function(e){return!isBetween(e%10,3,4)&&e%10!=9||isBetween(e%100,10,19)||isBetween(e%100,70,79)||isBetween(e%100,90,99)?e%1e6==0&&0!==e?"many":e%10!=2||isIn(e%100,[12,72,92])?e%10!=1||isIn(e%100,[11,71,91])?"other":"one":"two":"few"},21:function(e){return 0===e?"zero":1==e?"one":"other"},22:function(e){return isBetween(e,0,1)||isBetween(e,11,99)?"one":"other"},23:function(e){return isBetween(e%10,1,2)||e%20==0?"one":"other"},24:function(e){return isBetween(e,3,10)||isBetween(e,13,19)?"few":isIn(e,[2,12])?"two":isIn(e,[1,11])?"one":"other"}},n={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[t.replace(/-.*$/,"")];if(!(n in i)){const i=e.PDFViewerApplicationOptions;(!i||i.get("verbosity")>0)&&Window.ngxConsole.warn("plural form unknown for ["+t+"]");return function(){return"other"}}return i[n]}(a));var d="["+o._pluralRules(c)+"]";0===c&&r+"[zero]"in n?t=n[r+"[zero]"][l]:1==c&&r+"[one]"in n?t=n[r+"[one]"][l]:2==c&&r+"[two]"in n?t=n[r+"[two]"][l]:r+d in n?t=n[r+d][l]:r+"[other]"in n&&(t=n[r+"[other]"][l]);return t};function getL10nData(t,i,r){var s=n[t];if(!s){const i=e.PDFViewerApplicationOptions;(!i||i.get("verbosity")>0)&&Window.ngxConsole.warn("Translation for the key #"+t+" is missing.");if(!r)return null;s=r}var a={};for(var o in s){var l=s[o];l=substArguments(l=substIndexes(l,i,t,o),i,t);a[o]=l}return a}function substIndexes(e,t,i,r){var s=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(e);if(!s||!s.length)return e;var a,l=s[1],c=s[2];t&&c in t?a=t[c]:c in n&&(a=n[c]);if(l in o){e=(0,o[l])(e,a,i,r)}return e}function substArguments(e,t,i){return e.replace(/\{\{\s*(.+?)\s*\}\}/g,(function(e,r){if(t&&r in t)return t[r];if(r in n)return n[r];Window.ngxConsole.log("argument {{"+r+"}} for #"+i+" is undefined.");return e}))}function translateElement(i){var n=function getL10nAttributes(t){if(!t)return{};var i=t.getAttribute("data-l10n-id"),n=t.getAttribute("data-l10n-args"),r={};if(n)try{r=JSON.parse(n)}catch(t){const n=e.PDFViewerApplicationOptions;(!n||n.get("verbosity")>0)&&Window.ngxConsole.warn("could not parse arguments for #"+i)}return{id:i,args:r}}(i);if(n.id){var r=getL10nData(n.id,n.args);if(r){if(r[s]){if(0===function getChildElementCount(e){if(e.children)return e.children.length;if(void 0!==e.childElementCount)return e.childElementCount;for(var t=0,i=0;i<e.childNodes.length;i++)t+=1===e.nodeType?1:0;return t}(i))i[s]=r[s];else{for(var a=i.childNodes,o=!1,l=0,c=a.length;l<c;l++)if(3===a[l].nodeType&&/\S/.test(a[l].nodeValue))if(o)a[l].nodeValue="";else{a[l].nodeValue=r[s];o=!0}if(!o){var d=t.createTextNode(r[s]);i.prepend(d)}}delete r[s]}for(var h in r)i[h]=r[h]}else{const t=e.PDFViewerApplicationOptions;(!t||t.get("verbosity")>0)&&Window.ngxConsole.warn("#"+n.id+" is undefined.")}}}return{get:function(e,t,i){var n,r=e.lastIndexOf("."),a=s;if(r>0){a=e.substring(r+1);e=e.substring(0,r)}i&&((n={})[a]=i);var o=getL10nData(e,t,n);return o&&a in o?o[a]:"{{"+e+"}}"},getData:function(){return n},getText:function(){return r},getLanguage:function(){return a},setLanguage:function(e,t){loadLocale(e,(function(){t&&t()}))},getDirection:function(){var e=a.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function translateFragment(e){for(var i=function getTranslatableChildren(e){return e?e.querySelectorAll("*[data-l10n-id]"):[]}(e=e||t.documentElement),n=i.length,r=0;r<n;r++)translateElement(i[r]);translateElement(e)},getReadyState:function(){return l},ready:function(i){i&&("complete"==l||"interactive"==l?e.setTimeout((function(){i()})):t.addEventListener&&t.addEventListener("localized",(function once(){t.removeEventListener("localized",once);i()})))}}}(window,document)},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GenericScripting=void 0;t.docPropertiesLookup=async function docPropertiesLookup(e){const t="".split("#")[0];let{info:i,metadata:r,contentDispositionFilename:s,contentLength:a}=await e.getMetadata();if(!a){const{length:t}=await e.getDownloadInfo();a=t}return{...i,baseURL:t,filesize:a,filename:s||(0,n.getPdfFilenameFromUrl)(""),metadata:null==r?void 0:r.getRaw(),authors:null==r?void 0:r.get("dc:creator"),numPages:e.numPages,URL:""}};var n=i(5);t.GenericScripting=class GenericScripting{constructor(e){this._ready=(0,n.loadScript)(e,!0).then((()=>window.pdfjsSandbox.QuickJSSandbox()))}async createSandbox(e){(await this._ready).create(e)}async dispatchEventInSandbox(e){const t=await this._ready;setTimeout((()=>t.dispatchEvent(e)),0)}async destroySandbox(){(await this._ready).nukeSandbox()}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PDFPrintService=PDFPrintService;var n=i(5),r=i(4),s=function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}(i(39)),a=i(183),o=i(40);let l=null,c=null,d=null;function renderPage(e,t,i,r,a,c,d){const h=l.scratchCanvas;let u=a/n.PixelsPerInch.PDF,p=1;const g=Math.floor(r.width*u),f=Math.floor(r.height*u);if(g>=4096||f>=4096){if(!s.default.test({width:g,height:f})){const e=function determineMaxDimensions(){const e=[4096,8192,10836,11180,11402,14188,16384];for(let t of e)if(!s.default.test({width:t+1,height:t+1}))return t;return 16384}();p=.95*Math.min(e/g,e/f)}(0,o.warn)("Page "+i+": Reduced the [printResolution] to "+Math.floor(a*p)+" because the browser can't render larger canvases. If you see blank page in the print preview, reduce [printResolution] manually to a lower value.")}u*=p;h.width=Math.floor(r.width*u);h.height=Math.floor(r.height*u);const m=h.getContext("2d");m.save();m.fillStyle="rgb(255, 255, 255)";m.fillRect(0,0,h.width,h.height);m.restore();return Promise.all([t.getPage(i),d]).then((function(e){let[t,i]=e;const s={canvasContext:m,transform:[u,0,0,u,0,0],viewport:t.getViewport({scale:1,rotation:r.rotation}),intent:"print",annotationMode:n.AnnotationMode.ENABLE_STORAGE,optionalContentConfigPromise:c,background:PDFViewerApplicationOptions.get("pdfBackgroundColor"),printAnnotationStorage:i};return t.render(s).promise}))}function PDFPrintService(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6?arguments[6]:void 0,o=arguments.length>7?arguments[7]:void 0;this.pdfDocument=e;this.pagesOverview=t;this.printContainer=i;this._printResolution=n||150;this._optionalContentConfigPromise=r||e.getOptionalContentConfig();this._printAnnotationStoragePromise=s||Promise.resolve();this.l10n=a;this.currentPage=-1;this.scratchCanvas=document.createElement("canvas");this.eventBus=o}PDFPrintService.prototype={layout(){this.throwIfInactive();const e=document.querySelector("body");e.setAttribute("data-pdfjsprinting",!0);document.querySelector("html").setAttribute("data-pdfjsprinting",!0);this.pagesOverview.every((function(e){return e.width===this.pagesOverview[0].width&&e.height===this.pagesOverview[0].height}),this)||Window.ngxConsole.warn("Not all pages have the same size. The printed result may be incorrect!");this.pageStyleSheet=document.createElement("style");const t=this.pagesOverview[0];this.pageStyleSheet.textContent="@page { size: "+t.width+"pt "+t.height+"pt;}";e.append(this.pageStyleSheet)},destroy(){if(l!==this)return;this.printContainer.textContent="";document.querySelector("body").removeAttribute("data-pdfjsprinting");document.querySelector("html").removeAttribute("data-pdfjsprinting");if(this.pageStyleSheet){this.pageStyleSheet.remove();this.pageStyleSheet=null}this.scratchCanvas.width=this.scratchCanvas.height=0;this.scratchCanvas=null;l=null;ensureOverlay().then((function(){if(d.active===c){d.close(c);d.unregister(c)}}));u=void 0},renderPages(){if(this.pdfDocument.isPureXfa){(0,a.getXfaHtmlForPrinting)(this.printContainer,this.pdfDocument);return Promise.resolve()}const e=this.pagesOverview.length,renderNextPage=(t,i)=>{this.throwIfInactive();for(;;){++this.currentPage;if(this.currentPage>=e)break;if(!window.isInPDFPrintRange||window.isInPDFPrintRange(this.currentPage))break}if(this.currentPage>=e){renderProgress(window.filteredPageCount|e,window.filteredPageCount|e,this.l10n,this.eventBus);t();return}const n=this.currentPage;renderProgress(n,window.filteredPageCount|e,this.l10n,this.eventBus);renderPage(0,this.pdfDocument,n+1,this.pagesOverview[n],this._printResolution,this._optionalContentConfigPromise,this._printAnnotationStoragePromise).then(this.useRenderedPage.bind(this)).then((function(){renderNextPage(t,i)}),i)};return new Promise(renderNextPage)},useRenderedPage(){this.throwIfInactive();const e=document.createElement("img"),t=this.scratchCanvas;"toBlob"in t?t.toBlob((function(t){e.src=URL.createObjectURL(t)})):e.src=t.toDataURL();const i=document.createElement("div");i.className="printedPage";i.append(e);this.printContainer.append(i);return new Promise((function(t,i){e.onload=t;e.onerror=i}))},performPrint(){this.throwIfInactive();return new Promise((e=>{setTimeout((()=>{if(!this.active){e();return}h.call(window);const t=navigator.platform&&["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;setTimeout(e,t?1500:20)}),0)}))},get active(){return this===l},throwIfInactive(){if(!this.active)throw new Error("This print request was cancelled or completed.")}};const h=window.print;window.printPDF=function(){if(r.PDFViewerApplication.enablePrint)if(l)Window.ngxConsole.warn("Ignored window.printPDF() because of a pending print job.");else{ensureOverlay().then((function(){l&&d.open(c)}));try{dispatchEvent("beforeprint")}finally{if(!l){Window.ngxConsole.error("Expected print service to be initialized.");ensureOverlay().then((function(){d.active===c&&d.close(c)}));return}const e=l;l.renderPages().then((function(){const t=document.getElementById("printServiceDialog");t&&t.classList.add("hidden");return e.performPrint()})).catch((function(){})).then((function(){e.active&&abort()}))}}};function dispatchEvent(e){const t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,"custom");window.dispatchEvent(t)}function abort(){if(l){l.destroy();dispatchEvent("afterprint")}}function renderProgress(e,t,i,n){c=document.getElementById("printServiceDialog");const r=Math.round(100*e/t),s=c.querySelector("progress"),a=c.querySelector(".relative-progress");s.value=r;i.get("print_progress_percent",{progress:r}).then((e=>{a.textContent=e}));n.dispatch("progress",{source:this,type:"print",total:t,page:e,percent:100*e/t})}window.addEventListener("keydown",(function(e){if(80===e.keyCode&&(e.ctrlKey||e.metaKey)&&!e.altKey&&(!e.shiftKey||window.chrome||window.opera)){window.print();e.preventDefault();e.stopImmediatePropagation?e.stopImmediatePropagation():e.stopPropagation()}}),!0);if("onbeforeprint"in window){const stopPropagationIfNeeded=function(e){"custom"!==e.detail&&e.stopImmediatePropagation&&e.stopImmediatePropagation()};window.addEventListener("beforeprint",stopPropagationIfNeeded);window.addEventListener("afterprint",stopPropagationIfNeeded)}let u;function ensureOverlay(){if(!u){d=r.PDFViewerApplication.overlayManager;if(!d)throw new Error("The overlay manager has not yet been initialized.");c=document.getElementById("printServiceDialog");u=d.register(c,!0);document.getElementById("printCancel").onclick=abort;c.addEventListener("close",abort)}return u}r.PDFPrintServiceFactory.instance={supportsPrinting:!0,createPrintService(e,t,i,n,r,s,a,o){if(l)throw new Error("The print service is created and active.");l=new PDFPrintService(e,t,i,n,r,s,a,o);return l}}},(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getXfaHtmlForPrinting=function getXfaHtmlForPrinting(e,t){const i=t.allXfaHtml,a=new r.SimpleLinkService,o=Math.round(100*n.PixelsPerInch.PDF_TO_CSS_UNITS)/100;for(const r of i.children){const i=document.createElement("div");i.className="xfaPrintedPage";e.append(i);const l=new s.XfaLayerBuilder({pageDiv:i,pdfPage:null,annotationStorage:t.annotationStorage,linkService:a,xfaHtml:r}),c=(0,n.getXfaPageViewport)(r,{scale:o});l.render(c,"print")}};var n=i(5),r=i(3),s=i(172)}],t={};function __webpack_require__(i){var n=t[i];if(void 0!==n)return n.exports;var r=t[i]={exports:{}};e[i](r,r.exports,__webpack_require__);return r.exports}var i={};(()=>{"use strict";var e=i;Object.defineProperty(e,"__esModule",{value:!0});Object.defineProperty(e,"PDFViewerApplication",{enumerable:!0,get:function(){return o.PDFViewerApplication}});e.PDFViewerApplicationConstants=void 0;Object.defineProperty(e,"PDFViewerApplicationOptions",{enumerable:!0,get:function(){return s.AppOptions}});var t,n,r=__webpack_require__(1),s=__webpack_require__(2),a=__webpack_require__(3),o=__webpack_require__(4);const l={LinkTarget:a.LinkTarget,RenderingStates:r.RenderingStates,ScrollMode:r.ScrollMode,SpreadMode:r.SpreadMode};e.PDFViewerApplicationConstants=l;window.PDFViewerApplication=o.PDFViewerApplication;window.PDFViewerApplicationConstants=l;window.PDFViewerApplicationOptions=s.AppOptions;HTMLCollection.prototype[Symbol.iterator]||(HTMLCollection.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator]);"function"!=typeof window.CustomEvent&&(window.CustomEvent=function CustomEvent(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};const i=document.createEvent("CustomEvent");i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail);return i});__webpack_require__(176);__webpack_require__(182);null===(t=(n=document).blockUnblockOnload)||void 0===t||t.call(n,!0);window.webViewerLoad=function webViewerLoad(){const e=function getViewerConfiguration(){let e=null;e={container:document.getElementById("errorWrapper"),errorMessage:document.getElementById("errorMessage"),closeButton:document.getElementById("errorClose"),errorMoreInfo:document.getElementById("errorMoreInfo"),moreInfoButton:document.getElementById("errorShowMore"),lessInfoButton:document.getElementById("errorShowLess")};return{appContainer:document.body,mainContainer:document.getElementById("viewerContainer"),viewerContainer:document.getElementById("viewer"),toolbar:{container:document.getElementById("toolbarViewer"),numPages:document.getElementById("numPages"),pageNumber:document.getElementById("pageNumber"),scaleSelect:document.getElementById("scaleSelect"),customScaleOption:document.getElementById("customScaleOption"),previous:document.getElementById("previous"),next:document.getElementById("next"),zoomIn:document.getElementById("zoomIn"),zoomOut:document.getElementById("zoomOut"),viewFind:document.getElementById("viewFind"),openFile:document.getElementById("openFile"),print:document.getElementById("print"),editorFreeTextButton:document.getElementById("editorFreeText"),editorFreeTextParamsToolbar:document.getElementById("editorFreeTextParamsToolbar"),editorInkButton:document.getElementById("editorInk"),editorInkParamsToolbar:document.getElementById("editorInkParamsToolbar"),presentationModeButton:document.getElementById("presentationMode"),download:document.getElementById("download"),viewBookmark:document.getElementById("viewBookmark")},secondaryToolbar:{toolbar:document.getElementById("secondaryToolbar"),toggleButton:document.getElementById("secondaryToolbarToggle"),presentationModeButton:document.getElementById("secondaryPresentationMode"),openFileButton:document.getElementById("secondaryOpenFile"),printButton:document.getElementById("secondaryPrint"),downloadButton:document.getElementById("secondaryDownload"),viewBookmarkButton:document.getElementById("secondaryViewBookmark"),firstPageButton:document.getElementById("firstPage"),lastPageButton:document.getElementById("lastPage"),pageRotateCwButton:document.getElementById("pageRotateCw"),pageRotateCcwButton:document.getElementById("pageRotateCcw"),cursorSelectToolButton:document.getElementById("cursorSelectTool"),cursorHandToolButton:document.getElementById("cursorHandTool"),scrollPageButton:document.getElementById("scrollPage"),scrollVerticalButton:document.getElementById("scrollVertical"),scrollHorizontalButton:document.getElementById("scrollHorizontal"),scrollWrappedButton:document.getElementById("scrollWrapped"),spreadNoneButton:document.getElementById("spreadNone"),spreadOddButton:document.getElementById("spreadOdd"),spreadEvenButton:document.getElementById("spreadEven"),documentPropertiesButton:document.getElementById("documentProperties")},sidebar:{outerContainer:document.getElementById("outerContainer"),sidebarContainer:document.getElementById("sidebarContainer"),toggleButton:document.getElementById("sidebarToggle"),thumbnailButton:document.getElementById("viewThumbnail"),outlineButton:document.getElementById("viewOutline"),attachmentsButton:document.getElementById("viewAttachments"),layersButton:document.getElementById("viewLayers"),thumbnailView:document.getElementById("thumbnailView"),outlineView:document.getElementById("outlineView"),attachmentsView:document.getElementById("attachmentsView"),layersView:document.getElementById("layersView"),outlineOptionsContainer:document.getElementById("outlineOptionsContainer"),currentOutlineItemButton:document.getElementById("currentOutlineItem")},sidebarResizer:{outerContainer:document.getElementById("outerContainer"),resizer:document.getElementById("sidebarResizer")},findBar:{bar:document.getElementById("findbar"),toggleButton:document.getElementById("viewFind"),findField:document.getElementById("findInput"),findFieldMultiline:document.getElementById("findInputMultiline"),highlightAllCheckbox:document.getElementById("findHighlightAll"),findCurrentPageCheckbox:document.getElementById("findCurrentPage"),findPageRangeField:document.getElementById("findRange"),caseSensitiveCheckbox:document.getElementById("findMatchCase"),matchDiacriticsCheckbox:document.getElementById("findMatchDiacritics"),entireWordCheckbox:document.getElementById("findEntireWord"),findMultipleSearchTextsCheckbox:document.getElementById("findMultipleSearchTexts"),ignoreAccentsCheckbox:document.getElementById("findIgnoreAccents"),fuzzyCheckbox:document.getElementById("findFuzzy"),findMsg:document.getElementById("findMsg"),findResultsCount:document.getElementById("findResultsCount"),findPreviousButton:document.getElementById("findPrevious"),findNextButton:document.getElementById("findNext")},passwordOverlay:{dialog:document.getElementById("passwordDialog"),label:document.getElementById("passwordText"),input:document.getElementById("password"),submitButton:document.getElementById("passwordSubmit"),cancelButton:document.getElementById("passwordCancel")},documentProperties:{dialog:document.getElementById("documentPropertiesDialog"),closeButton:document.getElementById("documentPropertiesClose"),fields:{fileName:document.getElementById("fileNameField"),fileSize:document.getElementById("fileSizeField"),title:document.getElementById("titleField"),author:document.getElementById("authorField"),subject:document.getElementById("subjectField"),keywords:document.getElementById("keywordsField"),creationDate:document.getElementById("creationDateField"),modificationDate:document.getElementById("modificationDateField"),creator:document.getElementById("creatorField"),producer:document.getElementById("producerField"),version:document.getElementById("versionField"),pageCount:document.getElementById("pageCountField"),pageSize:document.getElementById("pageSizeField"),linearized:document.getElementById("linearizedField")}},annotationEditorParams:{editorFreeTextFontSize:document.getElementById("editorFreeTextFontSize"),editorFreeTextColor:document.getElementById("editorFreeTextColor"),editorInkColor:document.getElementById("editorInkColor"),editorInkThickness:document.getElementById("editorInkThickness"),editorInkOpacity:document.getElementById("editorInkOpacity")},errorWrapper:e,printContainer:document.getElementById("printContainer"),openFileInput:document.getElementById("fileInput"),debuggerScriptPath:"./debugger.js"}}(),t=document.createEvent("CustomEvent");t.initCustomEvent("webviewerloaded",!0,!0,{source:window});try{parent.document.eventListeners&&parent.document.eventListeners("webviewerloaded").length?parent.document.dispatchEvent(t):document.dispatchEvent(t)}catch(e){Window.ngxConsole.error(`webviewerloaded: ${e}`);document.dispatchEvent(t)}o.PDFViewerApplication.run(e)}})()})();
});
