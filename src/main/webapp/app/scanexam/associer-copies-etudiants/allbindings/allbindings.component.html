<p-table [value]="students" [tableStyle]="{ 'min-width': '60rem' }">
  <ng-template pTemplate="header">
    <tr>
      @if (showName) {
        <th [style]="columnstyle"><span [translate]="'scanexam.nom'">Name</span></th>
      }
      @if (showFirstname) {
        <th [style]="columnstyle"><span [translate]="'scanexam.prenom'">FirsName</span></th>
      }
      @if (showIne) {
        <th [style]="columnstyle">INE</th>
      }
      @if (showNbName) {
        <th [style]="columnstyle"><span [translate]="'scanexam.nom'">Name</span></th>
      }
      <th pSortableColumn="recognizedStudentShow" style="width: 18%">
        <span [translate]="'scanexam.recognizedstudent'">Recognized Student</span> <p-sortIcon field="student"></p-sortIcon>
      </th>
      <th pSortableColumn="predictionprecision" style="width: 4%">
        <span [translate]="'scanexam.score'">Probability</span> <p-sortIcon field="probability"></p-sortIcon>
      </th>
      <th style="width: 3%"></th>
      <th style="width: 3%"></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-sheet>
    <tr>
      @if (sheet?.nameImageImg) {
        <td><img style="max-width: 100%" [src]="sheet?.nameImageImg" /></td>
      }
      @if (showName && sheet.nameImageImg === undefined) {
        <td></td>
      }
      @if (sheet?.firstnameImageImg) {
        <td><img style="max-width: 100%" [src]="sheet?.firstnameImageImg" /></td>
      }
      @if (showFirstname && sheet.firstnameImageImg === undefined) {
        <td></td>
      }
      @if (sheet?.ineImageImg) {
        <td><img style="max-width: 100%" [src]="sheet?.ineImageImg" /></td>
      }
      @if (showIne && sheet.ineImageImg === undefined) {
        <td></td>
      }
      @if (sheet?.nbName) {
        <td>{{ sheet.nbName }}</td>
      }
      @if (showNbName && sheet.nbName === undefined) {
        <td></td>
      }
      <td>
        <span style="float: left" [ngClass]="selectedColor(sheet)">{{ sheet.recognizedStudentShow }}</span>
      </td>
      <td>{{ sheet.predictionprecision | number: '1.0-0' }}</td>
      <td>
        @if (sheet.predictionprecision >= 1) {
          <button
            [disabled]="nobutton"
            [pTooltip]="'scanexam.bindTooltip' | translate"
            class="p-button p-button-primary"
            (click)="bindStudent(sheet.recognizedStudent, sheet.currentStudent, sheet)"
          >
            <span [translate]="'scanexam.bind'">bind</span>
          </button>
        }
      </td>
      <td>
        @if (
          (exam.templateNameBoxCase === undefined && sheet.predictionprecision >= 500) ||
          (exam.templateNameBoxCase && sheet.predictionprecision >= 500) ||
          (!exam.templateNameBoxCase && sheet.predictionprecision >= 20) ||
          (exam.nbgrader !== undefined && exam.nbgrader === true && sheet.predictionprecision >= 20)
        ) {
          <button
            [disabled]="nobutton"
            [pTooltip]="'scanexam.bindAllTooltip' | translate"
            class="p-button p-button-primary"
            (click)="bindAllStudent(sheet)"
          >
            <span
              ><svg xmlns="http://www.w3.org/2000/svg" height="16" width="14" viewBox="0 0 448 512">
                <path
                  d="M342.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 178.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l80 80c12.5 12.5 32.8 12.5 45.3 0l160-160zm96 128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L160 402.7 54.6 297.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l256-256z"
                /></svg
            ></span>
          </button>
        }
      </td>
    </tr>
  </ng-template>
</p-table>
